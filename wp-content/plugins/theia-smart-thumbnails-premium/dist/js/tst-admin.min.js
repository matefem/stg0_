var tst=tst||{};tst.togglePreview=function(e){var i=jQuery(".theiaSmartThumbnails_mediaUpload ._preview");"Show Preview"==(e=jQuery(e)).val()?(e.val("Hide Preview"),i.show(),wpCookies&&wpCookies.set("theiaSmartThumbnails_showPreview","true")):(e.val("Show Preview"),i.hide(),wpCookies&&wpCookies.set("theiaSmartThumbnails_showPreview","false"))},tst.createPickerDelayed=function(e){var i;0<jQuery(e.input).size()?tst.createPickerDelayedHelper(e):setTimeout((i=e,function(){tst.createPickerDelayed(i)}),50)},tst.createPickerDelayedHelper=function(e){jQuery(".compat-field-theiaSmartThumbnails_position").hide(),tst.createPicker(e)},tst.createPicker=function(e){var r=this,a=jQuery;r.options=a.extend({image:"",input:"",preview:"",sizes:[],position:{x:.5,y:.5},gutenberg:!1},e),r.init=function(){var o,e;r.mouseIsDown=!1,r.isLoading=!1,r.position=r.options.position,r.input=a(r.options.input),r.imageContainer=a(r.options.image),r.image=r.imageContainer.children("img"),r.imageOverlay=a('<div class="_overlay">'),r.crosshair=a('<div class="_crosshair tst-icon-target2">'),r.preview=a(r.options.preview),r.imageContainer.append(r.crosshair,r.imageOverlay),r.imageObject=document.createElement("img"),r.imageObject.onload=(o=r,function(){var e,i,t=o.imageContainer.width()-4;for(e in o.options.sizes)(i=o.options.sizes[e]).width=parseInt(i.width),i.height=parseInt(i.height),i.width>i.height?i.width>t&&(i.height=i.height/i.width*t,i.width=t):i.height>t&&(i.width=i.width/i.height*t,i.height=t),o.options.sizes[e]=i;for(e in o.options.sizes)(i=o.options.sizes[e]).image=a('<img src="'+o.image.attr("src")+'">'),i.imageContainer=a('<div class="_imageContainer">').css({width:i.width,height:i.height}).append(i.image),i.caption=a('<div class="_caption">'+e+"</div>"),i.div=a("<div>").append(i.imageContainer,i.caption),o.preview.append(i.div);o.refreshPreview(),o.crosshair.css("display","block"),tst.previewButtonStatus&&jQuery(".theiaSmartThumbnails_mediaUpload ._previewButton").val(tst.previewButtonStatus).click().click(),tst.scrollTop&&(o.input.closest(".attachment-info").scrollTop(tst.scrollTop),tst.scrollTop=null)}),r.imageObject.src=r.image.attr("src"),a(document).on("mousemove.theiaSmartThumbnails",function(e){r.mouseIsDown&&r.mousedown(e)}).on("mouseup.theiaSmartThumbnails",function(){if(r.mouseIsDown){if(r.mouseIsDown=!1,0===jQuery(".version-3-4").size()&&1===r.input.closest(".media-modal").size()){if("readonly"==jQuery('label.setting[data-setting="title"] input').attr("readonly"))return;r.isLoading=!0,tst.scrollTop=r.input.closest(".attachment-info").scrollTop(),tst.previewButtonStatus=jQuery(".theiaSmartThumbnails_mediaUpload ._previewButton").val(),r.imageOverlay.addClass("_loader"),r.input.change()}r.options.gutenberg&&(r.isLoading=!0,r.imageOverlay.addClass("_loader"),r.input.change())}}),r.imageOverlay.on("mousedown.theiaSmartThumbnails",function(e){r.isLoading||(r.mouseIsDown=!0,r.mousedown(e))}).on("mousemove.theiaSmartThumbnails",function(e){r.mouseIsDown&&r.mousedown(e)}),r.options.gutenberg||a(document).ajaxComplete((e=r,function(){e.isLoading=!1,e.imageOverlay.removeClass("_loader")}))},r.mousedown=function(e){e.preventDefault();var i=r.image.offset(),t=e.pageX-i.left,o=e.pageY-i.top;r.setPosition(t,o)},r.setPosition=function(e,i){r.position.x=Math.max(0,Math.min(1,e/r.image.width())),r.position.y=Math.max(0,Math.min(1,i/r.image.height())),1==r.input.length?r.input.val("["+r.position.x+","+r.position.y+"]"):2==r.input.length&&(a(r.input[0]).val(r.position.x),a(r.input[1]).val(r.position.y)),r.refreshPreview()},r.refreshPreview=function(){for(var e in r.crosshair.css({left:r.position.x*r.image.width(),top:r.position.y*r.image.height()}),r.options.sizes){var i,t,o,a,s=r.options.sizes[e],n=tst.imageResizeDimensions(r.imageObject.width,r.imageObject.height,s.width,s.height,r.position.x,r.position.y);a=r.imageObject.width-n[6]?(i=r.imageObject.width/r.imageObject.height*n[5],t=n[5],o="auto",n[5]):(i=n[4],t=r.imageObject.height/r.imageObject.width*n[4],o=n[4],"auto"),s.image.css({left:-n[2]/r.imageObject.width*i,top:-n[3]/r.imageObject.height*t,width:o,height:a})}},this.destroy=function(){a(document).off("mousemove.theiaSmartThumbnails").off("mouseup.theiaSmartThumbnails"),r.imageOverlay.off("mousedown.theiaSmartThumbnails").off("mousemove.theiaSmartThumbnails"),r.crosshair.remove(),r.imageOverlay.remove(),r.preview.html("")},r.init()},tst.imageResizeDimensions=function(e,i,t,o,a,s){var n=e/i,r=Math.min(t,e),h=Math.min(o,i);r=r||Math.floor(h*n),h=h||Math.floor(r/n);var m=Math.max(r/e,h/i),u=Math.round(r/m),l=Math.round(h/m),p=Math.floor((e-u)*a),c=Math.floor((i-l)*s);return[0,0,Math.round(p),Math.round(c),Math.round(r),Math.round(h),Math.round(u),Math.round(l)]};
//# sourceMappingURL=sourcemaps/tst-admin.min.js.map
