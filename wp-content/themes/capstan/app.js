!function(t){var e={};function n(r){if(e[r])return e[r].exports;var i=e[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)n.d(r,i,function(e){return t[e]}.bind(null,i));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="/",n(n.s=171)}([function(t,e,n){var r=n(3),i=n(17).f,o=n(19),a=n(20),s=n(92),u=n(124),c=n(62);t.exports=function(t,e){var n,l,h,f,d,p=t.target,m=t.global,g=t.stat;if(n=m?r:g?r[p]||s(p,{}):(r[p]||{}).prototype)for(l in e){if(f=e[l],h=t.noTargetGet?(d=i(n,l))&&d.value:n[l],!c(m?l:p+(g?".":"#")+l,t.forced)&&void 0!==h){if(typeof f==typeof h)continue;u(f,h)}(t.sham||h&&h.sham)&&o(f,"sham",!0),a(n,l,f,t)}}},function(t,e,n){t.exports=n(121)},function(t,e){t.exports=function(t){try{return!!t()}catch(t){return!0}}},function(t,e,n){(function(e){var n=function(t){return t&&t.Math==Math&&t};t.exports=n("object"==typeof globalThis&&globalThis)||n("object"==typeof window&&window)||n("object"==typeof self&&self)||n("object"==typeof e&&e)||function(){return this}()||Function("return this")()}).call(this,n(57))},function(t,e,n){!function e(n,r,i){var o=function(t){return"[object Array]"===Object.prototype.toString.call(t)};function a(t,e){if(!(this instanceof a))return new a(t,e);o(t)?(e=t[1],t=t[0]):"object"==typeof t&&t&&(e=t.y,t=t.x),this.x=a.clean(t||0),this.y=a.clean(e||0)}a.prototype={change:function(t){if("function"==typeof t)this.observers?this.observers.push(t):this.observers=[t];else if(this.observers&&this.observers.length)for(var e=this.observers.length-1;e>=0;e--)this.observers[e](this,t);return this},ignore:function(t){if(this.observers)if(t)for(var e=this.observers,n=e.length;n--;)e[n]===t&&e.splice(n,1);else this.observers=[];return this},set:function(t,e,n){if("number"!=typeof t&&(n=e,e=t.y,t=t.x),this.x===t&&this.y===e)return this;var r=null;return!1!==n&&this.observers&&this.observers.length&&(r=this.clone()),this.x=a.clean(t),this.y=a.clean(e),!1!==n?this.change(r):void 0},zero:function(){return this.set(0,0)},clone:function(){return new this.constructor(this.x,this.y)},negate:function(t){return t?new this.constructor(-this.x,-this.y):this.set(-this.x,-this.y)},add:function(t,e,n){return"number"!=typeof t&&(n=e,o(t)?(e=t[1],t=t[0]):(e=t.y,t=t.x)),t+=this.x,e+=this.y,n?new this.constructor(t,e):this.set(t,e)},subtract:function(t,e,n){return"number"!=typeof t&&(n=e,o(t)?(e=t[1],t=t[0]):(e=t.y,t=t.x)),t=this.x-t,e=this.y-e,n?new this.constructor(t,e):this.set(t,e)},multiply:function(t,e,n){return"number"!=typeof t?(n=e,o(t)?(e=t[1],t=t[0]):(e=t.y,t=t.x)):"number"!=typeof e&&(n=e,e=t),t*=this.x,e*=this.y,n?new this.constructor(t,e):this.set(t,e)},rotate:function(t,e,n){var r,i,o=this.x,a=this.y,s=Math.cos(t),u=Math.sin(t);return r=s*o-(e=e?-1:1)*u*a,i=e*u*o+s*a,n?new this.constructor(r,i):this.set(r,i)},length:function(){var t=this.x,e=this.y;return Math.sqrt(t*t+e*e)},lengthSquared:function(){var t=this.x,e=this.y;return t*t+e*e},distance:function(t){var e=this.x-t.x,n=this.y-t.y;return Math.sqrt(e*e+n*n)},nearest:function(t){for(var e,n=Number.MAX_VALUE,r=null,i=t.length-1;i>=0;i--)(e=this.distance(t[i]))<=n&&(n=e,r=t[i]);return r},normalize:function(t){var e=this.length(),n=e<Number.MIN_VALUE?0:1/e;return t?new this.constructor(this.x*n,this.y*n):this.set(this.x*n,this.y*n)},equal:function(t,e){return"number"!=typeof t&&(o(t)?(e=t[1],t=t[0]):(e=t.y,t=t.x)),a.clean(t)===this.x&&a.clean(e)===this.y},abs:function(t){var e=Math.abs(this.x),n=Math.abs(this.y);return t?new this.constructor(e,n):this.set(e,n)},min:function(t,e){var n=this.x,r=this.y,i=t.x,o=t.y,a=n<i?n:i,s=r<o?r:o;return e?new this.constructor(a,s):this.set(a,s)},max:function(t,e){var n=this.x,r=this.y,i=t.x,o=t.y,a=n>i?n:i,s=r>o?r:o;return e?new this.constructor(a,s):this.set(a,s)},clamp:function(t,e,n){var r=this.min(e,!0).max(t);return n?r:this.set(r.x,r.y)},lerp:function(t,e,n){return this.add(t.subtract(this,!0).multiply(e),n)},skew:function(t){return t?new this.constructor(-this.y,this.x):this.set(-this.y,this.x)},dot:function(t){return a.clean(this.x*t.x+t.y*this.y)},perpDot:function(t){return a.clean(this.x*t.y-this.y*t.x)},angleTo:function(t){return Math.atan2(this.perpDot(t),this.dot(t))},divide:function(t,e,n){if("number"!=typeof t?(n=e,o(t)?(e=t[1],t=t[0]):(e=t.y,t=t.x)):"number"!=typeof e&&(n=e,e=t),0===t||0===e)throw new Error("division by zero");if(isNaN(t)||isNaN(e))throw new Error("NaN detected");return n?new this.constructor(this.x/t,this.y/e):this.set(this.x/t,this.y/e)},isPointOnLine:function(t,e){return(t.y-this.y)*(t.x-e.x)==(t.y-e.y)*(t.x-this.x)},toArray:function(){return[this.x,this.y]},fromArray:function(t){return this.set(t[0],t[1])},toJSON:function(){return{x:this.x,y:this.y}},toString:function(){return"("+this.x+", "+this.y+")"},constructor:a},a.fromArray=function(t,e){return new(e||a)(t[0],t[1])},a.precision=r||8;var s=Math.pow(10,a.precision);return a.clean=n||function(t){if(isNaN(t))throw new Error("NaN detected");if(!isFinite(t))throw new Error("Infinity detected");return Math.round(t)===t?t:Math.round(t*s)/s},a.inject=e,n||(a.fast=e((function(t){return t})),"object"==typeof t.exports?t.exports=a:window.Vec2=window.Vec2||a),a}()},function(t,e){t.exports=function(t){return"object"==typeof t?null!==t:"function"==typeof t}},function(t,e,n){var r=n(5);t.exports=function(t){if(!r(t))throw TypeError(String(t)+" is not an object");return t}},function(t,e,n){var r=n(2);t.exports=!r((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]}))},function(t,e,n){var r=n(3),i=n(75),o=n(15),a=n(59),s=n(99),u=n(126),c=i("wks"),l=r.Symbol,h=u?l:l&&l.withoutSetter||a;t.exports=function(t){return o(c,t)&&(s||"string"==typeof c[t])||(s&&o(l,t)?c[t]=l[t]:c[t]=h("Symbol."+t)),c[t]}},function(t,e,n){"use strict";var r,i=n(107),o=n(7),a=n(3),s=n(5),u=n(15),c=n(68),l=n(19),h=n(20),f=n(11).f,d=n(30),p=n(42),m=n(8),g=n(59),v=a.Int8Array,y=v&&v.prototype,b=a.Uint8ClampedArray,_=b&&b.prototype,x=v&&d(v),w=y&&d(y),S=Object.prototype,E=S.isPrototypeOf,T=m("toStringTag"),M=g("TYPED_ARRAY_TAG"),A=i&&!!p&&"Opera"!==c(a.opera),L=!1,D={Int8Array:1,Uint8Array:1,Uint8ClampedArray:1,Int16Array:2,Uint16Array:2,Int32Array:4,Uint32Array:4,Float32Array:4,Float64Array:8},C={BigInt64Array:8,BigUint64Array:8},P=function(t){if(!s(t))return!1;var e=c(t);return u(D,e)||u(C,e)};for(r in D)a[r]||(A=!1);if((!A||"function"!=typeof x||x===Function.prototype)&&(x=function(){throw TypeError("Incorrect invocation")},A))for(r in D)a[r]&&p(a[r],x);if((!A||!w||w===S)&&(w=x.prototype,A))for(r in D)a[r]&&p(a[r].prototype,w);if(A&&d(_)!==w&&p(_,w),o&&!u(w,T))for(r in L=!0,f(w,T,{get:function(){return s(this)?this[M]:void 0}}),D)a[r]&&l(a[r],M,r);t.exports={NATIVE_ARRAY_BUFFER_VIEWS:A,TYPED_ARRAY_TAG:L&&M,aTypedArray:function(t){if(P(t))return t;throw TypeError("Target is not a typed array")},aTypedArrayConstructor:function(t){if(p){if(E.call(x,t))return t}else for(var e in D)if(u(D,r)){var n=a[e];if(n&&(t===n||E.call(n,t)))return t}throw TypeError("Target is not a typed array constructor")},exportTypedArrayMethod:function(t,e,n){if(o){if(n)for(var r in D){var i=a[r];i&&u(i.prototype,t)&&delete i.prototype[t]}w[t]&&!n||h(w,t,n?e:A&&y[t]||e)}},exportTypedArrayStaticMethod:function(t,e,n){var r,i;if(o){if(p){if(n)for(r in D)(i=a[r])&&u(i,t)&&delete i[t];if(x[t]&&!n)return;try{return h(x,t,n?e:A&&v[t]||e)}catch(t){}}for(r in D)!(i=a[r])||i[t]&&!n||h(i,t,e)}},isView:function(t){if(!s(t))return!1;var e=c(t);return"DataView"===e||u(D,e)||u(C,e)},isTypedArray:P,TypedArray:x,TypedArrayPrototype:w}},function(t,e,n){var r=n(29),i=Math.min;t.exports=function(t){return t>0?i(r(t),9007199254740991):0}},function(t,e,n){var r=n(7),i=n(122),o=n(6),a=n(31),s=Object.defineProperty;e.f=r?s:function(t,e,n){if(o(t),e=a(e,!0),o(n),i)try{return s(t,e,n)}catch(t){}if("get"in n||"set"in n)throw TypeError("Accessors not supported");return"value"in n&&(t[e]=n.value),t}},function(t,e,n){(function(r,i){var o;!function(a){var s=Object.hasOwnProperty,u=Array.isArray?Array.isArray:function(t){return"[object Array]"===Object.prototype.toString.call(t)},c="object"==typeof r&&"function"==typeof r.nextTick,l="function"==typeof Symbol,h="object"==typeof Reflect,f="function"==typeof i?i:setTimeout,d=l?h&&"function"==typeof Reflect.ownKeys?Reflect.ownKeys:function(t){var e=Object.getOwnPropertyNames(t);return e.push.apply(e,Object.getOwnPropertySymbols(t)),e}:Object.keys;function p(){this._events={},this._conf&&m.call(this,this._conf)}function m(t){t&&(this._conf=t,t.delimiter&&(this.delimiter=t.delimiter),void 0!==t.maxListeners&&(this._maxListeners=t.maxListeners),t.wildcard&&(this.wildcard=t.wildcard),t.newListener&&(this._newListener=t.newListener),t.removeListener&&(this._removeListener=t.removeListener),t.verboseMemoryLeak&&(this.verboseMemoryLeak=t.verboseMemoryLeak),t.ignoreErrors&&(this.ignoreErrors=t.ignoreErrors),this.wildcard&&(this.listenerTree={}))}function g(t,e){var n="(node) warning: possible EventEmitter memory leak detected. "+t+" listeners added. Use emitter.setMaxListeners() to increase limit.";if(this.verboseMemoryLeak&&(n+=" Event name: "+e+"."),void 0!==r&&r.emitWarning){var i=new Error(n);i.name="MaxListenersExceededWarning",i.emitter=this,i.count=t,r.emitWarning(i)}else console.error(n),console.trace&&console.trace()}var v=function(t,e,n){var r=arguments.length;switch(r){case 0:return[];case 1:return[t];case 2:return[t,e];case 3:return[t,e,n];default:for(var i=new Array(r);r--;)i[r]=arguments[r];return i}};function y(t,e){for(var n={},r=t.length,i=e?e.length:0,o=0;o<r;o++)n[t[o]]=o<i?e[o]:void 0;return n}function b(t,e,n){var r,i;if(this._emitter=t,this._target=e,this._listeners={},this._listenersCount=0,(n.on||n.off)&&(r=n.on,i=n.off),e.addEventListener?(r=e.addEventListener,i=e.removeEventListener):e.addListener?(r=e.addListener,i=e.removeListener):e.on&&(r=e.on,i=e.off),!r&&!i)throw Error("target does not implement any known event API");if("function"!=typeof r)throw TypeError("on method must be a function");if("function"!=typeof i)throw TypeError("off method must be a function");this._on=r,this._off=i;var o=t._observers;o?o.push(this):t._observers=[this]}function _(t,e,n,r){var i=Object.assign({},e);if(!t)return i;if("object"!=typeof t)throw TypeError("options must be an object");var o,a,u,c=Object.keys(t),l=c.length;function h(t){throw Error('Invalid "'+o+'" option value'+(t?". Reason: "+t:""))}for(var f=0;f<l;f++){if(o=c[f],!r&&!s.call(e,o))throw Error('Unknown "'+o+'" option');void 0!==(a=t[o])&&(u=n[o],i[o]=u?u(a,h):a)}return i}function x(t,e){return"function"==typeof t&&t.hasOwnProperty("prototype")||e("value must be a constructor"),t}function w(t){var e="value must be type of "+t.join("|"),n=t.length,r=t[0],i=t[1];return 1===n?function(t,n){if(typeof t===r)return t;n(e)}:2===n?function(t,n){var o=typeof t;if(o===r||o===i)return t;n(e)}:function(r,i){for(var o=typeof r,a=n;a-- >0;)if(o===t[a])return r;i(e)}}Object.assign(b.prototype,{subscribe:function(t,e,n){var r=this,i=this._target,o=this._emitter,a=this._listeners,s=function(){var r=v.apply(null,arguments),a={data:r,name:e,original:t};if(n){var s=n.call(i,a);!1!==s&&o.emit.apply(o,[a.name].concat(r))}else o.emit.apply(o,[e].concat(r))};if(a[t])throw Error("Event '"+t+"' is already listening");this._listenersCount++,o._newListener&&o._removeListener&&!r._onNewListener?(this._onNewListener=function(n){n===e&&null===a[t]&&(a[t]=s,r._on.call(i,t,s))},o.on("newListener",this._onNewListener),this._onRemoveListener=function(n){n===e&&!o.hasListeners(n)&&a[t]&&(a[t]=null,r._off.call(i,t,s))},a[t]=null,o.on("removeListener",this._onRemoveListener)):(a[t]=s,r._on.call(i,t,s))},unsubscribe:function(t){var e,n,r,i=this,o=this._listeners,a=this._emitter,s=this._off,u=this._target;if(t&&"string"!=typeof t)throw TypeError("event must be a string");function c(){i._onNewListener&&(a.off("newListener",i._onNewListener),a.off("removeListener",i._onRemoveListener),i._onNewListener=null,i._onRemoveListener=null);var t=M.call(a,i);a._observers.splice(t,1)}if(t){if(!(e=o[t]))return;s.call(u,t,e),delete o[t],--this._listenersCount||c()}else{for(r=(n=d(o)).length;r-- >0;)t=n[r],s.call(u,t,o[t]);this._listeners={},this._listenersCount=0,c()}}});var S=w(["function"]),E=w(["object","function"]);function T(t,e,n){var r,i,o,a=0,s=new t((function(u,c,l){function h(){i&&(i=null),a&&(clearTimeout(a),a=0)}n=_(n,{timeout:0,overload:!1},{timeout:function(t,e){return("number"!=typeof(t*=1)||t<0||!Number.isFinite(t))&&e("timeout must be a positive number"),t}}),r=!n.overload&&"function"==typeof t.prototype.cancel&&"function"==typeof l;var f=function(t){h(),u(t)},d=function(t){h(),c(t)};r?e(f,d,l):(i=[function(t){d(t||Error("canceled"))}],e(f,d,(function(t){if(o)throw Error("Unable to subscribe on cancel event asynchronously");if("function"!=typeof t)throw TypeError("onCancel callback must be a function");i.push(t)})),o=!0),n.timeout>0&&(a=setTimeout((function(){var t=Error("timeout");t.code="ETIMEDOUT",a=0,s.cancel(t),c(t)}),n.timeout))}));return r||(s.cancel=function(t){if(i){for(var e=i.length,n=1;n<e;n++)i[n](t);i[0](t),i=null}}),s}function M(t){var e=this._observers;if(!e)return-1;for(var n=e.length,r=0;r<n;r++)if(e[r]._target===t)return r;return-1}function A(t,e,n,r,i){if(!n)return null;if(0===r){var o=typeof e;if("string"===o){var a,s,u=0,c=0,l=this.delimiter,h=l.length;if(-1!==(s=e.indexOf(l))){a=new Array(5);do{a[u++]=e.slice(c,s),c=s+h}while(-1!==(s=e.indexOf(l,c)));a[u++]=e.slice(c),e=a,i=u}else e=[e],i=1}else"object"===o?i=e.length:(e=[e],i=1)}var f,p,m,g,v,y,b,_=null,x=e[r],w=e[r+1];if(r===i)n._listeners&&("function"==typeof n._listeners?(t&&t.push(n._listeners),_=[n]):(t&&t.push.apply(t,n._listeners),_=[n]));else{if("*"===x){for(s=(y=d(n)).length;s-- >0;)"_listeners"!==(f=y[s])&&(b=A(t,e,n[f],r+1,i))&&(_?_.push.apply(_,b):_=b);return _}if("**"===x){for((v=r+1===i||r+2===i&&"*"===w)&&n._listeners&&(_=A(t,e,n,i,i)),s=(y=d(n)).length;s-- >0;)"_listeners"!==(f=y[s])&&("*"===f||"**"===f?(n[f]._listeners&&!v&&(b=A(t,e,n[f],i,i))&&(_?_.push.apply(_,b):_=b),b=A(t,e,n[f],r,i)):b=A(t,e,n[f],f===w?r+2:r,i),b&&(_?_.push.apply(_,b):_=b));return _}n[x]&&(_=A(t,e,n[x],r+1,i))}if((p=n["*"])&&A(t,e,p,r+1,i),m=n["**"])if(r<i)for(m._listeners&&A(t,e,m,i,i),s=(y=d(m)).length;s-- >0;)"_listeners"!==(f=y[s])&&(f===w?A(t,e,m[f],r+2,i):f===x?A(t,e,m[f],r+1,i):((g={})[f]=m[f],A(t,e,{"**":g},r+1,i)));else m._listeners?A(t,e,m,i,i):m["*"]&&m["*"]._listeners&&A(t,e,m["*"],i,i);return _}function L(t,e,n){var r,i,o=0,a=0,s=this.delimiter,u=s.length;if("string"==typeof t)if(-1!==(r=t.indexOf(s))){i=new Array(5);do{i[o++]=t.slice(a,r),a=r+u}while(-1!==(r=t.indexOf(s,a)));i[o++]=t.slice(a)}else i=[t],o=1;else i=t,o=t.length;if(o>1)for(r=0;r+1<o;r++)if("**"===i[r]&&"**"===i[r+1])return;var c,l=this.listenerTree;for(r=0;r<o;r++)if(l=l[c=i[r]]||(l[c]={}),r===o-1)return l._listeners?("function"==typeof l._listeners&&(l._listeners=[l._listeners]),n?l._listeners.unshift(e):l._listeners.push(e),!l._listeners.warned&&this._maxListeners>0&&l._listeners.length>this._maxListeners&&(l._listeners.warned=!0,g.call(this,l._listeners.length,c))):l._listeners=e,!0;return!0}function D(t,e,n,r){for(var i,o,a,s,u=d(t),c=u.length,l=t._listeners;c-- >0;)i=t[o=u[c]],a="_listeners"===o?n:n?n.concat(o):[o],s=r||"symbol"==typeof o,l&&e.push(s?a:a.join(this.delimiter)),"object"==typeof i&&D.call(this,i,e,a,s);return e}function C(t){for(var e,n,r,i=d(t),o=i.length;o-- >0;)(e=t[n=i[o]])&&(r=!0,"_listeners"===n||C(e)||delete t[n]);return r}function P(t,e,n){this.emitter=t,this.event=e,this.listener=n}function R(t,e,n){if(!0===n)o=!0;else if(!1===n)i=!0;else{if(!n||"object"!=typeof n)throw TypeError("options should be an object or true");var i=n.async,o=n.promisify,a=n.nextTick,s=n.objectify}if(i||a||o){var u=e,l=e._origin||e;if(a&&!c)throw Error("process.nextTick is not supported");void 0===o&&(o="AsyncFunction"===e.constructor.name),(e=function(){var t=arguments,e=this,n=this.event;return o?a?Promise.resolve():new Promise((function(t){f(t)})).then((function(){return e.event=n,u.apply(e,t)})):(a?r.nextTick:f)((function(){e.event=n,u.apply(e,t)}))})._async=!0,e._origin=l}return[e,s?new P(this,t,e):this]}function k(t){this._events={},this._newListener=!1,this._removeListener=!1,this.verboseMemoryLeak=!1,m.call(this,t)}P.prototype.off=function(){return this.emitter.off(this.event,this.listener),this},k.EventEmitter2=k,k.prototype.listenTo=function(t,e,n){if("object"!=typeof t)throw TypeError("target musts be an object");var r=this;function i(e){if("object"!=typeof e)throw TypeError("events must be an object");var i,o=n.reducers,a=M.call(r,t);i=-1===a?new b(r,t,n):r._observers[a];for(var s,u=d(e),c=u.length,l="function"==typeof o,h=0;h<c;h++)s=u[h],i.subscribe(s,e[s]||s,l?o:o&&o[s])}return n=_(n,{on:void 0,off:void 0,reducers:void 0},{on:S,off:S,reducers:E}),u(e)?i(y(e)):i("string"==typeof e?y(e.split(/\s+/)):e),this},k.prototype.stopListeningTo=function(t,e){var n=this._observers;if(!n)return!1;var r,i=n.length,o=!1;if(t&&"object"!=typeof t)throw TypeError("target should be an object");for(;i-- >0;)r=n[i],t&&r._target!==t||(r.unsubscribe(e),o=!0);return o},k.prototype.delimiter=".",k.prototype.setMaxListeners=function(t){void 0!==t&&(this._maxListeners=t,this._conf||(this._conf={}),this._conf.maxListeners=t)},k.prototype.getMaxListeners=function(){return this._maxListeners},k.prototype.event="",k.prototype.once=function(t,e,n){return this._once(t,e,!1,n)},k.prototype.prependOnceListener=function(t,e,n){return this._once(t,e,!0,n)},k.prototype._once=function(t,e,n,r){return this._many(t,1,e,n,r)},k.prototype.many=function(t,e,n,r){return this._many(t,e,n,!1,r)},k.prototype.prependMany=function(t,e,n,r){return this._many(t,e,n,!0,r)},k.prototype._many=function(t,e,n,r,i){var o=this;if("function"!=typeof n)throw new Error("many only accepts instances of Function");function a(){return 0==--e&&o.off(t,a),n.apply(this,arguments)}return a._origin=n,this._on(t,a,r,i)},k.prototype.emit=function(){if(!this._events&&!this._all)return!1;this._events||p.call(this);var t,e,n,r,i,o,a=arguments[0],s=this.wildcard;if("newListener"===a&&!this._newListener&&!this._events.newListener)return!1;if(s&&(t=a,"newListener"!==a&&"removeListener"!==a&&"object"==typeof a)){if(n=a.length,l)for(r=0;r<n;r++)if("symbol"==typeof a[r]){o=!0;break}o||(a=a.join(this.delimiter))}var u,c=arguments.length;if(this._all&&this._all.length)for(r=0,n=(u=this._all.slice()).length;r<n;r++)switch(this.event=a,c){case 1:u[r].call(this,a);break;case 2:u[r].call(this,a,arguments[1]);break;case 3:u[r].call(this,a,arguments[1],arguments[2]);break;default:u[r].apply(this,arguments)}if(s)u=[],A.call(this,u,t,this.listenerTree,0,n);else{if("function"==typeof(u=this._events[a])){switch(this.event=a,c){case 1:u.call(this);break;case 2:u.call(this,arguments[1]);break;case 3:u.call(this,arguments[1],arguments[2]);break;default:for(e=new Array(c-1),i=1;i<c;i++)e[i-1]=arguments[i];u.apply(this,e)}return!0}u&&(u=u.slice())}if(u&&u.length){if(c>3)for(e=new Array(c-1),i=1;i<c;i++)e[i-1]=arguments[i];for(r=0,n=u.length;r<n;r++)switch(this.event=a,c){case 1:u[r].call(this);break;case 2:u[r].call(this,arguments[1]);break;case 3:u[r].call(this,arguments[1],arguments[2]);break;default:u[r].apply(this,e)}return!0}if(!this.ignoreErrors&&!this._all&&"error"===a)throw arguments[1]instanceof Error?arguments[1]:new Error("Uncaught, unspecified 'error' event.");return!!this._all},k.prototype.emitAsync=function(){if(!this._events&&!this._all)return!1;this._events||p.call(this);var t,e,n,r,i,o,a=arguments[0],s=this.wildcard;if("newListener"===a&&!this._newListener&&!this._events.newListener)return Promise.resolve([!1]);if(s&&(t=a,"newListener"!==a&&"removeListener"!==a&&"object"==typeof a)){if(r=a.length,l)for(i=0;i<r;i++)if("symbol"==typeof a[i]){e=!0;break}e||(a=a.join(this.delimiter))}var u,c=[],h=arguments.length;if(this._all)for(i=0,r=this._all.length;i<r;i++)switch(this.event=a,h){case 1:c.push(this._all[i].call(this,a));break;case 2:c.push(this._all[i].call(this,a,arguments[1]));break;case 3:c.push(this._all[i].call(this,a,arguments[1],arguments[2]));break;default:c.push(this._all[i].apply(this,arguments))}if(s?(u=[],A.call(this,u,t,this.listenerTree,0)):u=this._events[a],"function"==typeof u)switch(this.event=a,h){case 1:c.push(u.call(this));break;case 2:c.push(u.call(this,arguments[1]));break;case 3:c.push(u.call(this,arguments[1],arguments[2]));break;default:for(n=new Array(h-1),o=1;o<h;o++)n[o-1]=arguments[o];c.push(u.apply(this,n))}else if(u&&u.length){if(u=u.slice(),h>3)for(n=new Array(h-1),o=1;o<h;o++)n[o-1]=arguments[o];for(i=0,r=u.length;i<r;i++)switch(this.event=a,h){case 1:c.push(u[i].call(this));break;case 2:c.push(u[i].call(this,arguments[1]));break;case 3:c.push(u[i].call(this,arguments[1],arguments[2]));break;default:c.push(u[i].apply(this,n))}}else if(!this.ignoreErrors&&!this._all&&"error"===a)return arguments[1]instanceof Error?Promise.reject(arguments[1]):Promise.reject("Uncaught, unspecified 'error' event.");return Promise.all(c)},k.prototype.on=function(t,e,n){return this._on(t,e,!1,n)},k.prototype.prependListener=function(t,e,n){return this._on(t,e,!0,n)},k.prototype.onAny=function(t){return this._onAny(t,!1)},k.prototype.prependAny=function(t){return this._onAny(t,!0)},k.prototype.addListener=k.prototype.on,k.prototype._onAny=function(t,e){if("function"!=typeof t)throw new Error("onAny only accepts instances of Function");return this._all||(this._all=[]),e?this._all.unshift(t):this._all.push(t),this},k.prototype._on=function(t,e,n,r){if("function"==typeof t)return this._onAny(t,e),this;if("function"!=typeof e)throw new Error("on only accepts instances of Function");this._events||p.call(this);var i,o=this;return void 0!==r&&(e=(i=R.call(this,t,e,r))[0],o=i[1]),this._newListener&&this.emit("newListener",t,e),this.wildcard?(L.call(this,t,e,n),o):(this._events[t]?("function"==typeof this._events[t]&&(this._events[t]=[this._events[t]]),n?this._events[t].unshift(e):this._events[t].push(e),!this._events[t].warned&&this._maxListeners>0&&this._events[t].length>this._maxListeners&&(this._events[t].warned=!0,g.call(this,this._events[t].length,t))):this._events[t]=e,o)},k.prototype.off=function(t,e){if("function"!=typeof e)throw new Error("removeListener only takes instances of Function");var n,r=[];if(this.wildcard){var i="string"==typeof t?t.split(this.delimiter):t.slice();if(!(r=A.call(this,null,i,this.listenerTree,0)))return this}else{if(!this._events[t])return this;n=this._events[t],r.push({_listeners:n})}for(var o=0;o<r.length;o++){var a=r[o];if(n=a._listeners,u(n)){for(var s=-1,c=0,l=n.length;c<l;c++)if(n[c]===e||n[c].listener&&n[c].listener===e||n[c]._origin&&n[c]._origin===e){s=c;break}if(s<0)continue;return this.wildcard?a._listeners.splice(s,1):this._events[t].splice(s,1),0===n.length&&(this.wildcard?delete a._listeners:delete this._events[t]),this._removeListener&&this.emit("removeListener",t,e),this}(n===e||n.listener&&n.listener===e||n._origin&&n._origin===e)&&(this.wildcard?delete a._listeners:delete this._events[t],this._removeListener&&this.emit("removeListener",t,e))}return this.listenerTree&&C(this.listenerTree),this},k.prototype.offAny=function(t){var e,n=0,r=0;if(t&&this._all&&this._all.length>0){for(n=0,r=(e=this._all).length;n<r;n++)if(t===e[n])return e.splice(n,1),this._removeListener&&this.emit("removeListenerAny",t),this}else{if(e=this._all,this._removeListener)for(n=0,r=e.length;n<r;n++)this.emit("removeListenerAny",e[n]);this._all=[]}return this},k.prototype.removeListener=k.prototype.off,k.prototype.removeAllListeners=function(t){if(void 0===t)return!this._events||p.call(this),this;if(this.wildcard){var e,n=A.call(this,null,t,this.listenerTree,0);if(!n)return this;for(e=0;e<n.length;e++)n[e]._listeners=null;this.listenerTree&&C(this.listenerTree)}else this._events&&(this._events[t]=null);return this},k.prototype.listeners=function(t){var e,n,r,i,o,a=this._events;if(void 0===t){if(this.wildcard)throw Error("event name required for wildcard emitter");if(!a)return[];for(i=(e=d(a)).length,r=[];i-- >0;)"function"==typeof(n=a[e[i]])?r.push(n):r.push.apply(r,n);return r}if(this.wildcard){if(!(o=this.listenerTree))return[];var s=[],u="string"==typeof t?t.split(this.delimiter):t.slice();return A.call(this,s,u,o,0),s}return a&&(n=a[t])?"function"==typeof n?[n]:n:[]},k.prototype.eventNames=function(t){var e=this._events;return this.wildcard?D.call(this,this.listenerTree,[],null,t):e?d(e):[]},k.prototype.listenerCount=function(t){return this.listeners(t).length},k.prototype.hasListeners=function(t){if(this.wildcard){var e=[],n="string"==typeof t?t.split(this.delimiter):t.slice();return A.call(this,e,n,this.listenerTree,0),e.length>0}var r=this._events,i=this._all;return!!(i&&i.length||r&&(void 0===t?d(r).length:r[t]))},k.prototype.listenersAny=function(){return this._all?this._all:[]},k.prototype.waitFor=function(t,e){var n=this,r=typeof e;return"number"===r?e={timeout:e}:"function"===r&&(e={filter:e}),T((e=_(e,{timeout:0,filter:void 0,handleError:!1,Promise:Promise,overload:!1},{filter:S,Promise:x})).Promise,(function(r,i,o){function a(){var o=e.filter;if(!o||o.apply(n,arguments))if(n.off(t,a),e.handleError){var s=arguments[0];s?i(s):r(v.apply(null,arguments).slice(1))}else r(v.apply(null,arguments))}o((function(){n.off(t,a)})),n._on(t,a,!1)}),{timeout:e.timeout,overload:e.overload})};var O=k.prototype;Object.defineProperties(k,{defaultMaxListeners:{get:function(){return O._maxListeners},set:function(t){if("number"!=typeof t||t<0||Number.isNaN(t))throw TypeError("n must be a non-negative number");O._maxListeners=t},enumerable:!0},once:{value:function(t,e,n){return T((n=_(n,{Promise:Promise,timeout:0,overload:!1},{Promise:x})).Promise,(function(n,r,i){var o;if("function"==typeof t.addEventListener)return o=function(){n(v.apply(null,arguments))},i((function(){t.removeEventListener(e,o)})),void t.addEventListener(e,o,{once:!0});var a,s=function(){a&&t.removeListener("error",a),n(v.apply(null,arguments))};"error"!==e&&(a=function(n){t.removeListener(e,s),r(n)},t.once("error",a)),i((function(){a&&t.removeListener("error",a),t.removeListener(e,s)})),t.once(e,s)}),{timeout:n.timeout,overload:n.overload})},writable:!0,configurable:!0}}),Object.defineProperties(O,{_maxListeners:{value:10,writable:!0,configurable:!0},_observers:{value:null,writable:!0,configurable:!0}}),void 0===(o=function(){return k}.call(e,n,e,t))||(t.exports=o)}()}).call(this,n(162),n(402).setImmediate)},function(t,e,n){var r=n(18);t.exports=function(t){return Object(r(t))}},function(t,e,n){var r,i;!function(o,a){"use strict";void 0===(i="function"==typeof(r=function(){var t=function(){},e="undefined"!=typeof window&&void 0!==window.navigator&&/Trident\/|MSIE /.test(window.navigator.userAgent),n=["trace","debug","info","warn","error"];function r(t,e){var n=t[e];if("function"==typeof n.bind)return n.bind(t);try{return Function.prototype.bind.call(n,t)}catch(e){return function(){return Function.prototype.apply.apply(n,[t,arguments])}}}function i(){console.log&&(console.log.apply?console.log.apply(console,arguments):Function.prototype.apply.apply(console.log,[console,arguments])),console.trace&&console.trace()}function o(n){return"debug"===n&&(n="log"),"undefined"!=typeof console&&("trace"===n&&e?i:void 0!==console[n]?r(console,n):void 0!==console.log?r(console,"log"):t)}function a(e,r){for(var i=0;i<n.length;i++){var o=n[i];this[o]=i<e?t:this.methodFactory(o,e,r)}this.log=this.debug}function s(t,e,n){return function(){"undefined"!=typeof console&&(a.call(this,e,n),this[t].apply(this,arguments))}}function u(t,e,n){return o(t)||s.apply(this,arguments)}function c(t,e,r){var i,o=this,s="loglevel";function c(){var t;if("undefined"!=typeof window&&s){try{t=window.localStorage[s]}catch(t){}if(void 0===t)try{var e=window.document.cookie,n=e.indexOf(encodeURIComponent(s)+"=");-1!==n&&(t=/^([^;]+)/.exec(e.slice(n))[1])}catch(t){}return void 0===o.levels[t]&&(t=void 0),t}}"string"==typeof t?s+=":"+t:"symbol"==typeof t&&(s=void 0),o.name=t,o.levels={TRACE:0,DEBUG:1,INFO:2,WARN:3,ERROR:4,SILENT:5},o.methodFactory=r||u,o.getLevel=function(){return i},o.setLevel=function(e,r){if("string"==typeof e&&void 0!==o.levels[e.toUpperCase()]&&(e=o.levels[e.toUpperCase()]),!("number"==typeof e&&e>=0&&e<=o.levels.SILENT))throw"log.setLevel() called with invalid level: "+e;if(i=e,!1!==r&&function(t){var e=(n[t]||"silent").toUpperCase();if("undefined"!=typeof window&&s){try{return void(window.localStorage[s]=e)}catch(t){}try{window.document.cookie=encodeURIComponent(s)+"="+e+";"}catch(t){}}}(e),a.call(o,e,t),"undefined"==typeof console&&e<o.levels.SILENT)return"No console available for logging"},o.setDefaultLevel=function(t){c()||o.setLevel(t,!1)},o.enableAll=function(t){o.setLevel(o.levels.TRACE,t)},o.disableAll=function(t){o.setLevel(o.levels.SILENT,t)};var l=c();null==l&&(l=null==e?"WARN":e),o.setLevel(l,!1)}var l=new c,h={};l.getLogger=function(t){if("symbol"!=typeof t&&"string"!=typeof t||""===t)throw new TypeError("You must supply a name when creating a logger.");var e=h[t];return e||(e=h[t]=new c(t,l.getLevel(),l.methodFactory)),e};var f="undefined"!=typeof window?window.log:void 0;return l.noConflict=function(){return"undefined"!=typeof window&&window.log===l&&(window.log=f),l},l.getLoggers=function(){return h},l.default=l,l})?r.call(e,n,e,t):r)||(t.exports=i)}()},function(t,e){var n={}.hasOwnProperty;t.exports=function(t,e){return n.call(t,e)}},function(t,e,n){var r=n(41),i=n(58),o=n(13),a=n(10),s=n(65),u=[].push,c=function(t){var e=1==t,n=2==t,c=3==t,l=4==t,h=6==t,f=7==t,d=5==t||h;return function(p,m,g,v){for(var y,b,_=o(p),x=i(_),w=r(m,g,3),S=a(x.length),E=0,T=v||s,M=e?T(p,S):n||f?T(p,0):void 0;S>E;E++)if((d||E in x)&&(b=w(y=x[E],E,_),t))if(e)M[E]=b;else if(b)switch(t){case 3:return!0;case 5:return y;case 6:return E;case 2:u.call(M,y)}else switch(t){case 4:return!1;case 7:u.call(M,y)}return h?-1:c||l?l:M}};t.exports={forEach:c(0),map:c(1),filter:c(2),some:c(3),every:c(4),find:c(5),findIndex:c(6),filterOut:c(7)}},function(t,e,n){var r=n(7),i=n(73),o=n(35),a=n(24),s=n(31),u=n(15),c=n(122),l=Object.getOwnPropertyDescriptor;e.f=r?l:function(t,e){if(t=a(t),e=s(e,!0),c)try{return l(t,e)}catch(t){}if(u(t,e))return o(!i.f.call(t,e),t[e])}},function(t,e){t.exports=function(t){if(null==t)throw TypeError("Can't call method on "+t);return t}},function(t,e,n){var r=n(7),i=n(11),o=n(35);t.exports=r?function(t,e,n){return i.f(t,e,o(1,n))}:function(t,e,n){return t[e]=n,t}},function(t,e,n){var r=n(3),i=n(19),o=n(15),a=n(92),s=n(93),u=n(21),c=u.get,l=u.enforce,h=String(String).split("String");(t.exports=function(t,e,n,s){var u,c=!!s&&!!s.unsafe,f=!!s&&!!s.enumerable,d=!!s&&!!s.noTargetGet;"function"==typeof n&&("string"!=typeof e||o(n,"name")||i(n,"name",e),(u=l(n)).source||(u.source=h.join("string"==typeof e?e:""))),t!==r?(c?!d&&t[e]&&(f=!0):delete t[e],f?t[e]=n:i(t,e,n)):f?t[e]=n:a(e,n)})(Function.prototype,"toString",(function(){return"function"==typeof this&&c(this).source||s(this)}))},function(t,e,n){var r,i,o,a=n(123),s=n(3),u=n(5),c=n(19),l=n(15),h=n(94),f=n(74),d=n(60),p=s.WeakMap;if(a){var m=h.state||(h.state=new p),g=m.get,v=m.has,y=m.set;r=function(t,e){if(v.call(m,t))throw new TypeError("Object already initialized");return e.facade=t,y.call(m,t,e),e},i=function(t){return g.call(m,t)||{}},o=function(t){return v.call(m,t)}}else{var b=f("state");d[b]=!0,r=function(t,e){if(l(t,b))throw new TypeError("Object already initialized");return e.facade=t,c(t,b,e),e},i=function(t){return l(t,b)?t[b]:{}},o=function(t){return l(t,b)}}t.exports={set:r,get:i,has:o,enforce:function(t){return o(t)?i(t):r(t,{})},getterFor:function(t){return function(e){var n;if(!u(e)||(n=i(e)).type!==t)throw TypeError("Incompatible receiver, "+t+" required");return n}}}},function(t,e){t.exports=function(t){if("function"!=typeof t)throw TypeError(String(t)+" is not a function");return t}},function(t,e,n){var r=n(96),i=n(15),o=n(129),a=n(11).f;t.exports=function(t){var e=r.Symbol||(r.Symbol={});i(e,t)||a(e,t,{value:o.f(t)})}},function(t,e,n){var r=n(58),i=n(18);t.exports=function(t){return r(i(t))}},function(t,e,n){var r=n(96),i=n(3),o=function(t){return"function"==typeof t?t:void 0};t.exports=function(t,e){return arguments.length<2?o(r[t])||o(i[t]):r[t]&&r[t][e]||i[t]&&i[t][e]}},function(t,e,n){var r=n(18),i=/"/g;t.exports=function(t,e,n,o){var a=String(r(t)),s="<"+e;return""!==n&&(s+=" "+n+'="'+String(o).replace(i,"&quot;")+'"'),s+">"+a+"</"+e+">"}},function(t,e,n){var r=n(2);t.exports=function(t){return r((function(){var e=""[t]('"');return e!==e.toLowerCase()||e.split('"').length>3}))}},function(t,e){t.exports=!1},function(t,e){var n=Math.ceil,r=Math.floor;t.exports=function(t){return isNaN(t=+t)?0:(t>0?r:n)(t)}},function(t,e,n){var r=n(15),i=n(13),o=n(74),a=n(101),s=o("IE_PROTO"),u=Object.prototype;t.exports=a?Object.getPrototypeOf:function(t){return t=i(t),r(t,s)?t[s]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?u:null}},function(t,e,n){var r=n(5);t.exports=function(t,e){if(!r(t))return t;var n,i;if(e&&"function"==typeof(n=t.toString)&&!r(i=n.call(t)))return i;if("function"==typeof(n=t.valueOf)&&!r(i=n.call(t)))return i;if(!e&&"function"==typeof(n=t.toString)&&!r(i=n.call(t)))return i;throw TypeError("Can't convert object to primitive value")}},function(t,e,n){var r=n(11).f,i=n(15),o=n(8)("toStringTag");t.exports=function(t,e,n){t&&!i(t=n?t:t.prototype,o)&&r(t,o,{configurable:!0,value:e})}},function(t,e,n){"use strict";(function(t){n.d(e,"a",(function(){return ii})),n.d(e,"b",(function(){return Hr})),n.d(e,"c",(function(){return Nr})),n.d(e,"d",(function(){return ai})),n.d(e,"e",(function(){return oi})),n.d(e,"f",(function(){return Ar})),n.d(e,"g",(function(){return gr})),n.d(e,"h",(function(){return Lr})),n.d(e,"i",(function(){return ni})),n.d(e,"j",(function(){return Or}));var r=n(1),i=n.n(r);function o(t,e,n,r,i,o,a){try{var s=t[o](a),u=s.value}catch(t){return void n(t)}s.done?e(u):Promise.resolve(u).then(r,i)}function a(t){return function(){var e=this,n=arguments;return new Promise((function(r,i){var a=t.apply(e,n);function s(t){o(a,r,i,s,u,"next",t)}function u(t){o(a,r,i,s,u,"throw",t)}s(void 0)}))}}function s(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function u(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function c(t,e,n){return e&&u(t.prototype,e),n&&u(t,n),t}function l(t){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function h(t){return(h="function"==typeof Symbol&&"symbol"==l(Symbol.iterator)?function(t){return l(t)}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":l(t)})(t)}function f(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function d(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function p(t,e,n){return e&&d(t.prototype,e),n&&d(t,n),t}function m(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function g(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function v(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?g(Object(n),!0).forEach((function(e){m(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):g(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function y(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&function(t,e){(Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}(t,e)}function b(t){return(b=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function _(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function x(t,e){return!e||"object"!=l(e)&&"function"!=typeof e?_(t):e}function w(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=b(t);if(e){var i=b(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return x(this,n)}}function S(t,e,n){return(S="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=b(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function E(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t)){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){i=!0,o=t}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}}(t,e)||M(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function T(t){return function(t){if(Array.isArray(t))return A(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||M(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function M(t,e){if(t){if("string"==typeof t)return A(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?A(t,e):void 0}}function A(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var L=Float32Array;function D(t,e,n){var r=new L(3);return t&&(r[0]=t),e&&(r[1]=e),n&&(r[2]=n),r}function C(t,e,n){return(n=n||new L(3))[0]=t[0]+e[0],n[1]=t[1]+e[1],n[2]=t[2]+e[2],n}function P(t,e,n){n=n||new L(3);var r=t[2]*e[0]-t[0]*e[2],i=t[0]*e[1]-t[1]*e[0];return n[0]=t[1]*e[2]-t[2]*e[1],n[1]=r,n[2]=i,n}function R(t,e){e=e||new L(3);var n=t[0]*t[0]+t[1]*t[1]+t[2]*t[2],r=Math.sqrt(n);return r>1e-5?(e[0]=t[0]/r,e[1]=t[1]/r,e[2]=t[2]/r):(e[0]=0,e[1]=0,e[2]=0),e}var k,O,I,F=Float32Array;function z(t,e){return(e=e||new F(16))[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function B(t){return(t=t||new F(16))[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function N(t,e){e=e||new F(16);var n=t[0],r=t[1],i=t[2],o=t[3],a=t[4],s=t[5],u=t[6],c=t[7],l=t[8],h=t[9],f=t[10],d=t[11],p=t[12],m=t[13],g=t[14],v=t[15],y=f*v,b=g*d,_=u*v,x=g*c,w=u*d,S=f*c,E=i*v,T=g*o,M=i*d,A=f*o,L=i*c,D=u*o,C=l*m,P=p*h,R=a*m,k=p*s,O=a*h,I=l*s,z=n*m,B=p*r,N=n*h,U=l*r,j=n*s,H=a*r,V=y*s+x*h+w*m-(b*s+_*h+S*m),G=b*r+E*h+A*m-(y*r+T*h+M*m),W=_*r+T*s+L*m-(x*r+E*s+D*m),q=S*r+M*s+D*h-(w*r+A*s+L*h),X=1/(n*V+a*G+l*W+p*q);return e[0]=X*V,e[1]=X*G,e[2]=X*W,e[3]=X*q,e[4]=X*(b*a+_*l+S*p-(y*a+x*l+w*p)),e[5]=X*(y*n+T*l+M*p-(b*n+E*l+A*p)),e[6]=X*(x*n+E*a+D*p-(_*n+T*a+L*p)),e[7]=X*(w*n+A*a+L*l-(S*n+M*a+D*l)),e[8]=X*(C*c+k*d+O*v-(P*c+R*d+I*v)),e[9]=X*(P*o+z*d+U*v-(C*o+B*d+N*v)),e[10]=X*(R*o+B*c+j*v-(k*o+z*c+H*v)),e[11]=X*(I*o+N*c+H*d-(O*o+U*c+j*d)),e[12]=X*(R*f+I*g+P*u-(O*g+C*u+k*f)),e[13]=X*(N*g+C*i+B*f-(z*f+U*g+P*i)),e[14]=X*(z*u+H*g+k*i-(j*g+R*i+B*u)),e[15]=X*(j*f+O*i+U*u-(N*u+H*f+I*i)),e}function U(t,e,n){n=n||D();var r=e[0],i=e[1],o=e[2],a=r*t[3]+i*t[7]+o*t[11]+t[15];return n[0]=(r*t[0]+i*t[4]+o*t[8]+t[12])/a,n[1]=(r*t[1]+i*t[5]+o*t[9]+t[13])/a,n[2]=(r*t[2]+i*t[6]+o*t[10]+t[14])/a,n}function j(t,e,n){n=n||D();var r=e[0],i=e[1],o=e[2];return n[0]=r*t[0]+i*t[4]+o*t[8],n[1]=r*t[1]+i*t[5]+o*t[9],n[2]=r*t[2]+i*t[6]+o*t[10],n}var H=Object.freeze({__proto__:null,axisRotate:function(t,e,n,r){r=r||new F(16);var i=e[0],o=e[1],a=e[2],s=Math.sqrt(i*i+o*o+a*a),u=(i/=s)*i,c=(o/=s)*o,l=(a/=s)*a,h=Math.cos(n),f=Math.sin(n),d=1-h,p=u+(1-u)*h,m=i*o*d+a*f,g=i*a*d-o*f,v=i*o*d-a*f,y=c+(1-c)*h,b=o*a*d+i*f,_=i*a*d+o*f,x=o*a*d-i*f,w=l+(1-l)*h,S=t[0],E=t[1],T=t[2],M=t[3],A=t[4],L=t[5],D=t[6],C=t[7],P=t[8],R=t[9],k=t[10],O=t[11];return r[0]=p*S+m*A+g*P,r[1]=p*E+m*L+g*R,r[2]=p*T+m*D+g*k,r[3]=p*M+m*C+g*O,r[4]=v*S+y*A+b*P,r[5]=v*E+y*L+b*R,r[6]=v*T+y*D+b*k,r[7]=v*M+y*C+b*O,r[8]=_*S+x*A+w*P,r[9]=_*E+x*L+w*R,r[10]=_*T+x*D+w*k,r[11]=_*M+x*C+w*O,t!==r&&(r[12]=t[12],r[13]=t[13],r[14]=t[14],r[15]=t[15]),r},axisRotation:function(t,e,n){n=n||new F(16);var r=t[0],i=t[1],o=t[2],a=Math.sqrt(r*r+i*i+o*o),s=(r/=a)*r,u=(i/=a)*i,c=(o/=a)*o,l=Math.cos(e),h=Math.sin(e),f=1-l;return n[0]=s+(1-s)*l,n[1]=r*i*f+o*h,n[2]=r*o*f-i*h,n[3]=0,n[4]=r*i*f-o*h,n[5]=u+(1-u)*l,n[6]=i*o*f+r*h,n[7]=0,n[8]=r*o*f+i*h,n[9]=i*o*f-r*h,n[10]=c+(1-c)*l,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,n},copy:z,frustum:function(t,e,n,r,i,o,a){var s=e-t,u=r-n,c=i-o;return(a=a||new F(16))[0]=2*i/s,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=2*i/u,a[6]=0,a[7]=0,a[8]=(t+e)/s,a[9]=(r+n)/u,a[10]=o/c,a[11]=-1,a[12]=0,a[13]=0,a[14]=i*o/c,a[15]=0,a},getAxis:function(t,e,n){var r=4*e;return(n=n||D())[0]=t[r+0],n[1]=t[r+1],n[2]=t[r+2],n},getTranslation:function(t,e){return(e=e||D())[0]=t[12],e[1]=t[13],e[2]=t[14],e},identity:B,inverse:N,lookAt:function(t,e,n,r){return r=r||new F(16),k=k||D(),O=O||D(),R(function(t,e,n){return(n=n||new L(3))[0]=t[0]-e[0],n[1]=t[1]-e[1],n[2]=t[2]-e[2],n}(t,e,I=I||D()),I),R(P(n,I,k),k),R(P(I,k,O),O),r[0]=k[0],r[1]=k[1],r[2]=k[2],r[3]=0,r[4]=O[0],r[5]=O[1],r[6]=O[2],r[7]=0,r[8]=I[0],r[9]=I[1],r[10]=I[2],r[11]=0,r[12]=t[0],r[13]=t[1],r[14]=t[2],r[15]=1,r},multiply:function(t,e,n){n=n||new F(16);var r=t[0],i=t[1],o=t[2],a=t[3],s=t[4],u=t[5],c=t[6],l=t[7],h=t[8],f=t[9],d=t[10],p=t[11],m=t[12],g=t[13],v=t[14],y=t[15],b=e[0],_=e[1],x=e[2],w=e[3],S=e[4],E=e[5],T=e[6],M=e[7],A=e[8],L=e[9],D=e[10],C=e[11],P=e[12],R=e[13],k=e[14],O=e[15];return n[0]=r*b+s*_+h*x+m*w,n[1]=i*b+u*_+f*x+g*w,n[2]=o*b+c*_+d*x+v*w,n[3]=a*b+l*_+p*x+y*w,n[4]=r*S+s*E+h*T+m*M,n[5]=i*S+u*E+f*T+g*M,n[6]=o*S+c*E+d*T+v*M,n[7]=a*S+l*E+p*T+y*M,n[8]=r*A+s*L+h*D+m*C,n[9]=i*A+u*L+f*D+g*C,n[10]=o*A+c*L+d*D+v*C,n[11]=a*A+l*L+p*D+y*C,n[12]=r*P+s*R+h*k+m*O,n[13]=i*P+u*R+f*k+g*O,n[14]=o*P+c*R+d*k+v*O,n[15]=a*P+l*R+p*k+y*O,n},negate:function(t,e){return(e=e||new F(16))[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e[3]=-t[3],e[4]=-t[4],e[5]=-t[5],e[6]=-t[6],e[7]=-t[7],e[8]=-t[8],e[9]=-t[9],e[10]=-t[10],e[11]=-t[11],e[12]=-t[12],e[13]=-t[13],e[14]=-t[14],e[15]=-t[15],e},ortho:function(t,e,n,r,i,o,a){return(a=a||new F(16))[0]=2/(e-t),a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=2/(r-n),a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[10]=2/(i-o),a[11]=0,a[12]=(e+t)/(t-e),a[13]=(r+n)/(n-r),a[14]=(o+i)/(i-o),a[15]=1,a},perspective:function(t,e,n,r,i){i=i||new F(16);var o=Math.tan(.5*Math.PI-.5*t),a=1/(n-r);return i[0]=o/e,i[1]=0,i[2]=0,i[3]=0,i[4]=0,i[5]=o,i[6]=0,i[7]=0,i[8]=0,i[9]=0,i[10]=(n+r)*a,i[11]=-1,i[12]=0,i[13]=0,i[14]=n*r*a*2,i[15]=0,i},rotateX:function(t,e,n){n=n||new F(16);var r=t[4],i=t[5],o=t[6],a=t[7],s=t[8],u=t[9],c=t[10],l=t[11],h=Math.cos(e),f=Math.sin(e);return n[4]=h*r+f*s,n[5]=h*i+f*u,n[6]=h*o+f*c,n[7]=h*a+f*l,n[8]=h*s-f*r,n[9]=h*u-f*i,n[10]=h*c-f*o,n[11]=h*l-f*a,t!==n&&(n[0]=t[0],n[1]=t[1],n[2]=t[2],n[3]=t[3],n[12]=t[12],n[13]=t[13],n[14]=t[14],n[15]=t[15]),n},rotateY:function(t,e,n){n=n||new F(16);var r=t[0],i=t[1],o=t[2],a=t[3],s=t[8],u=t[9],c=t[10],l=t[11],h=Math.cos(e),f=Math.sin(e);return n[0]=h*r-f*s,n[1]=h*i-f*u,n[2]=h*o-f*c,n[3]=h*a-f*l,n[8]=h*s+f*r,n[9]=h*u+f*i,n[10]=h*c+f*o,n[11]=h*l+f*a,t!==n&&(n[4]=t[4],n[5]=t[5],n[6]=t[6],n[7]=t[7],n[12]=t[12],n[13]=t[13],n[14]=t[14],n[15]=t[15]),n},rotateZ:function(t,e,n){n=n||new F(16);var r=t[0],i=t[1],o=t[2],a=t[3],s=t[4],u=t[5],c=t[6],l=t[7],h=Math.cos(e),f=Math.sin(e);return n[0]=h*r+f*s,n[1]=h*i+f*u,n[2]=h*o+f*c,n[3]=h*a+f*l,n[4]=h*s-f*r,n[5]=h*u-f*i,n[6]=h*c-f*o,n[7]=h*l-f*a,t!==n&&(n[8]=t[8],n[9]=t[9],n[10]=t[10],n[11]=t[11],n[12]=t[12],n[13]=t[13],n[14]=t[14],n[15]=t[15]),n},rotationX:function(t,e){e=e||new F(16);var n=Math.cos(t),r=Math.sin(t);return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=n,e[6]=r,e[7]=0,e[8]=0,e[9]=-r,e[10]=n,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},rotationY:function(t,e){e=e||new F(16);var n=Math.cos(t),r=Math.sin(t);return e[0]=n,e[1]=0,e[2]=-r,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=r,e[9]=0,e[10]=n,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},rotationZ:function(t,e){e=e||new F(16);var n=Math.cos(t),r=Math.sin(t);return e[0]=n,e[1]=r,e[2]=0,e[3]=0,e[4]=-r,e[5]=n,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},scale:function(t,e,n){n=n||new F(16);var r=e[0],i=e[1],o=e[2];return n[0]=r*t[0],n[1]=r*t[1],n[2]=r*t[2],n[3]=r*t[3],n[4]=i*t[4],n[5]=i*t[5],n[6]=i*t[6],n[7]=i*t[7],n[8]=o*t[8],n[9]=o*t[9],n[10]=o*t[10],n[11]=o*t[11],t!==n&&(n[12]=t[12],n[13]=t[13],n[14]=t[14],n[15]=t[15]),n},scaling:function(t,e){return(e=e||new F(16))[0]=t[0],e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=t[1],e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=t[2],e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},setAxis:function(t,e,n,r){r!==t&&(r=z(t,r));var i=4*n;return r[i+0]=e[0],r[i+1]=e[1],r[i+2]=e[2],r},setDefaultType:function(t){var e=F;return F=t,e},setTranslation:function(t,e,n){return t!==(n=n||B())&&(n[0]=t[0],n[1]=t[1],n[2]=t[2],n[3]=t[3],n[4]=t[4],n[5]=t[5],n[6]=t[6],n[7]=t[7],n[8]=t[8],n[9]=t[9],n[10]=t[10],n[11]=t[11]),n[12]=e[0],n[13]=e[1],n[14]=e[2],n[15]=1,n},transformDirection:j,transformNormal:function(t,e,n){n=n||D();var r=N(t),i=e[0],o=e[1],a=e[2];return n[0]=i*r[0]+o*r[1]+a*r[2],n[1]=i*r[4]+o*r[5]+a*r[6],n[2]=i*r[8]+o*r[9]+a*r[10],n},transformPoint:U,translate:function(t,e,n){n=n||new F(16);var r=e[0],i=e[1],o=e[2],a=t[0],s=t[1],u=t[2],c=t[3],l=t[4],h=t[5],f=t[6],d=t[7],p=t[8],m=t[9],g=t[10],v=t[11],y=t[12],b=t[13],_=t[14],x=t[15];return t!==n&&(n[0]=a,n[1]=s,n[2]=u,n[3]=c,n[4]=l,n[5]=h,n[6]=f,n[7]=d,n[8]=p,n[9]=m,n[10]=g,n[11]=v),n[12]=a*r+l*i+p*o+y,n[13]=s*r+h*i+m*o+b,n[14]=u*r+f*i+g*o+_,n[15]=c*r+d*i+v*o+x,n},translation:function(t,e){return(e=e||new F(16))[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=t[0],e[13]=t[1],e[14]=t[2],e[15]=1,e},transpose:function(t,e){var n;if((e=e||new F(16))===t)return n=t[1],t[1]=t[4],t[4]=n,n=t[2],t[2]=t[8],t[8]=n,n=t[3],t[3]=t[12],t[12]=n,n=t[6],t[6]=t[9],t[9]=n,n=t[7],t[7]=t[13],t[13]=n,n=t[11],t[11]=t[14],t[14]=n,e;var r=t[0],i=t[1],o=t[2],a=t[3],s=t[4],u=t[5],c=t[6],l=t[7],h=t[8],f=t[9],d=t[10],p=t[11],m=t[12],g=t[13],v=t[14],y=t[15];return e[0]=r,e[1]=s,e[2]=h,e[3]=m,e[4]=i,e[5]=u,e[6]=f,e[7]=g,e[8]=o,e[9]=c,e[10]=d,e[11]=v,e[12]=a,e[13]=l,e[14]=p,e[15]=y,e}}),V={},G=V;function W(t){if(t instanceof Int8Array)return 5120;if(t instanceof Uint8Array)return 5121;if(t instanceof Uint8ClampedArray)return 5121;if(t instanceof Int16Array)return 5122;if(t instanceof Uint16Array)return 5123;if(t instanceof Int32Array)return 5124;if(t instanceof Uint32Array)return 5125;if(t instanceof Float32Array)return 5126;throw new Error("unsupported typed array type")}G[5120]=Int8Array,G[5121]=Uint8Array,G[5122]=Int16Array,G[5123]=Uint16Array,G[5124]=Int32Array,G[5125]=Uint32Array,G[5126]=Float32Array,G[32819]=Uint16Array,G[32820]=Uint16Array,G[33635]=Uint16Array,G[5131]=Uint16Array,G[33640]=Uint32Array,G[35899]=Uint32Array,G[35902]=Uint32Array,G[36269]=Uint32Array,G[34042]=Uint32Array;var q="undefined"!=typeof SharedArrayBuffer?function(t){return t&&t.buffer&&(t.buffer instanceof ArrayBuffer||t.buffer instanceof SharedArrayBuffer)}:function(t){return t&&t.buffer&&t.buffer instanceof ArrayBuffer};function X(){var t;(t=console).error.apply(t,arguments)}function Y(){var t;(t=console).warn.apply(t,arguments)}function Z(t,e){return"undefined"!=typeof WebGLTexture&&e instanceof WebGLTexture}function J(t,e,n,r,i){t.bindBuffer(e,n),t.bufferData(e,r,i||35044)}function Q(t,e,n,r){if("undefined"!=typeof WebGLBuffer&&e instanceof WebGLBuffer)return e;n=n||34962;var i=t.createBuffer();return J(t,n,i,e,r),i}function K(t){return"indices"===t}function $(t){return t.length?t:t.data}var tt=/coord|texture/i,et=/color|colour/i;function nt(t,e){var n;if(e%(n=tt.test(t)?2:et.test(t)?4:3)>0)throw new Error("Can not guess numComponents for attribute '".concat(t,"'. Tried ").concat(n," but ").concat(e," values is not evenly divisible by ").concat(n,". You should specify it."));return n}function rt(t,e){return t.numComponents||t.size||nt(e,$(t).length)}function it(t,e){if(q(t))return t;if(q(t.data))return t.data;Array.isArray(t)&&(t={data:t});var n=t.type;return n||(n=K(e)?Uint16Array:Float32Array),new n(t.data)}var ot=["position","positions","a_position"];function at(t,e,n){var r=function(t,e){var n={};return Object.keys(e).forEach((function(r){if(!K(r)){var i=e[r],o=i.attrib||i.name||i.attribName||""+r;if(i.value){if(!Array.isArray(i.value)&&!q(i.value))throw new Error("array.value is not array or typedarray");n[o]={value:i.value}}else{var a,s,u,c;if(i.buffer&&i.buffer instanceof WebGLBuffer)a=i.buffer,c=i.numComponents||i.size,s=i.type,u=i.normalize;else if("number"==typeof i||"number"==typeof i.data){var l=i.data||i,h=i.type||Float32Array,f=l*h.BYTES_PER_ELEMENT;s=function(t){if(t===Int8Array)return 5120;if(t===Uint8Array)return 5121;if(t===Uint8ClampedArray)return 5121;if(t===Int16Array)return 5122;if(t===Uint16Array)return 5123;if(t===Int32Array)return 5124;if(t===Uint32Array)return 5125;if(t===Float32Array)return 5126;throw new Error("unsupported typed array type")}(h),u=void 0!==i.normalize?i.normalize:(p=h)===Int8Array||p===Uint8Array,c=i.numComponents||i.size||nt(r,l),a=t.createBuffer(),t.bindBuffer(34962,a),t.bufferData(34962,f,i.drawType||35044)}else{var d=it(i,r);a=Q(t,d,void 0,i.drawType),s=W(d),u=void 0!==i.normalize?i.normalize:function(t){return t instanceof Int8Array||t instanceof Uint8Array}(d),c=rt(i,r)}n[o]={buffer:a,numComponents:c,type:s,normalize:u,stride:i.stride||0,offset:i.offset||0,divisor:void 0===i.divisor?void 0:i.divisor,drawType:i.drawType}}}var p})),t.bindBuffer(34962,null),n}(t,e),i=Object.assign({},n||{});i.attribs=Object.assign({},n?n.attribs:{},r);var o=e.indices;if(o){var a=it(o,"indices");i.indices=Q(t,a,34963),i.numElements=a.length,i.elementType=W(a)}else i.numElements||(i.numElements=function(t,e){var n,r;for(r=0;r<ot.length&&!((n=ot[r])in e)&&!((n=""+n)in e);++r);r===ot.length&&(n=Object.keys(e)[0]);var i=e[n];t.bindBuffer(34962,i.buffer);var o=t.getBufferParameter(34962,34660);t.bindBuffer(34962,null);var a,s=o/(5120===(a=i.type)||5121===a?1:5122===a||5123===a?2:5124===a||5125===a||5126===a?4:0),u=i.numComponents||i.size,c=s/u;if(c%1!=0)throw new Error("numComponents ".concat(u," not correct for length ").concat(length));return c}(t,i.attribs));return i}function st(t,e){var n={};return Object.keys(e).forEach((function(r){n[r]=function(t,e,n){var r="indices"===n?34963:34962;return Q(t,it(e,n),r)}(t,e[r],r)})),e.indices?(n.numElements=e.indices.length,n.elementType=W(it(e.indices))):n.numElements=function(t){var e,n;for(n=0;n<ot.length&&!((e=ot[n])in t);++n);n===ot.length&&(e=Object.keys(t)[0]);var r=t[e],i=$(r).length,o=rt(r,e),a=i/o;if(i%o>0)throw new Error("numComponents ".concat(o," not correct for length ").concat(i));return a}(e),n}var ut=$,ct=rt;function lt(t,e){var n=0;return t.push=function(){for(var e=0;e<arguments.length;++e){var r=arguments[e];if(r instanceof Array||q(r))for(var i=0;i<r.length;++i)t[n++]=r[i];else t[n++]=r}},t.reset=function(t){n=t||0},t.numComponents=e,Object.defineProperty(t,"numElements",{get:function(){return this.length/this.numComponents|0}}),t}function ht(t,e,n){return lt(new(n||Float32Array)(t*e),t)}function ft(t){return"indices"!==t}function dt(t,e,n){for(var r=t.length,i=new Float32Array(3),o=0;o<r;o+=3)n(e,[t[o],t[o+1],t[o+2]],i),t[o]=i[0],t[o+1]=i[1],t[o+2]=i[2]}function pt(t,e,n){n=n||D();var r=e[0],i=e[1],o=e[2];return n[0]=r*t[0]+i*t[1]+o*t[2],n[1]=r*t[4]+i*t[5]+o*t[6],n[2]=r*t[8]+i*t[9]+o*t[10],n}function mt(t,e){return dt(t,e,j),t}function gt(t,e){return dt(t,N(e),pt),t}function vt(t,e){return dt(t,e,U),t}function yt(t,e){return Object.keys(t).forEach((function(n){var r=t[n];n.indexOf("pos")>=0?vt(r,e):n.indexOf("tan")>=0||n.indexOf("binorm")>=0?mt(r,e):n.indexOf("norm")>=0&&gt(r,e)})),t}function bt(t,e,n){return t=t||2,{position:{numComponents:2,data:[(e=e||0)+-1*(t*=.5),(n=n||0)+-1*t,e+1*t,n+-1*t,e+-1*t,n+1*t,e+1*t,n+1*t]},normal:[0,0,1,0,0,1,0,0,1,0,0,1],texcoord:[0,0,1,0,0,1,1,1],indices:[0,1,2,2,1,3]}}function _t(t,e,n,r,i){t=t||1,e=e||1,n=n||1,r=r||1,i=i||B();for(var o=(n+1)*(r+1),a=ht(3,o),s=ht(3,o),u=ht(2,o),c=0;c<=r;c++)for(var l=0;l<=n;l++){var h=l/n,f=c/r;a.push(t*h-.5*t,0,e*f-.5*e),s.push(0,1,0),u.push(h,f)}for(var d=n+1,p=ht(3,n*r*2,Uint16Array),m=0;m<r;m++)for(var g=0;g<n;g++)p.push((m+0)*d+g,(m+1)*d+g,(m+0)*d+g+1),p.push((m+1)*d+g,(m+1)*d+g+1,(m+0)*d+g+1);return yt({position:a,normal:s,texcoord:u,indices:p},i)}function xt(t,e,n,r,i,o,a){if(e<=0||n<=0)throw new Error("subdivisionAxis and subdivisionHeight must be > 0");r=r||0,o=o||0;for(var s=(i=i||Math.PI)-r,u=(a=a||2*Math.PI)-o,c=(e+1)*(n+1),l=ht(3,c),h=ht(3,c),f=ht(2,c),d=ht(3,c),p=ht(3,c),m=0;m<=n;m++)for(var g=0;g<=e;g++){var v=g/e,y=m/n,b=u*v+o,_=s*y+r,x=Math.sin(b),w=Math.cos(b),S=Math.sin(_),E=w*S,T=Math.cos(_),M=x*S,A=u*((g+1)/e)+o,L=s*(m/n)+r,D=Math.sin(A),C=Math.cos(A),P=Math.sin(L),R=Math.cos(L);d.push(C*P-E,R-T,D*P-M);var k=u*(g/e)+o,O=s*((m+1)/n)+r,I=Math.sin(k),F=Math.cos(k),z=Math.sin(O),B=F*z-E,N=Math.cos(O)-T,U=I*z-M;l.push(t*E,t*T,t*M),h.push(E,T,M),f.push(1-v,y),p.push(B,N,U)}for(var j=e+1,H=ht(3,e*n*2,Uint16Array),V=0;V<e;V++)for(var G=0;G<n;G++)H.push((G+0)*j+V,(G+0)*j+V+1,(G+1)*j+V),H.push((G+1)*j+V,(G+0)*j+V+1,(G+1)*j+V+1);return{position:l,normal:h,texcoord:f,indices:H,tangent:d,bitangent:p}}var wt=[[3,7,5,1],[6,2,0,4],[6,7,3,2],[0,1,5,4],[7,6,4,5],[2,3,1,0]];function St(t){for(var e=(t=t||1)/2,n=[[-e,-e,-e],[+e,-e,-e],[-e,+e,-e],[+e,+e,-e],[-e,-e,+e],[+e,-e,+e],[-e,+e,+e],[+e,+e,+e]],r=[[1,0,0],[-1,0,0],[0,1,0],[0,-1,0],[0,0,1],[0,0,-1]],i=[[1,0],[0,0],[0,1],[1,1]],o=ht(3,24),a=ht(3,24),s=ht(2,24),u=ht(3,12,Uint16Array),c=0;c<6;++c){for(var l=wt[c],h=0;h<4;++h){var f=n[l[h]],d=r[c],p=i[h];o.push(f),a.push(d),s.push(p)}var m=4*c;u.push(m+0,m+1,m+2),u.push(m+0,m+2,m+3)}return{position:o,normal:a,texcoord:s,indices:u}}function Et(t,e,n,r,i,o,a){if(r<3)throw new Error("radialSubdivisions must be 3 or greater");if(i<1)throw new Error("verticalSubdivisions must be 1 or greater");for(var s=void 0===o||o,u=void 0===a||a,c=(s?2:0)+(u?2:0),l=(r+1)*(i+1+c),h=ht(3,l),f=ht(3,l),d=ht(2,l),p=ht(3,r*(i+c/2)*2,Uint16Array),m=r+1,g=Math.atan2(t-e,n),v=Math.cos(g),y=Math.sin(g),b=i+(u?2:0),_=s?-2:0;_<=b;++_){var x=_/i,w=n*x,S=void 0;_<0?(w=0,x=1,S=t):_>i?(w=n,x=1,S=e):S=t+_/i*(e-t),-2!==_&&_!==i+2||(S=0,x=0),w-=n/2;for(var E=0;E<m;++E){var T=Math.sin(E*Math.PI*2/r),M=Math.cos(E*Math.PI*2/r);h.push(T*S,w,M*S),_<0?f.push(0,-1,0):_>i?f.push(0,1,0):0===S?f.push(0,0,0):f.push(T*v,y,M*v),d.push(E/r,1-x)}}for(var A=0;A<i+c;++A)if(!(1===A&&s||A===i+c-2&&u))for(var L=0;L<r;++L)p.push(m*(A+0)+0+L,m*(A+0)+1+L,m*(A+1)+1+L),p.push(m*(A+0)+0+L,m*(A+1)+1+L,m*(A+1)+0+L);return{position:h,normal:f,texcoord:d,indices:p}}function Tt(t,e){e=e||[];for(var n=[],r=0;r<t.length;r+=4){var i=t[r],o=t.slice(r+1,r+4);o.push.apply(o,e);for(var a=0;a<i;++a)n.push.apply(n,o)}return n}function Mt(){var t=[0,0,0,0,150,0,30,0,0,0,150,0,30,150,0,30,0,0,30,0,0,30,30,0,100,0,0,30,30,0,100,30,0,100,0,0,30,60,0,30,90,0,67,60,0,30,90,0,67,90,0,67,60,0,0,0,30,30,0,30,0,150,30,0,150,30,30,0,30,30,150,30,30,0,30,100,0,30,30,30,30,30,30,30,100,0,30,100,30,30,30,60,30,67,60,30,30,90,30,30,90,30,67,60,30,67,90,30,0,0,0,100,0,0,100,0,30,0,0,0,100,0,30,0,0,30,100,0,0,100,30,0,100,30,30,100,0,0,100,30,30,100,0,30,30,30,0,30,30,30,100,30,30,30,30,0,100,30,30,100,30,0,30,30,0,30,60,30,30,30,30,30,30,0,30,60,0,30,60,30,30,60,0,67,60,30,30,60,30,30,60,0,67,60,0,67,60,30,67,60,0,67,90,30,67,60,30,67,60,0,67,90,0,67,90,30,30,90,0,30,90,30,67,90,30,30,90,0,67,90,30,67,90,0,30,90,0,30,150,30,30,90,30,30,90,0,30,150,0,30,150,30,0,150,0,0,150,30,30,150,30,0,150,0,30,150,30,30,150,0,0,0,0,0,0,30,0,150,30,0,0,0,0,150,30,0,150,0],e=Tt([18,0,0,1,18,0,0,-1,6,0,1,0,6,1,0,0,6,0,-1,0,6,1,0,0,6,0,1,0,6,1,0,0,6,0,-1,0,6,1,0,0,6,0,-1,0,6,-1,0,0]),n=Tt([18,200,70,120,18,80,70,200,6,70,200,210,6,200,200,70,6,210,100,70,6,210,160,70,6,70,180,210,6,100,70,210,6,76,210,100,6,140,210,80,6,90,130,110,6,160,160,220],[255]),r=t.length/3,i={position:ht(3,r),texcoord:ht(2,r),normal:ht(3,r),color:ht(4,r,Uint8Array),indices:ht(3,r/3,Uint16Array)};i.position.push(t),i.texcoord.push([.22,.19,.22,.79,.34,.19,.22,.79,.34,.79,.34,.19,.34,.19,.34,.31,.62,.19,.34,.31,.62,.31,.62,.19,.34,.43,.34,.55,.49,.43,.34,.55,.49,.55,.49,.43,0,0,1,0,0,1,0,1,1,0,1,1,0,0,1,0,0,1,0,1,1,0,1,1,0,0,1,0,0,1,0,1,1,0,1,1,0,0,1,0,1,1,0,0,1,1,0,1,0,0,1,0,1,1,0,0,1,1,0,1,0,0,0,1,1,1,0,0,1,1,1,0,0,0,1,1,0,1,0,0,1,0,1,1,0,0,1,1,0,1,0,0,1,0,1,1,0,0,1,1,0,1,0,0,1,0,1,1,0,0,0,1,1,1,0,0,1,1,1,0,0,0,1,1,0,1,0,0,1,0,1,1,0,0,0,1,1,1,0,0,1,1,1,0,0,0,0,1,1,1,0,0,1,1,1,0]),i.normal.push(e),i.color.push(n);for(var o=0;o<r;++o)i.indices.push(o);return i}function At(t,e,n,r,i,o,a){if(i<=0)throw new Error("subdivisionDown must be > 0");var s=(a=a||1)-(o=o||0),u=2*(i+1)*4,c=ht(3,u),l=ht(3,u),h=ht(2,u);function f(t,e,n){return t+(e-t)*n}function d(e,n,a,u,d,p){for(var m=0;m<=i;m++){var g=n/1,v=m/i,y=2*(g-.5),b=(o+v*s)*Math.PI,_=Math.sin(b),x=Math.cos(b),w=f(t,e,_),S=y*r,E=x*t,T=_*w;c.push(S,E,T);var M=C((A=[0,_,x],D=a,(P=(P=void 0)||new L(3))[0]=A[0]*D[0],P[1]=A[1]*D[1],P[2]=A[2]*D[2],P),u);l.push(M),h.push(g*d+p,v)}var A,D,P}for(var p=0;p<2;p++){var m=2*(p/1-.5);d(e,p,[1,1,1],[0,0,0],1,0),d(e,p,[0,0,0],[m,0,0],0,0),d(n,p,[1,1,1],[0,0,0],1,0),d(n,p,[0,0,0],[m,0,0],0,1)}var g=ht(3,2*i*4,Uint16Array);function v(t,e){for(var n=0;n<i;++n)g.push(t+n+0,t+n+1,e+n+0),g.push(t+n+1,e+n+1,e+n+0)}var y=i+1;return v(0*y,4*y),v(5*y,7*y),v(6*y,2*y),v(3*y,1*y),{position:c,normal:l,texcoord:h,indices:g}}function Lt(t,e,n,r,i,o){return Et(t,t,e,n,r,i,o)}function Dt(t,e,n,r,i,o){if(n<3)throw new Error("radialSubdivisions must be 3 or greater");if(r<3)throw new Error("verticalSubdivisions must be 3 or greater");i=i||0;for(var a=(o=o||2*Math.PI)-i,s=n+1,u=r+1,c=s*u,l=ht(3,c),h=ht(3,c),f=ht(2,c),d=ht(3,n*r*2,Uint16Array),p=0;p<u;++p)for(var m=p/r,g=m*Math.PI*2,v=Math.sin(g),y=t+v*e,b=Math.cos(g),_=b*e,x=0;x<s;++x){var w=x/n,S=i+w*a,E=Math.sin(S),T=Math.cos(S),M=E*y,A=T*y,L=E*v,D=T*v;l.push(M,_,A),h.push(L,b,D),f.push(w,1-m)}for(var C=0;C<r;++C)for(var P=0;P<n;++P){var R=1+P,k=1+C;d.push(s*C+P,s*k+P,s*C+R),d.push(s*k+P,s*k+R,s*C+R)}return{position:l,normal:h,texcoord:f,indices:d}}function Ct(t,e,n,r,i){if(e<3)throw new Error("divisions must be at least 3");i=i||1,r=r||0;for(var o=(e+1)*((n=n||1)+1),a=ht(3,o),s=ht(3,o),u=ht(2,o),c=ht(3,n*e*2,Uint16Array),l=0,h=t-r,f=e+1,d=0;d<=n;++d){for(var p=r+h*Math.pow(d/n,i),m=0;m<=e;++m){var g=2*Math.PI*m/e,v=p*Math.cos(g),y=p*Math.sin(g);if(a.push(v,0,y),s.push(0,1,0),u.push(1-m/e,d/n),d>0&&m!==e){var b=l+(m+1),_=l+m,x=l+m-f,w=l+(m+1)-f;c.push(b,_,x),c.push(b,x,w)}}l+=e+1}return{position:a,normal:s,texcoord:u,indices:c}}function Pt(t){return function(e){var n=t.apply(this,Array.prototype.slice.call(arguments,1));return st(e,n)}}function Rt(t){return function(e){var n=t.apply(null,Array.prototype.slice.call(arguments,1));return at(e,n)}}var kt=["numComponents","size","type","normalize","stride","offset","attrib","name","attribName"];function Ot(t,e,n,r){r=r||0;for(var i=t.length,o=0;o<i;++o)e[n+o]=t[o]+r}function It(t,e){var n,r,i=ut(t),o=new i.constructor(e),a=o;return i.numComponents&&i.numElements&&lt(o,i.numComponents),t.data&&(n=t,r=a={data:o},kt.forEach((function(t){var e=n[t];void 0!==e&&(r[t]=e)}))),a}var Ft=Rt(Mt),zt=Pt(Mt),Bt=Rt(St),Nt=Pt(St),Ut=Rt(_t),jt=Pt(_t),Ht=Rt(xt),Vt=Pt(xt),Gt=Rt(Et),Wt=Pt(Et),qt=Rt(bt),Xt=Pt(bt),Yt=Rt(At),Zt=Pt(At),Jt=Rt(Lt),Qt=Pt(Lt),Kt=Rt(Dt),$t=Pt(Dt),te=Rt(Ct),ee=Pt(Ct),ne=Yt,re=Zt,ie=At,oe=Object.freeze({__proto__:null,create3DFBufferInfo:Ft,create3DFBuffers:zt,create3DFVertices:Mt,createAugmentedTypedArray:ht,createCubeBufferInfo:Bt,createCubeBuffers:Nt,createCubeVertices:St,createPlaneBufferInfo:Ut,createPlaneBuffers:jt,createPlaneVertices:_t,createSphereBufferInfo:Ht,createSphereBuffers:Vt,createSphereVertices:xt,createTruncatedConeBufferInfo:Gt,createTruncatedConeBuffers:Wt,createTruncatedConeVertices:Et,createXYQuadBufferInfo:qt,createXYQuadBuffers:Xt,createXYQuadVertices:bt,createCresentBufferInfo:ne,createCresentBuffers:re,createCresentVertices:ie,createCrescentBufferInfo:Yt,createCrescentBuffers:Zt,createCrescentVertices:At,createCylinderBufferInfo:Jt,createCylinderBuffers:Qt,createCylinderVertices:Lt,createTorusBufferInfo:Kt,createTorusBuffers:$t,createTorusVertices:Dt,createDiscBufferInfo:te,createDiscBuffers:ee,createDiscVertices:Ct,deindexVertices:function(t){var e=t.indices,n={},r=e.length;return Object.keys(t).filter(ft).forEach((function(i){for(var o=t[i],a=o.numComponents,s=ht(a,r,o.constructor),u=0;u<r;++u)for(var c=e[u]*a,l=0;l<a;++l)s.push(o[c+l]);n[i]=s})),n},flattenNormals:function(t){if(t.indices)throw new Error("can not flatten normals of indexed vertices. deindex them first");for(var e=t.normal,n=e.length,r=0;r<n;r+=9){var i=e[r+0],o=e[r+1],a=e[r+2],s=e[r+3],u=e[r+4],c=e[r+5],l=i+s+e[r+6],h=o+u+e[r+7],f=a+c+e[r+8],d=Math.sqrt(l*l+h*h+f*f);l/=d,h/=d,f/=d,e[r+0]=l,e[r+1]=h,e[r+2]=f,e[r+3]=l,e[r+4]=h,e[r+5]=f,e[r+6]=l,e[r+7]=h,e[r+8]=f}return t},makeRandomVertexColors:function(t,e){e=e||{};var n=t.position.numElements,r=ht(4,n,Uint8Array),i=e.rand||function(t,e){return e<3?(256,256*Math.random()|0):255};if(t.color=r,t.indices)for(var o=0;o<n;++o)r.push(i(o,0),i(o,1),i(o,2),i(o,3));else for(var a=e.vertsPerColor||3,s=n/a,u=0;u<s;++u)for(var c=[i(u,0),i(u,1),i(u,2),i(u,3)],l=0;l<a;++l)r.push(c);return t},reorientDirections:mt,reorientNormals:gt,reorientPositions:vt,reorientVertices:yt,concatVertices:function(t){for(var e,n={},r=function(r){var i=t[r];Object.keys(i).forEach((function(t){n[t]||(n[t]=[]),e||"indices"===t||(e=t);var r=i[t],o=ct(r,t),a=ut(r).length/o;n[t].push(a)}))},i=0;i<t.length;++i)r(i);var o=n[e],a={};return Object.keys(n).forEach((function(e){var n=function(e){for(var n,r=0,i=0;i<t.length;++i){var o=t[i][e];r+=ut(o).length,n&&!o.data||(n=o)}return{length:r,spec:n}}(e),r=It(n.spec,n.length);!function(e,n,r){for(var i=0,o=0,a=0;a<t.length;++a){var s=t[a][e],u=ut(s);"indices"===e?(Ot(u,r,o,i),i+=n[a]):Ot(u,r,o),o+=u.length}}(e,o,ut(r)),a[e]=r})),a},duplicateVertices:function(t){var e={};return Object.keys(t).forEach((function(n){var r=t[n],i=ut(r),o=It(r,i.length);Ot(i,ut(o),0),e[n]=o})),e}});function ae(t){return!!t.texStorage2D}function se(t){return!t.texStorage2D}var ue,ce,le,he=(ue={},ce={},function(t,e){return function(t){var e=t.constructor.name;if(!ue[e]){for(var n in t)if("number"==typeof t[n]){var r=ce[t[n]];ce[t[n]]=r?"".concat(r," | ").concat(n):n}ue[e]=!0}}(t),ce[e]||"0x"+e.toString(16)}),fe={textureColor:new Uint8Array([128,192,255,255]),textureOptions:{},crossOrigin:void 0},de=q;function pe(){return le=le||("undefined"!=typeof document&&document.createElement?document.createElement("canvas").getContext("2d"):null)}var me,ge=6407,ve=33319,ye={6406:{numColorComponents:1},6409:{numColorComponents:1},6410:{numColorComponents:2},6407:{numColorComponents:3},6408:{numColorComponents:4},6403:{numColorComponents:1},36244:{numColorComponents:1},33319:{numColorComponents:2},33320:{numColorComponents:2}};function be(t){if(!me){var e={6406:{textureFormat:6406,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[1,2,2,4],type:[5121,5131,36193,5126]},6409:{textureFormat:6409,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[1,2,2,4],type:[5121,5131,36193,5126]},6410:{textureFormat:6410,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[2,4,4,8],type:[5121,5131,36193,5126]}};e[ge]={textureFormat:ge,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[3,6,6,12,2],type:[5121,5131,36193,5126,33635]},e[6408]={textureFormat:6408,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[4,8,8,16,2,2],type:[5121,5131,36193,5126,32819,32820]},e[33321]={textureFormat:6403,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[1],type:[5121]},e[36756]={textureFormat:6403,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[1],type:[5120]},e[33325]={textureFormat:6403,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[4,2],type:[5126,5131]},e[33326]={textureFormat:6403,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[4],type:[5126]},e[33330]={textureFormat:36244,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[1],type:[5121]},e[33329]={textureFormat:36244,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[1],type:[5120]},e[33332]={textureFormat:36244,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[2],type:[5123]},e[33331]={textureFormat:36244,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[2],type:[5122]},e[33334]={textureFormat:36244,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[5125]},e[33333]={textureFormat:36244,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[5124]},e[33323]={textureFormat:ve,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[2],type:[5121]},e[36757]={textureFormat:ve,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[2],type:[5120]},e[33327]={textureFormat:ve,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[8,4],type:[5126,5131]},e[33328]={textureFormat:ve,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[8],type:[5126]},e[33336]={textureFormat:33320,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[2],type:[5121]},e[33335]={textureFormat:33320,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[2],type:[5120]},e[33338]={textureFormat:33320,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[5123]},e[33337]={textureFormat:33320,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[5122]},e[33340]={textureFormat:33320,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[8],type:[5125]},e[33339]={textureFormat:33320,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[8],type:[5124]},e[32849]={textureFormat:ge,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[3],type:[5121]},e[35905]={textureFormat:ge,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[3],type:[5121]},e[36194]={textureFormat:ge,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[3,2],type:[5121,33635]},e[36758]={textureFormat:ge,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[3],type:[5120]},e[35898]={textureFormat:ge,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[12,6,4],type:[5126,5131,35899]},e[35901]={textureFormat:ge,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[12,6,4],type:[5126,5131,35902]},e[34843]={textureFormat:ge,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[12,6],type:[5126,5131]},e[34837]={textureFormat:ge,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[12],type:[5126]},e[36221]={textureFormat:36248,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[3],type:[5121]},e[36239]={textureFormat:36248,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[3],type:[5120]},e[36215]={textureFormat:36248,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[6],type:[5123]},e[36233]={textureFormat:36248,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[6],type:[5122]},e[36209]={textureFormat:36248,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[12],type:[5125]},e[36227]={textureFormat:36248,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[12],type:[5124]},e[32856]={textureFormat:6408,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[4],type:[5121]},e[35907]={textureFormat:6408,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[4],type:[5121]},e[36759]={textureFormat:6408,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[4],type:[5120]},e[32855]={textureFormat:6408,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[4,2,4],type:[5121,32820,33640]},e[32854]={textureFormat:6408,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[4,2],type:[5121,32819]},e[32857]={textureFormat:6408,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[4],type:[33640]},e[34842]={textureFormat:6408,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[16,8],type:[5126,5131]},e[34836]={textureFormat:6408,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[16],type:[5126]},e[36220]={textureFormat:36249,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[5121]},e[36238]={textureFormat:36249,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[5120]},e[36975]={textureFormat:36249,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[33640]},e[36214]={textureFormat:36249,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[8],type:[5123]},e[36232]={textureFormat:36249,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[8],type:[5122]},e[36226]={textureFormat:36249,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[16],type:[5124]},e[36208]={textureFormat:36249,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[16],type:[5125]},e[33189]={textureFormat:6402,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[2,4],type:[5123,5125]},e[33190]={textureFormat:6402,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[5125]},e[36012]={textureFormat:6402,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[5126]},e[35056]={textureFormat:34041,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[34042]},e[36013]={textureFormat:34041,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[36269]},Object.keys(e).forEach((function(t){var n=e[t];n.bytesPerElementMap={},n.bytesPerElement.forEach((function(t,e){var r=n.type[e];n.bytesPerElementMap[r]=t}))})),me=e}return me[t]}function _e(t){var e=be(t);if(!e)throw"unknown internal format";return{format:e.textureFormat,type:e.type[0]}}function xe(t){return 0==(t&t-1)}function we(t,e,n,r,i){if(i%1!=0)throw"can't guess dimensions";if(n||r){if(r){if(!n&&(n=i/r)%1)throw"can't guess dimensions"}else if((r=i/n)%1)throw"can't guess dimensions"}else{var o=Math.sqrt(i/(34067===e?6:1));o%1==0?(n=o,r=o):(n=i,r=1)}return{width:n,height:r}}ye[ge]={numColorComponents:3},ye[36248]={numColorComponents:3},ye[6408]={numColorComponents:4},ye[36249]={numColorComponents:4},ye[6402]={numColorComponents:1},ye[34041]={numColorComponents:2};var Se={};function Ee(t,e){void 0!==e.colorspaceConversion&&(Se.colorspaceConversion=t.getParameter(37443),t.pixelStorei(37443,e.colorspaceConversion)),void 0!==e.premultiplyAlpha&&(Se.premultiplyAlpha=t.getParameter(37441),t.pixelStorei(37441,e.premultiplyAlpha)),void 0!==e.flipY&&(Se.flipY=t.getParameter(37440),t.pixelStorei(37440,e.flipY))}function Te(t,e){void 0!==e.colorspaceConversion&&t.pixelStorei(37443,Se.colorspaceConversion),void 0!==e.premultiplyAlpha&&t.pixelStorei(37441,Se.premultiplyAlpha),void 0!==e.flipY&&t.pixelStorei(37440,Se.flipY)}function Me(t){Se.unpackAlignment=t.getParameter(3317),ae(t)&&(Se.unpackRowLength=t.getParameter(3314),Se.unpackImageHeight=t.getParameter(32878),Se.unpackSkipPixels=t.getParameter(3316),Se.unpackSkipRows=t.getParameter(3315),Se.unpackSkipImages=t.getParameter(32877))}function Ae(t){t.pixelStorei(3317,Se.unpackAlignment),ae(t)&&(t.pixelStorei(3314,Se.unpackRowLength),t.pixelStorei(32878,Se.unpackImageHeight),t.pixelStorei(3316,Se.unpackSkipPixels),t.pixelStorei(3315,Se.unpackSkipRows),t.pixelStorei(32877,Se.unpackSkipImages))}function Le(t,e,n){var r=n.target||3553;t.bindTexture(r,e),function(t,e,n,r){r.minMag&&(n.call(t,e,10241,r.minMag),n.call(t,e,10240,r.minMag)),r.min&&n.call(t,e,10241,r.min),r.mag&&n.call(t,e,10240,r.mag),r.wrap&&(n.call(t,e,10242,r.wrap),n.call(t,e,10243,r.wrap),(32879===e||"undefined"!=typeof WebGLSampler&&e instanceof WebGLSampler)&&n.call(t,e,32882,r.wrap)),r.wrapR&&n.call(t,e,32882,r.wrapR),r.wrapS&&n.call(t,e,10242,r.wrapS),r.wrapT&&n.call(t,e,10243,r.wrapT),r.minLod&&n.call(t,e,33082,r.minLod),r.maxLod&&n.call(t,e,33083,r.maxLod),r.baseLevel&&n.call(t,e,33084,r.baseLevel),r.maxLevel&&n.call(t,e,33085,r.maxLevel)}(t,r,t.texParameteri,n)}function De(t,e,n,r,i,o){o=o||6408;var a=(n=n||fe.textureOptions).target||3553;if(r=r||n.width,i=i||n.height,t.bindTexture(a,e),function(t,e,n,r){if(!ae(t))return xe(e)&&xe(n);var i=be(r);if(!i)throw"unknown internal format";return i.colorRenderable&&i.textureFilterable}(t,r,i,o))t.generateMipmap(a);else{var s=function(t){var e=be(t);if(!e)throw"unknown internal format";return e.textureFilterable}(o)?9729:9728;t.texParameteri(a,10241,s),t.texParameteri(a,10240,s),t.texParameteri(a,10242,33071),t.texParameteri(a,10243,33071)}}function Ce(t){return!0===t.auto||void 0===t.auto&&void 0===t.level}function Pe(t,e){return(e=e||{}).cubeFaceOrder||[34069,34070,34071,34072,34073,34074]}function Re(t,e){var n=Pe(0,e).map((function(t,e){return{face:t,ndx:e}}));return n.sort((function(t,e){return t.face-e.face})),n}function ke(t,e,n,r){var i=(r=r||fe.textureOptions).target||3553,o=r.level||0,a=n.width,s=n.height,u=r.internalFormat||r.format||6408,c=_e(u),l=r.format||c.format,h=r.type||c.type;if(Ee(t,r),t.bindTexture(i,e),34067===i){var f,d,p=n.width,m=n.height;if(p/6===m)f=m,d=[0,0,1,0,2,0,3,0,4,0,5,0];else if(m/6===p)f=p,d=[0,0,0,1,0,2,0,3,0,4,0,5];else if(p/3==m/2)f=p/3,d=[0,0,1,0,2,0,0,1,1,1,2,1];else{if(p/2!=m/3)throw"can't figure out cube map from element: "+(n.src?n.src:n.nodeName);f=p/2,d=[0,0,1,0,0,1,1,1,0,2,1,2]}var g=pe();g?(g.canvas.width=f,g.canvas.height=f,a=f,s=f,Re(0,r).forEach((function(e){var r=d[2*e.ndx+0]*f,i=d[2*e.ndx+1]*f;g.drawImage(n,r,i,f,f,0,0,f,f),t.texImage2D(e.face,o,u,l,h,g.canvas)})),g.canvas.width=1,g.canvas.height=1):"undefined"!=typeof createImageBitmap&&(a=f,s=f,Re(0,r).forEach((function(c){var p=d[2*c.ndx+0]*f,m=d[2*c.ndx+1]*f;t.texImage2D(c.face,o,u,f,f,0,l,h,null),createImageBitmap(n,p,m,f,f,{premultiplyAlpha:"none",colorSpaceConversion:"none"}).then((function(n){Ee(t,r),t.bindTexture(i,e),t.texImage2D(c.face,o,u,l,h,n),Te(t,r),Ce(r)&&De(t,e,r,a,s,u)}))})))}else if(32879===i||35866===i){var v=Math.min(n.width,n.height),y=Math.max(n.width,n.height),b=y/v;if(b%1!=0)throw"can not compute 3D dimensions of element";var _=n.width===y?1:0,x=n.height===y?1:0;Me(t),t.pixelStorei(3317,1),t.pixelStorei(3314,n.width),t.pixelStorei(32878,0),t.pixelStorei(32877,0),t.texImage3D(i,o,u,v,v,v,0,l,h,null);for(var w=0;w<b;++w){var S=w*v*_,E=w*v*x;t.pixelStorei(3316,S),t.pixelStorei(3315,E),t.texSubImage3D(i,o,0,0,w,v,v,1,l,h,n)}Ae(t)}else t.texImage2D(i,o,u,l,h,n);Te(t,r),Ce(r)&&De(t,e,r,a,s,u),Le(t,e,r)}function Oe(){}function Ie(t){return"undefined"!=typeof ImageBitmap&&t instanceof ImageBitmap||"undefined"!=typeof ImageData&&t instanceof ImageData||"undefined"!=typeof HTMLElement&&t instanceof HTMLElement}function Fe(t,e,n){return Ie(t)?(setTimeout((function(){n(null,t)})),t):function(t,e,n){var r;if(n=n||Oe,e=function(t,e){return void 0!==e||function(t){if("undefined"!=typeof document){var e=document.createElement("a");return e.href=t,e.hostname===location.hostname&&e.port===location.port&&e.protocol===location.protocol}var n=new URL(location.href).origin;return new URL(t,location.href).origin===n}(t)?e:"anonymous"}(t,e=void 0!==e?e:fe.crossOrigin),"undefined"!=typeof Image){r=new Image,void 0!==e&&(r.crossOrigin=e);var i=function(){r.removeEventListener("error",o),r.removeEventListener("load",a),r=null},o=function(){var e="couldn't load image: "+t;X(e),n(e,r),i()},a=function(){n(null,r),i()};return r.addEventListener("error",o),r.addEventListener("load",a),r.src=t,r}if("undefined"!=typeof ImageBitmap){var s,u,c=function(){n(s,u)},l={};e&&(l.mode="cors"),fetch(t,l).then((function(t){if(!t.ok)throw t;return t.blob()})).then((function(t){return createImageBitmap(t,{premultiplyAlpha:"none",colorSpaceConversion:"none"})})).then((function(t){u=t,setTimeout(c)})).catch((function(t){s=t,setTimeout(c)})),r=null}return r}(t,e,n)}function ze(t,e,n){var r=(n=n||fe.textureOptions).target||3553;if(t.bindTexture(r,e),!1!==n.color){var i=function(t){return de(t=t||fe.textureColor)?t:new Uint8Array([255*t[0],255*t[1],255*t[2],255*t[3]])}(n.color);if(34067===r)for(var o=0;o<6;++o)t.texImage2D(34069+o,0,6408,1,1,0,6408,5121,i);else 32879===r||35866===r?t.texImage3D(r,0,6408,1,1,1,0,6408,5121,i):t.texImage2D(r,0,6408,1,1,0,6408,5121,i)}}function Be(t,e,n){n=n||Oe,e=e||fe.textureOptions;var r=t.createTexture(),i=e.target||3553,o=e.width||1,a=e.height||1,s=e.internalFormat||6408;t.bindTexture(i,r),34067===i&&(t.texParameteri(i,10242,33071),t.texParameteri(i,10243,33071));var u=e.src;if(u)if("function"==typeof u&&(u=u(t,e)),"string"==typeof u)!function(t,e,n,r){r=r||Oe,ze(t,e,n=n||fe.textureOptions),Fe((n=Object.assign({},n)).src,n.crossOrigin,(function(i,o){i?r(i,e,o):(ke(t,e,o,n),r(null,e,o))}))}(t,r,e,n);else if(de(u)||Array.isArray(u)&&("number"==typeof u[0]||Array.isArray(u[0])||de(u[0]))){var c=function(t,e,n,r){var i=(r=r||fe.textureOptions).target||3553;t.bindTexture(i,e);var o=r.width,a=r.height,s=r.depth,u=r.level||0,c=r.internalFormat||r.format||6408,l=_e(c),h=r.format||l.format,f=r.type||function(t,e,n){return de(e)?W(e):n||5121}(0,n,l.type);if(de(n))n instanceof Uint8ClampedArray&&(n=new Uint8Array(n.buffer));else{var d=function(t){var e=V[t];if(!e)throw new Error("unknown gl type");return e}(f);n=new d(n)}var p,m=function(t,e){var n=be(t);if(!n)throw"unknown internal format";var r=n.bytesPerElementMap[e];if(void 0===r)throw"unknown internal format";return r}(c,f),g=n.byteLength/m;if(g%1)throw"length wrong size for format: "+he(t,h);if(32879===i||35866===i)if(o||a||s)!o||a&&s?!a||o&&s?(p=we(0,i,o,a,g/s),o=p.width,a=p.height):(p=we(0,i,o,s,g/a),o=p.width,s=p.height):(p=we(0,i,a,s,g/o),a=p.width,s=p.height);else{var v=Math.cbrt(g);if(v%1!=0)throw"can't guess cube size of array of numElements: "+g;o=v,a=v,s=v}else p=we(0,i,o,a,g),o=p.width,a=p.height;if(Me(t),t.pixelStorei(3317,r.unpackAlignment||1),Ee(t,r),34067===i){var y=g/6*(m/n.BYTES_PER_ELEMENT);Re(0,r).forEach((function(e){var r=y*e.ndx,i=n.subarray(r,r+y);t.texImage2D(e.face,u,c,o,a,0,h,f,i)}))}else 32879===i||35866===i?t.texImage3D(i,u,c,o,a,s,0,h,f,n):t.texImage2D(i,u,c,o,a,0,h,f,n);return Te(t,r),Ae(t),{width:o,height:a,depth:s,type:f}}(t,r,u,e);o=c.width,a=c.height}else Array.isArray(u)&&("string"==typeof u[0]||Ie(u[0]))?34067===i?function(t,e,n,r){r=r||Oe;var i=n.src;if(6!==i.length)throw"there must be 6 urls for a cubemap";var o=n.level||0,a=n.internalFormat||n.format||6408,s=_e(a),u=n.format||s.format,c=n.type||5121,l=n.target||3553;if(34067!==l)throw"target must be TEXTURE_CUBE_MAP";ze(t,e,n),n=Object.assign({},n);var h,f=6,d=[],p=Pe(0,n);h=i.map((function(i,s){return Fe(i,n.crossOrigin,(m=p[s],function(i,s){--f,i?d.push(i):s.width!==s.height?d.push("cubemap face img is not a square: "+s.src):(Ee(t,n),t.bindTexture(l,e),5===f?Pe().forEach((function(e){t.texImage2D(e,o,a,u,c,s)})):t.texImage2D(m,o,a,u,c,s),Te(t,n),Ce(n)&&t.generateMipmap(l)),0===f&&r(d.length?d:void 0,e,h)}));var m}))}(t,r,e,n):function(t,e,n,r){r=r||Oe;var i=n.src,o=n.internalFormat||n.format||6408,a=_e(o),s=n.format||a.format,u=n.type||5121,c=n.target||35866;if(32879!==c&&35866!==c)throw"target must be TEXTURE_3D or TEXTURE_2D_ARRAY";ze(t,e,n),n=Object.assign({},n);var l,h=i.length,f=[],d=n.level||0,p=n.width,m=n.height,g=i.length,v=!0;l=i.map((function(i,a){return Fe(i,n.crossOrigin,(y=a,function(i,a){if(--h,i)f.push(i);else{if(Ee(t,n),t.bindTexture(c,e),v){v=!1,p=n.width||a.width,m=n.height||a.height,t.texImage3D(c,d,o,p,m,g,0,s,u,null);for(var b=0;b<g;++b)t.texSubImage3D(c,d,0,0,b,p,m,1,s,u,a)}else{var _,x=a;a.width===p&&a.height===m||(x=(_=pe()).canvas,_.canvas.width=p,_.canvas.height=m,_.drawImage(a,0,0,p,m)),t.texSubImage3D(c,d,0,0,y,p,m,1,s,u,x),_&&x===_.canvas&&(_.canvas.width=0,_.canvas.height=0)}Te(t,n),Ce(n)&&t.generateMipmap(c)}0===h&&r(f.length?f:void 0,e,l)}));var y}))}(t,r,e,n):(ke(t,r,u,e),o=u.width,a=u.height);else!function(t,e,n){var r=n.target||3553;t.bindTexture(r,e);var i=n.level||0,o=n.internalFormat||n.format||6408,a=_e(o),s=n.format||a.format,u=n.type||a.type;if(Ee(t,n),34067===r)for(var c=0;c<6;++c)t.texImage2D(34069+c,i,o,n.width,n.height,0,s,u,null);else 32879===r||35866===r?t.texImage3D(r,i,o,n.width,n.height,n.depth,0,s,u,null):t.texImage2D(r,i,o,n.width,n.height,0,s,u,null);Te(t,n)}(t,r,e);return Ce(e)&&De(t,r,e,o,a,s),Le(t,r,e),r}var Ne=X;function Ue(t){return"undefined"!=typeof document&&document.getElementById?document.getElementById(t):null}var je={};function He(t,e){return je[e].bindPoint}function Ve(t,e){return function(n){t.uniform1i(e,n)}}function Ge(t,e){return function(n){t.uniform1iv(e,n)}}function We(t,e){return function(n){t.uniform2iv(e,n)}}function qe(t,e){return function(n){t.uniform3iv(e,n)}}function Xe(t,e){return function(n){t.uniform4iv(e,n)}}function Ye(t,e,n,r){var i=He(0,e);return ae(t)?function(e){var o,a;Z(0,e)?(o=e,a=null):(o=e.texture,a=e.sampler),t.uniform1i(r,n),t.activeTexture(33984+n),t.bindTexture(i,o),t.bindSampler(n,a)}:function(e){t.uniform1i(r,n),t.activeTexture(33984+n),t.bindTexture(i,e)}}function Ze(t,e,n,r,i){for(var o=He(0,e),a=new Int32Array(i),s=0;s<i;++s)a[s]=n+s;return ae(t)?function(e){t.uniform1iv(r,a),e.forEach((function(e,r){var i,s;t.activeTexture(33984+a[r]),Z(0,e)?(i=e,s=null):(i=e.texture,s=e.sampler),t.bindSampler(n,s),t.bindTexture(o,i)}))}:function(e){t.uniform1iv(r,a),e.forEach((function(e,n){t.activeTexture(33984+a[n]),t.bindTexture(o,e)}))}}function Je(t,e){return function(n){if(n.value)switch(t.disableVertexAttribArray(e),n.value.length){case 4:t.vertexAttrib4fv(e,n.value);break;case 3:t.vertexAttrib3fv(e,n.value);break;case 2:t.vertexAttrib2fv(e,n.value);break;case 1:t.vertexAttrib1fv(e,n.value);break;default:throw new Error("the length of a float constant value must be between 1 and 4!")}else t.bindBuffer(34962,n.buffer),t.enableVertexAttribArray(e),t.vertexAttribPointer(e,n.numComponents||n.size,n.type||5126,n.normalize||!1,n.stride||0,n.offset||0),void 0!==n.divisor&&t.vertexAttribDivisor(e,n.divisor)}}function Qe(t,e){return function(n){if(n.value){if(t.disableVertexAttribArray(e),4!==n.value.length)throw new Error("The length of an integer constant value must be 4!");t.vertexAttrib4iv(e,n.value)}else t.bindBuffer(34962,n.buffer),t.enableVertexAttribArray(e),t.vertexAttribIPointer(e,n.numComponents||n.size,n.type||5124,n.stride||0,n.offset||0),void 0!==n.divisor&&t.vertexAttribDivisor(e,n.divisor)}}function Ke(t,e){return function(n){if(n.value){if(t.disableVertexAttribArray(e),4!==n.value.length)throw new Error("The length of an unsigned integer constant value must be 4!");t.vertexAttrib4uiv(e,n.value)}else t.bindBuffer(34962,n.buffer),t.enableVertexAttribArray(e),t.vertexAttribIPointer(e,n.numComponents||n.size,n.type||5125,n.stride||0,n.offset||0),void 0!==n.divisor&&t.vertexAttribDivisor(e,n.divisor)}}function $e(t,e,n){var r=n.size,i=n.count;return function(n){t.bindBuffer(34962,n.buffer);for(var o=n.size||n.numComponents||r,a=o/i,s=n.type||5126,u=je[s].size*o,c=n.normalize||!1,l=n.offset||0,h=u/i,f=0;f<i;++f)t.enableVertexAttribArray(e+f),t.vertexAttribPointer(e+f,a,s,c,u,l+h*f),void 0!==n.divisor&&t.vertexAttribDivisor(e+f,n.divisor)}}je[5126]={Type:Float32Array,size:4,setter:function(t,e){return function(n){t.uniform1f(e,n)}},arraySetter:function(t,e){return function(n){t.uniform1fv(e,n)}}},je[35664]={Type:Float32Array,size:8,setter:function(t,e){return function(n){t.uniform2fv(e,n)}}},je[35665]={Type:Float32Array,size:12,setter:function(t,e){return function(n){t.uniform3fv(e,n)}}},je[35666]={Type:Float32Array,size:16,setter:function(t,e){return function(n){t.uniform4fv(e,n)}}},je[5124]={Type:Int32Array,size:4,setter:Ve,arraySetter:Ge},je[35667]={Type:Int32Array,size:8,setter:We},je[35668]={Type:Int32Array,size:12,setter:qe},je[35669]={Type:Int32Array,size:16,setter:Xe},je[5125]={Type:Uint32Array,size:4,setter:function(t,e){return function(n){t.uniform1ui(e,n)}},arraySetter:function(t,e){return function(n){t.uniform1uiv(e,n)}}},je[36294]={Type:Uint32Array,size:8,setter:function(t,e){return function(n){t.uniform2uiv(e,n)}}},je[36295]={Type:Uint32Array,size:12,setter:function(t,e){return function(n){t.uniform3uiv(e,n)}}},je[36296]={Type:Uint32Array,size:16,setter:function(t,e){return function(n){t.uniform4uiv(e,n)}}},je[35670]={Type:Uint32Array,size:4,setter:Ve,arraySetter:Ge},je[35671]={Type:Uint32Array,size:8,setter:We},je[35672]={Type:Uint32Array,size:12,setter:qe},je[35673]={Type:Uint32Array,size:16,setter:Xe},je[35674]={Type:Float32Array,size:16,setter:function(t,e){return function(n){t.uniformMatrix2fv(e,!1,n)}}},je[35675]={Type:Float32Array,size:36,setter:function(t,e){return function(n){t.uniformMatrix3fv(e,!1,n)}}},je[35676]={Type:Float32Array,size:64,setter:function(t,e){return function(n){t.uniformMatrix4fv(e,!1,n)}}},je[35685]={Type:Float32Array,size:24,setter:function(t,e){return function(n){t.uniformMatrix2x3fv(e,!1,n)}}},je[35686]={Type:Float32Array,size:32,setter:function(t,e){return function(n){t.uniformMatrix2x4fv(e,!1,n)}}},je[35687]={Type:Float32Array,size:24,setter:function(t,e){return function(n){t.uniformMatrix3x2fv(e,!1,n)}}},je[35688]={Type:Float32Array,size:48,setter:function(t,e){return function(n){t.uniformMatrix3x4fv(e,!1,n)}}},je[35689]={Type:Float32Array,size:32,setter:function(t,e){return function(n){t.uniformMatrix4x2fv(e,!1,n)}}},je[35690]={Type:Float32Array,size:48,setter:function(t,e){return function(n){t.uniformMatrix4x3fv(e,!1,n)}}},je[35678]={Type:null,size:0,setter:Ye,arraySetter:Ze,bindPoint:3553},je[35680]={Type:null,size:0,setter:Ye,arraySetter:Ze,bindPoint:34067},je[35679]={Type:null,size:0,setter:Ye,arraySetter:Ze,bindPoint:32879},je[35682]={Type:null,size:0,setter:Ye,arraySetter:Ze,bindPoint:3553},je[36289]={Type:null,size:0,setter:Ye,arraySetter:Ze,bindPoint:35866},je[36292]={Type:null,size:0,setter:Ye,arraySetter:Ze,bindPoint:35866},je[36293]={Type:null,size:0,setter:Ye,arraySetter:Ze,bindPoint:34067},je[36298]={Type:null,size:0,setter:Ye,arraySetter:Ze,bindPoint:3553},je[36299]={Type:null,size:0,setter:Ye,arraySetter:Ze,bindPoint:32879},je[36300]={Type:null,size:0,setter:Ye,arraySetter:Ze,bindPoint:34067},je[36303]={Type:null,size:0,setter:Ye,arraySetter:Ze,bindPoint:35866},je[36306]={Type:null,size:0,setter:Ye,arraySetter:Ze,bindPoint:3553},je[36307]={Type:null,size:0,setter:Ye,arraySetter:Ze,bindPoint:32879},je[36308]={Type:null,size:0,setter:Ye,arraySetter:Ze,bindPoint:34067},je[36311]={Type:null,size:0,setter:Ye,arraySetter:Ze,bindPoint:35866};var tn={};tn[5126]={size:4,setter:Je},tn[35664]={size:8,setter:Je},tn[35665]={size:12,setter:Je},tn[35666]={size:16,setter:Je},tn[5124]={size:4,setter:Qe},tn[35667]={size:8,setter:Qe},tn[35668]={size:12,setter:Qe},tn[35669]={size:16,setter:Qe},tn[5125]={size:4,setter:Ke},tn[36294]={size:8,setter:Ke},tn[36295]={size:12,setter:Ke},tn[36296]={size:16,setter:Ke},tn[35670]={size:4,setter:Qe},tn[35671]={size:8,setter:Qe},tn[35672]={size:12,setter:Qe},tn[35673]={size:16,setter:Qe},tn[35674]={size:4,setter:$e,count:2},tn[35675]={size:9,setter:$e,count:3},tn[35676]={size:16,setter:$e,count:4};var en=/^[ \t]*\n/;function nn(t,e,n,r){var i=r||Ne,o=t.createShader(n),a=0;if(en.test(e)&&(a=1,e=e.replace(en,"")),t.shaderSource(o,e),t.compileShader(o),!t.getShaderParameter(o,35713)){var s=t.getShaderInfoLog(o);return i(function(t,e){return e=e||0,++e,t.split("\n").map((function(t,n){return n+e+": "+t})).join("\n")}(e,a)+"\n*** Error compiling shader: "+s),t.deleteShader(o),null}return o}function rn(t,e,n){var r,i;if("function"==typeof e&&(n=e,e=void 0),"function"==typeof t)n=t,t=void 0;else if(t&&!Array.isArray(t)){if(t.errorCallback)return t;var o=t;n=o.errorCallback,t=o.attribLocations,r=o.transformFeedbackVaryings,i=o.transformFeedbackMode}var a={errorCallback:n||Ne,transformFeedbackVaryings:r,transformFeedbackMode:i};if(t){var s={};Array.isArray(t)?t.forEach((function(t,n){s[t]=e?e[n]:n})):s=t,a.attribLocations=s}return a}var on=["VERTEX_SHADER","FRAGMENT_SHADER"];function an(t,e){e.forEach((function(e){t.deleteShader(e)}))}function sn(t){var e=t.name;return e.startsWith("gl_")||e.startsWith("webgl_")}function un(t,e){for(var n=t.uniformSetters||t,r=arguments.length,i=1;i<r;++i){var o=arguments[i];if(Array.isArray(o))for(var a=o.length,s=0;s<a;++s)un(n,o[s]);else for(var u in o){var c=n[u];c&&c(o[u])}}}function cn(t,e,n){n.vertexArrayObject?t.bindVertexArray(n.vertexArrayObject):(function(t,e){for(var n in e){var r=t[n];r&&r(e[n])}}(e.attribSetters||e,n.attribs),n.indices&&t.bindBuffer(34963,n.indices))}function ln(t,e,n){var r=t.createVertexArray();return t.bindVertexArray(r),e.length||(e=[e]),e.forEach((function(e){cn(t,e,n)})),t.bindVertexArray(null),{numElements:n.numElements,elementType:n.elementType,vertexArrayObject:r}}var hn=/^(.*?)_/;function fn(t,e){he(t,0);var n=t.getExtension(e);if(n){var r={},i=hn.exec(e)[1],o="_"+i;for(var a in n){var s=n[a],u="function"==typeof s,c=u?i:o,l=a;a.endsWith(c)&&(l=a.substring(0,a.length-c.length)),void 0!==t[l]?u||t[l]===s||Y(l,t[l],s,a):u?t[l]=function(t){return function(){return t.apply(n,arguments)}}(s):(t[l]=s,r[l]=s)}r.constructor={name:n.constructor.name},he(r,0)}return n}var dn=["ANGLE_instanced_arrays","EXT_blend_minmax","EXT_color_buffer_float","EXT_color_buffer_half_float","EXT_disjoint_timer_query","EXT_disjoint_timer_query_webgl2","EXT_frag_depth","EXT_sRGB","EXT_shader_texture_lod","EXT_texture_filter_anisotropic","OES_element_index_uint","OES_standard_derivatives","OES_texture_float","OES_texture_float_linear","OES_texture_half_float","OES_texture_half_float_linear","OES_vertex_array_object","WEBGL_color_buffer_float","WEBGL_compressed_texture_atc","WEBGL_compressed_texture_etc1","WEBGL_compressed_texture_pvrtc","WEBGL_compressed_texture_s3tc","WEBGL_compressed_texture_s3tc_srgb","WEBGL_depth_texture","WEBGL_draw_buffers"];function pn(t){for(var e=0;e<dn.length;++e)fn(t,dn[e])}function mn(t,e){e=e||1,e=Math.max(0,e);var n=t.clientWidth*e|0,r=t.clientHeight*e|0;return(t.width!==n||t.height!==r)&&(t.width=n,t.height=r,!0)}var gn=function(){function t(e,n){var r=this;f(this,t),m(this,"gl",null),m(this,"isWebGL2",null),m(this,"init",(function(){var t=r.gl;t.viewport(0,0,t.canvas.width,t.canvas.height),t.clearColor(0,0,0,1),t.enable(t.DEPTH_TEST),t.enable(t.CULL_FACE),t.enable(t.BLEND),t.blendFunc(t.SRC_ALPHA,t.ONE_MINUS_SRC_ALPHA)})),m(this,"resize",(function(t,e){r.gl.viewport(0,0,t,e)})),m(this,"prepareRenderFrame",(function(){r.gl.clear(r.gl.COLOR_BUFFER_BIT|r.gl.DEPTH_BUFFER_BIT)})),this.gl=function(t,e){return function(t,e){for(var n=["webgl","experimental-webgl"],r=null,i=0;i<n.length;++i)if(r=t.getContext(n[i],e)){pn(r);break}return r}(t,e)}(e,n),this.isWebGL2=ae(this.gl)&&se(this.gl),pn(this.gl),this.gl.drawArraysInstanced&&this.gl.createVertexArray?mn(e):alert("need drawArraysInstanced and createVertexArray")}return p(t,[{key:"clearColor",set:function(t){this.gl.clearColor(t[0],t[1],t[2],t[3])}}]),t}(),vn="undefined"!=typeof Float32Array?Float32Array:Array;function yn(){var t=new vn(16);return vn!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0),t[0]=1,t[5]=1,t[10]=1,t[15]=1,t}function bn(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function _n(t,e){var n=e[0],r=e[1],i=e[2],o=e[3],a=e[4],s=e[5],u=e[6],c=e[7],l=e[8],h=e[9],f=e[10],d=e[11],p=e[12],m=e[13],g=e[14],v=e[15],y=n*s-r*a,b=n*u-i*a,_=n*c-o*a,x=r*u-i*s,w=r*c-o*s,S=i*c-o*u,E=l*m-h*p,T=l*g-f*p,M=l*v-d*p,A=h*g-f*m,L=h*v-d*m,D=f*v-d*g,C=y*D-b*L+_*A+x*M-w*T+S*E;return C?(C=1/C,t[0]=(s*D-u*L+c*A)*C,t[1]=(i*L-r*D-o*A)*C,t[2]=(m*S-g*w+v*x)*C,t[3]=(f*w-h*S-d*x)*C,t[4]=(u*M-a*D-c*T)*C,t[5]=(n*D-i*M+o*T)*C,t[6]=(g*_-p*S-v*b)*C,t[7]=(l*S-f*_+d*b)*C,t[8]=(a*L-s*M+c*E)*C,t[9]=(r*M-n*L-o*E)*C,t[10]=(p*w-m*_+v*y)*C,t[11]=(h*_-l*w-d*y)*C,t[12]=(s*T-a*A-u*E)*C,t[13]=(n*A-r*T+i*E)*C,t[14]=(m*b-p*x-g*y)*C,t[15]=(l*x-h*b+f*y)*C,t):null}function xn(t,e,n){var r=e[0],i=e[1],o=e[2],a=e[3],s=e[4],u=e[5],c=e[6],l=e[7],h=e[8],f=e[9],d=e[10],p=e[11],m=e[12],g=e[13],v=e[14],y=e[15],b=n[0],_=n[1],x=n[2],w=n[3];return t[0]=b*r+_*s+x*h+w*m,t[1]=b*i+_*u+x*f+w*g,t[2]=b*o+_*c+x*d+w*v,t[3]=b*a+_*l+x*p+w*y,b=n[4],_=n[5],x=n[6],w=n[7],t[4]=b*r+_*s+x*h+w*m,t[5]=b*i+_*u+x*f+w*g,t[6]=b*o+_*c+x*d+w*v,t[7]=b*a+_*l+x*p+w*y,b=n[8],_=n[9],x=n[10],w=n[11],t[8]=b*r+_*s+x*h+w*m,t[9]=b*i+_*u+x*f+w*g,t[10]=b*o+_*c+x*d+w*v,t[11]=b*a+_*l+x*p+w*y,b=n[12],_=n[13],x=n[14],w=n[15],t[12]=b*r+_*s+x*h+w*m,t[13]=b*i+_*u+x*f+w*g,t[14]=b*o+_*c+x*d+w*v,t[15]=b*a+_*l+x*p+w*y,t}function wn(t,e,n,r,i){var o,a=1/Math.tan(e/2);return t[0]=a/n,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=a,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,null!=i&&i!==1/0?(o=1/(r-i),t[10]=(i+r)*o,t[14]=2*i*r*o):(t[10]=-1,t[14]=-2*r),t}function Sn(t,e,n,r){var i,o,a,s,u,c,l,h,f,d,p=e[0],m=e[1],g=e[2],v=r[0],y=r[1],b=r[2],_=n[0],x=n[1],w=n[2];return Math.abs(p-_)<1e-6&&Math.abs(m-x)<1e-6&&Math.abs(g-w)<1e-6?bn(t):(l=p-_,h=m-x,f=g-w,i=y*(f*=d=1/Math.hypot(l,h,f))-b*(h*=d),o=b*(l*=d)-v*f,a=v*h-y*l,(d=Math.hypot(i,o,a))?(i*=d=1/d,o*=d,a*=d):(i=0,o=0,a=0),s=h*a-f*o,u=f*i-l*a,c=l*o-h*i,(d=Math.hypot(s,u,c))?(s*=d=1/d,u*=d,c*=d):(s=0,u=0,c=0),t[0]=i,t[1]=s,t[2]=l,t[3]=0,t[4]=o,t[5]=u,t[6]=h,t[7]=0,t[8]=a,t[9]=c,t[10]=f,t[11]=0,t[12]=-(i*p+o*m+a*g),t[13]=-(s*p+u*m+c*g),t[14]=-(l*p+h*m+f*g),t[15]=1,t)}function En(){var t=new vn(3);return vn!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t}function Tn(t,e,n){var r=new vn(3);return r[0]=t,r[1]=e,r[2]=n,r}function Mn(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t}function An(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t}function Ln(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t}function Dn(t,e){var n=e[0],r=e[1],i=e[2],o=n*n+r*r+i*i;return o>0&&(o=1/Math.sqrt(o)),t[0]=e[0]*o,t[1]=e[1]*o,t[2]=e[2]*o,t}function Cn(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function Pn(t,e,n,r){var i=e[0],o=e[1],a=e[2];return t[0]=i+r*(n[0]-i),t[1]=o+r*(n[1]-o),t[2]=a+r*(n[2]-a),t}function Rn(t,e,n){var r=e[0],i=e[1],o=e[2],a=n[3]*r+n[7]*i+n[11]*o+n[15];return a=a||1,t[0]=(n[0]*r+n[4]*i+n[8]*o+n[12])/a,t[1]=(n[1]*r+n[5]*i+n[9]*o+n[13])/a,t[2]=(n[2]*r+n[6]*i+n[10]*o+n[14])/a,t}Math.hypot||(Math.hypot=function(){for(var t=0,e=arguments.length;e--;)t+=arguments[e]*arguments[e];return Math.sqrt(t)});function kn(){var t=new vn(4);return vn!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t[3]=1,t}En(),function(){var t;t=new vn(4),vn!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0,t[3]=0)}();var On;En(),Tn(1,0,0),Tn(0,1,0),kn(),kn(),On=new vn(9),vn!=Float32Array&&(On[1]=0,On[2]=0,On[3]=0,On[5]=0,On[6]=0,On[7]=0),On[0]=1,On[4]=1,On[8]=1,function(){var t=new vn(2);vn!=Float32Array&&(t[0]=0,t[1]=0)}();var In,Fn=function t(e,n){var r=this;f(this,t),m(this,"fov",void 0),m(this,"width",void 0),m(this,"height",void 0),m(this,"aspect",void 0),m(this,"zNear",void 0),m(this,"zFar",void 0),m(this,"projection",void 0),m(this,"eye",void 0),m(this,"target",void 0),m(this,"up",void 0),m(this,"view",void 0),m(this,"viewProjection",void 0),m(this,"world",void 0),m(this,"resize",(function(t,e){r.width=t,r.height=e,r.aspect=t/e,r.projection=yn(),wn(r.projection,r.fov,r.aspect,r.zNear,r.zFar)})),m(this,"update",(function(){Sn(r.view,r.eye,r.target,r.up),_n(r.camera,r.view),xn(r.viewProjection,r.projection,r.view)})),m(this,"setPosition",(function(t){r.eye=t})),m(this,"getUniforms",(function(){var t={};return t.u_viewInverse=r.camera,t.u_world=r.world,t.u_worldInverseTranspose=yn(),t.u_view=r.view,t.u_resolution=[r.width,r.height],_n(t.u_worldInverseTranspose,r.world),function(t,e){if(t===e){var n=e[1],r=e[2],i=e[3],o=e[6],a=e[7],s=e[11];t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=n,t[6]=e[9],t[7]=e[13],t[8]=r,t[9]=o,t[11]=e[14],t[12]=i,t[13]=a,t[14]=s}else t[0]=e[0],t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=e[1],t[5]=e[5],t[6]=e[9],t[7]=e[13],t[8]=e[2],t[9]=e[6],t[10]=e[10],t[11]=e[14],t[12]=e[3],t[13]=e[7],t[14]=e[11],t[15]=e[15]}(t.u_worldInverseTranspose,t.u_worldInverseTranspose),t.u_worldViewProjection=yn(),xn(t.u_worldViewProjection,r.viewProjection,r.world),t.u_cameraPos=r.eye,t})),m(this,"getRayFromScreen",(function(t,e){var n=2*t-1,i=2*e-1,o=r.unproject([n,i,-1]),a=r.unproject([n,i,1]),s=En();return An(s,a,o),Dn(s,s),{origin:o,direction:s}})),m(this,"unproject",(function(t){var e=yn();_n(e,r.viewProjection);var n=Tn(t[0],t[1],t[2]);return Rn(n,n,e),n})),m(this,"project",(function(t){var e=function(t){var e=new vn(3);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e}(t);return Rn(e,e,r.viewProjection),[(e[0]+1)/2,(e[1]+1)/2]})),this.fov=Math.PI/180*30,this.width=e,this.height=n,this.aspect=e/n,this.zNear=.01,this.zFar=100,this.projection=yn(),wn(this.projection,this.fov,this.aspect,this.zNear,this.zFar),this.eye=[0,0,6],this.target=[0,0,0],this.up=[0,1,0],this.view=yn(),Sn(this.view,this.eye,this.target,this.up),this.camera=yn(),_n(this.camera,this.view),this.viewProjection=yn(),xn(this.viewProjection,this.projection,this.view),this.world=yn(),bn(this.world)},zn=function t(e,n){var r=this;f(this,t),m(this,"resize",(function(t,e){r.camera.resize(t,e)})),m(this,"update",(function(t){r.camera.update(t)})),m(this,"getUniforms",(function(t){var e=r.camera.getUniforms(t);return e.time=t,e})),this.camera=new Fn(e,n)},Bn=function(){function t(e){var n=this;f(this,t),m(this,"programInfo",null),m(this,"textures",{}),m(this,"uniforms",null),m(this,"shaderStrings",null),m(this,"isInit",!1),m(this,"texturesLoaded",!1),m(this,"init",(function(t){n.programInfo=function(t,e,n,r,i){var o=rn(void 0,void 0,void 0),a=!0;if(e=e.map((function(t){if(t.indexOf("\n")<0){var e=Ue(t);e?t=e.text:(o.errorCallback("no element with id: "+t),a=!1)}return t})),!a)return null;var s=function(t,e,n,r,i){for(var o=rn(n,r,i),a=[],s=0;s<e.length;++s){var u=nn(t,e[s],t[on[s]],o.errorCallback);if(!u)return null;a.push(u)}return function(t,e,n,r,i){for(var o,a=rn(n,void 0,void 0),s=[],u=[],c=0;c<e.length;++c){var l=e[c];if("string"==typeof l){var h=Ue(l),f=h?h.text:l,d=t[on[c]];h&&h.type&&(d=((o=h.type).indexOf("frag")>=0?35632:o.indexOf("vert")>=0?35633:void 0)||d),l=nn(t,f,d,a.errorCallback),u.push(l)}"undefined"!=typeof WebGLShader&&l instanceof WebGLShader&&s.push(l)}if(s.length!==e.length)return a.errorCallback("not enough shaders for program"),an(t,u),null;var p=t.createProgram();s.forEach((function(e){t.attachShader(p,e)})),a.attribLocations&&Object.keys(a.attribLocations).forEach((function(e){t.bindAttribLocation(p,a.attribLocations[e],e)}));var m=a.transformFeedbackVaryings;if(m&&(m.attribs&&(m=m.attribs),Array.isArray(m)||(m=Object.keys(m)),t.transformFeedbackVaryings(p,m,a.transformFeedbackMode||35981)),t.linkProgram(p),!t.getProgramParameter(p,35714)){var g=t.getProgramInfoLog(p);return a.errorCallback("Error in program linking:"+g),t.deleteProgram(p),an(t,u),null}return p}(t,a,o)}(t,e,o);return s?function(t,e){var n={program:e,uniformSetters:function(t,e){var n=0;function r(e,r,i){var o,a=r.size>1&&"[0]"===r.name.substr(-3),s=r.type,u=je[s];if(!u)throw new Error("unknown type: 0x".concat(s.toString(16)));if(u.bindPoint){var c=n;n+=r.size,o=a?u.arraySetter(t,s,c,i,r.size):u.setter(t,s,c,i,r.size)}else o=u.arraySetter&&a?u.arraySetter(t,i):u.setter(t,i);return o.location=i,o}for(var i={},o=t.getProgramParameter(e,35718),a=0;a<o;++a){var s=t.getActiveUniform(e,a);if(!sn(s)){var u=s.name;"[0]"===u.substr(-3)&&(u=u.substr(0,u.length-3));var c=t.getUniformLocation(e,s.name);c&&(i[u]=r(0,s,c))}}return i}(t,e),attribSetters:function(t,e){for(var n={},r=t.getProgramParameter(e,35721),i=0;i<r;++i){var o=t.getActiveAttrib(e,i);if(!sn(o)){var a=t.getAttribLocation(e,o.name),s=tn[o.type],u=s.setter(t,a,s);u.location=a,n[o.name]=u}}return n}(t,e)};return ae(t)&&(n.uniformBlockSpec=function(t,e){for(var n=t.getProgramParameter(e,35718),r=[],i=[],o=0;o<n;++o){i.push(o),r.push({});var a=t.getActiveUniform(e,o);if(sn(a))break;r[o].name=a.name}[["UNIFORM_TYPE","type"],["UNIFORM_SIZE","size"],["UNIFORM_BLOCK_INDEX","blockNdx"],["UNIFORM_OFFSET","offset"]].forEach((function(n){var o=n[0],a=n[1];t.getActiveUniforms(e,i,t[o]).forEach((function(t,e){r[e][a]=t}))}));for(var s={},u=t.getProgramParameter(e,35382),c=0;c<u;++c){var l=t.getActiveUniformBlockName(e,c),h={index:t.getUniformBlockIndex(e,l),usedByVertexShader:t.getActiveUniformBlockParameter(e,c,35396),usedByFragmentShader:t.getActiveUniformBlockParameter(e,c,35398),size:t.getActiveUniformBlockParameter(e,c,35392),uniformIndices:t.getActiveUniformBlockParameter(e,c,35395)};h.used=h.usedByVertexShader||h.usedByFragmentShader,s[l]=h}return{blockSpecs:s,uniformData:r}}(t,e),n.transformFeedbackInfo=function(t,e){for(var n={},r=t.getProgramParameter(e,35971),i=0;i<r;++i){var o=t.getTransformFeedbackVarying(e,i);n[o.name]={index:i,type:o.type,size:o.size}}return n}(t,e)),n}(t,s):null}(t,Object.values(n.shaderStrings)),n.isInit=!0})),m(this,"loadTextures",(function(t,e,r){if(e){var i=Object.keys(e).length,o=0;Object.entries(e).forEach((function(e){var a=E(e,2),s=a[0],u=a[1];n.textures[s]=Be(t,u,(function(){(o+=1)===i&&(n.texturesLoaded=!0,r&&r())}))}))}})),m(this,"updateUniforms",(function(t){Object.entries(t).forEach((function(t){var e=E(t,2),r=e[0],i=e[1];n.uniforms[r]=i}))})),this.shaderStrings=e}return p(t,[{key:"isReady",get:function(){return this.isInit&&this.texturesLoaded}}]),t}(),Nn=new Array(32).fill(void 0);function Un(t){return Nn[t]}Nn.push(void 0,null,!0,!1);var jn=Nn.length;function Hn(t){var e=Un(t);return function(t){t<36||(Nn[t]=jn,jn=t)}(t),e}var Vn=new TextDecoder("utf-8",{ignoreBOM:!0,fatal:!0});Vn.decode();var Gn=null;function Wn(){return null!==Gn&&Gn.buffer===In.memory.buffer||(Gn=new Uint8Array(In.memory.buffer)),Gn}function qn(t,e){return Vn.decode(Wn().subarray(t,t+e))}function Xn(t){jn===Nn.length&&Nn.push(Nn.length+1);var e=jn;return jn=Nn[e],Nn[e]=t,e}var Yn=0,Zn=new TextEncoder("utf-8"),Jn="function"==typeof Zn.encodeInto?function(t,e){return Zn.encodeInto(t,e)}:function(t,e){var n=Zn.encode(t);return e.set(n),{read:t.length,written:n.length}};function Qn(t,e,n){if(void 0===n){var r=Zn.encode(t),i=e(r.length);return Wn().subarray(i,i+r.length).set(r),Yn=r.length,i}for(var o=t.length,a=e(o),s=Wn(),u=0;u<o;u++){var c=t.charCodeAt(u);if(c>127)break;s[a+u]=c}if(u!==o){0!==u&&(t=t.slice(u)),a=n(a,o,o=u+3*t.length);var l=Wn().subarray(a+u,a+o);u+=Jn(t,l).written}return Yn=u,a}var Kn=null;function $n(){return null!==Kn&&Kn.buffer===In.memory.buffer||(Kn=new Int32Array(In.memory.buffer)),Kn}function tr(t,e,n){In._dyn_core__ops__function__FnMut__A____Output___R_as_wasm_bindgen__closure__WasmClosure___describe__invoke__ha5107d5f7795da4f(t,e,Xn(n))}var er=null;function nr(t,e){var n=e(4*t.length);return(null!==er&&er.buffer===In.memory.buffer||(er=new Float32Array(In.memory.buffer)),er).set(t,n/4),Yn=t.length,n}var rr=null;var ir=function(){function t(){s(this,t)}return c(t,[{key:"free",value:function(){var t=this.ptr;this.ptr=0,In.__wbg_gkcollider_free(t)}}],[{key:"create_collision_geometry",value:function(t,e,n){var r=nr(t,In.__wbindgen_malloc),i=Yn,o=nr(e,In.__wbindgen_malloc),a=Yn,s=function(t,e){var n=e(4*t.length);return(null!==rr&&rr.buffer===In.memory.buffer||(rr=new Uint32Array(In.memory.buffer)),rr).set(t,n/4),Yn=t.length,n}(n,In.__wbindgen_malloc),u=Yn,c=In.gkcollider_create_collision_geometry(r,i,o,a,s,u);return ar.__wrap(c)}}]),t}(),or=function(){function t(){s(this,t)}return c(t,[{key:"free",value:function(){var t=this.ptr;this.ptr=0,In.__wbg_gkcollision_free(t)}}]),t}(),ar=function(){function t(){s(this,t)}return c(t,[{key:"free",value:function(){var t=this.ptr;this.ptr=0,In.__wbg_gkcollisiongeo_free(t)}},{key:"raycast",value:function(t,e){var n=nr(t,In.__wbindgen_malloc),r=Yn,i=nr(e,In.__wbindgen_malloc),o=Yn;return Hn(In.gkcollisiongeo_raycast(this.ptr,n,r,i,o))}},{key:"hitTest",value:function(t,e){var n=nr(t,In.__wbindgen_malloc),r=Yn,i=nr(e,In.__wbindgen_malloc),o=Yn;return 0!==In.gkcollisiongeo_hitTest(this.ptr,n,r,i,o)}}],[{key:"__wrap",value:function(e){var n=Object.create(t.prototype);return n.ptr=e,n}}]),t}();function sr(t){return ur.apply(this,arguments)}function ur(){return(ur=a(i.a.mark((function t(e){var n,r,o,s;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return void 0===e&&console.log("You must specify wasm location"),(n={wbg:{}}).wbg.__wbindgen_object_drop_ref=function(t){Hn(t)},n.wbg.__wbindgen_json_parse=function(t,e){return Xn(JSON.parse(qn(t,e)))},n.wbg.__wbindgen_json_serialize=function(t,e){var n=Un(e),r=Qn(JSON.stringify(void 0===n?null:n),In.__wbindgen_malloc,In.__wbindgen_realloc),i=Yn;$n()[t/4+1]=i,$n()[t/4+0]=r},n.wbg.__wbindgen_number_new=function(t){return Xn(t)},n.wbg.__wbindgen_string_new=function(t,e){return Xn(qn(t,e))},n.wbg.__wbg_new_59cb74e423758ede=function(){return Xn(new Error)},n.wbg.__wbg_stack_558ba5917b466edd=function(t,e){var n=Qn(Un(e).stack,In.__wbindgen_malloc,In.__wbindgen_realloc),r=Yn;$n()[t/4+1]=r,$n()[t/4+0]=n},n.wbg.__wbg_error_4bb6c2a97407129a=function(t,e){try{console.error(qn(t,e))}finally{In.__wbindgen_free(t,e)}},n.wbg.__wbg_debug_7020dcb48edf105b=function(t){console.debug(Un(t))},n.wbg.__wbg_error_b23efba5bfb5cec5=function(t){console.error(Un(t))},n.wbg.__wbg_info_8ce99578d0b91a35=function(t){console.info(Un(t))},n.wbg.__wbg_log_c180b836187d3c94=function(t){console.log(Un(t))},n.wbg.__wbg_warn_942f927afebcc748=function(t){console.warn(Un(t))},n.wbg.__wbindgen_cb_drop=function(t){var e=Hn(t).original;return 1==e.cnt--&&(e.a=0,!0)},n.wbg.__wbg_call_d713ea0274dfc6d2=function(t){return function(){try{return t.apply(this,arguments)}catch(t){In.__wbindgen_exn_store(Xn(t))}}}((function(t,e,n){return Xn(Un(t).call(Un(e),Un(n)))})),n.wbg.__wbg_new_d0c63652ab4d825c=function(t,e){try{var n={a:t,b:e},r=new Promise((function(t,e){var r=n.a;n.a=0;try{return function(t,e,n,r){In.wasm_bindgen__convert__closures__invoke2_mut__h8bf6a25e700c374c(t,e,Xn(n),Xn(r))}(r,n.b,t,e)}finally{n.a=r}}));return Xn(r)}finally{n.a=n.b=0}},n.wbg.__wbg_resolve_2529512c3bb73938=function(t){return Xn(Promise.resolve(Un(t)))},n.wbg.__wbg_then_4a7a614abbbe6d81=function(t,e){return Xn(Un(t).then(Un(e)))},n.wbg.__wbindgen_throw=function(t,e){throw new Error(qn(t,e))},n.wbg.__wbindgen_rethrow=function(t){throw Hn(t)},n.wbg.__wbindgen_closure_wrapper2042=function(t,e,n){return Xn(function(t,e,n,r){var i={a:t,b:e,cnt:1,dtor:61},o=function(){i.cnt++;var t=i.a;i.a=0;try{for(var e=arguments.length,n=new Array(e),o=0;o<e;o++)n[o]=arguments[o];return r.apply(void 0,[t,i.b].concat(n))}finally{0==--i.cnt?In.__wbindgen_export_2.get(i.dtor)(t,i.b):i.a=t}};return o.original=i,o}(t,e,0,tr))},("string"==typeof e||"function"==typeof Request&&e instanceof Request||"function"==typeof URL&&e instanceof URL)&&(e=fetch(e)),t.t0=function(){var t=a(i.a.mark((function t(e,n){var r,o;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!("function"==typeof Response&&e instanceof Response)){t.next=19;break}if("function"!=typeof WebAssembly.instantiateStreaming){t.next=13;break}return t.prev=2,t.next=5,WebAssembly.instantiateStreaming(e,n);case 5:return t.abrupt("return",t.sent);case 8:if(t.prev=8,t.t0=t.catch(2),"application/wasm"!=e.headers.get("Content-Type")){t.next=12;break}throw t.t0;case 12:console.warn("`WebAssembly.instantiateStreaming` failed because your server does not serve wasm with `application/wasm` MIME type. Falling back to `WebAssembly.instantiate` which is slower. Original error:\n",t.t0);case 13:return t.next=15,e.arrayBuffer();case 15:return r=t.sent,t.next=18,WebAssembly.instantiate(r,n);case 18:return t.abrupt("return",t.sent);case 19:return t.next=21,WebAssembly.instantiate(e,n);case 21:return o=t.sent,t.abrupt("return",o instanceof WebAssembly.Instance?{instance:o,module:e}:o);case 23:case"end":return t.stop()}}),t,null,[[2,8]])})));return function(e,n){return t.apply(this,arguments)}}(),t.next=6,e;case 6:return t.t1=t.sent,t.t2=n,t.next=10,(0,t.t0)(t.t1,t.t2);case 10:return r=t.sent,o=r.instance,s=r.module,t.abrupt("return",(In=o.exports,sr.__wbindgen_wasm_module=s,In));case 14:case"end":return t.stop()}}),t)})))).apply(this,arguments)}var cr=function(){function t(){var e=this;f(this,t),m(this,"id",null),m(this,"geometry",null),m(this,"collisionGeometry",null),m(this,"material",null),m(this,"_translation",[0,0,0]),m(this,"_rotation",[0,0,0]),m(this,"_scale",[1,1,1]),m(this,"_modelMatrix",null),m(this,"_modelIsDirty",!0),m(this,"rayCast",!0),m(this,"isInteractive",!1),m(this,"isSelectable",!1),m(this,"isHoverable",!1),m(this,"shouldDraw",!0),m(this,"setInteractive",(function(t,n,r){e.isInteractive="boolean"==typeof t&&t,e.isSelectable="boolean"==typeof n&&n,e.isHoverable="boolean"==typeof r&&r})),this.id="_"+Math.random().toString(36).substr(2,9)}return p(t,[{key:"update",value:function(t){var e=this;t&&Object.entries(t).forEach((function(t){e.material.uniforms[t[0]]=t[1]}))}},{key:"isReady",get:function(){return!(!this.geometry||!this.material)&&this.geometry.isReady&&this.material.isReady}},{key:"translation",get:function(){return this._translation},set:function(t){this._translation=t,this._modelIsDirty=!0}},{key:"rotation",get:function(){return this._rotation},set:function(t){this._rotation=t,this._modelIsDirty=!0}},{key:"scale",get:function(){return this._scale},set:function(t){this._scale=t,this._modelIsDirty=!0}},{key:"modelMatrix",get:function(){if(this._modelIsDirty){var t=H.identity(),e=H.translation(this._translation,t),n=H.scaling(this._scale);this._modelMatrix=e,H.rotateX(e,this._rotation[0],this._modelMatrix),H.rotateY(e,this._rotation[1],this._modelMatrix),H.rotateZ(e,this._rotation[2],this._modelMatrix),H.multiply(this._modelMatrix,n,this._modelMatrix),this._modelIsDirty=!1}return this._modelMatrix}}]),t}(),lr=function(t){y(n,cr);var e=w(n);function n(){return f(this,n),e.apply(this,arguments)}return n}(),hr=function(){function t(e){var n=this;f(this,t),m(this,"isInit",!1),m(this,"isDirty",!1),m(this,"needsResize",!1),m(this,"bufferInfo",void 0),m(this,"vertices",void 0),m(this,"init",(function(t){0===Object.keys(n.vertices).length&&n.vertices.constructor===Object||(Object.keys(n.vertices).forEach((function(e){"DYNAMIC_DRAW"===n.vertices[e].drawType&&(n.vertices[e].drawType=t.DYNAMIC_DRAW)})),n.bufferInfo=at(t,n.vertices),n.isInit=!0,n.isDirty=!1)})),m(this,"resizeVertices",(function(){})),m(this,"updateGeometry",(function(t,e){void 0!==e&&"number"==typeof e||(e=0),Object.keys(t).forEach((function(r){for(var i=n.vertices[r].perInstance*e,o=0;o<t[r].data.length;o+=1)n.vertices[r].data[o+i]=t[r].data[o]})),n.isDirty=!0})),m(this,"updateBuffers",(function(t){Object.keys(n.bufferInfo.attribs).forEach((function(e){!function(t,e,n,r){n=it(n),J(t,34962,e.buffer,n,e.drawType)}(t,n.bufferInfo.attribs[e],n.vertices[e])})),n.isDirty=!1})),m(this,"reloadBuffers",(function(t){n.deleteBuffers(t),n.bufferInfo=at(t,n.vertices),n.isDirty=!1,n.needsResize=!1})),m(this,"deleteBuffers",(function(t){Object.keys(n.bufferInfo.attribs).forEach((function(e){t.deleteBuffer(e.buffer)})),t.deleteBuffer(n.bufferInfo.indices),n.bufferInfo={}})),this.vertices="sphere"===e?oe.createSphereVertices(1,128,128):{}}return p(t,[{key:"isReady",get:function(){return this.isInit}}]),t}(),fr={vertex:"#define GLSLIFY 1\nattribute vec4 position;attribute vec3 normal;attribute vec2 texcoord;uniform mat4 u_worldViewProjection;uniform mat4 u_viewInverse;uniform mat4 u_model;uniform vec3 u_cameraPos;uniform float shadowPower;varying float vAlpha;varying vec2 vTexture;void main(){vec4 pos=u_worldViewProjection*u_model*position;vec4 transformedCamera=vec4(-0.5,1.0,-1.0,1.0)*u_worldViewProjection;vAlpha=pow((1.0+(dot(normal,normalize(transformedCamera.xyz))))/2.0,shadowPower);vTexture=texcoord;gl_Position=pos;}",fragment:"precision mediump float;\n#define GLSLIFY 1\nuniform sampler2D uTexture;varying float vAlpha;varying vec2 vTexture;vec3 yellow=vec3(255.0/255.0,210.0/255.0,28.0/255.0);void main(){vec4 textureColor=texture2D(uTexture,vec2(vTexture.x-0.25,vTexture.y));float alpha=vAlpha+(1.0-vAlpha)*0.05;alpha*=0.9;gl_FragColor=vec4(textureColor.rgb*vAlpha,1.0);}"},dr={shadowPower:.3},pr=(function(t){y(n,lr);var e=w(n);function n(t){var r,i;return f(this,n),m(_(i=e.call(this)),"material",null),m(_(i),"init",(function(t,e){i.geometry=new hr("sphere"),i.geometry.init(t);var n={surface:{src:i.textureSrc.surface,minMag:t.LINEAR,wrap:t.REPEAT}};i.material.init(t),i.material.loadTextures(t,n,(function(){i.material.uniforms.uTexture=i.material.textures.surface,e&&e()})),i.material.uniforms.uModelMatrix=i.modelMatrix})),m(_(i),"createCollisionGeo",(function(){i.collisionGeometry&&i.collisionGeometry instanceof or||(i.collisionGeometry=ir.create_collision_geometry(i.geometry.vertices.position,i.geometry.vertices.texcoord,i.geometry.vertices.indices))})),m(_(i),"rayCastFrom",(function(t){return i.collisionGeometry.raycast(t.origin,t.direction)})),m(_(i),"hitTest",(function(t){return i.collisionGeometry.hitTest(t.origin,t.direction)})),m(_(i),"onSelection",(function(){})),m(_(i),"update",(function(t,e,o){S((r=_(i),b(n.prototype)),"update",r).call(r,e,o),i.material.uniforms.u_model=i.modelMatrix})),m(_(i),"draw",(function(t){i.isReady&&i.shouldDraw&&(t.useProgram(i.material.programInfo.program),cn(t,i.material.programInfo,i.geometry.bufferInfo),un(i.material.programInfo,i.material.uniforms),t.drawElements(t.TRIANGLES,i.geometry.bufferInfo.numElements,t.UNSIGNED_SHORT,0))})),m(_(i),"setShadowPower",(function(t){console.log(t,"ShadowPower"),i.material.uniforms.shadowPower=t})),i.material=new Bn(fr),i.material.uniforms=dr,i.textureSrc={surface:t},i}}(),function t(e,n){var r=this;f(this,t),m(this,"isLoaded",!1),m(this,"ctx",void 0),m(this,"canvas",void 0),m(this,"image",void 0),m(this,"getIdFromLatLon",(function(t,e){if(r.isLoaded){var n=1-(t/90+1)/2,i=(e/180+1)/2*r.canvas.width,o=n*r.canvas.height;return r.ctx.getImageData(i,o,1,1).data[0]}})),this.image=new Image,this.image.src=e,this.image.addEventListener("load",(function(){r.canvas=document.createElement("canvas"),r.canvas.width=r.image.width,r.canvas.height=r.image.height,r.ctx=r.canvas.getContext("2d"),r.ctx.drawImage(r.image,0,0),r.isLoaded=!0,n&&n()}))}),mr=function t(e,n){var r=this;f(this,t),m(this,"isInit",!1),m(this,"useImageLookup",!1),m(this,"imageLookup",null),m(this,"getIdFromLatLon",(function(t,e){return r.imageLookup.getIdFromLatLon(t,e)})),m(this,"getFromId",(function(t){return r.data.find((function(e){return e.id===t}))})),m(this,"getFromCode",(function(t){return r.data.find((function(e){return e.code===t}))})),m(this,"getFromName",(function(t){return r.data.find((function(e){return e.name===t}))})),e instanceof Array&&(this.data=e,n&&(this.useImageLookup=!0,this.imageLookup=new pr(n,(function(){r.isInit=!0}))))},gr=function(){function t(){f(this,t)}return p(t,null,[{key:"radiansForPosition",value:function(t,e){return e>0?t>=0?Math.atan(t/e):2*Math.PI+Math.atan(t/e):e<0?Math.PI+Math.atan(t/e):t>0?Math.PI/2:3*Math.PI/2}},{key:"latLonFromWorld",value:function(t){var e=En();Dn(e,t);for(var n=Math.asin(e[1]),r=this.radiansForPosition(e[0],e[2]),i=180*n/Math.PI,o=180*r/Math.PI;o>180;)o-=360;return{lat:i,lon:o}}},{key:"distanceBetweenPoints",value:function(t,e){var n=function(t){return t*(Math.PI/180)},r=n(t.lat),i=n(e.lat),o=n(e.lat-t.lat),a=n(e.lon-t.lon),s=Math.sin(o/2)*Math.sin(o/2)+Math.cos(r)*Math.cos(i)*Math.sin(a/2)*Math.sin(a/2);return 2*Math.atan2(Math.sqrt(s),Math.sqrt(1-s))*6371}},{key:"worldFromLatLon",value:function(t,e,n){var r=n||0,i=t*Math.PI/180,o=e*Math.PI/180,a=Math.cos(i),s=Math.sin(i),u=Tn(Math.sin(o)*a,s,Math.cos(o)*a),c=En();return Dn(c,u),Mn(u,u,Ln(c,c,r)),u}},{key:"dotBetweenLatLon",value:function(e,n){return Cn(t.worldFromLatLon(e[0],e[1]),t.worldFromLatLon(n[0],n[1]))}},{key:"hexToRGB",value:function(t,e){var n=0,r=0,i=0,o=!1!==e;return 4===t.length?(n="0x".concat(t[1]).concat(t[1]),r="0x".concat(t[2]).concat(t[2]),i="0x".concat(t[3]).concat(t[3])):7===t.length&&(n="0x".concat(t[1]).concat(t[2]),r="0x".concat(t[3]).concat(t[4]),i="0x".concat(t[5]).concat(t[6])),o?(n/=255,r/=255,i/=255):(n=parseInt(n,16),r=parseInt(r,16),i=parseInt(i,16)),[n,r,i]}},{key:"hexToRGBA",value:function(t,e,n){var r=this.hexToRGB(t,n),i=!1!==n?e:255*e;return[r[0],r[1],r[2],i]}},{key:"isSubSet",value:function(t,e){return t.every((function(t){return void 0!==e.find((function(e){return e===t}))}))}},{key:"lerpColor",value:function(t,e,n){var r=this.hexToRGB(t),i=this.hexToRGB(e),o=Tn(r[0],r[1],r[2]),a=Tn(i[0],i[1],i[2]),s=En();return Pn(s,o,a,n),s}}]),t}();m(gr,"RGBToHex",(function(t,e,n){var r=t.toString(16),i=e.toString(16),o=n.toString(16);return 1===r.length&&(r="0".concat(r)),1===i.length&&(i="0".concat(i)),1===o.length&&(o="0".concat(o)),"#".concat(r).concat(i).concat(o)}));var vr=function(){function t(e,n,r,i){var o=this;f(this,t),m(this,"time",void 0),m(this,"delay",0),m(this,"ease",(function(t){return t})),m(this,"onComplete",(function(t){})),m(this,"onUpdate",(function(t){})),m(this,"endAt",void 0),m(this,"isNumeric",!1),m(this,"toObj",null),m(this,"fromObj",null),m(this,"currentObj",null),m(this,"mechanism",(function(){if(o.isRunning){if(o.stopped)return!1;var t=o.endAt-(new Date).getTime();t<=0?(clearTimeout(o.playTimeout),o.stopped=!0,o.advanceFrame(1,1),o.isNumeric?o.onUpdate(o.currentObj.value):o.onUpdate(o.currentObj),o.onComplete(!0),o.cleanup()):(o.advanceFrame(o.time-t,o.time),o.isNumeric?o.onUpdate(o.currentObj.value):o.onUpdate(o.currentObj))}})),i=i||{},this.time=r,this.endAt=(new Date).getTime()+this.time,this.isNumeric=!isNaN(e),this.isNumeric?(this.toObj={value:n},this.fromObj={value:e}):(this.toObj=v({},n),this.fromObj=v({},e)),this.currentObj=v({},this.fromObj),this.id=t.getId(),t.tweens[this.id]=this,i.onComplete&&(this.onComplete=i.onComplete,delete i.onComplete),i.onUpdate&&(this.onUpdate=i.onUpdate,delete i.onUpdate),i.ease&&(this.ease=i.ease,delete i.ease),i.delay&&(this.endAt+=i.delay,this.delay=i.delay,delete i.delay),this.playTimeout=setTimeout((function(){o.play()}),this.delay)}return p(t,[{key:"play",value:function(){this.endAt=(new Date).getTime()+this.time,this.isRunning=!0,t.isRunning||(t.isRunning=!0,requestAnimationFrame(t.mechanism))}},{key:"stop",value:function(){clearTimeout(this.playTimeout),this.stopped=!0,this.onComplete(!1),this.cleanup()}},{key:"currentValue",value:function(){return this.isNumeric?this.currentObj.value:this.currentObj}},{key:"cleanup",value:function(){this.isRunning=!1,delete t.tweens[this.id],0===Object.keys(t.tweens).length&&(t.isRunning=!1)}},{key:"advanceFrame",value:function(t,e){var n=0!==e?t/e:1;for(var r in n=this.ease(n),this.toObj){var i=this.fromObj[r],o=this.toObj[r]-i;this.currentObj[r]=i+o*n}}}]),t}();vr.id=0,vr.tweens={},vr.killTweensOf=function(t){for(var e in vr.tweens){var n=vr.tweens[e];n.obj===t&&n.stop()}},vr.getId=function(){return++vr.id},vr.isRunning=!1,vr.mechanism=function(){for(var t in vr.tweens)vr.tweens[t].mechanism();vr.isRunning&&requestAnimationFrame(vr.mechanism)};var yr=function t(e,n){var r=this;f(this,t),m(this,"width",4),m(this,"height",4),m(this,"channels",4),m(this,"elementLength",1),m(this,"data",void 0),m(this,"texture",void 0),m(this,"isInit",!1),m(this,"init",(function(t){var e={width:r.width,height:r.height,mag:t.NEAREST,min:t.NEAREST,src:r.data};r.texture=Be(t,e),r.isInit=!0})),m(this,"updatePixel",(function(t,e,n,i){if(r.isInit){var o=new Uint8Array(e);t.bindTexture(t.TEXTURE_2D,r.texture),t.texSubImage2D(t.TEXTURE_2D,0,i,n,1,1,t.RGBA,t.UNSIGNED_BYTE,o)}})),m(this,"updatePixelId",(function(t,e,n){var i=Math.floor(n/r.width),o=n-i*r.width;e.forEach((function(t,e){r.data[4*n+e]=t})),r.updatePixel(t,e,i,o)})),m(this,"updateSubrect",(function(t,e){r.isInit&&(t.bindTexture(t.TEXTURE_2D,r.texture),t.texSubImage2D(t.TEXTURE_2D,0,0,0,r.width,r.height,t.RGBA,t.UNSIGNED_BYTE,e))})),m(this,"getIdColor",(function(t){return r.data.slice(4*t,4*t+4)})),this.width=e||this.width,this.height=n||this.height,this.data=new Uint8Array(this.width*this.height*this.channels).fill(0)},br={vertex:"#define GLSLIFY 1\nattribute vec4 position;attribute vec3 normal;attribute vec2 texcoord;uniform mat4 u_worldViewProjection;uniform mat4 u_viewInverse;uniform mat4 u_model;uniform vec3 u_cameraPos;varying float vAlpha;varying vec2 vTexture;void main(){vec4 pos=u_worldViewProjection*u_model*position;vAlpha=dot(normalize(u_cameraPos),normalize(position.xyz));vTexture=texcoord;gl_Position=pos;}",fragment:"precision mediump float;\n#define GLSLIFY 1\nuniform sampler2D u_inactive;uniform sampler2D u_active;uniform sampler2D u_id;uniform sampler2D u_data;uniform float u_idAnimateIn;uniform float u_idAnimateOut;uniform float u_animateIn;uniform float u_animateOut;uniform vec3 u_animateHover;uniform vec3 u_animatable0;uniform vec3 u_animatable1;uniform vec3 u_animatable2;uniform vec3 u_animatable3;uniform vec3 u_animatable4;uniform vec3 u_animatable5;varying float vAlpha;varying vec2 vTexture;float when_eq(float x,float y){return 1.0-abs(sign(x-y));}float when_lt(float x,float y){return max(sign(y-x),0.0);}vec2 get_data_coords_from_id(float id){float width=16.0;float height=16.0;float w_pixel=1.0/width;float h_pixel=1.0/height;float row=floor(id/width);float col=id-(row*width);return vec2(col*w_pixel,row*h_pixel);}void main(){vec4 inactiveColor=texture2D(u_inactive,vec2(vTexture.x-0.25,vTexture.y));vec4 activeColor=texture2D(u_active,vec2(vTexture.x-0.25,vTexture.y));vec4 idColor=texture2D(u_id,vec2(vTexture.x-0.25,vTexture.y));vec4 dataColor=texture2D(u_data,get_data_coords_from_id(floor(idColor.r*255.0)))*idColor.a;vec3 base=inactiveColor.rgb*(1.0-dataColor.a)+dataColor.rgb*(dataColor.a);vec3 color=base;gl_FragColor=vec4(color,1.0);}"},_r={},xr=(function(t){y(n,lr);var e=w(n);function n(t){var r,i;return f(this,n),m(_(i=e.call(this)),"material",null),m(_(i),"lookup",null),m(_(i),"currentSelection",-1),m(_(i),"previousSelection",-1),m(_(i),"inAnimation",null),m(_(i),"outAnimation",null),m(_(i),"currentHover",-1),m(_(i),"hoverables",[]),m(_(i),"hoverableUniforms",["u_animatable0","u_animatable1","u_animatable2","u_animatable3","u_animatable4","u_animatable5"]),m(_(i),"inAnimations",{}),m(_(i),"outAnimations",{}),m(_(i),"highlighedCountries",[]),m(_(i),"selection0",236),m(_(i),"selection1",144),m(_(i),"current",236),m(_(i),"dataTexture",void 0),m(_(i),"dataTextureSize",16),m(_(i),"updateCMDs",[]),m(_(i),"highlightAnimationProps",{start:0,stop:1,duration:1e3,onUpdate:function(t){i.material.uniforms.u_animateIn=t}}),m(_(i),"init",(function(t,e){i.geometry=new hr("sphere"),i.geometry.init(t);var n={inactive:{src:i.textureSrc.inactive,minMag:t.LINEAR},active:{src:i.textureSrc.active,minMag:t.LINEAR},id:{src:i.textureSrc.id,minMag:t.NEAREST}};i.material.init(t),i.material.loadTextures(t,n,(function(){i.material.uniforms.u_inactive=i.material.textures.inactive,i.material.uniforms.u_active=i.material.textures.active,i.material.uniforms.u_id=i.material.textures.id,i.dataTexture.init(t),i.material.uniforms.u_data=i.dataTexture.texture,e&&e()}))})),m(_(i),"getValueForId",(function(t){return i.lookup.getFromId(t)})),m(_(i),"getValueForCode",(function(t){return i.lookup.getFromCode(t)})),m(_(i),"getValueForName",(function(t){return i.lookup.getFromName(t)})),m(_(i),"setIdColor",(function(t,e,n){var r=void 0===n?1:n,o=gr.hexToRGBA(e,r,!1);i.updateCMDs.push((function(e){i.dataTexture.updatePixelId(e,o,t)}))})),m(_(i),"getIdColor",(function(t){var e=i.dataTexture.getIdColor(t);return{color:gr.RGBToHex(e[0],e[1],e[2]),alpha:e[3]/255}})),m(_(i),"createCollisionGeo",(function(){i.collisionGeometry&&i.collisionGeometry instanceof or||(i.collisionGeometry=ir.create_collision_geometry(i.geometry.vertices.position,i.geometry.vertices.texcoord,i.geometry.vertices.indices))})),m(_(i),"rayCastFrom",(function(t){return i.collisionGeometry.raycast(t.origin,t.direction)})),m(_(i),"hitTest",(function(t){return i.collisionGeometry.hitTest(t.origin,t.direction)})),m(_(i),"onSelectionCB",(function(){})),m(_(i),"onSelection",(function(t,e,n){var r=gr.latLonFromWorld(n.point);return i.current=i.lookup.getIdFromLatLon(r.lat,r.lon),{id:i.current,name:i.lookup.getFromId(i.current)}})),m(_(i),"onHover",(function(t){})),m(_(i),"update",(function(t,e,o){S((r=_(i),b(n.prototype)),"update",r).call(r,e,o),i.material.uniforms.u_model=i.modelMatrix,i.updateCMDs.forEach((function(e){e(t)})),i.updateCMDs=[]})),m(_(i),"draw",(function(t){i.isReady&&i.shouldDraw&&(t.useProgram(i.material.programInfo.program),cn(t,i.material.programInfo,i.geometry.bufferInfo),un(i.material.programInfo,i.material.uniforms),t.drawElements(t.TRIANGLES,i.geometry.bufferInfo.numElements,t.UNSIGNED_SHORT,0))})),m(_(i),"setCountryHover",(function(t){})),m(_(i),"highlightId",(function(t,e,n,r,o){if(!(i.inAnimations[t]instanceof vr)){var a=e||"#ffffff",s=n||1,u=r||!0,c=0;i.outAnimations[t]instanceof vr&&(c=i.outAnimations[t].currentValue(),i.outAnimations[t].stop());var l=o||{};if(l.duration=l.duration||500,l.onComplete=l.onComplete||function(){},l.outDuration=l.outDuration||l.duration,l.onOutComplete=l.onOutComplete||function(){},u){var h={duration:l.outDuration,onComplete:l.onOutComplete};i.highlighedCountries.forEach((function(e){e!==t&&i.unhighlightId(e,h)}))}i.inAnimations[t]=new vr(c,s,l.duration,{onUpdate:function(e){i.setIdColor(t,a,e)},onComplete:function(e){delete i.inAnimations[t],l.onComplete(e)}}),i.highlighedCountries.push(t)}})),m(_(i),"unhighlightId",(function(t,e){if(-1!==i.highlighedCountries.indexOf(t)&&!(i.outAnimations[t]instanceof vr)){var n=e||{};n.duration=n.duration||500,n.onComplete=n.onComplete||function(){};var r=i.getIdColor(t),o=r.alpha;i.inAnimations[t]instanceof vr&&(o=i.inAnimations[t].currentValue(),i.inAnimations[t].stop()),i.outAnimations[t]=new vr(o,0,n.duration,{onUpdate:function(e){i.setIdColor(t,r.color,e)},onComplete:function(e){if(e){var r=i.highlighedCountries.indexOf(t);i.highlighedCountries.splice(r,1)}delete i.outAnimations[t],n.onComplete(e,t)}})}})),m(_(i),"addDataset",(function(t){i.lookup=new mr(t,i.textureSrc.id)})),i.material=new Bn(br),i.material.uniforms=_r,i.textureSrc={inactive:t.inactive,active:t.active,id:t.id},i.dataTexture=new yr(i.dataTextureSize,i.dataTextureSize),i}}(),function(){function t(){var e=this;f(this,t),m(this,"springStrength",.2),m(this,"drag",.875),m(this,"poleBufferThreshold",18),m(this,"panDeltaScale",42),m(this,"velocityDeltaScale",750),m(this,"_ambientController",null),m(this,"_animationController",null),m(this,"_interactionController",null),m(this,"_currentLatLonAlt",[0,0,4]),m(this,"_interactionStartLatLonAlt",null),m(this,"_interactionTargetLatLonAlt",null),m(this,"_latLonVelocity",[0,0,0]),m(this,"_ambientLonDirection",1),m(this,"_ambientLatIn",0),m(this,"_ambientLatDirection",1),m(this,"_prevTime",0),m(this,"_rotBounded",(function(t){return[Math.max(Math.min(t[0],90),-90),t[1]]})),m(this,"_rotSprung",(function(t){var n=.499*Math.PI,r=.499*-Math.PI,i=(90-e.poleBufferThreshold)/90,o=n*i,a=r*i,s=t[0]*(Math.PI/180),u=function(t){return Math.sin(t*Math.PI/2)},c=s;if(s>o){var l=s-o,h=n-o;c=o+h*u(Math.min(l/h,1))}if(s<a){var f=s-a,d=r-a;c=a+d*u(Math.min(f/d,1))}return[c*(180/Math.PI),t[1]]})),m(this,"_frustumDist",(function(t,e){return.5*t/Math.tan(.5*e*(Math.PI/180))})),m(this,"_rotForDelta",(function(t){var n=E(e._currentLatLonAlt,3)[2],r=t[0]*(e.pointsPerRadian*(n/e.zFullWidth)),i=t[1]*(e.pointsPerRadian*(n/e.zFullWidth)),o=180/Math.PI;return[-r*o,i*o]})),m(this,"_calcAmbientLatIn",(function(t){var n=t*(Math.PI/180)/(.5*Math.PI)*(90/(e._ambientController.latitudeVariance/2));return Math.abs(n)>1&&(n/=Math.abs(n)),Math.asin(n)}))}return p(t,[{key:"register",value:function(t,e,n){this._ambientController=t,this._animationController=e,this._interactionController=n}},{key:"resize",value:function(t,e,n,r){this.pointsPerRadian=Math.PI/(t/window.devicePixelRatio),this.camFov=r,this.camAspect=n,this.zFullWidth=this._frustumDist(1/this.camAspect*2,this.camFov)}},{key:"setLatLonAlt",value:function(t,e,n){this.setLatLon(t,e),this.setAlt(n)}},{key:"setLatLon",value:function(t,e){for(this._currentLatLonAlt=[t,e,this._currentLatLonAlt[2]],this._ambientLatIn=this._calcAmbientLatIn(t);this._currentLatLonAlt[1]>180;)this._currentLatLonAlt[1]-=360;for(;this._currentLatLonAlt[1]<-180;)this._currentLatLonAlt[1]+=360;this._animationController.cancelLatLon()}},{key:"setAlt",value:function(t){this._currentLatLonAlt=[this._currentLatLonAlt[0],this._currentLatLonAlt[1],t],this._animationController.cancelAlt()}},{key:"update",value:function(t,e){var n=t-this._prevTime;this.fov=e,this._updateAlt(n),this._updateLatLon(n),this._prevTime=t}},{key:"startPan",value:function(t){for(;this._currentLatLonAlt[1]>180;)this._currentLatLonAlt[1]-=360;for(;this._currentLatLonAlt[1]<-180;)this._currentLatLonAlt[1]+=360;this._interactionStartLatLonAlt=T(this._currentLatLonAlt);var e=this.panDeltaScale/devicePixelRatio,n=[t.deltaY*e,t.deltaX*e],r=E(this._currentLatLonAlt,3)[2],i=this._rotForDelta([this._interactionStartLatLonAlt[0]-n[0],this._interactionStartLatLonAlt[1]-n[1]]);this._interactionTargetLatLonAlt=[this._interactionStartLatLonAlt[0]+i[0],this._interactionStartLatLonAlt[1]+i[1],r],this._latLonVelocity=[0,0,0]}},{key:"continuePan",value:function(t){if(this._interactionStartLatLonAlt){var e=this.panDeltaScale/devicePixelRatio,n=[t.deltaY*e,t.deltaX*e],r=this._rotForDelta([this._interactionStartLatLonAlt[0]-n[0],this._interactionStartLatLonAlt[1]-n[1]]),i=this.velocityDeltaScale/devicePixelRatio,o=this._rotForDelta([t.velocityY,t.velocityX]);this._latLonVelocity=[-o[0]*i,-o[1]*i],this._ambientLonDirection=o[1]<0?1:-1;var a=E(this._interactionTargetLatLonAlt,3)[2],s=this._rotBounded([this._interactionStartLatLonAlt[0]+r[0],this._interactionStartLatLonAlt[1]+r[1]]);this._interactionTargetLatLonAlt=[s[0],s[1],a],this._lastGestureChange=t.timeStamp}}},{key:"endPan",value:function(t){this._interactionStartLatLonAlt=null,this._interactionTargetLatLonAlt=null;var e=t.timeStamp-this._lastGestureChange;this._ambientLatIn=this._calcAmbientLatIn(this._currentLatLonAlt[0]),e>.1&&(this._latLonVelocity=[0,0])}},{key:"_updateAlt",value:function(){if(this._animationController.isAnimatingAlt){var t=E(this._currentLatLonAlt,2),e=t[0],n=t[1];this._currentLatLonAlt=[e,n,this._animationController.currentAlt]}}},{key:"_updateLatLon",value:function(t){var e=E(this._currentLatLonAlt,3),n=e[0],r=e[1],i=e[2];if(this._interactionTargetLatLonAlt){var o=E(this._interactionTargetLatLonAlt,2),a=[o[0]-n,o[1]-r];this._currentLatLonAlt=[n+a[0]*this.springStrength,r+a[1]*this.springStrength,i]}else{var s=this._rotBounded([n+this._latLonVelocity[0],r+this._latLonVelocity[1]]);this._currentLatLonAlt=[s[0],s[1],i];var u=90-this.poleBufferThreshold,c=-90+this.poleBufferThreshold;if(s[0]>u){var l=s[0]-u;this._currentLatLonAlt[0]=u+.95*l}if(s[0]<c){var h=s[0]-c;this._currentLatLonAlt[0]=c+.95*h}if(this._latLonVelocity=[this._latLonVelocity[0]*this.drag,this._latLonVelocity[1]*this.drag],this._ambientController.isEnabled){var f=this._ambientController.ambientStrength,d=this._ambientLonDirection,p=this._ambientController.longitudeSpeed,m=E(this._currentLatLonAlt,2),g=m[0],v=m[1];v+=p*d*f,Math.abs(this._latLonVelocity[0])>1e-4&&(this._ambientLatIn=this._calcAmbientLatIn(n));var y=this._ambientController.latitudeSpeed;this._ambientLatIn+=t*this._ambientLatDirection*y*f;var b=this._ambientController.latitudeVariance/2;g+=(Math.sin(this._ambientLatIn)*b-g)*f*f,this._currentLatLonAlt=[g,v,i]}if(this._animationController.isAnimatingLatLon){var _=this._animationController.currentLatLon;this._currentLatLonAlt=[_[0],_[1],i]}else{for(;this._currentLatLonAlt[1]>180;)this._currentLatLonAlt[1]-=360;for(;this._currentLatLonAlt[1]<-180;)this._currentLatLonAlt[1]+=360}}}},{key:"currentLatLonAlt",get:function(){return T(this._currentLatLonAlt)}}]),t}());function wr(t,e){return t(e={exports:{}},e.exports),e.exports}"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==t||"undefined"!=typeof self&&self,wr((function(t){!function(e,n,r,i){function o(t,e,n){return setTimeout(l(t,n),e)}function a(t,e,n){return!!Array.isArray(t)&&(s(t,n[e],n),!0)}function s(t,e,n){var r;if(t)if(t.forEach)t.forEach(e,n);else if(t.length!==i)for(r=0;r<t.length;)e.call(n,t[r],r,t),r++;else for(r in t)t.hasOwnProperty(r)&&e.call(n,t[r],r,t)}function u(t,n,r){var i="DEPRECATED METHOD: "+n+"\n"+r+" AT \n";return function(){var n=new Error("get-stack-trace"),r=n&&n.stack?n.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",o=e.console&&(e.console.warn||e.console.log);return o&&o.call(e.console,i,r),t.apply(this,arguments)}}function c(t,e,n){var r,i=e.prototype;(r=t.prototype=Object.create(i)).constructor=t,r._super=i,n&&ot(r,n)}function l(t,e){return function(){return t.apply(e,arguments)}}function f(t,e){return h(t)==ut?t.apply(e&&e[0]||i,e):t}function d(t,e){return t===i?e:t}function p(t,e,n){s(y(e),(function(e){t.addEventListener(e,n,!1)}))}function m(t,e,n){s(y(e),(function(e){t.removeEventListener(e,n,!1)}))}function g(t,e){for(;t;){if(t==e)return!0;t=t.parentNode}return!1}function v(t,e){return t.indexOf(e)>-1}function y(t){return t.trim().split(/\s+/g)}function b(t,e,n){if(t.indexOf&&!n)return t.indexOf(e);for(var r=0;r<t.length;){if(n&&t[r][n]==e||!n&&t[r]===e)return r;r++}return-1}function _(t){return Array.prototype.slice.call(t,0)}function x(t,e,n){for(var r=[],i=[],o=0;o<t.length;){var a=e?t[o][e]:t[o];b(i,a)<0&&r.push(t[o]),i[o]=a,o++}return n&&(r=e?r.sort((function(t,n){return t[e]>n[e]})):r.sort()),r}function w(t,e){for(var n,r,o=e[0].toUpperCase()+e.slice(1),a=0;a<at.length;){if((r=(n=at[a])?n+o:e)in t)return r;a++}return i}function S(t){var n=t.ownerDocument||t;return n.defaultView||n.parentWindow||e}function E(t,e){var n=this;this.manager=t,this.callback=e,this.element=t.element,this.target=t.options.inputTarget,this.domHandler=function(e){f(t.options.enable,[t])&&n.handler(e)},this.init()}function T(t,e,n){var r=n.pointers.length,i=n.changedPointers.length,o=e&xt&&r-i==0,a=e&(St|Et)&&r-i==0;n.isFirst=!!o,n.isFinal=!!a,o&&(t.session={}),n.eventType=e,function(t,e){var n=t.session,r=e.pointers,i=r.length;n.firstInput||(n.firstInput=A(e)),i>1&&!n.firstMultiple?n.firstMultiple=A(e):1===i&&(n.firstMultiple=!1);var o=n.firstInput,a=n.firstMultiple,s=a?a.center:o.center,u=e.center=L(r);e.timeStamp=ht(),e.deltaTime=e.timeStamp-o.timeStamp,e.angle=R(s,u),e.distance=P(s,u),function(t,e){var n=e.center,r=t.offsetDelta||{},i=t.prevDelta||{},o=t.prevInput||{};e.eventType!==xt&&o.eventType!==St||(i=t.prevDelta={x:o.deltaX||0,y:o.deltaY||0},r=t.offsetDelta={x:n.x,y:n.y}),e.deltaX=i.x+(n.x-r.x),e.deltaY=i.y+(n.y-r.y)}(n,e),e.offsetDirection=C(e.deltaX,e.deltaY);var c=D(e.deltaTime,e.deltaX,e.deltaY);e.overallVelocityX=c.x,e.overallVelocityY=c.y,e.overallVelocity=lt(c.x)>lt(c.y)?c.x:c.y,e.scale=a?function(t,e){return P(e[0],e[1],Ot)/P(t[0],t[1],Ot)}(a.pointers,r):1,e.rotation=a?function(t,e){return R(e[1],e[0],Ot)+R(t[1],t[0],Ot)}(a.pointers,r):0,e.maxPointers=n.prevInput?e.pointers.length>n.prevInput.maxPointers?e.pointers.length:n.prevInput.maxPointers:e.pointers.length,M(n,e);var l=t.element;g(e.srcEvent.target,l)&&(l=e.srcEvent.target),e.target=l}(t,n),t.emit("hammer.input",n),t.recognize(n),t.session.prevInput=n}function M(t,e){var n,r,o,a,s=t.lastInterval||e,u=e.timeStamp-s.timeStamp;if(e.eventType!=Et&&(u>_t||s.velocity===i)){var c=e.deltaX-s.deltaX,l=e.deltaY-s.deltaY,h=D(u,c,l);r=h.x,o=h.y,n=lt(h.x)>lt(h.y)?h.x:h.y,a=C(c,l),t.lastInterval=e}else n=s.velocity,r=s.velocityX,o=s.velocityY,a=s.direction;e.velocity=n,e.velocityX=r,e.velocityY=o,e.direction=a}function A(t){for(var e=[],n=0;n<t.pointers.length;)e[n]={clientX:ct(t.pointers[n].clientX),clientY:ct(t.pointers[n].clientY)},n++;return{timeStamp:ht(),pointers:e,center:L(e),deltaX:t.deltaX,deltaY:t.deltaY}}function L(t){var e=t.length;if(1===e)return{x:ct(t[0].clientX),y:ct(t[0].clientY)};for(var n=0,r=0,i=0;e>i;)n+=t[i].clientX,r+=t[i].clientY,i++;return{x:ct(n/e),y:ct(r/e)}}function D(t,e,n){return{x:e/t||0,y:n/t||0}}function C(t,e){return t===e?Tt:lt(t)>=lt(e)?0>t?Mt:At:0>e?Lt:Dt}function P(t,e,n){n||(n=kt);var r=e[n[0]]-t[n[0]],i=e[n[1]]-t[n[1]];return Math.sqrt(r*r+i*i)}function R(t,e,n){n||(n=kt);var r=e[n[0]]-t[n[0]],i=e[n[1]]-t[n[1]];return 180*Math.atan2(i,r)/Math.PI}function k(){this.evEl=Ft,this.evWin=zt,this.pressed=!1,E.apply(this,arguments)}function O(){this.evEl=Ut,this.evWin=jt,E.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}function I(){this.evTarget=Vt,this.evWin=Gt,this.started=!1,E.apply(this,arguments)}function F(t,e){var n=_(t.touches),r=_(t.changedTouches);return e&(St|Et)&&(n=x(n.concat(r),"identifier",!0)),[n,r]}function z(){this.evTarget=qt,this.targetIds={},E.apply(this,arguments)}function B(t,e){var n=_(t.touches),r=this.targetIds;if(e&(xt|wt)&&1===n.length)return r[n[0].identifier]=!0,[n,n];var i,o,a=_(t.changedTouches),s=[],u=this.target;if(o=n.filter((function(t){return g(t.target,u)})),e===xt)for(i=0;i<o.length;)r[o[i].identifier]=!0,i++;for(i=0;i<a.length;)r[a[i].identifier]&&s.push(a[i]),e&(St|Et)&&delete r[a[i].identifier],i++;return s.length?[x(o.concat(s),"identifier",!0),s]:void 0}function N(){E.apply(this,arguments);var t=l(this.handler,this);this.touch=new z(this.manager,t),this.mouse=new k(this.manager,t),this.primaryTouch=null,this.lastTouches=[]}function U(t,e){t&xt?(this.primaryTouch=e.changedPointers[0].identifier,j.call(this,e)):t&(St|Et)&&j.call(this,e)}function j(t){var e=t.changedPointers[0];if(e.identifier===this.primaryTouch){var n={x:e.clientX,y:e.clientY};this.lastTouches.push(n);var r=this.lastTouches;setTimeout((function(){var t=r.indexOf(n);t>-1&&r.splice(t,1)}),Xt)}}function H(t){for(var e=t.srcEvent.clientX,n=t.srcEvent.clientY,r=0;r<this.lastTouches.length;r++){var i=this.lastTouches[r],o=Math.abs(e-i.x),a=Math.abs(n-i.y);if(Yt>=o&&Yt>=a)return!0}return!1}function V(t,e){this.manager=t,this.set(e)}function G(t){this.options=ot({},this.defaults,t||{}),this.id=pt++,this.manager=null,this.options.enable=d(this.options.enable,!0),this.state=re,this.simultaneous={},this.requireFail=[]}function W(t){return t&ue?"cancel":t&ae?"end":t&oe?"move":t&ie?"start":""}function q(t){return t==Dt?"down":t==Lt?"up":t==Mt?"left":t==At?"right":""}function X(t,e){var n=e.manager;return n?n.get(t):t}function Y(){G.apply(this,arguments)}function Z(){Y.apply(this,arguments),this.pX=null,this.pY=null}function J(){Y.apply(this,arguments)}function Q(){G.apply(this,arguments),this._timer=null,this._input=null}function K(){Y.apply(this,arguments)}function $(){Y.apply(this,arguments)}function tt(){G.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}function et(t,e){return(e=e||{}).recognizers=d(e.recognizers,et.defaults.preset),new nt(t,e)}function nt(t,e){this.options=ot({},et.defaults,e||{}),this.options.inputTarget=this.options.inputTarget||t,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=t,this.input=function(t){return new(t.options.inputClass||(gt?O:vt?z:mt?N:k))(t,T)}(this),this.touchAction=new V(this,this.options.touchAction),rt(this,!0),s(this.options.recognizers,(function(t){var e=this.add(new t[0](t[1]));t[2]&&e.recognizeWith(t[2]),t[3]&&e.requireFailure(t[3])}),this)}function rt(t,e){var n,r=t.element;r.style&&(s(t.options.cssProps,(function(i,o){n=w(r.style,o),e?(t.oldCssProps[n]=r.style[n],r.style[n]=i):r.style[n]=t.oldCssProps[n]||""})),e||(t.oldCssProps={}))}function it(t,e){var r=n.createEvent("Event");r.initEvent(t,!0,!0),r.gesture=e,e.target.dispatchEvent(r)}var ot,at=["","webkit","Moz","MS","ms","o"],st=n.createElement("div"),ut="function",ct=Math.round,lt=Math.abs,ht=Date.now;ot="function"!=typeof Object.assign?function(t){if(t===i||null===t)throw new TypeError("Cannot convert undefined or null to object");for(var e=Object(t),n=1;n<arguments.length;n++){var r=arguments[n];if(r!==i&&null!==r)for(var o in r)r.hasOwnProperty(o)&&(e[o]=r[o])}return e}:Object.assign;var ft=u((function(t,e,n){for(var r=Object.keys(e),o=0;o<r.length;)(!n||n&&t[r[o]]===i)&&(t[r[o]]=e[r[o]]),o++;return t}),"extend","Use `assign`."),dt=u((function(t,e){return ft(t,e,!0)}),"merge","Use `assign`."),pt=1,mt="ontouchstart"in e,gt=w(e,"PointerEvent")!==i,vt=mt&&/mobile|tablet|ip(ad|hone|od)|android/i.test(navigator.userAgent),yt="touch",bt="mouse",_t=25,xt=1,wt=2,St=4,Et=8,Tt=1,Mt=2,At=4,Lt=8,Dt=16,Ct=Mt|At,Pt=Lt|Dt,Rt=Ct|Pt,kt=["x","y"],Ot=["clientX","clientY"];E.prototype={handler:function(){},init:function(){this.evEl&&p(this.element,this.evEl,this.domHandler),this.evTarget&&p(this.target,this.evTarget,this.domHandler),this.evWin&&p(S(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&m(this.element,this.evEl,this.domHandler),this.evTarget&&m(this.target,this.evTarget,this.domHandler),this.evWin&&m(S(this.element),this.evWin,this.domHandler)}};var It={mousedown:xt,mousemove:wt,mouseup:St},Ft="mousedown",zt="mousemove mouseup";c(k,E,{handler:function(t){var e=It[t.type];e&xt&&0===t.button&&(this.pressed=!0),e&wt&&1!==t.which&&(e=St),this.pressed&&(e&St&&(this.pressed=!1),this.callback(this.manager,e,{pointers:[t],changedPointers:[t],pointerType:bt,srcEvent:t}))}});var Bt={pointerdown:xt,pointermove:wt,pointerup:St,pointercancel:Et,pointerout:Et},Nt={2:yt,3:"pen",4:bt,5:"kinect"},Ut="pointerdown",jt="pointermove pointerup pointercancel";e.MSPointerEvent&&!e.PointerEvent&&(Ut="MSPointerDown",jt="MSPointerMove MSPointerUp MSPointerCancel"),c(O,E,{handler:function(t){var e=this.store,n=!1,r=t.type.toLowerCase().replace("ms",""),i=Bt[r],o=Nt[t.pointerType]||t.pointerType,a=o==yt,s=b(e,t.pointerId,"pointerId");i&xt&&(0===t.button||a)?0>s&&(e.push(t),s=e.length-1):i&(St|Et)&&(n=!0),0>s||(e[s]=t,this.callback(this.manager,i,{pointers:e,changedPointers:[t],pointerType:o,srcEvent:t}),n&&e.splice(s,1))}});var Ht={touchstart:xt,touchmove:wt,touchend:St,touchcancel:Et},Vt="touchstart",Gt="touchstart touchmove touchend touchcancel";c(I,E,{handler:function(t){var e=Ht[t.type];if(e===xt&&(this.started=!0),this.started){var n=F.call(this,t,e);e&(St|Et)&&n[0].length-n[1].length==0&&(this.started=!1),this.callback(this.manager,e,{pointers:n[0],changedPointers:n[1],pointerType:yt,srcEvent:t})}}});var Wt={touchstart:xt,touchmove:wt,touchend:St,touchcancel:Et},qt="touchstart touchmove touchend touchcancel";c(z,E,{handler:function(t){var e=Wt[t.type],n=B.call(this,t,e);n&&this.callback(this.manager,e,{pointers:n[0],changedPointers:n[1],pointerType:yt,srcEvent:t})}});var Xt=2500,Yt=25;c(N,E,{handler:function(t,e,n){var r=n.pointerType==yt,i=n.pointerType==bt;if(!(i&&n.sourceCapabilities&&n.sourceCapabilities.firesTouchEvents)){if(r)U.call(this,e,n);else if(i&&H.call(this,n))return;this.callback(t,e,n)}},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});var Zt=w(st.style,"touchAction"),Jt=Zt!==i,Qt="compute",Kt="manipulation",$t="none",te="pan-x",ee="pan-y",ne=function(){if(!Jt)return!1;var t={},n=e.CSS&&e.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach((function(r){t[r]=!n||e.CSS.supports("touch-action",r)})),t}();V.prototype={set:function(t){t==Qt&&(t=this.compute()),Jt&&this.manager.element.style&&ne[t]&&(this.manager.element.style[Zt]=t),this.actions=t.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var t=[];return s(this.manager.recognizers,(function(e){f(e.options.enable,[e])&&(t=t.concat(e.getTouchAction()))})),function(t){if(v(t,$t))return $t;var e=v(t,te),n=v(t,ee);return e&&n?$t:e||n?e?te:ee:v(t,Kt)?Kt:"auto"}(t.join(" "))},preventDefaults:function(t){var e=t.srcEvent,n=t.offsetDirection;if(!this.manager.session.prevented){var r=this.actions,i=v(r,$t)&&!ne[$t],o=v(r,ee)&&!ne[ee],a=v(r,te)&&!ne[te];if(i){var s=1===t.pointers.length,u=t.distance<2,c=t.deltaTime<250;if(s&&u&&c)return}return a&&o?void 0:i||o&&n&Ct||a&&n&Pt?this.preventSrc(e):void 0}e.preventDefault()},preventSrc:function(t){this.manager.session.prevented=!0,t.preventDefault()}};var re=1,ie=2,oe=4,ae=8,se=ae,ue=16;G.prototype={defaults:{},set:function(t){return ot(this.options,t),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(t){if(a(t,"recognizeWith",this))return this;var e=this.simultaneous;return e[(t=X(t,this)).id]||(e[t.id]=t,t.recognizeWith(this)),this},dropRecognizeWith:function(t){return a(t,"dropRecognizeWith",this)||(t=X(t,this),delete this.simultaneous[t.id]),this},requireFailure:function(t){if(a(t,"requireFailure",this))return this;var e=this.requireFail;return-1===b(e,t=X(t,this))&&(e.push(t),t.requireFailure(this)),this},dropRequireFailure:function(t){if(a(t,"dropRequireFailure",this))return this;t=X(t,this);var e=b(this.requireFail,t);return e>-1&&this.requireFail.splice(e,1),this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(t){return!!this.simultaneous[t.id]},emit:function(t){function e(e){n.manager.emit(e,t)}var n=this,r=this.state;ae>r&&e(n.options.event+W(r)),e(n.options.event),t.additionalEvent&&e(t.additionalEvent),r>=ae&&e(n.options.event+W(r))},tryEmit:function(t){return this.canEmit()?this.emit(t):void(this.state=32)},canEmit:function(){for(var t=0;t<this.requireFail.length;){if(!(this.requireFail[t].state&(32|re)))return!1;t++}return!0},recognize:function(t){var e=ot({},t);return f(this.options.enable,[this,e])?(this.state&(se|ue|32)&&(this.state=re),this.state=this.process(e),void(this.state&(ie|oe|ae|ue)&&this.tryEmit(e))):(this.reset(),void(this.state=32))},process:function(t){},getTouchAction:function(){},reset:function(){}},c(Y,G,{defaults:{pointers:1},attrTest:function(t){var e=this.options.pointers;return 0===e||t.pointers.length===e},process:function(t){var e=this.state,n=t.eventType,r=e&(ie|oe),i=this.attrTest(t);return r&&(n&Et||!i)?e|ue:r||i?n&St?e|ae:e&ie?e|oe:ie:32}}),c(Z,Y,{defaults:{event:"pan",threshold:10,pointers:1,direction:Rt},getTouchAction:function(){var t=this.options.direction,e=[];return t&Ct&&e.push(ee),t&Pt&&e.push(te),e},directionTest:function(t){var e=this.options,n=!0,r=t.distance,i=t.direction,o=t.deltaX,a=t.deltaY;return i&e.direction||(e.direction&Ct?(i=0===o?Tt:0>o?Mt:At,n=o!=this.pX,r=Math.abs(t.deltaX)):(i=0===a?Tt:0>a?Lt:Dt,n=a!=this.pY,r=Math.abs(t.deltaY))),t.direction=i,n&&r>e.threshold&&i&e.direction},attrTest:function(t){return Y.prototype.attrTest.call(this,t)&&(this.state&ie||!(this.state&ie)&&this.directionTest(t))},emit:function(t){this.pX=t.deltaX,this.pY=t.deltaY;var e=q(t.direction);e&&(t.additionalEvent=this.options.event+e),this._super.emit.call(this,t)}}),c(J,Y,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[$t]},attrTest:function(t){return this._super.attrTest.call(this,t)&&(Math.abs(t.scale-1)>this.options.threshold||this.state&ie)},emit:function(t){if(1!==t.scale){var e=t.scale<1?"in":"out";t.additionalEvent=this.options.event+e}this._super.emit.call(this,t)}}),c(Q,G,{defaults:{event:"press",pointers:1,time:251,threshold:9},getTouchAction:function(){return["auto"]},process:function(t){var e=this.options,n=t.pointers.length===e.pointers,r=t.distance<e.threshold,i=t.deltaTime>e.time;if(this._input=t,!r||!n||t.eventType&(St|Et)&&!i)this.reset();else if(t.eventType&xt)this.reset(),this._timer=o((function(){this.state=se,this.tryEmit()}),e.time,this);else if(t.eventType&St)return se;return 32},reset:function(){clearTimeout(this._timer)},emit:function(t){this.state===se&&(t&&t.eventType&St?this.manager.emit(this.options.event+"up",t):(this._input.timeStamp=ht(),this.manager.emit(this.options.event,this._input)))}}),c(K,Y,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[$t]},attrTest:function(t){return this._super.attrTest.call(this,t)&&(Math.abs(t.rotation)>this.options.threshold||this.state&ie)}}),c($,Y,{defaults:{event:"swipe",threshold:10,velocity:.3,direction:Ct|Pt,pointers:1},getTouchAction:function(){return Z.prototype.getTouchAction.call(this)},attrTest:function(t){var e,n=this.options.direction;return n&(Ct|Pt)?e=t.overallVelocity:n&Ct?e=t.overallVelocityX:n&Pt&&(e=t.overallVelocityY),this._super.attrTest.call(this,t)&&n&t.offsetDirection&&t.distance>this.options.threshold&&t.maxPointers==this.options.pointers&&lt(e)>this.options.velocity&&t.eventType&St},emit:function(t){var e=q(t.offsetDirection);e&&this.manager.emit(this.options.event+e,t),this.manager.emit(this.options.event,t)}}),c(tt,G,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},getTouchAction:function(){return[Kt]},process:function(t){var e=this.options,n=t.pointers.length===e.pointers,r=t.distance<e.threshold,i=t.deltaTime<e.time;if(this.reset(),t.eventType&xt&&0===this.count)return this.failTimeout();if(r&&i&&n){if(t.eventType!=St)return this.failTimeout();var a=!this.pTime||t.timeStamp-this.pTime<e.interval,s=!this.pCenter||P(this.pCenter,t.center)<e.posThreshold;if(this.pTime=t.timeStamp,this.pCenter=t.center,s&&a?this.count+=1:this.count=1,this._input=t,0==this.count%e.taps)return this.hasRequireFailures()?(this._timer=o((function(){this.state=se,this.tryEmit()}),e.interval,this),ie):se}return 32},failTimeout:function(){return this._timer=o((function(){this.state=32}),this.options.interval,this),32},reset:function(){clearTimeout(this._timer)},emit:function(){this.state==se&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}}),et.VERSION="2.0.8",et.defaults={domEvents:!1,touchAction:Qt,enable:!0,inputTarget:null,inputClass:null,preset:[[K,{enable:!1}],[J,{enable:!1},["rotate"]],[$,{direction:Ct}],[Z,{direction:Ct},["swipe"]],[tt],[tt,{event:"doubletap",taps:2},["tap"]],[Q]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}},nt.prototype={set:function(t){return ot(this.options,t),t.touchAction&&this.touchAction.update(),t.inputTarget&&(this.input.destroy(),this.input.target=t.inputTarget,this.input.init()),this},stop:function(t){this.session.stopped=t?2:1},recognize:function(t){var e=this.session;if(!e.stopped){this.touchAction.preventDefaults(t);var n,r=this.recognizers,i=e.curRecognizer;(!i||i&&i.state&se)&&(i=e.curRecognizer=null);for(var o=0;o<r.length;)n=r[o],2===e.stopped||i&&n!=i&&!n.canRecognizeWith(i)?n.reset():n.recognize(t),!i&&n.state&(ie|oe|ae)&&(i=e.curRecognizer=n),o++}},get:function(t){if(t instanceof G)return t;for(var e=this.recognizers,n=0;n<e.length;n++)if(e[n].options.event==t)return e[n];return null},add:function(t){if(a(t,"add",this))return this;var e=this.get(t.options.event);return e&&this.remove(e),this.recognizers.push(t),t.manager=this,this.touchAction.update(),t},remove:function(t){if(a(t,"remove",this))return this;if(t=this.get(t)){var e=this.recognizers,n=b(e,t);-1!==n&&(e.splice(n,1),this.touchAction.update())}return this},on:function(t,e){if(t!==i&&e!==i){var n=this.handlers;return s(y(t),(function(t){n[t]=n[t]||[],n[t].push(e)})),this}},off:function(t,e){if(t!==i){var n=this.handlers;return s(y(t),(function(t){e?n[t]&&n[t].splice(b(n[t],e),1):delete n[t]})),this}},emit:function(t,e){this.options.domEvents&&it(t,e);var n=this.handlers[t]&&this.handlers[t].slice();if(n&&n.length){e.type=t,e.preventDefault=function(){e.srcEvent.preventDefault()};for(var r=0;r<n.length;)n[r](e),r++}},destroy:function(){this.element&&rt(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}},ot(et,{INPUT_START:xt,INPUT_MOVE:wt,INPUT_END:St,INPUT_CANCEL:Et,STATE_POSSIBLE:re,STATE_BEGAN:ie,STATE_CHANGED:oe,STATE_ENDED:ae,STATE_RECOGNIZED:se,STATE_CANCELLED:ue,STATE_FAILED:32,DIRECTION_NONE:Tt,DIRECTION_LEFT:Mt,DIRECTION_RIGHT:At,DIRECTION_UP:Lt,DIRECTION_DOWN:Dt,DIRECTION_HORIZONTAL:Ct,DIRECTION_VERTICAL:Pt,DIRECTION_ALL:Rt,Manager:nt,Input:E,TouchAction:V,TouchInput:z,MouseInput:k,PointerEventInput:O,TouchMouseInput:N,SingleTouchInput:I,Recognizer:G,AttrRecognizer:Y,Tap:tt,Pan:Z,Swipe:$,Pinch:J,Rotate:K,Press:Q,on:p,off:m,each:s,merge:dt,extend:ft,assign:ot,inherit:c,bindFn:l,prefixed:w}),(void 0!==e?e:"undefined"!=typeof self?self:{}).Hammer=et,t.exports?t.exports=et:e.Hammer=et}(window,document)}));var Sr=function(){function t(e,n,r){var i=this;f(this,t),m(this,"targetElement",window),m(this,"targetDrawable",null),m(this,"camera",null),m(this,"boundingRect",null),m(this,"onTapCB",null),m(this,"onMouseMoveCB",null),m(this,"options",{tap:!0,pan:!0,pinch:!0}),m(this,"_movementModel",null),m(this,"_ambientController",null),m(this,"_animationController",null),m(this,"_isInteractive",!1),m(this,"resize",(function(){i.boundingRect=i.targetElement.getBoundingClientRect(),i._movementModel.resize(i.boundingRect.width,i.boundingRect.height,i.camera.aspect,i.camera.fov)})),m(this,"update",(function(){i._movementModel.update(i.camera.fov)})),m(this,"isOverTarget",(function(t,e){var n=t-i.boundingRect.x,r=e-i.boundingRect.y,o=n/i.boundingRect.width,a=(i.boundingRect.height-r)/i.boundingRect.height,s=i.camera.getRayFromScreen(o,a);return i.targetDrawable.hitTest(s)})),m(this,"onPanStart",(function(t){i.isOverTarget(t.center.x,t.center.y)&&(i._movementModel.startPan(t),i._ambientController.pauseMotion())})),m(this,"onPanContinue",(function(t){i._movementModel.continuePan(t)})),m(this,"onPanEnd",(function(t){i._movementModel.endPan(t),i._ambientController.isEnabled&&i._ambientController.resumeMotionAnimated()})),m(this,"onTap",(function(t){var e=t.center.x-i.boundingRect.x,n=t.center.y-i.boundingRect.y;i.onTapCB&&i.onTapCB(e,n)})),m(this,"onMouseMove",(function(t){var e=t.offsetX-i.boundingRect.x,n=t.offsetY-i.boundingRect.y;i.onMouseMoveCB&&i.onMouseMoveCB(e,n)})),e&&(this.targetElement=e,this.boundingRect=this.targetElement.getBoundingClientRect()),this.camera=n,r&&(r.tap&&(this.options.tap=r.tap),r.pan&&(this.options.pan=r.pan),r.pinch&&(this.options.pinch=r.pinch));var o=window.Hammer;this.hammer=o(this.targetElement,null),this.hammer.get("pan").set({direction:o.DIRECTION_ALL}),this.targetElement.addEventListener("mousemove",this.onMouseMove),this.isInteractive=!0}return p(t,[{key:"register",value:function(t,e,n){this._movementModel=n,this._movementModel.resize(this.boundingRect.width,this.boundingRect.height,this.camera.aspect,this.camera.fov),this._ambientController=t,this._animationController=e}},{key:"target",set:function(t){this.targetDrawable=t}},{key:"isInteractive",get:function(){return this._isInteractive},set:function(t){t!==this._isInteractive&&(t?(this.options.tap&&this.hammer.on("tap",this.onTap),this.options.pan&&this.hammer.on("panstart",this.onPanStart),this.options.pan&&this.hammer.on("pan",this.onPanContinue),this.options.pan&&this.hammer.on("panend",this.onPanEnd),this.options.pinch&&this.hammer.on("tap",this.onPinch),this._isInteractive=t):(this.options.tap&&this.hammer.off("tap",this.onTap),this.options.pan&&this.hammer.off("panstart",this.onPanStart),this.options.pan&&this.hammer.off("pan",this.onPanContinue),this.options.pan&&this.hammer.off("panend",this.onPanEnd),this.options.pinch&&this.hammer.off("tap",this.onPinch),this._isInteractive=t))}}]),t}(),Er=function(){function t(){f(this,t)}return p(t,null,[{key:"create",value:function(t,e,n,r){var i=3*t,o=3*(n-t)-i,a=1-i-o,s=3*e,u=3*(r-e)-s,c=1-s-u,l=function(t){return((a*t+o)*t+i)*t};return function(t){return function(t){return((c*t+u)*t+s)*t}(function(t,e){var n,r,s,u,c,h;s=t;for(var f=0;f<8;f++){if(u=l(s)-t,Math.abs(u)<1e-9)return s;if(c=(3*a*(h=s)+2*o)*h+i,Math.abs(c)<1e-6)break;s-=u/c}if((s=t)<(n=0))return n;if(s>(r=1))return r;for(;n<r;){if(u=l(s),Math.abs(u-t)<1e-9)return s;t>u?n=s:r=s,s=.5*(r-n)+n}return s}(t))}}}]),t}(),Tr=function(){function t(){f(this,t),m(this,"_latLonTween",null),m(this,"_altTween",null),m(this,"_currentLatLon",null),m(this,"_currentAlt",null),m(this,"_movementModel",null),m(this,"_interactionController",null),m(this,"_ambientController",null)}return p(t,[{key:"register",value:function(t,e,n){this._movementModel=n,this._interactionController=e,this._ambientController=t}},{key:"animateLatLonAlt",value:function(e,n,r,i){var o=i||{};if(!o.duration&&0!==o.duration){var a=this._movementModel.currentLatLonAlt,s=[e,n];o.duration=t._defaultDuration(a,s)}this.animateLatLon(e,n,o),this.animateAlt(r,v(v({},o),{},{onComplete:null}))}},{key:"animateLatLon",value:function(e,n,r){var i=this,o=r||{},a=this._movementModel.currentLatLonAlt;this._currentLatLon=[a[0],a[1]];var s=T(this._currentLatLon),u=[e,n],c=n+360,l=n-360,h=Math.abs(n-s[1]),f=Math.abs(c-s[1]),d=Math.abs(l-s[1]);f<=d&&f<=h&&(u[1]=c),d<=h&&d<=f&&(u[1]=l);var p,m=o.duration;if(m||0===m||(m=t._defaultDuration(s,u)),p=o.ease&&"function"==typeof o.ease?o.ease:t._defaultLatLonEase(m),!this._ambientController.isPaused){var g=Math.min(250,m/4);this._ambientController.pauseMotionAnimated({duration:g})}this._latLonTween&&this._latLonTween.stop(),this._latLonTween=new vr(0,1,m,{onUpdate:function(t){var e=p(t);i._currentLatLon=[s[0]+(u[0]-s[0])*e,s[1]+(u[1]-s[1])*e]},onComplete:function(t){t&&(i._latLonTween=null,i._currentLatLon=null,i._movementModel.setLatLon(u[0],u[1]),i._ambientController.isEnabled&&i._ambientController.isPaused&&i._ambientController.resumeMotionAnimated()),o.onComplete&&"function"==typeof o.onComplete&&o.onComplete(t)}})}},{key:"animateAlt",value:function(t,e){var n=this,r=e||{};this._currentAlt=this._movementModel.currentLatLonAlt[2];var i,o=this._currentAlt,a=t,s=r.duration;if(s||0===s||(s=500),i=r.ease&&"function"==typeof r.ease?r.ease:function(t){return t},!this._ambientController.isPaused){var u=Math.min(250,s/4);this._ambientController.pauseMotionAnimated({duration:u})}this._altTween&&this._altTween.stop(),this._altTween=new vr(0,1,s,{onUpdate:function(t){var e=i(t);n._currentAlt=o+(a-o)*e},onComplete:function(t){t&&(n._altTween=null,n._currentAlt=null,n._movementModel.setAlt(a),n._ambientController.isEnabled&&n._ambientController.isPaused&&n._ambientController.resumeMotionAnimated()),r.onComplete&&"function"==typeof r.onComplete&&r.onComplete(t)}})}},{key:"cancelLatLonAlt",value:function(){this.cancelLatLon(),this.cancelAlt()}},{key:"cancelLatLon",value:function(){this._latLonTween&&(this._latLonTween.stop(),this._latLonTween=null,this._currentLatLon=null)}},{key:"cancelAlt",value:function(){this._altTween&&(this._altTween.stop(),this._altTween=null,this._currentAlt=null)}},{key:"isAnimatingLatLon",get:function(){return null!=this._latLonTween}},{key:"isAnimatingAlt",get:function(){return null!=this._altTween}},{key:"currentLatLon",get:function(){return this._currentLatLon}},{key:"currentAlt",get:function(){return this._currentAlt}}],[{key:"_defaultDuration",value:function(t,e){return 300+700*(1-(gr.dotBetweenLatLon(t,e)+1)/2)}},{key:"_defaultLatLonEase",value:function(t){var e=t-350,n=.55+(.85-.55)*Math.min(Math.max(e/100,0),1);return Er.create(.315,.015,1-n,1)}}]),t}(),Mr=function(){function t(){f(this,t),m(this,"latitudeVariance",100),m(this,"latitudeSpeed",.5),m(this,"longitudeSpeed",.05),m(this,"isEnabled",!0),m(this,"_ambientStrength",1),m(this,"_ambientTween",null),m(this,"_isPaused",!1),m(this,"_movementController",null),m(this,"_animationController",null),m(this,"_interactionController",null)}return p(t,[{key:"register",value:function(t,e,n){this._movementModel=n,this._interactionController=e,this._animationController=t}},{key:"pauseMotion",value:function(){this._isPaused=!0,this._ambientTween&&this._ambientTween.stop(),this._ambientTween=null,this._ambientStrength=0}},{key:"pauseMotionAnimated",value:function(t){var e=this;this._isPaused=!0;var n,r=t||{},i=500;(r.duration||0===r.duration)&&(i=r.duration),n=r.ease&&"function"==typeof r.ease?r.ease:function(t){return t};var o=1;this._ambientTween&&(o=this._ambientTween.currentValue(),this._ambientTween.stop()),this._ambientTween=new vr(o,0,(o-0)*i,{onUpdate:function(t){e._ambientStrength=n(t)},onComplete:function(t){t&&(e._ambientTween=null),r.onComplete&&"function"==typeof r.onComplete&&r.onComplete(t)}})}},{key:"resumeMotion",value:function(){this._isPaused=!1,this._ambientTween.stop(),this._ambientTween=null,this._ambientStrength=1}},{key:"resumeMotionAnimated",value:function(t){var e=this;this._isPaused=!1;var n,r=t||{},i=1e3;(r.duration||0===r.duration)&&(i=r.duration),n=r.ease&&"function"==typeof r.ease?r.ease:function(t){return t};var o=0;this._ambientTween&&(o=this._ambientTween.currentValue(),this._ambientTween.stop()),this._ambientTween=new vr(o,1,(1-o)*i,{onUpdate:function(t){e._ambientStrength=1-n(1-t)},onComplete:function(t){t&&(e._ambientTween=null),r.onComplete&&"function"==typeof r.onComplete&&r.onComplete(t)}})}},{key:"ambientStrength",get:function(){return this._ambientStrength}},{key:"isPaused",get:function(){return this._isPaused}}]),t}(),Ar=function(){function t(e){var n=this;f(this,t),m(this,"_container",null),m(this,"_callouts",{}),m(this,"_calloutDefinitions",[]),m(this,"_currentlyRemoving",[]),m(this,"onAutoRemove",null),m(this,"autoRemoveCallouts",!0),m(this,"autoRemoveThresholdSimilarity",.5),m(this,"autoRemoveThresholdMargins",{top:0,right:0,left:0,bottom:0}),m(this,"shouldAutoRemoveCallout",null),e&&"DIV"===e.tagName?(this._container=e,this._container.style.pointerEvents="none",this.resizeObserver=new ResizeObserver((function(t){t.length&&(n.bounds=t[0].contentRect)})),this.resizeObserver.observe(this._container)):console.warn("CalloutManager expects a DIV element as a container."),this._removeCalloutComplete=this._removeCalloutComplete.bind(this)}return p(t,[{key:"release",value:function(){this.resizeObserver.disconnect()}},{key:"addCallout",value:function(t){this.replaceCallouts([].concat(T(this._calloutDefinitions),[t]))}},{key:"removeCallout",value:function(t){var e=this._calloutDefinitions.findIndex((function(e){return e.id===t.id}));-1!==e&&this.replaceCallouts([].concat(T(this._calloutDefinitions.slice(0,e)),T(this._calloutDefinitions.slice(e+1))))}},{key:"replaceCallouts",value:function(t){var e=this,n=t.filter((function(t){return!e._calloutDefinitions.includes(t)})),r=this._calloutDefinitions.filter((function(e){return!t.includes(e)})).filter((function(t){return!e._currentlyRemoving.includes(t)}));this._currentlyRemoving=[].concat(T(this._currentlyRemoving),T(r)),this._calloutDefinitions=[].concat(T(this._calloutDefinitions),T(n)),n.map((function(t){var n=t.calloutClass;if(n){var r=new n(t);if(e.positionProvider){var i=e.positionProvider([t]);r.setPosition(i[0])}return r}})).filter((function(t){return t})).forEach((function(t){e._callouts[t.definition.id]=t,e._container.appendChild(t.element),t.animateIn()})),r.map((function(t){return e._callouts[t.id]})).forEach((function(t){t.animateOut(e._removeCalloutComplete)}))}},{key:"removeAllCallouts",value:function(){this.replaceCallouts([])}},{key:"getCalloutForDefinition",value:function(t){return this._callouts[t.id]}},{key:"update",value:function(t){var e=this;if(this.positionProvider){var n=[],r=this.positionProvider(this._calloutDefinitions);this._calloutDefinitions.forEach((function(i,o){var a=e._callouts[i.id],s=r[o];if(a&&(a.setPosition(s),a.update(t)),e.autoRemoveCallouts){var u=e.autoRemoveThresholdSimilarity,c=e.autoRemoveThresholdMargins;(s.world.similarityToCameraVector<u||s.screen.x<c.left||s.screen.x>e.bounds.width-c.right||s.screen.y<c.top||s.screen.y>e.bounds.height-c.bottom)&&n.push(i)}})),n.forEach((function(t){e.shouldAutoRemoveCallout&&!e.shouldAutoRemoveCallout(t)||(e.removeCallout(t),e.onAutoRemove&&e.onAutoRemove(t))}))}}},{key:"_removeCalloutComplete",value:function(t){var e=t.definition.id,n=this._calloutDefinitions.findIndex((function(t){return t.id===e}));-1!==n&&(this._calloutDefinitions=[].concat(T(this._calloutDefinitions.slice(0,n)),T(this._calloutDefinitions.slice(n+1))),n=this._currentlyRemoving.findIndex((function(t){return t.id===e})),this._currentlyRemoving=[].concat(T(this._currentlyRemoving.slice(0,n)),T(this._currentlyRemoving.slice(n+1))),this._container.removeChild(this._callouts[e].element),this._callouts[e].release(),delete this._callouts[e])}},{key:"drawables",get:function(){var t=this;return this._calloutDefinitions.map((function(e){return t._callouts[e.id].drawables}))}}]),t}(),Lr=function(){function t(e,n,r){var i=this;f(this,t),m(this,"_wasmLoaded",!1),m(this,"isInit",!1),m(this,"shouldDraw",!1),m(this,"renderer",null),m(this,"scene",null),m(this,"targetDrawable",null),m(this,"calloutManager",null),m(this,"boundingRect",null),m(this,"_onWasmLoad",[]),m(this,"drawqueue",[]),m(this,"onInit",void 0),m(this,"onSelection",void 0),m(this,"onTap",void 0),m(this,"onUpdate",void 0),m(this,"_movementModel",null),m(this,"_interactionController",null),m(this,"_ambientController",null),m(this,"_animationController",null),m(this,"_storedMouseXY",null),m(this,"loadWasm",(function(t,e){return sr(void 0===t?"./gkweb_bg.wasm":t).then((function(){(function(t){var e=Qn(t,In.__wbindgen_malloc,In.__wbindgen_realloc),n=Yn;return Hn(In.init_runtime(e,n))})(e).then((function(){i._wasmLoaded=!0,i._onWasmLoad.forEach((function(t){t()})),i._onInitCB()}))}))})),m(this,"init",(function(t){i.renderer=new gn(t,i.gkOptions.attributes),i.renderer.init(),i.gkOptions.clearColor&&(i.renderer.clearColor=i.gkOptions.clearColor),i.scene=new zn(t.width,t.height),i.gkOptions.movementModel?i._movementModel=i.gkOptions.movementModel:i._movementModel=new xr,i._interactionController=new Sr(t,i.scene.camera),i._interactionController.onTapCB=i.onTapCB,i._interactionController.onMouseMoveCB=i.onMouseMoveCB,i._animationController=new Tr,i._ambientController=new Mr,i._ambientController.register(i._animationController,i._interactionController,i._movementModel),i._animationController.register(i._ambientController,i._interactionController,i._movementModel),i._interactionController.register(i._ambientController,i._animationController,i._movementModel),i._movementModel.register(i._ambientController,i._animationController,i._interactionController),window.addEventListener("resize",i.onResizeCB),window.addEventListener("scroll",i.onResizeCB),i._resizeObserver=new ResizeObserver((function(t){t.length&&i.onResizeCB()})),i._resizeObserver.observe(t),i.loadWasm(i.gkOptions.wasmPath,i.gkOptions.apiKey),i.isInit=!0})),m(this,"_onInitCB",(function(){i.onInit&&i.onInit(i),i.renderloop(0)})),m(this,"onResizeCB",(function(){i.boundingRect=i.renderer.gl.canvas.getBoundingClientRect(),mn(i.renderer.gl.canvas),i.scene.resize(i.boundingRect.width,i.boundingRect.height),i.renderer.resize(i.boundingRect.width,i.boundingRect.height),i.interactionController.resize()})),m(this,"setCameratargetDrawable",(function(t){i.interactionController.hitTarget=t.hitTest})),m(this,"addDrawable",(function(t,e){return t instanceof cr&&(t instanceof lr&&null===i.targetDrawable&&(i.targetDrawable=t,i.interactionController.target=t),t.init(i.renderer.gl,e),i.drawqueue.push(t),i._wasmLoaded?t.createCollisionGeo():i._onWasmLoad.push(t.createCollisionGeo),!0)})),m(this,"startDrawing",(function(){i.shouldDraw=!0,i.renderloop(0)})),m(this,"stopDrawing",(function(){i.shouldDraw=!1})),m(this,"renderloop",(function(t){var e=t/1e4;if(i.shouldDraw){i.movementModel.update(e,i.scene.camera.fov);var n=E(i.movementModel.currentLatLonAlt,3),r=n[0],o=n[1],a=n[2],s=gr.worldFromLatLon(r,o,a);i.scene.camera.setPosition(s),i.renderer.prepareRenderFrame(),i.scene.update(e);var u=i.scene.getUniforms(e);if(i.drawqueue.forEach((function(t){t.update(i.renderer.gl,u,e)})),i.calloutManager&&i.calloutManager.update(e),i.drawqueue.forEach((function(t){t.draw(i.renderer.gl)})),i.onUpdate&&"function"==typeof i.onUpdate)if(i._storedMouseXY){var c=E(i._storedMouseXY,2),l=c[0],h=c[1],f=l/i.boundingRect.width,d=(i.boundingRect.height-h)/i.boundingRect.height,p=i.scene.camera.getRayFromScreen(f,d),m=i.targetLatLon(p);m?i.onUpdate(i.getPosition(m.lat,m.lon,0)):i.onUpdate()}else i.onUpdate();requestAnimationFrame(i.renderloop)}})),m(this,"onTapCB",(function(t,e){if(i._wasmLoaded){var n=t/i.boundingRect.width,r=(i.boundingRect.height-e)/i.boundingRect.height,o=i.scene.camera.getRayFromScreen(n,r),a=i.targetLatLon(o),s={drawables:[]};a&&(s.lat=a.lat,s.lon=a.lon),i.drawqueue.forEach((function(t){if(t.isInteractive&&t.isSelectable){var e={};e.obj=t;var n=t.rayCastFrom(o);n&&t.isSelectable&&(e.selection=t.onSelection(a.lat,a.lon,n)),s.drawables.push(e)}})),i.onSelection&&"function"==typeof i.onSelection&&i.onSelection(s),i.onTap&&"function"==typeof i.onTap&&(a?i.onTap(i.getPosition(a.lat,a.lon,0)):i.onTap())}})),m(this,"targetLatLon",(function(t){var e,n=i.targetDrawable.rayCastFrom(t);return!1!==n&&(e=gr.latLonFromWorld(n.point)),e})),m(this,"onMouseMoveCB",(function(t,e){if(i._wasmLoaded){var n=t/i.boundingRect.width,r=(i.boundingRect.height-e)/i.boundingRect.height,o=i.scene.camera.getRayFromScreen(n,r);i.drawqueue.forEach((function(t){if(t.isInteractive&&t.isHoverable){var e=t.rayCastFrom(o);e&&t.isHoverable&&t.onHover(e)}})),i._storedMouseXY=[t,e]}})),m(this,"getPosition",(function(t,e,n){n||(n=0);var r=gr.worldFromLatLon(t,e,n),o=i.scene.camera.project(r);o[0]*=i.boundingRect.width,o[1]*=i.boundingRect.height,o[1]=i.boundingRect.height-o[1];var a=i.scene.camera.project(i.scene.camera.target);a[0]*=i.boundingRect.width,a[1]*=i.boundingRect.height,a[1]=i.boundingRect.height-a[1];var s=[];s.push(o[0]-a[0]),s.push(o[1]-a[1]);var u=En();Dn(u,r);var c=i.scene.camera.eye,l=En();Dn(l,c);var h=Cn(u,l);return{coord:{lat:t,lon:e,alt:n},screen:{x:o[0],y:o[1]},world:{x:s[0],y:s[1],similarityToCameraVector:h}}})),m(this,"registerCalloutManager",(function(t){t&&t instanceof Ar?(t.positionProvider=function(t){return t.map((function(t){return i.getPosition(t.latitude,t.longitude,t.altitude)}))},i.calloutManager=t):console.warn("registerCalloutManager must be passed an instance of CalloutManager")})),m(this,"computeGlobeSize",(function(){var t,e,n,r,o,a=i.scene.camera.fov,s=(t=i.scene.camera.eye,n=(e=i.targetDrawable.translation)[0]-t[0],r=e[1]-t[1],o=e[2]-t[2],Math.hypot(n,r,o));return 2*Math.asin(1/s)/a*i.boundingRect.height})),m(this,"setGlobeSize",(function(t){var e=i.scene.camera.fov;return 1*Math.sin(t/i.boundingRect.height*e/2)})),this.gkOptions=void 0===n?{}:n,r&&(this.onInit=r),this.boundingRect=e.getBoundingClientRect(),this.init(e)}return p(t,[{key:"movementModel",get:function(){return this._movementModel}},{key:"ambientController",get:function(){return this._ambientController}},{key:"animationController",get:function(){return this._animationController}},{key:"interactionController",get:function(){return this._interactionController}}]),p(t,[{key:"isWebGL1",get:function(){return!!this.gl&&se(this.gl)}},{key:"isWebGL2",get:function(){return!!this.gl&&ae(this.gl)}},{key:"VERSION",get:function(){return{version:"1.0.4",wasmVersion:this.WASM_VERSION}}},{key:"WASM_VERSION",get:function(){return!!this._wasmLoaded&&function(){try{var t=In.__wbindgen_export_4.value-16;In.__wbindgen_export_4.value=t,In.get_wasm_version(t);var e=$n()[t/4+0],n=$n()[t/4+1];return qn(e,n)}finally{In.__wbindgen_export_4.value+=16,In.__wbindgen_free(e,n)}}()}}]),t}(),Dr=wr((function(t,e){!function(t){function e(t,e,n){this.obj=t,this.left=null,this.right=null,this.parent=n,this.dimension=e}function n(t){this.content=[],this.scoreFunction=t}n.prototype={push:function(t){this.content.push(t),this.bubbleUp(this.content.length-1)},pop:function(){var t=this.content[0],e=this.content.pop();return this.content.length>0&&(this.content[0]=e,this.sinkDown(0)),t},peek:function(){return this.content[0]},remove:function(t){for(var e=this.content.length,n=0;n<e;n++)if(this.content[n]==t){var r=this.content.pop();return void(n!=e-1&&(this.content[n]=r,this.scoreFunction(r)<this.scoreFunction(t)?this.bubbleUp(n):this.sinkDown(n)))}throw new Error("Node not found.")},size:function(){return this.content.length},bubbleUp:function(t){for(var e=this.content[t];t>0;){var n=Math.floor((t+1)/2)-1,r=this.content[n];if(!(this.scoreFunction(e)<this.scoreFunction(r)))break;this.content[n]=e,this.content[t]=r,t=n}},sinkDown:function(t){for(var e=this.content.length,n=this.content[t],r=this.scoreFunction(n);;){var i=2*(t+1),o=i-1,a=null;if(o<e){var s=this.content[o],u=this.scoreFunction(s);u<r&&(a=o)}if(i<e){var c=this.content[i];this.scoreFunction(c)<(null==a?r:u)&&(a=i)}if(null==a)break;this.content[t]=this.content[a],this.content[a]=n,t=a}}},t.kdTree=function(t,r,i){var o=this;Array.isArray(t)?this.root=function t(n,r,o){var a,s,u=r%i.length;return 0===n.length?null:1===n.length?new e(n[0],u,o):(n.sort((function(t,e){return t[i[u]]-e[i[u]]})),(s=new e(n[a=Math.floor(n.length/2)],u,o)).left=t(n.slice(0,a),r+1,s),s.right=t(n.slice(a+1),r+1,s),s)}(t,0,null):function(t){o.root=t,function t(e){e.left&&(e.left.parent=e,t(e.left)),e.right&&(e.right.parent=e,t(e.right))}(o.root)}(t),this.toJSON=function(t){t||(t=this.root);var n=new e(t.obj,t.dimension,null);return t.left&&(n.left=o.toJSON(t.left)),t.right&&(n.right=o.toJSON(t.right)),n},this.insert=function(t){var n,r,o=function e(n,r){if(null===n)return r;var o=i[n.dimension];return t[o]<n.obj[o]?e(n.left,n):e(n.right,n)}(this.root,null);null!==o?(n=new e(t,(o.dimension+1)%i.length,o),r=i[o.dimension],t[r]<o.obj[r]?o.left=n:o.right=n):this.root=new e(t,0,null)},this.remove=function(t){var e;null!==(e=function e(n){if(null===n)return null;if(n.obj===t)return n;var r=i[n.dimension];return t[r]<n.obj[r]?e(n.left):e(n.right)}(o.root))&&function t(e){function n(t,e){var r,o,a,s,u;return null===t?null:(r=i[e],t.dimension===e?null!==t.left?n(t.left,e):t:(o=t.obj[r],a=n(t.left,e),s=n(t.right,e),u=t,null!==a&&a.obj[r]<o&&(u=a),null!==s&&s.obj[r]<u.obj[r]&&(u=s),u))}var r,a,s;if(null===e.left&&null===e.right)return null===e.parent?void(o.root=null):(s=i[e.parent.dimension],void(e.obj[s]<e.parent.obj[s]?e.parent.left=null:e.parent.right=null));null!==e.right?(a=(r=n(e.right,e.dimension)).obj,t(r),e.obj=a):(a=(r=n(e.left,e.dimension)).obj,t(r),e.right=e.left,e.left=null,e.obj=a)}(e)},this.nearest=function(t,e,a){var s,u,c;if(c=new n((function(t){return-t[1]})),a)for(s=0;s<e;s+=1)c.push([null,a]);for(o.root&&function n(o){function a(t,n){c.push([t,n]),c.size()>e&&c.pop()}var s,u,l,h,f=i[o.dimension],d=r(t,o.obj),p={};for(h=0;h<i.length;h+=1)h===o.dimension?p[i[h]]=t[i[h]]:p[i[h]]=o.obj[i[h]];u=r(p,o.obj),null!==o.right||null!==o.left?(n(s=null===o.right?o.left:null===o.left?o.right:t[f]<o.obj[f]?o.left:o.right),(c.size()<e||d<c.peek()[1])&&a(o,d),(c.size()<e||Math.abs(u)<c.peek()[1])&&null!==(l=s===o.left?o.right:o.left)&&n(l)):(c.size()<e||d<c.peek()[1])&&a(o,d)}(o.root),u=[],s=0;s<Math.min(e,c.content.length);s+=1)c.content[s][0]&&u.push([c.content[s][0].obj,c.content[s][1]]);return u},this.balanceFactor=function(){return function t(e){return null===e?0:Math.max(t(e.left),t(e.right))+1}(o.root)/(Math.log(function t(e){return null===e?0:t(e.left)+t(e.right)+1}(o.root))/Math.log(2))}},t.BinaryHeap=n}(e)})),Cr=function(){function t(){var e=this;f(this,t),m(this,"data",[]),m(this,"types",[]),m(this,"kdtree",null),m(this,"isInit",!1),m(this,"init",(function(){e.isInit||(e.kdtree=new Dr.kdTree(e.data,gr.distanceBetweenPoints,["lat","lon"]))})),m(this,"addGeojson",(function(t){if("FeatureCollection"===t.type&&t.features instanceof Array){var n=[];t.features.forEach((function(t){var r={id:"_".concat(Math.random().toString(36).substr(2,9)),lat:t.geometry.coordinates[1],lon:t.geometry.coordinates[0],properties:t.properties};e.data.push(r),n.push(n)})),e.isInit?e.kdtree.insert(n):e.init()}})),m(this,"addGeojsonPoint",(function(t){var n={id:"_".concat(Math.random().toString(36).substr(2,9)),lat:t.geometry.coordinates[1],lon:t.geometry.coordinates[0],properties:t.properties};return e.data.push(n),e.isInit?e.kdtree.insert(n):e.init(),n})),m(this,"addDataPoint",(function(t){var n=void 0===t.length?[t]:t,r=[];n.forEach((function(t){var n={id:"_".concat(Math.random().toString(36).substr(2,9)),lat:t.coordinates[1],lon:t.coordinates[0],properties:t.properties};e.data.push(n),r.push(n)})),e.isInit?e.kdtree.insert(r):e.init()})),m(this,"updateDataset",(function(t){t.features.forEach((function(t){var n=e.data.find((function(e){var n=e.lat===t.geometry.coordinates[1],r=e.lon===t.geometry.coordinates[0];return n&&r}));void 0===n?e.addGeojsonPoint(t):n.properties=t.properties}))})),m(this,"deleteDataset",(function(){e.data=[],e.init()})),m(this,"getNearest",(function(t,n,r,i){e.isInit||e.init();var o=e.kdtree.nearest({lat:t,lon:n},i,r);if(void 0!==o[0])return o})),m(this,"getElementFromId",(function(t){return e.data.find((function(e){return e.id===t}))})),m(this,"getElementFromKey",(function(t,n){return e.data.find((function(e){return e.properties[t]===n}))})),m(this,"getTypeList",(function(){var t=[];return t.push([e.data[0]]),e.data.forEach((function(e){var n=Object.keys(e.properties),r=!1;t.forEach((function(t){var i=Object.keys(t[0].properties),o=gr.isSubSet(n,i),a=gr.isSubSet(i,n);o&&a&&(t.push(e),r=!0)})),!1===r&&t.push([e])})),t})),m(this,"getMaxForKey",(function(t){var n,r=-1/0;if("number"==typeof e.data[0].properties[t])return e.data.forEach((function(e){var i=e.properties[t];i>=r&&(r=i,n=e.id)})),{max:r,id:n};console.warn("Cannot compare non-numbers")})),m(this,"getMinForKey",(function(t){var n,r=1/0;if("number"==typeof e.data[0].properties[t])return e.data.forEach((function(e){var i=e.properties[t];i<=r&&(r=i,n=e.id)})),{min:r,id:n};console.warn("Cannot compare non-numbers")})),m(this,"getRangeForKey",(function(t){return{min:e.getMinForKey(t),max:e.getMaxForKey(t)}})),m(this,"mapKeyToRange",(function(t,n,r){var i=e.getRangeForKey(t);return e.data.map((function(e){var o=(e.properties[t]-i.min.min)/(i.max.max-i.min.min)*(r-n)+n;return{id:e.properties.region_id,value:o}}))}))}return p(t,[{key:"isHomogeneous",get:function(){return 1===this.getTypeList().length}}]),t}(),Pr=function(t){y(n,cr);var e=w(n);function n(){return f(this,n),e.apply(this,arguments)}return n}(),Rr="precision mediump float;\n#define GLSLIFY 1\nuniform sampler2D u_texture;varying vec4 v_color;varying float v_alpha;void main(){vec4 surfaceColor=texture2D(u_texture,gl_PointCoord.xy);float d=(1.0+v_alpha)/2.0;float alpha=smoothstep(0.4,0.49,v_alpha);gl_FragColor=vec4(surfaceColor.rgb,surfaceColor.a*alpha);}",kr={},Or=function(t){y(n,Pr);var e=w(n);function n(t){var r,i;f(this,n),m(_(i=e.call(this,t)),"datastore",void 0),m(_(i),"maxSelectionDistance",300),m(_(i),"maxSelectionCount",1),m(_(i),"maxDataPoints",1e4),m(_(i),"dataPointCount",0),m(_(i),"_resourceLoaded",!1),m(_(i),"_isDirty",!0),m(_(i),"_hasGeometry",!1),m(_(i),"useTexture",!1),m(_(i),"createEmptyVertices",(function(){i.geometry.vertices.position={numComponents:3,data:new Array(3*i.maxDataPoints).fill(0),perInstance:1},i.geometry.vertices.color={numComponents:4,data:new Array(4*i.maxDataPoints).fill(0),perInstance:4},i.geometry.vertices.size={numComponents:1,data:new Array(1*i.maxDataPoints).fill(0),perInstance:1},i.geometry.vertices.indices={numComponents:1,data:Array.from(Array(1*i.maxDataPoints).keys()),perInstance:1}})),m(_(i),"extendVerticesBy",(function(t){var e,n,r;(e=i.geometry.vertices.position.data).push.apply(e,T(Array(3*t).fill(0))),(n=i.geometry.vertices.color.data).push.apply(n,T(Array(4*t).fill(0))),(r=i.geometry.vertices.size.data).push.apply(r,T(Array(1*t).fill(0)));var o=i.geometry.vertices.indices.data.length;i.geometry.vertices.indices.data=Array.from(Array(1*(o+t)).keys()),i.geometry.needsResize=!0,i.maxDataPoints+=t})),m(_(i),"init",(function(t,e){if(i.geometry.init(t),i._hasGeometry=!0,i.material.init(t),i.useTexture){var n={texture:{src:i.textureSrc.texture,minMag:t.LINEAR}};i.material.loadTextures(t,n,(function(){e&&e(),i.material.uniforms.u_texture=i.material.textures.texture}))}else e&&e()})),m(_(i),"createCollisionGeo",(function(){})),m(_(i),"update",(function(t,e,o){S((r=_(i),b(n.prototype)),"update",r).call(r,e,o),i.material.uniforms.u_model=i.modelMatrix,i.geometry.needsResize&&i.geometry.reloadBuffers(t),i.geometry.isDirty&&i.geometry.updateBuffers(t)})),m(_(i),"draw",(function(t){(i.isReady||i._hasGeometry)&&0!==!i.dataPointCount&&(t.useProgram(i.material.programInfo.program),t.disable(t.DEPTH_TEST),cn(t,i.material.programInfo,i.geometry.bufferInfo),un(i.material.programInfo,i.material.uniforms),t.drawElements(t.POINTS,i.dataPointCount,t.UNSIGNED_SHORT,0),t.enable(t.DEPTH_TEST))})),m(_(i),"rayCastFrom",(function(){return!0})),m(_(i),"hitTest",(function(){return!0})),m(_(i),"onSelectionCB",(function(t){return t})),m(_(i),"onSelection",(function(t,e){var n=i.getNearest(t,e);return i.onSelectionCB(n)})),m(_(i),"transform",(function(t,e){return e})),m(_(i),"addGeojson",(function(t,e){if("string"!=typeof t){i.datastore.addGeojson(t);var n={position:{numComponents:3,data:[]},color:{numComponents:4,data:[]},size:{numComponents:1,data:[]},indices:{numComponents:1,data:[]}};i.datastore.data.forEach((function(t,e){var r,o,a={lat:t.lat,lon:t.lon,color:[1,1,1,1],size:10};(a=i.transform(t,a)).coords=gr.worldFromLatLon(a.lat,a.lon,.01),(r=n.position.data).push.apply(r,T(a.coords)),(o=n.color.data).push.apply(o,T(a.color)),n.size.data.push(a.size),n.indices.data.push(e)})),i.geometry.updateGeometry(n,i.dataPointCount),i.dataPointCount+=t.features.length,void 0!==e&&e()}else console.warn("This function needs a geojson object at this time")})),m(_(i),"addDataPoint",(function(t,e){i.dataPointCount+1>=i.maxDataPoints&&(console.warn("More than ".concat(i.maxDataPoints," datapoints have been added, Increasing buffer size by: ").concat(i.maxDataPoints)),i.extendVerticesBy(i.maxDataPoints));var n=[];n.push(i.datastore.addGeojsonPoint(t));var r={position:{numComponents:3,data:[]},color:{numComponents:4,data:[]},size:{numComponents:1,data:[]},indices:{numComponents:1,data:[]}};n.forEach((function(t,e){var n,o,a={lat:t.lat,lon:t.lon,color:[1,1,1,1],size:10};(a=i.transform(t,a)).coords=gr.worldFromLatLon(a.lat,a.lon,.01),(n=r.position.data).push.apply(n,T(a.coords)),(o=r.color.data).push.apply(o,T(a.color)),r.size.data.push(a.size),r.indices.data.push(e)})),i.geometry.updateGeometry(r,i.dataPointCount),i.dataPointCount+=1,void 0!==e&&e()})),m(_(i),"updatePoint",(function(t,e){var n,r,o={};void 0!==e.position&&(o.position={numComponents:3,data:[]},(n=o.position.data).push.apply(n,T(e.position))),void 0!==e.color&&(o.color={numComponents:4,data:[]},(r=o.color.data).push.apply(r,T(e.color))),void 0!==e.size&&(o.size={numComponents:1,data:[]},o.size.data.push(e.size)),i.geometry.updateGeometry(o,t)})),m(_(i),"getNearest",(function(t,e){return i.datastore.getNearest(t,e,i.maxSelectionDistance,i.maxSelectionCount)}));var o={vertex:"#define GLSLIFY 1\nattribute vec4 position;attribute vec4 color;attribute float size;uniform mat4 u_worldViewProjection;uniform mat4 u_viewInverse;uniform mat4 u_model;uniform vec3 u_cameraPos;varying vec4 v_color;varying float v_alpha;void main(){vec4 pos=u_worldViewProjection*u_model*position;gl_PointSize=size;gl_Position=pos;v_color=color;v_alpha=dot(position.xyz,normalize(u_cameraPos));}",fragment:"precision mediump float;\n#define GLSLIFY 1\nvarying vec4 v_color;varying float v_alpha;void main(){float d=distance(vec2(0.5),gl_PointCoord.xy);float c=1.0-smoothstep(0.40,0.5,d);gl_FragColor=vec4(v_color.rgb,v_color.a*v_alpha*c);}"};return t&&(t.maxSelectionCount&&(i.maxSelectionCount=t.maxSelectionCount),t.maxSelectionDistance&&(i.maxSelectionDistance=t.maxSelectionDistance),t.maxDataPoints&&(i.maxDataPoints=t.maxDataPoints),!0===t.useTexture&&void 0!==t.texture&&(i.useTexture=!0,o.fragment=Rr,i.textureSrc={texture:t.texture})),i.material=new Bn(o),i.datastore=new Cr,i.material.uniforms=kr,i.geometry=new hr,i.createEmptyVertices(),i}return n}(),Ir={vertex:"#define GLSLIFY 1\nattribute vec4 position;attribute vec3 normal;attribute vec2 texcoord;uniform mat4 u_worldViewProjection;uniform mat4 u_viewInverse;uniform mat4 u_model;uniform vec3 u_cameraPos;varying vec2 vTexture;varying float vAlpha;void main(){vec4 pos=u_worldViewProjection*u_model*position;gl_PointSize=10.0;vec3 transformedNormal=(u_worldViewProjection*u_model*vec4(normal,1.0)).xyz;vec4 transformedCamera=vec4(0.0,0.0,-1.0,1.0)*u_worldViewProjection;vAlpha=pow((1.0+(dot(normal,normalize(transformedCamera.xyz))))/2.0,9.0);vTexture=texcoord.xy;gl_Position=pos+0.00000000000000001*normal.x*texcoord.x;}",fragment:"precision mediump float;\n#define GLSLIFY 1\nuniform sampler2D u_surface;varying vec2 vTexture;varying float vAlpha;void main(){vec4 surfaceColor=texture2D(u_surface,vec2(vTexture.x,1.0-vTexture.y));vec3 color=surfaceColor.rgb*vAlpha;gl_FragColor=vec4(color,1.0);}"},Fr={},zr=(function(t){y(n,lr);var e=w(n);function n(t,r){var i,o;f(this,n),m(_(o=e.call(this)),"material",null),m(_(o),"lookup",null),m(_(o),"currentSelection",-1),m(_(o),"previousSelection",-1),m(_(o),"inAnimation",null),m(_(o),"outAnimation",null),m(_(o),"selection0",236),m(_(o),"selection1",144),m(_(o),"current",236),m(_(o),"dataTexture",void 0),m(_(o),"dataTextureSize",16),m(_(o),"updateCMDs",[]),m(_(o),"highlightAnimationProps",{start:0,stop:1,duration:1e3,onUpdate:function(t){o.material.uniforms.u_animateIn=t}}),m(_(o),"init",(function(t,e){o.geometry.init(t);var n={surface:{src:o.textureSrc.surface,minMag:t.LINEAR}};o.material.init(t),o.material.uniforms.uModelMatrix=o.modelMatrix,o.material.loadTextures(t,n,(function(){o.material.uniforms.u_surface=o.material.textures.surface,e&&e()}))})),m(_(o),"getValueForId",(function(t){return o.lookup.getFromId(t)})),m(_(o),"getValueForCode",(function(t){return o.lookup.getFromCode(t)})),m(_(o),"getValueForName",(function(t){return o.lookup.getFromName(t)})),m(_(o),"setIdColor",(function(t,e,n){var r=void 0===n?1:n,i=gr.hexToRGBA(e,r,!1);o.updateCMDs.push((function(e){o.dataTexture.updatePixelId(e,i,t)}))})),m(_(o),"createCollisionGeo",(function(){o.collisionGeometry&&o.collisionGeometry instanceof or||(o.collisionGeometry=ir.create_collision_geometry(o.geometry.vertices.position.data,o.geometry.vertices.texcoord.data,o.geometry.vertices.indices.data))})),m(_(o),"rayCastFrom",(function(t){return o.collisionGeometry.raycast(t.origin,t.direction)})),m(_(o),"hitTest",(function(t){return o.collisionGeometry.hitTest(t.origin,t.direction)})),m(_(o),"onSelectionCB",(function(){})),m(_(o),"onSelection",(function(t,e,n){var r=gr.latLonFromWorld(n.point);return o.current=o.lookup.getIdFromLatLon(r.lat,r.lon),o.setHighlightId(o.current),o.onSelectionCB(o.current),{id:o.current,name:o.lookup.getFromId(o.current)}})),m(_(o),"onHover",(function(){})),m(_(o),"update",(function(t,e,r){S((i=_(o),b(n.prototype)),"update",i).call(i,e,r),o.material.uniforms.u_model=o.modelMatrix,o.updateCMDs.forEach((function(e){e(t)})),o.updateCMDs=[]})),m(_(o),"draw",(function(t){o.isReady&&o.shouldDraw&&(t.useProgram(o.material.programInfo.program),cn(t,o.material.programInfo,o.geometry.bufferInfo),un(o.material.programInfo,o.material.uniforms),t.drawArrays(t.TRIANGLES,0,o.geometry.bufferInfo.numElements))})),m(_(o),"setCountryHover",(function(t){})),m(_(o),"setHighlightId",(function(t){o.previousSelection=o.currentSelection,o.currentSelection=t;var e=o.inAnimation?o.inAnimation.currentValue():1,n=300*e;o.animateIn(o.currentSelection,500),o.animateOut(o.previousSelection,n,e)})),m(_(o),"animateIn",(function(t,e){o.material.uniforms.u_idAnimateIn=t,o.inAnimation&&o.inAnimation.stop(),o.material.uniforms.u_animateIn=0,o.inAnimation=new vr(o.highlightAnimationProps.start,o.highlightAnimationProps.stop,o.highlightAnimationProps.duration,{onUpdate:o.highlightAnimationProps.onUpdate,onComplete:function(){e&&e()}})})),m(_(o),"animateOut",(function(t,e,n,r){o.material.uniforms.u_idAnimateOut=t,o.outAnimation&&o.outAnimation.stop(),o.material.uniforms.u_animateOut=n,o.outAnimation=new vr(n,0,e,{onUpdate:function(t){o.material.uniforms.u_animateOut=t},onComplete:function(){r&&r()}})})),m(_(o),"addDataset",(function(t){o.lookup=new mr(t,o.textureSrc.id)})),o.textureSrc={surface:t.surface},o.material=new Bn(Ir),o.material.uniforms=Fr,o.geometry=new hr;var a=0,s=new Float32Array(r),u=new Int32Array(r),c=s.subarray(a,a+34992);a+=34992;var l=s.subarray(a,a+34992);a+=34992;var h=s.subarray(a,a+34992);a+=34992;var d=u.subarray(a,a+11664);return o.geometry.vertices.position={numComponents:3,data:c},o.geometry.vertices.normal={numComponents:3,data:l},o.geometry.vertices.texcoord={numComponents:3,data:h},o.geometry.vertices.indices={numComponents:3,data:d},o}}(),{vertex:"#define GLSLIFY 1\nattribute vec4 position;attribute vec2 texcoord;uniform mat4 u_worldViewProjection;uniform mat4 u_viewInverse;uniform mat4 u_model;uniform vec3 u_cameraPos;varying float vAlpha;varying vec2 vTexture;void main(){vTexture=texcoord;gl_Position=position;}",fragment:"precision mediump float;\n#define GLSLIFY 1\nuniform sampler2D u_background;uniform vec2 u_resolution;varying float vAlpha;varying vec2 vTexture;void main(){vec2 texture=u_resolution/256.0;vec4 textureColor=texture2D(u_background,vTexture*texture);gl_FragColor=vec4(textureColor.rgb,1.0);}"}),Br={},Nr=function(t){y(n,cr);var e=w(n);function n(t){var r,i;return f(this,n),m(_(i=e.call(this)),"material",null),m(_(i),"init",(function(t,e){i.geometry=new hr,i.geometry.vertices.position=[-1,-1,1,-1,1,1,1,1,1,1,-1,1],i.geometry.vertices.texcoord=[0,0,0,1,1,1,1,0],i.geometry.vertices.indices=[0,2,1,0,3,2],i.geometry.init(t);var n={background:{src:i.textureSrc.background,minMag:t.LINEAR}};i.material.init(t),i.material.loadTextures(t,n,(function(){i.material.uniforms.u_background=i.material.textures.background,e&&e()}))})),m(_(i),"createCollisionGeo",(function(){})),m(_(i),"rayCastFrom",(function(){return!1})),m(_(i),"hitTest",(function(){return!1})),m(_(i),"onSelection",(function(){})),m(_(i),"update",(function(t,e,o){S((r=_(i),b(n.prototype)),"update",r).call(r,e,o),i.material.uniforms.u_model=i.modelMatrix})),m(_(i),"draw",(function(t){i.isReady&&(t.disable(t.DEPTH_TEST),t.useProgram(i.material.programInfo.program),cn(t,i.material.programInfo,i.geometry.bufferInfo),un(i.material.programInfo,i.material.uniforms),t.drawElements(t.TRIANGLES,i.geometry.bufferInfo.numElements,t.UNSIGNED_SHORT,0),t.enable(t.DEPTH_TEST))})),i.material=new Bn(zr),i.material.uniforms=Br,i.textureSrc={background:t},i}return n}(),Ur={vertex:"#define GLSLIFY 1\nattribute vec4 position;attribute vec2 texcoord;uniform mat4 u_worldViewProjection;uniform mat4 u_viewInverse;uniform mat4 u_model;uniform mat4 u_view;uniform float u_scale;uniform vec3 u_cameraPos;varying float vAlpha;varying vec2 vTexture;void main(){vec3 cameraRight=normalize(vec3(u_view[0][0],u_view[1][0],u_view[2][0]));vec3 cameraUp=normalize(vec3(u_view[0][1],u_view[1][1],u_view[2][1]));vec3 cameraForward=normalize(u_cameraPos);vec3 worldPos=cameraRight*position.x*u_scale+cameraUp*position.y*u_scale;vec4 pos=u_worldViewProjection*vec4(worldPos,1.0);gl_Position=pos;vTexture=texcoord;}",fragment:"precision mediump float;\n#define GLSLIFY 1\nuniform sampler2D u_background;varying float vAlpha;varying vec2 vTexture;void main(){gl_FragColor=vec4(1.0);}"},jr={u_scale:1},Hr=function(t){y(n,cr);var e=w(n);function n(t){var r,i;return f(this,n),m(_(i=e.call(this)),"material",null),m(_(i),"useTexture",!1),m(_(i),"nScale",1),m(_(i),"init",(function(t,e){if(i.geometry=new hr,i.geometry.vertices.position=[-1,-1,0,-1,1,0,1,1,0,1,-1,0],i.geometry.vertices.texcoord=[0,0,0,1,1,1,1,0],i.geometry.vertices.indices=[0,2,1,0,3,2],i.geometry.init(t),i.material.init(t),i.useTexture){var n={background:{src:i.textureSrc.texture,minMag:t.LINEAR,flipY:!0}};i.material.loadTextures(t,n,(function(){i.material.uniforms.u_background=i.material.textures.background,e&&e()}))}else i.material.texturesLoaded=!0,e&&e()})),m(_(i),"createCollisionGeo",(function(){})),m(_(i),"rayCastFrom",(function(){return!1})),m(_(i),"hitTest",(function(){return!1})),m(_(i),"onSelection",(function(){})),m(_(i),"update",(function(t,e,o){S((r=_(i),b(n.prototype)),"update",r).call(r,e,o),i.material.uniforms.u_model=i.modelMatrix,i.material.uniforms.u_scale=i.nScale})),m(_(i),"draw",(function(t){i.isReady&&(t.disable(t.DEPTH_TEST),t.useProgram(i.material.programInfo.program),cn(t,i.material.programInfo,i.geometry.bufferInfo),un(i.material.programInfo,i.material.uniforms),t.drawElements(t.TRIANGLES,i.geometry.bufferInfo.numElements,t.UNSIGNED_SHORT,0),t.enable(t.DEPTH_TEST))})),t.texture&&(i.useTexture=!0,Ur.fragment="precision mediump float;\n#define GLSLIFY 1\nuniform sampler2D u_background;varying float vAlpha;varying vec2 vTexture;void main(){vec4 textureColor=texture2D(u_background,vTexture);gl_FragColor=textureColor;}",i.textureSrc={texture:t.texture}),i.material=new Bn(Ur),i.material.uniforms=jr,i}return n}(),Vr={vertex:"#define GLSLIFY 1\nattribute vec4 position;attribute vec2 texcoord;uniform mat4 u_worldViewProjection;uniform mat4 u_viewInverse;uniform mat4 u_model;uniform mat4 u_view;uniform float u_scale;uniform vec3 u_point;uniform vec2 u_resolution;uniform vec3 u_cameraPos;varying float vAlpha;varying vec2 vTexture;void main(){vec4 pos=u_worldViewProjection*vec4(u_point,1.0);float size=u_scale*16.0;pos.y+=(size*4.0/u_resolution.y);gl_PointSize=size;gl_Position=pos;vTexture=texcoord;float d=(1.0+dot(u_point,normalize(u_cameraPos)))/2.0;vAlpha=smoothstep(0.4,0.5,d);}",fragment:"precision mediump float;\n#define GLSLIFY 1\nuniform sampler2D u_background;varying float vAlpha;varying vec2 vTexture;void main(){vec4 textureColor=texture2D(u_background,gl_PointCoord);gl_FragColor=vec4(textureColor.rgb,vAlpha*textureColor.a);}"},Gr={u_scale:1,u_point:[0,0,1]},Wr=(function(t){y(n,cr);var e=w(n);function n(t){var r,i;return f(this,n),m(_(i=e.call(this)),"material",null),m(_(i),"useTexture",!1),m(_(i),"nScale",1),m(_(i),"point",[0,0,1]),m(_(i),"init",(function(t,e){i.geometry=new hr,i.geometry.vertices.position=[0,0,1],i.geometry.init(t),i.material.init(t);var n={background:{src:i.textureSrc.texture,minMag:t.LINEAR}};i.material.loadTextures(t,n,(function(){i.material.uniforms.u_background=i.material.textures.background,e&&e()}))})),m(_(i),"createCollisionGeo",(function(){})),m(_(i),"rayCastFrom",(function(){return!1})),m(_(i),"hitTest",(function(){return!1})),m(_(i),"onSelection",(function(){})),m(_(i),"update",(function(t,e,o){S((r=_(i),b(n.prototype)),"update",r).call(r,e,o),i.material.uniforms.u_model=i.modelMatrix,i.material.uniforms.u_scale=i.nScale,i.material.uniforms.u_point=i.point})),m(_(i),"draw",(function(t){i.isReady&&(t.disable(t.DEPTH_TEST),t.useProgram(i.material.programInfo.program),cn(t,i.material.programInfo,i.geometry.bufferInfo),un(i.material.programInfo,i.material.uniforms),t.drawArrays(t.POINTS,0,i.geometry.bufferInfo.numElements),t.enable(t.DEPTH_TEST))})),m(_(i),"setPoint",(function(t,e,n){var r=void 0===n?0:n;i.point=gr.worldFromLatLon(t,e,r)})),i.textureSrc={texture:t.texture},i.material=new Bn(Vr),i.material.uniforms=Gr,i}}(),function(t){var e={};function n(r){if(e[r])return e[r].exports;var i=e[r]={exports:{},id:r,loaded:!1};return t[r].call(i.exports,i,i.exports,n),i.loaded=!0,i.exports}return n.m=t,n.c=e,n.p="",n(0)}([function(t,e,n){t.exports=n(1)},function(t,e,n){var r="function"==typeof Symbol&&"symbol"===h(Symbol.iterator)?function(t){return h(t)}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":h(t)};!function(){var e=Math.abs,i=Math.min,o=Math.max,a=Math.cos,s=Math.sin,u=Math.acos,c=Math.sqrt,l=Math.PI,h={x:0,y:0,z:0},f=n(2),d=n(3),p=function(t){var n=t&&t.forEach?t:[].slice.call(arguments),i=!1;if("object"===r(n[0])){i=n.length;var o=[];n.forEach((function(t){["x","y","z"].forEach((function(e){void 0!==t[e]&&o.push(t[e])}))})),n=o}var a=!1,s=n.length;if(i){if(i>4){if(1!==arguments.length)throw new Error("Only new Bezier(point[]) is accepted for 4th and higher order curves");a=!0}}else if(6!==s&&8!==s&&9!==s&&12!==s&&1!==arguments.length)throw new Error("Only new Bezier(point[]) is accepted for 4th and higher order curves");var u=!a&&(9===s||12===s)||t&&t[0]&&void 0!==t[0].z;this._3d=u;for(var c=[],l=0,h=u?3:2;l<s;l+=h){var d={x:n[l],y:n[l+1]};u&&(d.z=n[l+2]),c.push(d)}this.order=c.length-1,this.points=c;var p=["x","y"];u&&p.push("z"),this.dims=p,this.dimlen=p.length,function(t){for(var n=t.order,r=t.points,i=f.align(r,{p1:r[0],p2:r[n]}),o=0;o<i.length;o++)if(e(i[o].y)>1e-4)return void(t._linear=!1);t._linear=!0}(this),this._t1=0,this._t2=1,this.update()},m=n(4);function g(t,e,n,r,i){void 0===i&&(i=.5);var o=f.projectionratio(i,t),a=1-o,s={x:o*e.x+a*r.x,y:o*e.y+a*r.y},u=f.abcratio(i,t);return{A:{x:n.x+(n.x-s.x)/u,y:n.y+(n.y-s.y)/u},B:n,C:s}}p.SVGtoBeziers=function(t){return m(p,t)},p.quadraticFromPoints=function(t,e,n,r){if(void 0===r&&(r=.5),0===r)return new p(e,e,n);if(1===r)return new p(t,e,e);var i=g(2,t,e,n,r);return new p(t,i.A,n)},p.cubicFromPoints=function(t,e,n,r,i){void 0===r&&(r=.5);var o=g(3,t,e,n,r);void 0===i&&(i=f.dist(e,o.C));var a=i*(1-r)/r,s=f.dist(t,n),u=(n.x-t.x)/s,c=(n.y-t.y)/s,l=i*u,h=i*c,d=a*u,m=a*c,v=e.x-l,y=e.y-h,b=e.x+d,_=e.y+m,x=o.A,w=x.x+(v-x.x)/(1-r),S=x.y+(y-x.y)/(1-r),E=x.x+(b-x.x)/r,T=x.y+(_-x.y)/r,M={x:t.x+(w-t.x)/r,y:t.y+(S-t.y)/r},A={x:n.x+(E-n.x)/(1-r),y:n.y+(T-n.y)/(1-r)};return new p(t,M,A,n)};var v=function(){return f};p.getUtils=v,p.PolyBezier=d,p.prototype={getUtils:v,valueOf:function(){return this.toString()},toString:function(){return f.pointsToString(this.points)},toSVG:function(t){if(this._3d)return!1;for(var e=this.points,n=["M",e[0].x,e[0].y,2===this.order?"Q":"C"],r=1,i=e.length;r<i;r++)n.push(e[r].x),n.push(e[r].y);return n.join(" ")},setRatios:function(t){if(t.length!==this.points.length)throw new Error("incorrect number of ratio values");this.ratios=t,this._lut=[]},verify:function(){var t=this.coordDigest();t!==this._print&&(this._print=t,this.update())},coordDigest:function(){return this.points.map((function(t,e){return""+e+t.x+t.y+(t.z?t.z:0)})).join("")},update:function(t){this._lut=[],this.dpoints=f.derive(this.points,this._3d),this.computedirection()},computedirection:function(){var t=this.points,e=f.angle(t[0],t[this.order],t[1]);this.clockwise=e>0},length:function(){return f.length(this.derivative.bind(this))},_lut:[],getLUT:function(t){if(this.verify(),t=t||100,this._lut.length===t)return this._lut;this._lut=[],t--;for(var e=0;e<=t;e++)this._lut.push(this.compute(e/t));return this._lut},on:function(t,e){e=e||5;for(var n,r=this.getLUT(),i=[],o=0,a=0;a<r.length;a++)n=r[a],f.dist(n,t)<e&&(i.push(n),o+=a/r.length);return!!i.length&&o/i.length},project:function(t){var e,n,r,i,o=this.getLUT(),a=o.length-1,s=f.closest(o,t),u=s.mdist,c=s.mpos,l=(c+1)/a,h=.1/a;for(u+=1,e=n=(c-1)/a;n<l+h;n+=h)r=this.compute(n),(i=f.dist(t,r))<u&&(u=i,e=n);return(r=this.compute(e)).t=e,r.d=u,r},get:function(t){return this.compute(t)},point:function(t){return this.points[t]},compute:function(t){return this.ratios?f.computeWithRatios(t,this.points,this.ratios,this._3d):f.compute(t,this.points,this._3d,this.ratios)},raise:function(){for(var t,e,n=this.points,r=[n[0]],i=n.length,o=1;o<i;o++)t=n[o],e=n[o-1],r[o]={x:(i-o)/i*t.x+o/i*e.x,y:(i-o)/i*t.y+o/i*e.y};return r[i]=n[i-1],new p(r)},derivative:function(t){var e,n,r=1-t,i=0,o=this.dpoints[0];2===this.order&&(o=[o[0],o[1],h],e=r,n=t),3===this.order&&(e=r*r,n=r*t*2,i=t*t);var a={x:e*o[0].x+n*o[1].x+i*o[2].x,y:e*o[0].y+n*o[1].y+i*o[2].y};return this._3d&&(a.z=e*o[0].z+n*o[1].z+i*o[2].z),a},curvature:function(t){return f.curvature(t,this.points,this._3d)},inflections:function(){return f.inflections(this.points)},normal:function(t){return this._3d?this.__normal3(t):this.__normal2(t)},__normal2:function(t){var e=this.derivative(t),n=c(e.x*e.x+e.y*e.y);return{x:-e.y/n,y:e.x/n}},__normal3:function(t){var e=this.derivative(t),n=this.derivative(t+.01),r=c(e.x*e.x+e.y*e.y+e.z*e.z),i=c(n.x*n.x+n.y*n.y+n.z*n.z);e.x/=r,e.y/=r,e.z/=r,n.x/=i,n.y/=i,n.z/=i;var o={x:n.y*e.z-n.z*e.y,y:n.z*e.x-n.x*e.z,z:n.x*e.y-n.y*e.x},a=c(o.x*o.x+o.y*o.y+o.z*o.z);o.x/=a,o.y/=a,o.z/=a;var s=[o.x*o.x,o.x*o.y-o.z,o.x*o.z+o.y,o.x*o.y+o.z,o.y*o.y,o.y*o.z-o.x,o.x*o.z-o.y,o.y*o.z+o.x,o.z*o.z];return{x:s[0]*e.x+s[1]*e.y+s[2]*e.z,y:s[3]*e.x+s[4]*e.y+s[5]*e.z,z:s[6]*e.x+s[7]*e.y+s[8]*e.z}},hull:function(t){var e,n=this.points,r=[],i=[],o=0,a=0,s=0;for(i[o++]=n[0],i[o++]=n[1],i[o++]=n[2],3===this.order&&(i[o++]=n[3]);n.length>1;){for(r=[],a=0,s=n.length-1;a<s;a++)e=f.lerp(t,n[a],n[a+1]),i[o++]=e,r.push(e);n=r}return i},split:function(t,e){if(0===t&&e)return this.split(e).left;if(1===e)return this.split(t).right;var n=this.hull(t),r={left:2===this.order?new p([n[0],n[3],n[5]]):new p([n[0],n[4],n[7],n[9]]),right:2===this.order?new p([n[5],n[4],n[2]]):new p([n[9],n[8],n[6],n[3]]),span:n};return r.left._t1=f.map(0,0,1,this._t1,this._t2),r.left._t2=f.map(t,0,1,this._t1,this._t2),r.right._t1=f.map(t,0,1,this._t1,this._t2),r.right._t2=f.map(1,0,1,this._t1,this._t2),e?(e=f.map(e,t,1,0,1),r.right.split(e).left):r},extrema:function(){var t,e,n=this.dims,r={},i=[];return n.forEach(function(n){e=function(t){return t[n]},t=this.dpoints[0].map(e),r[n]=f.droots(t),3===this.order&&(t=this.dpoints[1].map(e),r[n]=r[n].concat(f.droots(t))),r[n]=r[n].filter((function(t){return t>=0&&t<=1})),i=i.concat(r[n].sort(f.numberSort))}.bind(this)),i=i.sort(f.numberSort).filter((function(t,e){return i.indexOf(t)===e})),r.values=i,r},bbox:function(){var t=this.extrema(),e={};return this.dims.forEach(function(n){e[n]=f.getminmax(this,n,t[n])}.bind(this)),e},overlaps:function(t){var e=this.bbox(),n=t.bbox();return f.bboxoverlap(e,n)},offset:function(t,e){if(void 0!==e){var n=this.get(t),r=this.normal(t),i={c:n,n:r,x:n.x+r.x*e,y:n.y+r.y*e};return this._3d&&(i.z=n.z+r.z*e),i}if(this._linear){var o=this.normal(0),a=this.points.map((function(e){var n={x:e.x+t*o.x,y:e.y+t*o.y};return e.z&&r.z&&(n.z=e.z+t*o.z),n}));return[new p(a)]}return this.reduce().map((function(e){return e._linear?e.offset(t)[0]:e.scale(t)}))},simple:function(){if(3===this.order){var t=f.angle(this.points[0],this.points[3],this.points[1]),n=f.angle(this.points[0],this.points[3],this.points[2]);if(t>0&&n<0||t<0&&n>0)return!1}var r=this.normal(0),i=this.normal(1),o=r.x*i.x+r.y*i.y;return this._3d&&(o+=r.z*i.z),e(u(o))<l/3},reduce:function(){var t,n,r=0,i=0,o=[],a=[],s=this.extrema().values;for(-1===s.indexOf(0)&&(s=[0].concat(s)),-1===s.indexOf(1)&&s.push(1),r=s[0],t=1;t<s.length;t++)i=s[t],(n=this.split(r,i))._t1=r,n._t2=i,o.push(n),r=i;return o.forEach((function(t){for(r=0,i=0;i<=1;)for(i=r+.01;i<=1.01;i+=.01)if(!(n=t.split(r,i)).simple()){if(e(r-(i-=.01))<.01)return[];(n=t.split(r,i))._t1=f.map(r,0,1,t._t1,t._t2),n._t2=f.map(i,0,1,t._t1,t._t2),a.push(n),r=i;break}r<1&&((n=t.split(r,1))._t1=f.map(r,0,1,t._t1,t._t2),n._t2=t._t2,a.push(n))})),a},scale:function(t){var e=this.order,n=!1;if("function"==typeof t&&(n=t),n&&2===e)return this.raise().scale(n);var r=this.clockwise,i=n?n(0):t,o=n?n(1):t,a=[this.offset(0,10),this.offset(1,10)],s=f.lli4(a[0],a[0].c,a[1],a[1].c);if(!s)throw new Error("cannot scale this curve. Try reducing it first.");var u=this.points,l=[];return[0,1].forEach(function(t){var n=l[t*e]=f.copy(u[t*e]);n.x+=(t?o:i)*a[t].n.x,n.y+=(t?o:i)*a[t].n.y}.bind(this)),n?([0,1].forEach(function(i){if(2!==this.order||!i){var o=u[i+1],a={x:o.x-s.x,y:o.y-s.y},h=n?n((i+1)/e):t;n&&!r&&(h=-h);var f=c(a.x*a.x+a.y*a.y);a.x/=f,a.y/=f,l[i+1]={x:o.x+h*a.x,y:o.y+h*a.y}}}.bind(this)),new p(l)):([0,1].forEach(function(t){if(2!==this.order||!t){var n=l[t*e],r=this.derivative(t),i={x:n.x+r.x,y:n.y+r.y};l[t+1]=f.lli4(n,i,s,u[t+1])}}.bind(this)),new p(l))},outline:function(t,e,n,r){e=void 0===e?t:e;var i,o=this.reduce(),a=o.length,s=[],u=[],c=0,l=this.length(),h=void 0!==n&&void 0!==r;function p(t,e,n,r,i){return function(o){var a=r/n,s=(r+i)/n,u=e-t;return f.map(o,0,1,t+a*u,t+s*u)}}o.forEach((function(i){w=i.length(),h?(s.push(i.scale(p(t,n,l,c,w))),u.push(i.scale(p(-e,-r,l,c,w)))):(s.push(i.scale(t)),u.push(i.scale(-e))),c+=w})),u=u.map((function(t){return(i=t.points)[3]?t.points=[i[3],i[2],i[1],i[0]]:t.points=[i[2],i[1],i[0]],t})).reverse();var m=s[0].points[0],g=s[a-1].points[s[a-1].points.length-1],v=u[a-1].points[u[a-1].points.length-1],y=u[0].points[0],b=f.makeline(v,m),_=f.makeline(g,y),x=[b].concat(s).concat([_]).concat(u),w=x.length;return new d(x)},outlineshapes:function(t,e,n){e=e||t;for(var r=this.outline(t,e).curves,i=[],o=1,a=r.length;o<a/2;o++){var s=f.makeshape(r[o],r[a-o],n);s.startcap.virtual=o>1,s.endcap.virtual=o<a/2-1,i.push(s)}return i},intersects:function(t,e){return t?t.p1&&t.p2?this.lineIntersects(t):(t instanceof p&&(t=t.reduce()),this.curveintersects(this.reduce(),t,e)):this.selfintersects(e)},lineIntersects:function(t){var e=i(t.p1.x,t.p2.x),n=i(t.p1.y,t.p2.y),r=o(t.p1.x,t.p2.x),a=o(t.p1.y,t.p2.y),s=this;return f.roots(this.points,t).filter((function(t){var i=s.get(t);return f.between(i.x,e,r)&&f.between(i.y,n,a)}))},selfintersects:function(t){var e,n,r,i,o=this.reduce(),a=o.length-2,s=[];for(e=0;e<a;e++)r=o.slice(e,e+1),i=o.slice(e+2),n=this.curveintersects(r,i,t),s=s.concat(n);return s},curveintersects:function(t,e,n){var r=[];t.forEach((function(t){e.forEach((function(e){t.overlaps(e)&&r.push({left:t,right:e})}))}));var i=[];return r.forEach((function(t){var e=f.pairiteration(t.left,t.right,n);e.length>0&&(i=i.concat(e))})),i},arcs:function(t){return t=t||.5,this._iterate(t,[])},_error:function(t,n,r,i){var o=(i-r)/4,a=this.get(r+o),s=this.get(i-o),u=f.dist(t,n),c=f.dist(t,a),l=f.dist(t,s);return e(c-u)+e(l-u)},_iterate:function(t,e){var n,r=0,i=1;do{n=0,i=1;var o,u,c,l,h,d=this.get(r),p=!1,m=!1,g=i,v=1;do{if(m=p,l=c,g=(r+i)/2,o=this.get(g),u=this.get(i),(c=f.getccenter(d,o,u)).interval={start:r,end:i},p=this._error(c,d,r,i)<=t,(h=m&&!p)||(v=i),p){if(i>=1){if(c.interval.end=v=1,l=c,i>1){var y={x:c.x+c.r*a(c.e),y:c.y+c.r*s(c.e)};c.e+=f.angle({x:c.x,y:c.y},y,this.get(1))}break}i+=(i-r)/2}else i=g}while(!h&&n++<100);if(n>=100)break;l=l||c,e.push(l),r=v}while(i<1);return e}},t.exports=p}()},function(t,e,n){var r,i,o,a,s,u,c,l,h,f,d,p,m,g,v;r=Math.abs,i=Math.cos,o=Math.sin,a=Math.acos,s=Math.atan2,u=Math.sqrt,c=Math.pow,l=function(t){return t<0?-c(-t,1/3):c(t,1/3)},h=Math.PI,f=2*h,d=h/2,p=Number.MAX_SAFE_INTEGER||9007199254740991,m=Number.MIN_SAFE_INTEGER||-9007199254740991,g={x:0,y:0,z:0},v={Tvalues:[-.06405689286260563,.06405689286260563,-.1911188674736163,.1911188674736163,-.3150426796961634,.3150426796961634,-.4337935076260451,.4337935076260451,-.5454214713888396,.5454214713888396,-.6480936519369755,.6480936519369755,-.7401241915785544,.7401241915785544,-.820001985973903,.820001985973903,-.8864155270044011,.8864155270044011,-.9382745520027328,.9382745520027328,-.9747285559713095,.9747285559713095,-.9951872199970213,.9951872199970213],Cvalues:[.12793819534675216,.12793819534675216,.1258374563468283,.1258374563468283,.12167047292780339,.12167047292780339,.1155056680537256,.1155056680537256,.10744427011596563,.10744427011596563,.09761865210411388,.09761865210411388,.08619016153195327,.08619016153195327,.0733464814110803,.0733464814110803,.05929858491543678,.05929858491543678,.04427743881741981,.04427743881741981,.028531388628933663,.028531388628933663,.0123412297999872,.0123412297999872],arcfn:function(t,e){var n=e(t),r=n.x*n.x+n.y*n.y;return void 0!==n.z&&(r+=n.z*n.z),u(r)},compute:function(t,e,n){if(0===t)return e[0];var r=e.length-1;if(1===t)return e[r];var i=e,o=1-t;if(0===r)return e[0];if(1===r)return f={x:o*i[0].x+t*i[1].x,y:o*i[0].y+t*i[1].y},n&&(f.z=o*i[0].z+t*i[1].z),f;if(r<4){var a,s,u,c=o*o,l=t*t,h=0;2===r?(i=[i[0],i[1],i[2],g],a=c,s=o*t*2,u=l):3===r&&(a=c*o,s=c*t*3,u=o*l*3,h=t*l);var f={x:a*i[0].x+s*i[1].x+u*i[2].x+h*i[3].x,y:a*i[0].y+s*i[1].y+u*i[2].y+h*i[3].y};return n&&(f.z=a*i[0].z+s*i[1].z+u*i[2].z+h*i[3].z),f}for(var d=JSON.parse(JSON.stringify(e));d.length>1;){for(var p=0;p<d.length-1;p++)d[p]={x:d[p].x+(d[p+1].x-d[p].x)*t,y:d[p].y+(d[p+1].y-d[p].y)*t},void 0!==d[p].z&&(d[p]=d[p].z+(d[p+1].z-d[p].z)*t);d.splice(d.length-1,1)}return d[0]},computeWithRatios:function(t,e,n,r){var i,o=1-t,a=n,s=e,u=a[0],c=a[1],l=a[2],h=a[3];return u*=o,c*=t,2===s.length?(i=u+c,{x:(u*s[0].x+c*s[1].x)/i,y:(u*s[0].y+c*s[1].y)/i,z:!!r&&(u*s[0].z+c*s[1].z)/i}):(u*=o,c*=2*o,l*=t*t,3===s.length?(i=u+c+l,{x:(u*s[0].x+c*s[1].x+l*s[2].x)/i,y:(u*s[0].y+c*s[1].y+l*s[2].y)/i,z:!!r&&(u*s[0].z+c*s[1].z+l*s[2].z)/i}):(u*=o,c*=1.5*o,l*=3*o,h*=t*t*t,4===s.length?(i=u+c+l+h,{x:(u*s[0].x+c*s[1].x+l*s[2].x+h*s[3].x)/i,y:(u*s[0].y+c*s[1].y+l*s[2].y+h*s[3].y)/i,z:!!r&&(u*s[0].z+c*s[1].z+l*s[2].z+h*s[3].z)/i}):void 0))},derive:function(t,e){for(var n=[],r=t,i=r.length,o=i-1;i>1;i--,o--){for(var a,s=[],u=0;u<o;u++)a={x:o*(r[u+1].x-r[u].x),y:o*(r[u+1].y-r[u].y)},e&&(a.z=o*(r[u+1].z-r[u].z)),s.push(a);n.push(s),r=s}return n},between:function(t,e,n){return e<=t&&t<=n||v.approximately(t,e)||v.approximately(t,n)},approximately:function(t,e,n){return r(t-e)<=(n||1e-6)},length:function(t){var e,n,r=0,i=v.Tvalues.length;for(e=0;e<i;e++)n=.5*v.Tvalues[e]+.5,r+=v.Cvalues[e]*v.arcfn(n,t);return.5*r},map:function(t,e,n,r,i){return r+(t-e)/(n-e)*(i-r)},lerp:function(t,e,n){var r={x:e.x+t*(n.x-e.x),y:e.y+t*(n.y-e.y)};return e.z&&n.z&&(r.z=e.z+t*(n.z-e.z)),r},pointToString:function(t){var e=t.x+"/"+t.y;return void 0!==t.z&&(e+="/"+t.z),e},pointsToString:function(t){return"["+t.map(v.pointToString).join(", ")+"]"},copy:function(t){return JSON.parse(JSON.stringify(t))},angle:function(t,e,n){var r=e.x-t.x,i=e.y-t.y,o=n.x-t.x,a=n.y-t.y;return s(r*a-i*o,r*o+i*a)},round:function(t,e){var n=""+t,r=n.indexOf(".");return parseFloat(n.substring(0,r+1+e))},dist:function(t,e){var n=t.x-e.x,r=t.y-e.y;return u(n*n+r*r)},closest:function(t,e){var n,r,i=c(2,63);return t.forEach((function(t,o){(r=v.dist(e,t))<i&&(i=r,n=o)})),{mdist:i,mpos:n}},abcratio:function(t,e){if(2!==e&&3!==e)return!1;if(void 0===t)t=.5;else if(0===t||1===t)return t;var n=c(t,e)+c(1-t,e);return r((n-1)/n)},projectionratio:function(t,e){if(2!==e&&3!==e)return!1;if(void 0===t)t=.5;else if(0===t||1===t)return t;var n=c(1-t,e);return n/(c(t,e)+n)},lli8:function(t,e,n,r,i,o,a,s){var u=(t-n)*(o-s)-(e-r)*(i-a);return 0!=u&&{x:((t*r-e*n)*(i-a)-(t-n)*(i*s-o*a))/u,y:((t*r-e*n)*(o-s)-(e-r)*(i*s-o*a))/u}},lli4:function(t,e,n,r){var i=t.x,o=t.y,a=e.x,s=e.y,u=n.x,c=n.y,l=r.x,h=r.y;return v.lli8(i,o,a,s,u,c,l,h)},lli:function(t,e){return v.lli4(t,t.c,e,e.c)},makeline:function(t,e){var r=n(1),i=t.x,o=t.y,a=e.x,s=e.y,u=(a-i)/3,c=(s-o)/3;return new r(i,o,i+u,o+c,i+2*u,o+2*c,a,s)},findbbox:function(t){var e=p,n=p,r=m,i=m;return t.forEach((function(t){var o=t.bbox();e>o.x.min&&(e=o.x.min),n>o.y.min&&(n=o.y.min),r<o.x.max&&(r=o.x.max),i<o.y.max&&(i=o.y.max)})),{x:{min:e,mid:(e+r)/2,max:r,size:r-e},y:{min:n,mid:(n+i)/2,max:i,size:i-n}}},shapeintersections:function(t,e,n,r,i){if(!v.bboxoverlap(e,r))return[];var o=[],a=[t.startcap,t.forward,t.back,t.endcap],s=[n.startcap,n.forward,n.back,n.endcap];return a.forEach((function(e){e.virtual||s.forEach((function(r){if(!r.virtual){var a=e.intersects(r,i);a.length>0&&(a.c1=e,a.c2=r,a.s1=t,a.s2=n,o.push(a))}}))})),o},makeshape:function(t,e,n){var r=e.points.length,i=t.points.length,o=v.makeline(e.points[r-1],t.points[0]),a=v.makeline(t.points[i-1],e.points[0]),s={startcap:o,forward:t,back:e,endcap:a,bbox:v.findbbox([o,t,e,a])},u=v;return s.intersections=function(t){return u.shapeintersections(s,s.bbox,t,t.bbox,n)},s},getminmax:function(t,e,n){if(!n)return{min:0,max:0};var r,i,o=p,a=m;-1===n.indexOf(0)&&(n=[0].concat(n)),-1===n.indexOf(1)&&n.push(1);for(var s=0,u=n.length;s<u;s++)r=n[s],(i=t.get(r))[e]<o&&(o=i[e]),i[e]>a&&(a=i[e]);return{min:o,mid:(o+a)/2,max:a,size:a-o}},align:function(t,e){var n=e.p1.x,r=e.p1.y,a=-s(e.p2.y-r,e.p2.x-n);return t.map((function(t){return{x:(t.x-n)*i(a)-(t.y-r)*o(a),y:(t.x-n)*o(a)+(t.y-r)*i(a)}}))},roots:function(t,e){e=e||{p1:{x:0,y:0},p2:{x:1,y:0}};var n=t.length-1,r=v.align(t,e),o=function(t){return 0<=t&&t<=1};if(2===n){if(0!==(m=(g=r[0].y)-2*(y=r[1].y)+(b=r[2].y))){var s=-u(y*y-g*b),c=-g+y;return[-(s+c)/m,-(-s+c)/m].filter(o)}return y!==b&&0===m?[(2*y-b)/(2*y-2*b)].filter(o):[]}var h=r[0].y,d=r[1].y,p=r[2].y,m=3*d-h-3*p+r[3].y,g=3*h-6*d+3*p,y=-3*h+3*d,b=h;if(v.approximately(m,0)){if(v.approximately(g,0))return v.approximately(y,0)?[]:[-b/y].filter(o);var _=2*g;return[((x=u(y*y-4*g*b))-y)/_,(-y-x)/_].filter(o)}var x,w,S=(r=(3*(y/=m)-(g/=m)*g)/3)/3,E=(x=(2*g*g*g-9*g*y+27*(b/=m))/27)/2,T=E*E+S*S*S;if(T<0){var M=-r/3,A=u(M*M*M),L=-x/(2*A),D=a(L<-1?-1:L>1?1:L),C=2*l(A);return[C*i(D/3)-g/3,C*i((D+f)/3)-g/3,C*i((D+2*f)/3)-g/3].filter(o)}if(0===T)return[2*(w=E<0?l(-E):-l(E))-g/3,-w-g/3].filter(o);var P=u(T);return[(w=l(-E+P))-l(E+P)-g/3].filter(o)},droots:function(t){if(3===t.length){var e=t[0],n=t[1],r=t[2],i=e-2*n+r;if(0!==i){var o=-u(n*n-e*r),a=-e+n;return[-(o+a)/i,-(-o+a)/i]}return n!==r&&0===i?[(2*n-r)/(2*(n-r))]:[]}if(2===t.length)return(e=t[0])!==(n=t[1])?[e/(e-n)]:[]},curvature:function(t,e,n,i){var o,a,s,l,h,f,d=v.derive(e),p=d[0],m=d[1],g=v.compute(t,p),y=v.compute(t,m),b=g.x*g.x+g.y*g.y;if(n?(o=u(c(g.y*y.z-y.y*g.z,2)+c(g.z*y.x-y.z*g.x,2)+c(g.x*y.y-y.x*g.y,2)),a=c(b+g.z*g.z,1.5)):(o=g.x*y.y-g.y*y.x,a=c(b,1.5)),0===o||0===a)return{k:0,r:0};if(h=o/a,f=a/o,!i){var _=v.curvature(t-.001,e,n,!0).k,x=v.curvature(t+.001,e,n,!0).k;l=(x-h+(h-_))/2,s=(r(x-h)+r(h-_))/2}return{k:h,r:f,dk:l,adk:s}},inflections:function(t){if(t.length<4)return[];var e=v.align(t,{p1:t[0],p2:t.slice(-1)[0]}),n=e[2].x*e[1].y,r=e[3].x*e[1].y,i=e[1].x*e[2].y,o=18*(-3*n+2*r+3*i-e[3].x*e[2].y),a=18*(3*n-r-3*i),s=18*(i-n);if(v.approximately(o,0)){if(!v.approximately(a,0)){var u=-s/a;if(0<=u&&u<=1)return[u]}return[]}var c=a*a-4*o*s,l=Math.sqrt(c),h=2*o;return v.approximately(h,0)?[]:[(l-a)/h,-(a+l)/h].filter((function(t){return 0<=t&&t<=1}))},bboxoverlap:function(t,e){var n,i,o,a,s,u=["x","y"],c=u.length;for(n=0;n<c;n++)if(o=t[i=u[n]].mid,a=e[i].mid,s=(t[i].size+e[i].size)/2,r(o-a)>=s)return!1;return!0},expandbox:function(t,e){e.x.min<t.x.min&&(t.x.min=e.x.min),e.y.min<t.y.min&&(t.y.min=e.y.min),e.z&&e.z.min<t.z.min&&(t.z.min=e.z.min),e.x.max>t.x.max&&(t.x.max=e.x.max),e.y.max>t.y.max&&(t.y.max=e.y.max),e.z&&e.z.max>t.z.max&&(t.z.max=e.z.max),t.x.mid=(t.x.min+t.x.max)/2,t.y.mid=(t.y.min+t.y.max)/2,t.z&&(t.z.mid=(t.z.min+t.z.max)/2),t.x.size=t.x.max-t.x.min,t.y.size=t.y.max-t.y.min,t.z&&(t.z.size=t.z.max-t.z.min)},pairiteration:function(t,e,n){var r=t.bbox(),i=e.bbox(),o=1e5,a=n||.5;if(r.x.size+r.y.size<a&&i.x.size+i.y.size<a)return[(o*(t._t1+t._t2)/2|0)/o+"/"+(o*(e._t1+e._t2)/2|0)/o];var s=t.split(.5),u=e.split(.5),c=[{left:s.left,right:u.left},{left:s.left,right:u.right},{left:s.right,right:u.right},{left:s.right,right:u.left}];c=c.filter((function(t){return v.bboxoverlap(t.left.bbox(),t.right.bbox())}));var l=[];return 0===c.length?l:(c.forEach((function(t){l=l.concat(v.pairiteration(t.left,t.right,a))})),l=l.filter((function(t,e){return l.indexOf(t)===e})))},getccenter:function(t,e,n){var r,a=e.x-t.x,u=e.y-t.y,c=n.x-e.x,l=n.y-e.y,h=a*i(d)-u*o(d),p=a*o(d)+u*i(d),m=c*i(d)-l*o(d),g=c*o(d)+l*i(d),y=(t.x+e.x)/2,b=(t.y+e.y)/2,_=(e.x+n.x)/2,x=(e.y+n.y)/2,w=y+h,S=b+p,E=_+m,T=x+g,M=v.lli8(y,b,w,S,_,x,E,T),A=v.dist(M,t),L=s(t.y-M.y,t.x-M.x),D=s(e.y-M.y,e.x-M.x),C=s(n.y-M.y,n.x-M.x);return L<C?((L>D||D>C)&&(L+=f),L>C&&(r=C,C=L,L=r)):C<D&&D<L?(r=C,C=L,L=r):C+=f,M.s=L,M.e=C,M.r=A,M},numberSort:function(t,e){return t-e}},t.exports=v},function(t,e,n){var r,i;r=n(2),(i=function(t){this.curves=[],this._3d=!1,t&&(this.curves=t,this._3d=this.curves[0]._3d)}).prototype={valueOf:function(){return this.toString()},toString:function(){return"["+this.curves.map((function(t){return r.pointsToString(t.points)})).join(", ")+"]"},addCurve:function(t){this.curves.push(t),this._3d=this._3d||t._3d},length:function(){return this.curves.map((function(t){return t.length()})).reduce((function(t,e){return t+e}))},curve:function(t){return this.curves[t]},bbox:function(){for(var t=this.curves,e=t[0].bbox(),n=1;n<t.length;n++)r.expandbox(e,t[n].bbox());return e},offset:function(t){var e=[];return this.curves.forEach((function(n){e=e.concat(n.offset(t))})),new i(e)}},t.exports=i},function(t,e,n){var r=n(5),i={x:!1,y:!1};function o(t,e,n){if("Z"!==e){if("M"!==e){var r=[!1,i.x,i.y].concat(n),o=new(t.bind.apply(t,r)),a=n.slice(-2);return i={x:a[0],y:a[1]},o}i={x:n[0],y:n[1]}}}t.exports=function(t,e){for(var n,i,a=r(e).split(" "),s=new RegExp("[MLCQZ]",""),u=[],c={C:6,Q:4,L:2,M:2};a.length;)n=a.splice(0,1)[0],s.test(n)&&(i=o(t,n,a.splice(0,c[n]).map(parseFloat)))&&u.push(i);return new t.PolyBezier(u)}},function(t,e){t.exports=function(t){var e,n,r,i,o,a,s=(t=t.replace(/,/g," ").replace(/-/g," - ").replace(/-\s+/g,"-").replace(/([a-zA-Z])/g," $1 ")).replace(/([a-zA-Z])\s?/g,"|$1").split("|"),u=s.length,c=[],l=0,h=0,f=0,d=0,p=0,m=0,g=0,v=0,y="";for(e=1;e<u;e++)if(i=(r=(n=s[e]).substring(0,1)).toLowerCase(),o=(c=(c=n.replace(r,"").trim().split(" ")).filter((function(t){return""!==t})).map(parseFloat)).length,"m"===i){if(y+="M ","m"===r?(f+=c[0],d+=c[1]):(f=c[0],d=c[1]),l=f,h=d,y+=f+" "+d+" ",o>2)for(a=0;a<o;a+=2)"m"===r?(f+=c[a],d+=c[a+1]):(f=c[a],d=c[a+1]),y+=["L",f,d,""].join(" ")}else if("l"===i)for(a=0;a<o;a+=2)"l"===r?(f+=c[a],d+=c[a+1]):(f=c[a],d=c[a+1]),y+=["L",f,d,""].join(" ");else if("h"===i)for(a=0;a<o;a++)"h"===r?f+=c[a]:f=c[a],y+=["L",f,d,""].join(" ");else if("v"===i)for(a=0;a<o;a++)"v"===r?d+=c[a]:d=c[a],y+=["L",f,d,""].join(" ");else if("q"===i)for(a=0;a<o;a+=4)"q"===r?(p=f+c[a],m=d+c[a+1],f+=c[a+2],d+=c[a+3]):(p=c[a],m=c[a+1],f=c[a+2],d=c[a+3]),y+=["Q",p,m,f,d,""].join(" ");else if("t"===i)for(a=0;a<o;a+=2)p=f+(f-p),m=d+(d-m),"t"===r?(f+=c[a],d+=c[a+1]):(f=c[a],d=c[a+1]),y+=["Q",p,m,f,d,""].join(" ");else if("c"===i)for(a=0;a<o;a+=6)"c"===r?(p=f+c[a],m=d+c[a+1],g=f+c[a+2],v=d+c[a+3],f+=c[a+4],d+=c[a+5]):(p=c[a],m=c[a+1],g=c[a+2],v=c[a+3],f=c[a+4],d=c[a+5]),y+=["C",p,m,g,v,f,d,""].join(" ");else if("s"===i)for(a=0;a<o;a+=4)p=f+(f-g),m=d+(d-v),"s"===r?(g=f+c[a],v=d+c[a+1],f+=c[a+2],d+=c[a+3]):(g=c[a],v=c[a+1],f=c[a+2],d=c[a+3]),y+=["C",p,m,g,v,f,d,""].join(" ");else"z"===i&&(y+="Z ",f=l,d=h);return y.trim()}}])),qr="#define GLSLIFY 1\nattribute vec4 position;attribute vec2 texcoord;attribute vec3 pointA;attribute vec3 pointB;attribute vec3 startColor;attribute vec3 endColor;attribute vec2 width;attribute float inst;attribute float shouldDraw;uniform mat4 u_worldViewProjection;uniform mat4 u_viewInverse;uniform mat4 u_model;uniform vec3 u_cameraPos;uniform vec2 u_resolution;uniform float u_segments;varying vec3 v_color;varying float v_alpha;varying float v_draw;float when_lt(float x,float y){return max(sign(y-x),0.0);}void main(){float rel_inst=inst+position.z;float width=mix(width.x,width.y,rel_inst);vec4 clip0=u_worldViewProjection*u_model*vec4(pointA,1.0);vec4 clip1=u_worldViewProjection*u_model*vec4(pointB,1.0);vec2 screen0=u_resolution*(0.5*clip0.xy/clip0.w+0.5);vec2 screen1=u_resolution*(0.5*clip1.xy/clip1.w+0.5);vec2 xBasis=normalize(screen1-screen0);vec2 yBasis=vec2(-xBasis.y,xBasis.x);vec2 pt0=screen0+width*(position.x*xBasis+position.y*yBasis);vec2 pt1=screen1+width*(position.x*xBasis+position.y*yBasis);vec2 pt=mix(pt0,pt1,position.z);vec4 clip=mix(clip0,clip1,position.z);gl_Position=vec4(clip.w*(2.0*pt/u_resolution-1.0),clip.z,clip.w)*when_lt(inst,u_segments);gl_PointSize=16.0;v_alpha=rel_inst/u_segments;v_color=mix(startColor,endColor,rel_inst/u_segments);v_draw=shouldDraw;}",Xr="precision mediump float;\n#define GLSLIFY 1\nuniform float u_time;varying vec3 v_color;varying float v_alpha;varying float v_draw;void main(){if(v_alpha>v_draw){discard;}gl_FragColor=vec4(v_color,1.0);}",Yr=(function(t){y(n,Pr);var e=w(n);function n(t){var r,i;f(this,n),m(_(i=e.call(this,t)),"numInstances",1e4),m(_(i),"init",(function(t){i.geometry.init(t),i._hasGeometry=!0,i.material.init(t),i.material.texturesLoaded=!0,i.vertexArrayInfo=ln(t,i.material.programInfo,i.geometry.bufferInfo)})),m(_(i),"createCollisionGeo",(function(){})),m(_(i),"update",(function(t,e,o){S((r=_(i),b(n.prototype)),"update",r).call(r,e,o),i.material.uniforms.u_model=i.modelMatrix})),m(_(i),"draw",(function(t){i.isReady&&(t.useProgram(i.material.programInfo.program),cn(t,i.material.programInfo,i.vertexArrayInfo),un(i.material.programInfo,i.material.uniforms),t.drawElementsInstanced(t.TRIANGLE_FAN,i.vertexArrayInfo.numElements,t.UNSIGNED_SHORT,0,3*i.segments-1),t.bindVertexArray(null))})),m(_(i),"rayCastFrom",(function(){return!1})),m(_(i),"hitTest",(function(){return!1})),m(_(i),"onSelectionCB",(function(t){return t})),m(_(i),"onSelection",(function(t,e){var n=i.getNearest(t,e);return i.onSelectionCB(n)})),t&&void 0!==t.numInstances&&(i.numInstances=t.numInstances);var o={vertex:qr,fragment:Xr};i.material=new Bn(o),i.material.uniforms={},i.geometry=new hr;var a=[0,-.5,0,0,-.5,1,0,.5,1,0,-.5,0,0,.5,1,0,.5,0],s=Array.from(Array(101).keys());s.forEach((function(t){s.push(t)})),s.forEach((function(t){s.push(t)}));for(var u=Array.from(Array(3).keys()),c=0;c<15;c+=1){var l=Math.PI/2+(c+0)*Math.PI/15,h=Math.PI/2+(c+1)*Math.PI/15;a.push.apply(a,[0,0,0]),a.push.apply(a,[.5*Math.cos(l),.5*Math.sin(l),0]),a.push.apply(a,[.5*Math.cos(h),.5*Math.sin(h),0])}for(var d=0;d<15;d+=1){var p=3*Math.PI/2+(d+0)*Math.PI/15,g=3*Math.PI/2+(d+1)*Math.PI/15;a.push.apply(a,[0,0,1]),a.push.apply(a,[.5*Math.cos(p),.5*Math.sin(p),1]),a.push.apply(a,[.5*Math.cos(g),.5*Math.sin(g),1])}var v=[].concat(T(gr.worldFromLatLon(41,-111,.001)),T(gr.worldFromLatLon(20,-50,1)),T(gr.worldFromLatLon(0,0,.001)));i.segments=100;var y=new Wr(v).getLUT(i.segments+1),x=[];return y.forEach((function(t){x.push.apply(x,T(Object.values(t)))})),new Wr([-1,0,0,-2,0,-2,0,0,-1]).getLUT(i.segments+1).forEach((function(t){x.push.apply(x,T(Object.values(t)))})),new Wr([-1,1,-1,-2,0,-2,0,-1,-1]).getLUT(i.segments+1).forEach((function(t){x.push.apply(x,T(Object.values(t)))})),i.geometry.vertices.position={numComponents:3,data:a,divisor:0},i.geometry.vertices.pointA={numComponents:3,data:x,divisor:1,offset:0*Float32Array.BYTES_PER_ELEMENT},i.geometry.vertices.pointB={numComponents:3,data:x,divisor:1,offset:3*Float32Array.BYTES_PER_ELEMENT},i.geometry.vertices.inst={numComponents:1,data:s,divisor:1},i.geometry.vertices.arc={numComponents:1,data:u,divisor:101},i.geometry.vertices.indices={numComponents:1,data:Array.from(Array(96).keys()),divisor:0},i}}(),function(t){y(n,Pr);var e=w(n);function n(t){var r,i;f(this,n),m(_(i=e.call(this,t)),"numInstances",1e4),m(_(i),"segments",30),m(_(i),"capResolution",6),m(_(i),"_arcCount",0),m(_(i),"_tweens",[]),m(_(i),"init",(function(t){i.geometry.init(t),i._hasGeometry=!0,i.material.init(t),i.material.texturesLoaded=!0,i.vertexArrayInfo=ln(t,i.material.programInfo,i.geometry.bufferInfo)})),m(_(i),"createRandomArcs",(function(t){for(var e=0;e<t;e+=1){var n={from:[180*Math.random()-90,360*Math.random()-180],to:[180*Math.random()-90,360*Math.random()-180]};i.addArc(n)}})),m(_(i),"addArc",(function(t,e,n){var r=[],o={from:t.from,to:t.to,normalFactor:1,alt:.5,startColor:"#ff0000",endColor:"#00ff00",startWidth:4,endWidth:4,shouldDraw:1,arcNumber:i._arcCount};void 0!==i.transform&&(o=i.transform(t,o)),r.push.apply(r,T(i._createArcFrom(o)));var a=Array.from(Array(1).keys()),s=i._createInstArray(1),u=gr.hexToRGB(o.startColor),c=gr.hexToRGB(o.endColor),l=[o.startWidth,o.endWidth];if(void 0!==e){o.shouldDraw=0;var h=i._arcCount,f=new vr(0,1,e,{onUpdate:function(t){i.geometry.updateGeometry({shouldDraw:{data:[t]}},h)},onComplete:function(){n&&n()}});i._tweens.push(f)}var d=[o.shouldDraw],p={pointA:{data:new Float32Array(r)},pointB:{data:r},inst:{data:s},arc:{data:a},startColor:{data:u},endColor:{data:c},width:{data:l},shouldDraw:{data:d}};i.geometry.updateGeometry(p,i._arcCount),i._arcCount+=1})),m(_(i),"updateArc",(function(t,e){var n=[],r={from:t.from,to:t.to,normalFactor:1,alt:.5,startColor:"#ff0000",endColor:"#00ff00",startWidth:4,endWidth:4,shouldDraw:1,arcNumber:i._arcCount};r=i.transform(t,r),n.push.apply(n,T(i._createArcFrom(r)));var o=Array.from(Array(1).keys()),a=i._createInstArray(1),s=gr.hexToRGB(r.startColor),u=gr.hexToRGB(r.endColor),c=[r.startWidth,r.endWidth],l=[r.shouldDraw],h={pointA:{data:new Float32Array(n)},pointB:{data:n},inst:{data:a},arc:{data:o},startColor:{data:s},endColor:{data:u},width:{data:c},shouldDraw:{data:l}};i.geometry.updateGeometry(h,e)})),m(_(i),"_createArcFrom",(function(t){var e=i._computeControlPoints(t),n=new Wr(e.cp0),r=new Wr(e.cp1),o=n.getLUT(i._pointsPerArcHalf),a=r.getLUT(i._pointsPerArcHalf),s=[];o.reverse().forEach((function(t){s.push(t)})),a.forEach((function(t){s.push(t)})),s.splice(i._pointsPerArcHalf,1);var u=[];return s.forEach((function(t){u.push.apply(u,T(Object.values(t)))})),u})),m(_(i),"_computeControlPoints",(function(t){var e=gr.worldFromLatLon(t.from[0],t.from[1],.005),n=gr.worldFromLatLon(t.to[0],t.to[1],.005),r=En();Pn(r,e,n,.5);var i=gr.latLonFromWorld(r),o=gr.worldFromLatLon(i.lat,i.lon,t.alt),a=En();An(a,e,r),Ln(a,a,t.normalFactor);var s=En();Mn(s,o,a);var u=En();An(u,o,a);var c=[];c.push.apply(c,T(o)),c.push.apply(c,T(s)),c.push.apply(c,T(e));var l=[];return l.push.apply(l,T(o)),l.push.apply(l,T(u)),l.push.apply(l,T(n)),{cp0:c,cp1:l}})),m(_(i),"_createInstArray",(function(t){for(var e=Array.from(Array(i.segments+1).keys()),n=[],r=0;r<t;r+=1)e.forEach((function(t){n.push(t)}));return n})),m(_(i),"createCollisionGeo",(function(){})),m(_(i),"update",(function(t,e,o){S((r=_(i),b(n.prototype)),"update",r).call(r,e,o),i.material.uniforms.u_model=i.modelMatrix,i.material.uniforms.u_time=o,i.geometry.isDirty&&i.geometry.updateBuffers(t)})),m(_(i),"draw",(function(t){!i.isReady||i._arcCount<=0||(t.useProgram(i.material.programInfo.program),cn(t,i.material.programInfo,i.vertexArrayInfo),un(i.material.programInfo,i.material.uniforms),t.drawElementsInstanced(t.TRIANGLE_FAN,i.vertexArrayInfo.numElements,t.UNSIGNED_SHORT,0,(i.segments+1)*i._arcCount),t.bindVertexArray(null))})),m(_(i),"rayCastFrom",(function(){return!1})),m(_(i),"hitTest",(function(){return!1})),m(_(i),"onSelectionCB",(function(t){return t})),m(_(i),"onSelection",(function(t,e){var n=i.getNearest(t,e);return i.onSelectionCB(n)})),t&&(void 0!==t.numInstances&&(i.numInstances=t.numInstances),void 0!==t.segments&&(i.segments=t.segments),void 0!==t.transform&&(i.transform=t.transform)),i._pointsPerArcHalf=i.segments/2+1;var o={vertex:qr,fragment:Xr};i.material=new Bn(o),i.material.uniforms={u_segments:i.segments},i.geometry=new hr;for(var a=[0,-.5,0,0,-.5,1,0,.5,1,0,-.5,0,0,.5,1,0,.5,0],s=0;s<i.capResolution;s+=1){var u=Math.PI/2+(s+0)*Math.PI/i.capResolution,c=Math.PI/2+(s+1)*Math.PI/i.capResolution;a.push.apply(a,[0,0,0]),a.push.apply(a,[.5*Math.cos(u),.5*Math.sin(u),0]),a.push.apply(a,[.5*Math.cos(c),.5*Math.sin(c),0])}for(var l=0;l<i.capResolution;l+=1){var h=3*Math.PI/2+(l+0)*Math.PI/i.capResolution,d=3*Math.PI/2+(l+1)*Math.PI/i.capResolution;a.push.apply(a,[0,0,1]),a.push.apply(a,[.5*Math.cos(h),.5*Math.sin(h),1]),a.push.apply(a,[.5*Math.cos(d),.5*Math.sin(d),1])}var p=Array.from(Array(2*i._pointsPerArcHalf*i.numInstances)).fill(0);return i.geometry.vertices.position={numComponents:3,data:a,divisor:0},i.geometry.vertices.pointA={numComponents:3,data:p,divisor:1,offset:0*Float32Array.BYTES_PER_ELEMENT,perInstance:3*(i.segments+1)},i.geometry.vertices.pointB={numComponents:3,data:p,divisor:1,offset:3*Float32Array.BYTES_PER_ELEMENT,perInstance:3*(i.segments+1)},i.geometry.vertices.inst={numComponents:1,data:[],divisor:1,perInstance:i.segments+1},i.geometry.vertices.arc={numComponents:1,data:[],divisor:i.segments,perInstance:1},i.geometry.vertices.startColor={numComponents:3,data:[],divisor:i.segments+1,perInstance:3,drawType:"DYNAMIC_DRAW"},i.geometry.vertices.endColor={numComponents:3,data:[],divisor:i.segments+1,perInstance:3,drawType:"DYNAMIC_DRAW"},i.geometry.vertices.width={numComponents:2,data:[],divisor:i.segments+1,perInstance:2,drawType:"DYNAMIC_DRAW"},i.geometry.vertices.shouldDraw={numComponents:1,data:[],divisor:i.segments+1,perInstance:1,drawType:"DYNAMIC_DRAW"},i.geometry.vertices.indices={numComponents:1,data:Array.from(Array(6+3*i.capResolution*2).keys()),divisor:0},i}}(),{vertex:"#define GLSLIFY 1\nattribute vec4 position;attribute vec3 normal;attribute vec2 texcoord;uniform mat4 u_worldViewProjection;uniform mat4 u_viewInverse;uniform mat4 u_model;varying vec2 vTexture;void main(){vec4 pos=u_worldViewProjection*u_model*position;vTexture=texcoord;gl_Position=pos;}",fragment:"precision mediump float;\n#define GLSLIFY 1\nuniform sampler2D uTexture;varying vec2 vTexture;void main(){vec4 textureColor=texture2D(uTexture,vTexture);gl_FragColor=vec4(textureColor.rgb,1.0);}"}),Zr={},Jr=(function(t){y(n,cr);var e=w(n);function n(t){var r,i;return f(this,n),m(_(i=e.call(this)),"material",null),m(_(i),"init",(function(t,e){i.geometry=new hr,i.geometry.vertices=oe.createSphereVertices(50,128,128),i.geometry.init(t);var n={surface:{src:i.textureSrc.surface,minMag:t.NEAREST}};i.material.init(t),i.material.loadTextures(t,n,(function(){i.material.uniforms.uTexture=i.material.textures.surface,e&&e()})),i.material.uniforms.uModelMatrix=i.modelMatrix})),m(_(i),"createCollisionGeo",(function(){})),m(_(i),"rayCastFrom",(function(){return!1})),m(_(i),"hitTest",(function(){return!1})),m(_(i),"onSelection",(function(){})),m(_(i),"update",(function(t,e,o){S((r=_(i),b(n.prototype)),"update",r).call(r,e,o),i.material.uniforms.u_model=i.modelMatrix})),m(_(i),"draw",(function(t){i.isReady&&i.shouldDraw&&(t.useProgram(i.material.programInfo.program),t.cullFace(t.FRONT),cn(t,i.material.programInfo,i.geometry.bufferInfo),un(i.material.programInfo,i.material.uniforms),t.drawElements(t.TRIANGLES,i.geometry.bufferInfo.numElements,t.UNSIGNED_SHORT,0),t.cullFace(t.BACK))})),i.material=new Bn(Yr),i.material.uniforms=Zr,i.textureSrc={surface:t},i}}(),{vertex:"#define GLSLIFY 1\nattribute vec4 position;attribute vec3 normal;attribute vec2 texcoord;uniform mat4 u_worldViewProjection;uniform mat4 u_viewInverse;uniform mat4 u_model;uniform vec3 u_cameraPos;varying float vAlpha;varying vec2 vTexture;void main(){vec4 pos=u_worldViewProjection*u_model*position;vec4 transformedCamera=vec4(-0.5,1.0,-1.0,1.0)*u_worldViewProjection;vAlpha=pow((1.0+(dot(normal,normalize(transformedCamera.xyz))))/2.0,1.0);vTexture=texcoord;gl_Position=pos;}",fragment:"precision mediump float;\n#define GLSLIFY 1\nuniform sampler2D uTexture;uniform vec2 u_offset;varying float vAlpha;varying vec2 vTexture;void main(){vec4 textureColor=texture2D(uTexture,vec2(vTexture.x-0.25+u_offset.x,vTexture.y+u_offset.y));float alpha=vAlpha+(1.0-vAlpha)*0.05;alpha*=0.9;gl_FragColor=vec4(textureColor.rgb,textureColor.r);}"}),Qr={u_offset:[0,0]},Kr=(function(t){y(n,cr);var e=w(n);function n(t){var r,i;return f(this,n),m(_(i=e.call(this)),"material",null),m(_(i),"movementSpeed",[7,0]),m(_(i),"init",(function(t,e){i.geometry=new hr("sphere"),i.geometry.init(t);var n={surface:{src:i.textureSrc.surface,minMag:t.LINEAR}};i.material.init(t),i.material.loadTextures(t,n,(function(){i.material.uniforms.uTexture=i.material.textures.surface,e&&e()})),i.material.uniforms.uModelMatrix=i.modelMatrix,i.scale=[1.04,1.04,1.04]})),m(_(i),"createCollisionGeo",(function(){})),m(_(i),"rayCastFrom",(function(){return!1})),m(_(i),"hitTest",(function(){return!1})),m(_(i),"onSelection",(function(){})),m(_(i),"update",(function(t,e,o){S((r=_(i),b(n.prototype)),"update",r).call(r,e,o),i.material.uniforms.u_model=i.modelMatrix,i.material.uniforms.u_offset=[o*i.movementSpeed[0]/1e3,o*i.movementSpeed[1]/1e3]})),m(_(i),"draw",(function(t){i.isReady&&i.shouldDraw&&(t.useProgram(i.material.programInfo.program),cn(t,i.material.programInfo,i.geometry.bufferInfo),un(i.material.programInfo,i.material.uniforms),t.drawElements(t.TRIANGLES,i.geometry.bufferInfo.numElements,t.UNSIGNED_SHORT,0))})),i.material=new Bn(Jr),i.material.uniforms=Qr,i.textureSrc={surface:t},i}}(),{vertex:"#define GLSLIFY 1\nattribute vec4 position;attribute vec3 normal;attribute vec2 texcoord;uniform mat4 u_worldViewProjection;uniform mat4 u_viewInverse;uniform mat4 u_model;uniform vec3 u_cameraPos;varying vec2 vTexture;varying float vAlpha;void main(){vec4 pos=u_worldViewProjection*u_model*position;gl_PointSize=10.0;vec3 transformedNormal=(u_worldViewProjection*u_model*vec4(normal,1.0)).xyz;vec4 transformedCamera=vec4(1.0,1.0,-1.0,1.0)*u_worldViewProjection;vAlpha=pow(dot(position.xyz,normalize(u_cameraPos)),0.2);vTexture=texcoord.xy;gl_Position=pos;}",fragment:"precision mediump float;\n#define GLSLIFY 1\nuniform sampler2D u_surface;varying vec2 vTexture;varying float vAlpha;void main(){vec3 surfaceColor=texture2D(u_surface,vec2(vTexture.x,1.0-vTexture.y)).rgb;float alpha=clamp(vAlpha,0.1,1.0);vec3 color=surfaceColor*alpha;gl_FragColor=vec4(color,1.0);}"}),$r={},ti=(function(t){y(n,lr);var e=w(n);function n(t,r){var i,o;f(this,n),m(_(o=e.call(this)),"material",null),m(_(o),"lookup",null),m(_(o),"currentSelection",-1),m(_(o),"previousSelection",-1),m(_(o),"inAnimation",null),m(_(o),"outAnimation",null),m(_(o),"selection0",236),m(_(o),"selection1",144),m(_(o),"current",236),m(_(o),"dataTexture",void 0),m(_(o),"dataTextureSize",16),m(_(o),"updateCMDs",[]),m(_(o),"highlightAnimationProps",{start:0,stop:1,duration:1e3,onUpdate:function(t){o.material.uniforms.u_animateIn=t}}),m(_(o),"init",(function(t,e){o.geometry.init(t);var n={surface:{src:o.textureSrc.surface,minMag:t.LINEAR}};o.material.init(t),o.material.uniforms.uModelMatrix=o.modelMatrix,o.material.loadTextures(t,n,(function(){o.material.uniforms.u_surface=o.material.textures.surface,e&&e()}))})),m(_(o),"getValueForId",(function(t){return o.lookup.getFromId(t)})),m(_(o),"getValueForCode",(function(t){return o.lookup.getFromCode(t)})),m(_(o),"getValueForName",(function(t){return o.lookup.getFromName(t)})),m(_(o),"createCollisionGeo",(function(){o.collisionGeometry&&o.collisionGeometry instanceof or||(o.collisionGeometry=ir.create_collision_geometry(o.geometry.vertices.position.data,o.geometry.vertices.texcoord.data,o.geometry.vertices.indices.data))})),m(_(o),"rayCastFrom",(function(t){return o.collisionGeometry.raycast(t.origin,t.direction)})),m(_(o),"hitTest",(function(t){return o.collisionGeometry.hitTest(t.origin,t.direction)})),m(_(o),"onSelectionCB",(function(){})),m(_(o),"onSelection",(function(){})),m(_(o),"onHover",(function(){})),m(_(o),"update",(function(t,e,r){S((i=_(o),b(n.prototype)),"update",i).call(i,e,r),o.material.uniforms.u_model=o.modelMatrix,o.updateCMDs.forEach((function(e){e(t)})),o.updateCMDs=[]})),m(_(o),"draw",(function(t){o.isReady&&o.shouldDraw&&(t.useProgram(o.material.programInfo.program),cn(t,o.material.programInfo,o.geometry.bufferInfo),un(o.material.programInfo,o.material.uniforms),t.drawElements(t.TRIANGLES,o.geometry.bufferInfo.numElements,t.UNSIGNED_INT,0))})),m(_(o),"setCountryHover",(function(){})),m(_(o),"setHighlightId",(function(t){o.previousSelection=o.currentSelection,o.currentSelection=t;var e=o.inAnimation?o.inAnimation.currentValue():1,n=300*e;o.animateIn(o.currentSelection,500),o.animateOut(o.previousSelection,n,e)})),m(_(o),"animateIn",(function(t,e,n){o.material.uniforms.u_idAnimateIn=t,o.inAnimation&&o.inAnimation.stop(),o.material.uniforms.u_animateIn=0,o.inAnimation=new vr(o.highlightAnimationProps.start,o.highlightAnimationProps.stop,o.highlightAnimationProps.duration,{onUpdate:o.highlightAnimationProps.onUpdate,onComplete:function(){n&&n()}})})),m(_(o),"animateOut",(function(t,e,n,r){o.material.uniforms.u_idAnimateOut=t,o.outAnimation&&o.outAnimation.stop(),o.material.uniforms.u_animateOut=n,o.outAnimation=new vr(n,0,e,{onUpdate:function(t){o.material.uniforms.u_animateOut=t},onComplete:function(){r&&r()}})})),m(_(o),"addDataset",(function(t){o.lookup=new mr(t,o.textureSrc.id)})),m(_(o),"updateIdState",(function(){})),o.textureSrc={surface:t.surface},o.material=new Bn(Kr),o.material.uniforms=$r,o.geometry=new hr;var a=0,s=new Float32Array(r),u=new Int32Array(r),c=s.subarray(a,a+288e3);a+=288e3;var l=s.subarray(a,a+288e3);a+=288e3;var h=s.subarray(a,a+288e3);a+=288e3;var d=u.subarray(a,a+96e3);return o.geometry.vertices.position={numComponents:3,data:c},o.geometry.vertices.normal={numComponents:3,data:l},o.geometry.vertices.texcoord={numComponents:3,data:h},o.geometry.vertices.indices={numComponents:3,data:d},o}}(),{vertex:"#define GLSLIFY 1\nattribute vec3 position;attribute vec2 texture;attribute vec3 tangentU;attribute vec3 tangentV;attribute vec2 textureG;attribute float random;uniform mat4 u_model;uniform mat4 u_worldViewProjection;uniform mat4 u_viewInverse;uniform vec3 u_cameraPos;uniform float uPointSize;uniform float uRandomPointSizeDelta;uniform float uRandomPointSizeRatio;uniform float uMinPointAlpha;uniform float uMinPointSize;uniform float u_time;uniform float u_speed;uniform vec2 uOffset;uniform vec3 uRippleCenter;uniform float uRippleProgress;uniform float uRippleWidth;uniform float uRippleHeight;varying vec2 vTexture;varying vec4 vColor;varying float vShine;varying vec2 vTextureG;varying float vTime;varying float vAlpha;mat4 rotationMatrix(vec3 axis,float angle){axis=normalize(axis);float s=sin(angle);float c=cos(angle);float oc=1.0-c;return mat4(oc*axis.x*axis.x+c,oc*axis.x*axis.y-axis.z*s,oc*axis.z*axis.x+axis.y*s,0.0,oc*axis.x*axis.y+axis.z*s,oc*axis.y*axis.y+c,oc*axis.y*axis.z-axis.x*s,0.0,oc*axis.z*axis.x-axis.y*s,oc*axis.y*axis.z+axis.x*s,oc*axis.z*axis.z+c,0.0,0.0,0.0,0.0,1.0);}void main(){vec4 pos=vec4(position,1.0);gl_PointSize=10.0;mat4 rot1=rotationMatrix(tangentU,(texture.x*2.0)-1.0);vec4 pos1=rot1*pos;mat4 rot2=rotationMatrix(tangentV,((texture.y*2.0)-1.0));vec4 pos2=rot2*pos;float rotSizeDelta=max((dot(normalize(u_cameraPos),position)+1.0)/2.0,uMinPointSize);float randomSize=uRandomPointSizeDelta*random*step(random,1.0-uRandomPointSizeRatio);pos.xyz+=pos1.xyz*(uPointSize+randomSize);pos.xyz+=pos2.xyz*(uPointSize+randomSize);vec3 rippleCenter=vec3(0.0,0.0,1.0);float d=1.0-((dot(pos.xyz,uRippleCenter)+1.0)/2.0);float q=smoothstep(uRippleProgress-uRippleWidth,uRippleProgress,d);q-=smoothstep(uRippleProgress,uRippleProgress+uRippleWidth,d);float t=1.0+q*uRippleHeight;pos.xyz*=t;gl_Position=u_worldViewProjection*u_model*pos;gl_Position.xy+=uOffset*gl_Position.w;float c=t/1.04;vTexture=texture;vTextureG=textureG;vShine=q;vTime=(u_time/100.0)*u_speed;vAlpha=max((dot(normalize(u_cameraPos),position)+1.0)/2.0,uMinPointAlpha);}",fragment:"precision mediump float;\n#define GLSLIFY 1\nuniform vec3 uLeftColorCurrent;uniform vec3 uLeftColorTarget;uniform vec3 uRightColor;uniform float uColorChangeAnimation;uniform vec2 uResolution;uniform float uSeed;uniform float uScale;uniform vec3 uColor;uniform vec3 uRippleColor;uniform vec4 uCardMargin;uniform sampler2D uNoiseTexture;varying vec2 vTexture;varying vec2 vTextureG;varying vec4 vColor;varying float vShine;varying float vTime;varying float vAlpha;void main(){vec4 noiseColor=texture2D(uNoiseTexture,vec2(vTextureG.x+fract(vTime),vTextureG.y));float d=1.0-smoothstep(0.45,0.5,distance(vec2(0.5,0.5),vTexture));vec3 color=mix(uColor,uRippleColor,vShine);float alpha=vAlpha*d*pow(noiseColor.r,2.5);gl_FragColor=vec4(color,alpha);}"}),ei={uPointSize:.005,uRandomPointSizeDelta:0,uRandomPointSizeRatio:0,uMinPointAlpha:0,uMinPointSize:1,uOffset:[0,0],uRippleCenter:[0,0,1],uRippleProgress:-2,uRippleWidth:.2,uRippleHeight:.1,uRippleColor:[1,1,1],uColor:[1,1,1],u_speed:10},ni=function(t){y(n,lr);var e=w(n);function n(t,r,i){var o,a;f(this,n),m(_(a=e.call(this)),"material",null),m(_(a),"lookup",null),m(_(a),"currentSelection",-1),m(_(a),"previousSelection",-1),m(_(a),"inAnimation",null),m(_(a),"outAnimation",null),m(_(a),"dataTexture",void 0),m(_(a),"dataTextureSize",16),m(_(a),"updateCMDs",[]),m(_(a),"highlightAnimationProps",{start:0,stop:1,duration:1e3,onUpdate:function(t){a.material.uniforms.u_animateIn=t}}),m(_(a),"init",(function(t,e){a.geometry.init(t);var n={noise:{src:a.textureSrc.noise,minMag:t.LINEAR}};a.material.init(t),a.material.uniforms.uModelMatrix=a.modelMatrix,a.material.loadTextures(t,n,(function(){a.material.uniforms.uNoiseTexture=a.material.textures.noise,e&&e()}))})),m(_(a),"getValueForId",(function(t){return a.lookup.getFromId(t)})),m(_(a),"getValueForCode",(function(t){return a.lookup.getFromCode(t)})),m(_(a),"getValueForName",(function(t){return a.lookup.getFromName(t)})),m(_(a),"setIdColor",(function(t,e,n){var r=void 0===n?1:n,i=gr.hexToRGBA(e,r,!1);a.updateCMDs.push((function(e){a.dataTexture.updatePixelId(e,i,t)}))})),m(_(a),"createCollisionGeo",(function(){if(!(a.collisionGeometry&&a.collisionGeometry instanceof or)){var t=oe.createSphereVertices(1,128,128);a.collisionGeometry=ir.create_collision_geometry(t.position,t.texcoord,t.indices)}})),m(_(a),"rayCastFrom",(function(t){return a.collisionGeometry.raycast(t.origin,t.direction)})),m(_(a),"hitTest",(function(t){return a.collisionGeometry.hitTest(t.origin,t.direction)})),m(_(a),"onSelectionCB",(function(){})),m(_(a),"onSelection",(function(t,e,n){var r=gr.latLonFromWorld(n.point);return console.log(r,n),{lat:t,lon:e}})),m(_(a),"onHover",(function(){})),m(_(a),"update",(function(t,e,r){S((o=_(a),b(n.prototype)),"update",o).call(o,e,r),a.material.uniforms.u_model=a.modelMatrix,a.material.uniforms.u_time=r,a.updateCMDs.forEach((function(e){e(t)})),a.updateCMDs=[]})),m(_(a),"draw",(function(t){a.isReady&&a.shouldDraw&&(t.useProgram(a.material.programInfo.program),t.disable(t.CULL_FACE),cn(t,a.material.programInfo,a.geometry.bufferInfo),un(a.material.programInfo,a.material.uniforms),t.drawElements(t.TRIANGLES,a.geometry.bufferInfo.numElements,t.UNSIGNED_INT,0),t.enable(t.CULL_FACE))})),m(_(a),"setCountryHover",(function(t){})),m(_(a),"setHighlightId",(function(t){a.previousSelection=a.currentSelection,a.currentSelection=t;var e=a.inAnimation?a.inAnimation.currentValue():1,n=300*e;a.animateIn(a.currentSelection,500),a.animateOut(a.previousSelection,n,e)})),m(_(a),"animateIn",(function(t,e){a.material.uniforms.u_idAnimateIn=t,a.inAnimation&&a.inAnimation.stop(),a.material.uniforms.u_animateIn=0,a.inAnimation=new vr(a.highlightAnimationProps.start,a.highlightAnimationProps.stop,a.highlightAnimationProps.duration,{onUpdate:a.highlightAnimationProps.onUpdate,onComplete:function(){e&&e()}})})),m(_(a),"animateOut",(function(t,e,n,r){a.material.uniforms.u_idAnimateOut=t,a.outAnimation&&a.outAnimation.stop(),a.material.uniforms.u_animateOut=n,a.outAnimation=new vr(n,0,e,{onUpdate:function(t){a.material.uniforms.u_animateOut=t},onComplete:function(){r&&r()}})})),m(_(a),"addDataset",(function(t){a.lookup=new mr(t,a.textureSrc.id)})),m(_(a),"rippleAtLocation",(function(t,e,n){a._ripple instanceof vr&&a._ripple.stop(),a.material.uniforms.uRippleCenter=gr.worldFromLatLon(t,e,0);var r=2e3;n&&(n.width&&(a.material.uniforms.uRippleWidth=n.width),n.height&&(a.material.uniforms.uRippleHeight=n.height),n.speed&&(a.material.uniforms.u_speed=n.speed),n.rippleColor&&(a.material.uniforms.uRippleColor=n.rippleColor),n.duration&&(r=n.duration));var i=0-a.material.uniforms.uRippleWidth,o=1+a.material.uniforms.uRippleWidth;a._ripple=new vr(i,o,r,{onUpdate:function(t){a.material.uniforms.uRippleProgress=t}})})),a.textureSrc={noise:t.noise},a.material=new Bn(ti),a.material.uniforms=ei,a.geometry=new hr;var s=0,u=new Float32Array(r),c=new Int32Array(r),l=u.subarray(s,s+114192);s+=114192;var h=u.subarray(s,s+114192);s+=114192;var d=u.subarray(s,s+114192);s+=114192;var p=u.subarray(s,s+76128);s+=76128;var g=u.subarray(s,s+76128);s+=76128;var v=u.subarray(s,s+38064);s+=38064;var y=c.subarray(s,s+57096);return a.geometry.vertices.position={numComponents:3,data:l},a.geometry.vertices.tangentU={numComponents:3,data:h},a.geometry.vertices.tangentV={numComponents:3,data:d},a.geometry.vertices.texture={numComponents:2,data:p},a.geometry.vertices.textureG={numComponents:2,data:g},a.geometry.vertices.random={numComponents:1,data:v},a.geometry.vertices.indices={numComponents:3,data:y},i&&(i.pointSize&&(a.material.uniforms.uPointSize=i.pointSize),i.randomPointSizeVariance&&(a.material.uniforms.uRandomPointSizeDelta=i.randomPointSizeVariance),i.randomPointSizeRatio&&(a.material.uniforms.uRandomPointSizeRatio=i.randomPointSizeRatio),i.minPointAlpha&&(a.material.uniforms.uMinPointAlpha=i.minPointAlpha),i.minPointSize&&(a.material.uniforms.uMinPointSize=i.minPointSize),i.offset&&(a.material.uniforms.uOffset=i.offset),i.color&&(a.material.uniforms.uColor=gr.hexToRGB(i.color))),a}return n}(),ri={u_animation:1,u_startsize:4,u_midsize:16,u_endsize:4,u_startColor:[1,1,1,.4],u_midColor:[1,1,1,1],u_endColor:[1,1,1,.4]},ii=function(t){y(n,Pr);var e=w(n);function n(t){var r,i;f(this,n),m(_(i=e.call(this,t)),"datastore",void 0),m(_(i),"maxSelectionDistance",300),m(_(i),"maxSelectionCount",1),m(_(i),"maxDataPoints",10),m(_(i),"_segments",600),m(_(i),"_pointsPerArcHalf",300),m(_(i),"_tweens",[]),m(_(i),"dataPointCount",0),m(_(i),"_resourceLoaded",!1),m(_(i),"_isDirty",!0),m(_(i),"_hasGeometry",!1),m(_(i),"useTexture",!1),m(_(i),"createEmptyVertices",(function(){i.geometry.vertices.position={numComponents:3,data:new Array(i._segments).fill(0),perInstance:3},i.geometry.vertices.inst={numComponents:1,data:new Array(i._segments).fill(0),perInstance:1},i.geometry.vertices.indices={numComponents:1,data:Array.from(Array(i._segments).keys()),perInstance:1}})),m(_(i),"addArc",(function(t,e,n){var r=[],o={from:t.from,to:t.to,normalFactor:t.normalFactor||.5,alt:t.alt||.3,startColor:t.startColor||"#ffffff",midColor:t.midColor||"#ffffff",endColor:t.endColor||"#ffffff",startAlpha:t.startAlpha||0,midAlpha:t.midAlpha||1,endAlpha:t.endAlpha||0,startWidth:t.startWidth||4,midWidth:t.midWidth||4,endWidth:t.endWidth||4},a=(gr.dotBetweenLatLon(t.from,t.to)+1)/2;void 0!==i.transform&&(o=i.transform(t,o)),o.alt=.1+(1-a)*o.alt,i.material.uniforms.u_startsize=o.startWidth,i.material.uniforms.u_midsize=o.midWidth,i.material.uniforms.u_endsize=o.endWidth,i.material.uniforms.u_startColor=gr.hexToRGBA(o.startColor,o.startAlpha),i.material.uniforms.u_midColor=gr.hexToRGBA(o.midColor,o.midAlpha),i.material.uniforms.u_endColor=gr.hexToRGBA(o.endColor,o.endAlpha),r.push.apply(r,T(i._createArcFrom(o)));var s=Array.from(Array(i._segments).keys());if(void 0!==e){i.material.uniforms.u_animation=0;var u=new vr(0,1,e,{onUpdate:function(t){i.material.uniforms.u_animation=t},onComplete:function(){n&&n()}});i._tweens.push(u)}var c={position:{data:new Float32Array(r)},inst:{data:s}};i.geometry.updateGeometry(c,0),i.shouldDraw=!0})),m(_(i),"_createArcFrom",(function(t){var e=i._computeControlPoints(t),n=new Wr(e.cp0),r=new Wr(e.cp1),o=n.getLUT(i._pointsPerArcHalf),a=r.getLUT(i._pointsPerArcHalf),s=[];o.reverse().forEach((function(t){s.push(t)})),a.forEach((function(t){s.push(t)})),s.splice(i._pointsPerArcHalf,1);var u=[];return s.forEach((function(t){u.push.apply(u,T(Object.values(t)))})),u})),m(_(i),"_computeControlPoints",(function(t){var e=gr.worldFromLatLon(t.from[0],t.from[1],.005),n=gr.worldFromLatLon(t.to[0],t.to[1],.005),r=En();Pn(r,e,n,.5);var i=gr.latLonFromWorld(r),o=gr.worldFromLatLon(i.lat,i.lon,t.alt),a=En();An(a,e,r),Ln(a,a,t.normalFactor);var s=En();Mn(s,o,a);var u=En();An(u,o,a);var c=[];c.push.apply(c,T(o)),c.push.apply(c,T(s)),c.push.apply(c,T(e));var l=[];return l.push.apply(l,T(o)),l.push.apply(l,T(u)),l.push.apply(l,T(n)),{cp0:c,cp1:l}})),m(_(i),"_createInstArray",(function(t){for(var e=Array.from(Array(i._segments+1).keys()),n=[],r=0;r<t;r+=1)e.forEach((function(t){n.push(t)}));return n})),m(_(i),"removeAllArcs",(function(){i.shouldDraw=!1})),m(_(i),"init",(function(t,e){if(i.geometry.init(t),i._hasGeometry=!0,i.material.init(t),i.useTexture){var n={texture:{src:i.textureSrc.texture,minMag:t.LINEAR}};i.material.loadTextures(t,n,(function(){e&&e(),i.material.uniforms.u_texture=i.material.textures.texture}))}else e&&e()})),m(_(i),"createCollisionGeo",(function(){})),m(_(i),"update",(function(t,e,o){S((r=_(i),b(n.prototype)),"update",r).call(r,e,o),i.material.uniforms.u_model=i.modelMatrix,i.geometry.needsResize&&i.geometry.reloadBuffers(t),i.geometry.isDirty&&i.geometry.updateBuffers(t)})),m(_(i),"draw",(function(t){(i.isReady||i._hasGeometry)&&i.shouldDraw&&(t.useProgram(i.material.programInfo.program),t.disable(t.DEPTH_TEST),cn(t,i.material.programInfo,i.geometry.bufferInfo),un(i.material.programInfo,i.material.uniforms),t.drawArrays(t.POINTS,0,i._segments-1),t.enable(t.DEPTH_TEST))})),m(_(i),"rayCastFrom",(function(){return!0})),m(_(i),"hitTest",(function(){return!0})),m(_(i),"onSelectionCB",(function(t){return t})),m(_(i),"onSelection",(function(){}));var o={vertex:"#define GLSLIFY 1\nattribute vec4 position;attribute float inst;uniform mat4 u_worldViewProjection;uniform mat4 u_viewInverse;uniform mat4 u_model;uniform vec3 u_cameraPos;uniform float u_startsize;uniform float u_midsize;uniform float u_endsize;uniform vec4 u_startColor;uniform vec4 u_midColor;uniform vec4 u_endColor;varying vec4 v_color;varying float v_tex;varying float v_alpha;float when_gt(float x,float y){return max(sign(x-y),0.0);}float when_lt(float x,float y){return max(sign(y-x),0.0);}float getV(vec3 x){return x.x*x.x+x.y*x.y+x.z*x.z;}void main(){v_tex=inst/600.0;float t0=v_tex*2.0;float t1=(v_tex*2.0-1.0);float firstHalfSize=mix(u_startsize,u_midsize,t0)*(1.0-step(0.5,v_tex));float secondHalfSize=mix(u_midsize,u_endsize,t1)*step(0.5,v_tex);;vec4 firstHalfColor=mix(u_startColor,u_midColor,t0)*(1.0-step(0.5,v_tex));vec4 secondHalfColor=mix(u_midColor,u_endColor,t1)*step(0.5,v_tex);vec4 pos=u_worldViewProjection*u_model*position;gl_PointSize=firstHalfSize+secondHalfSize;gl_Position=pos;v_color=firstHalfColor+secondHalfColor;v_alpha=step(0.3,(1.0+dot(normalize(u_cameraPos),normalize(position.xyz)))/2.0);}",fragment:"precision mediump float;\n#define GLSLIFY 1\nuniform float u_time;uniform float u_animation;varying vec4 v_color;varying float v_tex;varying float v_alpha;void main(){float d=distance(vec2(0.5),gl_PointCoord.xy);float c=1.0-smoothstep(0.4,0.5,d);float alpha=step(1.0-u_animation,1.0-v_tex);gl_FragColor=vec4(v_color.rgb,v_color.a*c*alpha);}"};return t&&(t.maxSelectionCount&&(i.maxSelectionCount=t.maxSelectionCount),t.maxSelectionDistance&&(i.maxSelectionDistance=t.maxSelectionDistance),t.maxDataPoints&&(i.maxDataPoints=t.maxDataPoints),!0===t.useTexture&&void 0!==t.texture&&(i.useTexture=!0,o.fragment=Rr,i.textureSrc={texture:t.texture})),i.material=new Bn(o),i.datastore=new Cr,i.material.uniforms=ri,i.geometry=new hr,i.shouldDraw=!1,i.createEmptyVertices(),i}return n}(),oi=function t(e,n,r,i){f(this,t),m(this,"id",Math.random().toFixed(16).substr(2)),m(this,"latitude",0),m(this,"longitude",0),m(this,"altitude",0),m(this,"calloutClass",void 0),m(this,"data",void 0),this.latitude=e,this.longitude=n,this.calloutClass=r,this.data=i},ai=function(){function t(e){var n=this;f(this,t),m(this,"drawables",[]),m(this,"element",void 0),m(this,"definition",void 0),m(this,"size",{width:0,height:0}),this.definition=e,this.element=this.createElement(),this.resizeObserver=new ResizeObserver((function(t){t.length&&(n.size=t[0].contentRect)})),this.resizeObserver.observe(this.element)}return p(t,[{key:"release",value:function(){this.resizeObserver.disconnect()}},{key:"createElement",value:function(){return document.createElement("div")}},{key:"animateIn",value:function(){}},{key:"animateOut",value:function(t){t(this)}},{key:"update",value:function(t){this.drawables.forEach((function(e){return e.update(t)}))}},{key:"setPosition",value:function(t){this.element.style.transform="translate(".concat(t.screen.x,"px, ").concat(t.screen.y,"px)")}}]),t}()}).call(this,n(57))},function(t,e,n){var r,i=n(6),o=n(100),a=n(97),s=n(60),u=n(127),c=n(91),l=n(74),h=l("IE_PROTO"),f=function(){},d=function(t){return"<script>"+t+"<\/script>"},p=function(){try{r=document.domain&&new ActiveXObject("htmlfile")}catch(t){}var t,e;p=r?function(t){t.write(d("")),t.close();var e=t.parentWindow.Object;return t=null,e}(r):((e=c("iframe")).style.display="none",u.appendChild(e),e.src=String("javascript:"),(t=e.contentWindow.document).open(),t.write(d("document.F=Object")),t.close(),t.F);for(var n=a.length;n--;)delete p.prototype[a[n]];return p()};s[h]=!0,t.exports=Object.create||function(t,e){var n;return null!==t?(f.prototype=i(t),n=new f,f.prototype=null,n[h]=t):n=p(),void 0===e?n:o(n,e)}},function(t,e){t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},function(t,e){var n={}.toString;t.exports=function(t){return n.call(t).slice(8,-1)}},function(t,e,n){"use strict";var r=n(2);t.exports=function(t,e){var n=[][t];return!!n&&r((function(){n.call(null,e||function(){throw 1},1)}))}},function(t,e,n){var r=n(6),i=n(22),o=n(8)("species");t.exports=function(t,e){var n,a=r(t).constructor;return void 0===a||null==(n=r(a)[o])?e:i(n)}},function(t,e,n){"use strict";var r=n(0),i=n(3),o=n(7),a=n(118),s=n(9),u=n(79),c=n(45),l=n(35),h=n(19),f=n(10),d=n(138),p=n(156),m=n(31),g=n(15),v=n(68),y=n(5),b=n(34),_=n(42),x=n(47).f,w=n(157),S=n(16).forEach,E=n(53),T=n(11),M=n(17),A=n(21),L=n(81),D=A.get,C=A.set,P=T.f,R=M.f,k=Math.round,O=i.RangeError,I=u.ArrayBuffer,F=u.DataView,z=s.NATIVE_ARRAY_BUFFER_VIEWS,B=s.TYPED_ARRAY_TAG,N=s.TypedArray,U=s.TypedArrayPrototype,j=s.aTypedArrayConstructor,H=s.isTypedArray,V=function(t,e){for(var n=0,r=e.length,i=new(j(t))(r);r>n;)i[n]=e[n++];return i},G=function(t,e){P(t,e,{get:function(){return D(this)[e]}})},W=function(t){var e;return t instanceof I||"ArrayBuffer"==(e=v(t))||"SharedArrayBuffer"==e},q=function(t,e){return H(t)&&"symbol"!=typeof e&&e in t&&String(+e)==String(e)},X=function(t,e){return q(t,e=m(e,!0))?l(2,t[e]):R(t,e)},Y=function(t,e,n){return!(q(t,e=m(e,!0))&&y(n)&&g(n,"value"))||g(n,"get")||g(n,"set")||n.configurable||g(n,"writable")&&!n.writable||g(n,"enumerable")&&!n.enumerable?P(t,e,n):(t[e]=n.value,t)};o?(z||(M.f=X,T.f=Y,G(U,"buffer"),G(U,"byteOffset"),G(U,"byteLength"),G(U,"length")),r({target:"Object",stat:!0,forced:!z},{getOwnPropertyDescriptor:X,defineProperty:Y}),t.exports=function(t,e,n){var o=t.match(/\d+$/)[0]/8,s=t+(n?"Clamped":"")+"Array",u="get"+t,l="set"+t,m=i[s],g=m,v=g&&g.prototype,T={},M=function(t,e){P(t,e,{get:function(){return function(t,e){var n=D(t);return n.view[u](e*o+n.byteOffset,!0)}(this,e)},set:function(t){return function(t,e,r){var i=D(t);n&&(r=(r=k(r))<0?0:r>255?255:255&r),i.view[l](e*o+i.byteOffset,r,!0)}(this,e,t)},enumerable:!0})};z?a&&(g=e((function(t,e,n,r){return c(t,g,s),L(y(e)?W(e)?void 0!==r?new m(e,p(n,o),r):void 0!==n?new m(e,p(n,o)):new m(e):H(e)?V(g,e):w.call(g,e):new m(d(e)),t,g)})),_&&_(g,N),S(x(m),(function(t){t in g||h(g,t,m[t])})),g.prototype=v):(g=e((function(t,e,n,r){c(t,g,s);var i,a,u,l=0,h=0;if(y(e)){if(!W(e))return H(e)?V(g,e):w.call(g,e);i=e,h=p(n,o);var m=e.byteLength;if(void 0===r){if(m%o)throw O("Wrong length");if((a=m-h)<0)throw O("Wrong length")}else if((a=f(r)*o)+h>m)throw O("Wrong length");u=a/o}else u=d(e),i=new I(a=u*o);for(C(t,{buffer:i,byteOffset:h,byteLength:a,length:u,view:new F(i)});l<u;)M(t,l++)})),_&&_(g,N),v=g.prototype=b(U)),v.constructor!==g&&h(v,"constructor",g),B&&h(v,B,s),T[s]=g,r({global:!0,forced:g!=m,sham:!z},T),"BYTES_PER_ELEMENT"in g||h(g,"BYTES_PER_ELEMENT",o),"BYTES_PER_ELEMENT"in v||h(v,"BYTES_PER_ELEMENT",o),E(s)}):t.exports=function(){}},function(t,e,n){var r=n(29),i=Math.max,o=Math.min;t.exports=function(t,e){var n=r(t);return n<0?i(n+e,0):o(n,e)}},function(t,e,n){var r=n(22);t.exports=function(t,e,n){if(r(t),void 0===e)return t;switch(n){case 0:return function(){return t.call(e)};case 1:return function(n){return t.call(e,n)};case 2:return function(n,r){return t.call(e,n,r)};case 3:return function(n,r,i){return t.call(e,n,r,i)}}return function(){return t.apply(e,arguments)}}},function(t,e,n){var r=n(6),i=n(130);t.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var t,e=!1,n={};try{(t=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set).call(n,[]),e=n instanceof Array}catch(t){}return function(n,o){return r(n),i(o),e?t.call(n,o):n.__proto__=o,n}}():void 0)},function(t,e,n){var r=n(6),i=n(102),o=n(10),a=n(41),s=n(67),u=n(131),c=function(t,e){this.stopped=t,this.result=e};t.exports=function(t,e,n){var l,h,f,d,p,m,g,v=n&&n.that,y=!(!n||!n.AS_ENTRIES),b=!(!n||!n.IS_ITERATOR),_=!(!n||!n.INTERRUPTED),x=a(e,v,1+y+_),w=function(t){return l&&u(l),new c(!0,t)},S=function(t){return y?(r(t),_?x(t[0],t[1],w):x(t[0],t[1])):_?x(t,w):x(t)};if(b)l=t;else{if("function"!=typeof(h=s(t)))throw TypeError("Target is not iterable");if(i(h)){for(f=0,d=o(t.length);d>f;f++)if((p=S(t[f]))&&p instanceof c)return p;return new c(!1)}l=h.call(t)}for(m=l.next;!(g=m.call(l)).done;){try{p=S(g.value)}catch(t){throw u(l),t}if("object"==typeof p&&p&&p instanceof c)return p}return new c(!1)}},function(t,e,n){var r=n(8),i=n(34),o=n(11),a=r("unscopables"),s=Array.prototype;null==s[a]&&o.f(s,a,{configurable:!0,value:i(null)}),t.exports=function(t){s[a][t]=!0}},function(t,e){t.exports=function(t,e,n){if(!(t instanceof e))throw TypeError("Incorrect "+(n?n+" ":"")+"invocation");return t}},function(t,e,n){!function(t){"use strict";function e(t,e,n,r){var i,o=!1,a=0;function s(){i&&clearTimeout(i)}function u(){for(var u=arguments.length,c=new Array(u),l=0;l<u;l++)c[l]=arguments[l];var h=this,f=Date.now()-a;function d(){a=Date.now(),n.apply(h,c)}function p(){i=void 0}o||(r&&!i&&d(),s(),void 0===r&&f>t?d():!0!==e&&(i=setTimeout(r?p:d,void 0===r?t-f:t)))}return"boolean"!=typeof e&&(r=n,n=e,e=void 0),u.cancel=function(){s(),o=!0},u}t.debounce=function(t,n,r){return void 0===r?e(t,n,!1):e(t,r,!1!==n)},t.throttle=e,Object.defineProperty(t,"__esModule",{value:!0})}(e)},function(t,e,n){var r=n(125),i=n(97).concat("length","prototype");e.f=Object.getOwnPropertyNames||function(t){return r(t,i)}},function(t,e,n){var r=n(36),i=n(3);t.exports="process"==r(i.process)},function(t,e,n){var r=n(36);t.exports=Array.isArray||function(t){return"Array"==r(t)}},function(t,e,n){"use strict";var r=n(31),i=n(11),o=n(35);t.exports=function(t,e,n){var a=r(e);a in t?i.f(t,a,o(0,n)):t[a]=n}},function(t,e,n){var r=n(60),i=n(5),o=n(15),a=n(11).f,s=n(59),u=n(70),c=s("meta"),l=0,h=Object.isExtensible||function(){return!0},f=function(t){a(t,c,{value:{objectID:"O"+ ++l,weakData:{}}})},d=t.exports={REQUIRED:!1,fastKey:function(t,e){if(!i(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!o(t,c)){if(!h(t))return"F";if(!e)return"E";f(t)}return t[c].objectID},getWeakData:function(t,e){if(!o(t,c)){if(!h(t))return!0;if(!e)return!1;f(t)}return t[c].weakData},onFreeze:function(t){return u&&d.REQUIRED&&h(t)&&!o(t,c)&&f(t),t}};r[c]=!0},function(t,e,n){var r,i,o=n(3),a=n(63),s=o.process,u=s&&s.versions,c=u&&u.v8;c?i=(r=c.split("."))[0]+r[1]:a&&(!(r=a.match(/Edge\/(\d+)/))||r[1]>=74)&&(r=a.match(/Chrome\/(\d+)/))&&(i=r[1]),t.exports=i&&+i},function(t,e,n){"use strict";var r=n(25),i=n(11),o=n(8),a=n(7),s=o("species");t.exports=function(t){var e=r(t),n=i.f;a&&e&&!e[s]&&n(e,s,{configurable:!0,get:function(){return this}})}},function(t,e,n){var r=n(20);t.exports=function(t,e,n){for(var i in e)r(t,i,e[i],n);return t}},function(t,e,n){var r=n(18),i="["+n(83)+"]",o=RegExp("^"+i+i+"*"),a=RegExp(i+i+"*$"),s=function(t){return function(e){var n=String(r(e));return 1&t&&(n=n.replace(o,"")),2&t&&(n=n.replace(a,"")),n}};t.exports={start:s(1),end:s(2),trim:s(3)}},function(t,e,n){"use strict";var r=n(6);t.exports=function(){var t=r(this),e="";return t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),t.dotAll&&(e+="s"),t.unicode&&(e+="u"),t.sticky&&(e+="y"),e}},function(t,e){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(t){"object"==typeof window&&(n=window)}t.exports=n},function(t,e,n){var r=n(2),i=n(36),o="".split;t.exports=r((function(){return!Object("z").propertyIsEnumerable(0)}))?function(t){return"String"==i(t)?o.call(t,""):Object(t)}:Object},function(t,e){var n=0,r=Math.random();t.exports=function(t){return"Symbol("+String(void 0===t?"":t)+")_"+(++n+r).toString(36)}},function(t,e){t.exports={}},function(t,e,n){var r=n(24),i=n(10),o=n(40),a=function(t){return function(e,n,a){var s,u=r(e),c=i(u.length),l=o(a,c);if(t&&n!=n){for(;c>l;)if((s=u[l++])!=s)return!0}else for(;c>l;l++)if((t||l in u)&&u[l]===n)return t||l||0;return!t&&-1}};t.exports={includes:a(!0),indexOf:a(!1)}},function(t,e,n){var r=n(2),i=/#|\.prototype\./,o=function(t,e){var n=s[a(t)];return n==c||n!=u&&("function"==typeof e?r(e):!!e)},a=o.normalize=function(t){return String(t).replace(i,".").toLowerCase()},s=o.data={},u=o.NATIVE="N",c=o.POLYFILL="P";t.exports=o},function(t,e,n){var r=n(25);t.exports=r("navigator","userAgent")||""},function(t,e,n){var r=n(125),i=n(97);t.exports=Object.keys||function(t){return r(t,i)}},function(t,e,n){var r=n(5),i=n(49),o=n(8)("species");t.exports=function(t,e){var n;return i(t)&&("function"!=typeof(n=t.constructor)||n!==Array&&!i(n.prototype)?r(n)&&null===(n=n[o])&&(n=void 0):n=void 0),new(void 0===n?Array:n)(0===e?0:e)}},function(t,e){t.exports={}},function(t,e,n){var r=n(68),i=n(66),o=n(8)("iterator");t.exports=function(t){if(null!=t)return t[o]||t["@@iterator"]||i[r(t)]}},function(t,e,n){var r=n(103),i=n(36),o=n(8)("toStringTag"),a="Arguments"==i(function(){return arguments}());t.exports=r?i:function(t){var e,n,r;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(n=function(t,e){try{return t[e]}catch(t){}}(e=Object(t),o))?n:a?i(e):"Object"==(r=i(e))&&"function"==typeof e.callee?"Arguments":r}},function(t,e,n){var r=n(2),i=n(8),o=n(52),a=i("species");t.exports=function(t){return o>=51||!r((function(){var e=[];return(e.constructor={})[a]=function(){return{foo:1}},1!==e[t](Boolean).foo}))}},function(t,e,n){var r=n(2);t.exports=!r((function(){return Object.isExtensible(Object.preventExtensions({}))}))},function(t,e,n){var r=n(5),i=n(36),o=n(8)("match");t.exports=function(t){var e;return r(t)&&(void 0!==(e=t[o])?!!e:"RegExp"==i(t))}},function(t,e,n){"use strict";var r=n(2);function i(t,e){return RegExp(t,e)}e.UNSUPPORTED_Y=r((function(){var t=i("a","y");return t.lastIndex=2,null!=t.exec("abcd")})),e.BROKEN_CARET=r((function(){var t=i("^r","gy");return t.lastIndex=2,null!=t.exec("str")}))},function(t,e,n){"use strict";var r={}.propertyIsEnumerable,i=Object.getOwnPropertyDescriptor,o=i&&!r.call({1:2},1);e.f=o?function(t){var e=i(this,t);return!!e&&e.enumerable}:r},function(t,e,n){var r=n(75),i=n(59),o=r("keys");t.exports=function(t){return o[t]||(o[t]=i(t))}},function(t,e,n){var r=n(28),i=n(94);(t.exports=function(t,e){return i[t]||(i[t]=void 0!==e?e:{})})("versions",[]).push({version:"3.10.2",mode:r?"pure":"global",copyright:" 2021 Denis Pushkarev (zloirock.ru)"})},function(t,e,n){var r=n(8)("iterator"),i=!1;try{var o=0,a={next:function(){return{done:!!o++}},return:function(){i=!0}};a[r]=function(){return this},Array.from(a,(function(){throw 2}))}catch(t){}t.exports=function(t,e){if(!e&&!i)return!1;var n=!1;try{var o={};o[r]=function(){return{next:function(){return{done:n=!0}}}},t(o)}catch(t){}return n}},function(t,e,n){"use strict";var r=n(24),i=n(44),o=n(66),a=n(21),s=n(105),u=a.set,c=a.getterFor("Array Iterator");t.exports=s(Array,"Array",(function(t,e){u(this,{type:"Array Iterator",target:r(t),index:0,kind:e})}),(function(){var t=c(this),e=t.target,n=t.kind,r=t.index++;return!e||r>=e.length?(t.target=void 0,{value:void 0,done:!0}):"keys"==n?{value:r,done:!1}:"values"==n?{value:e[r],done:!1}:{value:[r,e[r]],done:!1}}),"values"),o.Arguments=o.Array,i("keys"),i("values"),i("entries")},function(t,e,n){var r=n(22),i=n(13),o=n(58),a=n(10),s=function(t){return function(e,n,s,u){r(n);var c=i(e),l=o(c),h=a(c.length),f=t?h-1:0,d=t?-1:1;if(s<2)for(;;){if(f in l){u=l[f],f+=d;break}if(f+=d,t?f<0:h<=f)throw TypeError("Reduce of empty array with no initial value")}for(;t?f>=0:h>f;f+=d)f in l&&(u=n(u,l[f],f,c));return u}};t.exports={left:s(!1),right:s(!0)}},function(t,e,n){"use strict";var r=n(3),i=n(7),o=n(107),a=n(19),s=n(54),u=n(2),c=n(45),l=n(29),h=n(10),f=n(138),d=n(219),p=n(30),m=n(42),g=n(47).f,v=n(11).f,y=n(104),b=n(32),_=n(21),x=_.get,w=_.set,S=r.ArrayBuffer,E=S,T=r.DataView,M=T&&T.prototype,A=Object.prototype,L=r.RangeError,D=d.pack,C=d.unpack,P=function(t){return[255&t]},R=function(t){return[255&t,t>>8&255]},k=function(t){return[255&t,t>>8&255,t>>16&255,t>>24&255]},O=function(t){return t[3]<<24|t[2]<<16|t[1]<<8|t[0]},I=function(t){return D(t,23,4)},F=function(t){return D(t,52,8)},z=function(t,e){v(t.prototype,e,{get:function(){return x(this)[e]}})},B=function(t,e,n,r){var i=f(n),o=x(t);if(i+e>o.byteLength)throw L("Wrong index");var a=x(o.buffer).bytes,s=i+o.byteOffset,u=a.slice(s,s+e);return r?u:u.reverse()},N=function(t,e,n,r,i,o){var a=f(n),s=x(t);if(a+e>s.byteLength)throw L("Wrong index");for(var u=x(s.buffer).bytes,c=a+s.byteOffset,l=r(+i),h=0;h<e;h++)u[c+h]=l[o?h:e-h-1]};if(o){if(!u((function(){S(1)}))||!u((function(){new S(-1)}))||u((function(){return new S,new S(1.5),new S(NaN),"ArrayBuffer"!=S.name}))){for(var U,j=(E=function(t){return c(this,E),new S(f(t))}).prototype=S.prototype,H=g(S),V=0;H.length>V;)(U=H[V++])in E||a(E,U,S[U]);j.constructor=E}m&&p(M)!==A&&m(M,A);var G=new T(new E(2)),W=M.setInt8;G.setInt8(0,2147483648),G.setInt8(1,2147483649),!G.getInt8(0)&&G.getInt8(1)||s(M,{setInt8:function(t,e){W.call(this,t,e<<24>>24)},setUint8:function(t,e){W.call(this,t,e<<24>>24)}},{unsafe:!0})}else E=function(t){c(this,E,"ArrayBuffer");var e=f(t);w(this,{bytes:y.call(new Array(e),0),byteLength:e}),i||(this.byteLength=e)},T=function(t,e,n){c(this,T,"DataView"),c(t,E,"DataView");var r=x(t).byteLength,o=l(e);if(o<0||o>r)throw L("Wrong offset");if(o+(n=void 0===n?r-o:h(n))>r)throw L("Wrong length");w(this,{buffer:t,byteLength:n,byteOffset:o}),i||(this.buffer=t,this.byteLength=n,this.byteOffset=o)},i&&(z(E,"byteLength"),z(T,"buffer"),z(T,"byteLength"),z(T,"byteOffset")),s(T.prototype,{getInt8:function(t){return B(this,1,t)[0]<<24>>24},getUint8:function(t){return B(this,1,t)[0]},getInt16:function(t){var e=B(this,2,t,arguments.length>1?arguments[1]:void 0);return(e[1]<<8|e[0])<<16>>16},getUint16:function(t){var e=B(this,2,t,arguments.length>1?arguments[1]:void 0);return e[1]<<8|e[0]},getInt32:function(t){return O(B(this,4,t,arguments.length>1?arguments[1]:void 0))},getUint32:function(t){return O(B(this,4,t,arguments.length>1?arguments[1]:void 0))>>>0},getFloat32:function(t){return C(B(this,4,t,arguments.length>1?arguments[1]:void 0),23)},getFloat64:function(t){return C(B(this,8,t,arguments.length>1?arguments[1]:void 0),52)},setInt8:function(t,e){N(this,1,t,P,e)},setUint8:function(t,e){N(this,1,t,P,e)},setInt16:function(t,e){N(this,2,t,R,e,arguments.length>2?arguments[2]:void 0)},setUint16:function(t,e){N(this,2,t,R,e,arguments.length>2?arguments[2]:void 0)},setInt32:function(t,e){N(this,4,t,k,e,arguments.length>2?arguments[2]:void 0)},setUint32:function(t,e){N(this,4,t,k,e,arguments.length>2?arguments[2]:void 0)},setFloat32:function(t,e){N(this,4,t,I,e,arguments.length>2?arguments[2]:void 0)},setFloat64:function(t,e){N(this,8,t,F,e,arguments.length>2?arguments[2]:void 0)}});b(E,"ArrayBuffer"),b(T,"DataView"),t.exports={ArrayBuffer:E,DataView:T}},function(t,e,n){"use strict";var r=n(0),i=n(3),o=n(62),a=n(20),s=n(51),u=n(43),c=n(45),l=n(5),h=n(2),f=n(76),d=n(32),p=n(81);t.exports=function(t,e,n){var m=-1!==t.indexOf("Map"),g=-1!==t.indexOf("Weak"),v=m?"set":"add",y=i[t],b=y&&y.prototype,_=y,x={},w=function(t){var e=b[t];a(b,t,"add"==t?function(t){return e.call(this,0===t?0:t),this}:"delete"==t?function(t){return!(g&&!l(t))&&e.call(this,0===t?0:t)}:"get"==t?function(t){return g&&!l(t)?void 0:e.call(this,0===t?0:t)}:"has"==t?function(t){return!(g&&!l(t))&&e.call(this,0===t?0:t)}:function(t,n){return e.call(this,0===t?0:t,n),this})};if(o(t,"function"!=typeof y||!(g||b.forEach&&!h((function(){(new y).entries().next()})))))_=n.getConstructor(e,t,m,v),s.REQUIRED=!0;else if(o(t,!0)){var S=new _,E=S[v](g?{}:-0,1)!=S,T=h((function(){S.has(1)})),M=f((function(t){new y(t)})),A=!g&&h((function(){for(var t=new y,e=5;e--;)t[v](e,e);return!t.has(-0)}));M||((_=e((function(e,n){c(e,_,t);var r=p(new y,e,_);return null!=n&&u(n,r[v],{that:r,AS_ENTRIES:m}),r}))).prototype=b,b.constructor=_),(T||A)&&(w("delete"),w("has"),m&&w("get")),(A||E)&&w(v),g&&b.clear&&delete b.clear}return x[t]=_,r({global:!0,forced:_!=y},x),d(_,t),g||n.setStrong(_,t,m),_}},function(t,e,n){var r=n(5),i=n(42);t.exports=function(t,e,n){var o,a;return i&&"function"==typeof(o=e.constructor)&&o!==n&&r(a=o.prototype)&&a!==n.prototype&&i(t,a),t}},function(t,e){var n=Math.expm1,r=Math.exp;t.exports=!n||n(10)>22025.465794806718||n(10)<22025.465794806718||-2e-17!=n(-2e-17)?function(t){return 0==(t=+t)?t:t>-1e-6&&t<1e-6?t+t*t/2:r(t)-1}:n},function(t,e){t.exports="\t\n\v\f\r \u2028\u2029\ufeff"},function(t,e,n){"use strict";var r=n(28),i=n(3),o=n(2);t.exports=r||!o((function(){var t=Math.random();__defineSetter__.call(null,t,(function(){})),delete i[t]}))},function(t,e,n){"use strict";var r=n(22),i=function(t){var e,n;this.promise=new t((function(t,r){if(void 0!==e||void 0!==n)throw TypeError("Bad Promise constructor");e=t,n=r})),this.resolve=r(e),this.reject=r(n)};t.exports.f=function(t){return new i(t)}},function(t,e,n){var r=n(29),i=n(18),o=function(t){return function(e,n){var o,a,s=String(i(e)),u=r(n),c=s.length;return u<0||u>=c?t?"":void 0:(o=s.charCodeAt(u))<55296||o>56319||u+1===c||(a=s.charCodeAt(u+1))<56320||a>57343?t?s.charAt(u):o:t?s.slice(u,u+2):a-56320+(o-55296<<10)+65536}};t.exports={codeAt:o(!1),charAt:o(!0)}},function(t,e,n){"use strict";n(113);var r=n(20),i=n(2),o=n(8),a=n(19),s=o("species"),u=!i((function(){var t=/./;return t.exec=function(){var t=[];return t.groups={a:"7"},t},"7"!=="".replace(t,"$<a>")})),c="$0"==="a".replace(/./,"$0"),l=o("replace"),h=!!/./[l]&&""===/./[l]("a","$0"),f=!i((function(){var t=/(?:)/,e=t.exec;t.exec=function(){return e.apply(this,arguments)};var n="ab".split(t);return 2!==n.length||"a"!==n[0]||"b"!==n[1]}));t.exports=function(t,e,n,l){var d=o(t),p=!i((function(){var e={};return e[d]=function(){return 7},7!=""[t](e)})),m=p&&!i((function(){var e=!1,n=/a/;return"split"===t&&((n={}).constructor={},n.constructor[s]=function(){return n},n.flags="",n[d]=/./[d]),n.exec=function(){return e=!0,null},n[d](""),!e}));if(!p||!m||"replace"===t&&(!u||!c||h)||"split"===t&&!f){var g=/./[d],v=n(d,""[t],(function(t,e,n,r,i){return e.exec===RegExp.prototype.exec?p&&!i?{done:!0,value:g.call(e,n,r)}:{done:!0,value:t.call(n,e,r)}:{done:!1}}),{REPLACE_KEEPS_$0:c,REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE:h}),y=v[0],b=v[1];r(String.prototype,t,y),r(RegExp.prototype,d,2==e?function(t,e){return b.call(t,this,e)}:function(t){return b.call(t,this)})}l&&a(RegExp.prototype[d],"sham",!0)}},function(t,e,n){"use strict";var r=n(86).charAt;t.exports=function(t,e,n){return e+(n?r(t,e).length:1)}},function(t,e,n){var r=n(36),i=n(114);t.exports=function(t,e){var n=t.exec;if("function"==typeof n){var o=n.call(t,e);if("object"!=typeof o)throw TypeError("RegExp exec method returned something other than an Object or null");return o}if("RegExp"!==r(t))throw TypeError("RegExp#exec called on incompatible receiver");return i.call(t,e)}},function(t,e,n){"use strict";var r,i="object"==typeof Reflect?Reflect:null,o=i&&"function"==typeof i.apply?i.apply:function(t,e,n){return Function.prototype.apply.call(t,e,n)};r=i&&"function"==typeof i.ownKeys?i.ownKeys:Object.getOwnPropertySymbols?function(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))}:function(t){return Object.getOwnPropertyNames(t)};var a=Number.isNaN||function(t){return t!=t};function s(){s.init.call(this)}t.exports=s,t.exports.once=function(t,e){return new Promise((function(n,r){function i(n){t.removeListener(e,o),r(n)}function o(){"function"==typeof t.removeListener&&t.removeListener("error",i),n([].slice.call(arguments))}v(t,e,o,{once:!0}),"error"!==e&&function(t,e,n){"function"==typeof t.on&&v(t,"error",e,n)}(t,i,{once:!0})}))},s.EventEmitter=s,s.prototype._events=void 0,s.prototype._eventsCount=0,s.prototype._maxListeners=void 0;var u=10;function c(t){if("function"!=typeof t)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t)}function l(t){return void 0===t._maxListeners?s.defaultMaxListeners:t._maxListeners}function h(t,e,n,r){var i,o,a,s;if(c(n),void 0===(o=t._events)?(o=t._events=Object.create(null),t._eventsCount=0):(void 0!==o.newListener&&(t.emit("newListener",e,n.listener?n.listener:n),o=t._events),a=o[e]),void 0===a)a=o[e]=n,++t._eventsCount;else if("function"==typeof a?a=o[e]=r?[n,a]:[a,n]:r?a.unshift(n):a.push(n),(i=l(t))>0&&a.length>i&&!a.warned){a.warned=!0;var u=new Error("Possible EventEmitter memory leak detected. "+a.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");u.name="MaxListenersExceededWarning",u.emitter=t,u.type=e,u.count=a.length,s=u,console&&console.warn&&console.warn(s)}return t}function f(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function d(t,e,n){var r={fired:!1,wrapFn:void 0,target:t,type:e,listener:n},i=f.bind(r);return i.listener=n,r.wrapFn=i,i}function p(t,e,n){var r=t._events;if(void 0===r)return[];var i=r[e];return void 0===i?[]:"function"==typeof i?n?[i.listener||i]:[i]:n?function(t){for(var e=new Array(t.length),n=0;n<e.length;++n)e[n]=t[n].listener||t[n];return e}(i):g(i,i.length)}function m(t){var e=this._events;if(void 0!==e){var n=e[t];if("function"==typeof n)return 1;if(void 0!==n)return n.length}return 0}function g(t,e){for(var n=new Array(e),r=0;r<e;++r)n[r]=t[r];return n}function v(t,e,n,r){if("function"==typeof t.on)r.once?t.once(e,n):t.on(e,n);else{if("function"!=typeof t.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof t);t.addEventListener(e,(function i(o){r.once&&t.removeEventListener(e,i),n(o)}))}}Object.defineProperty(s,"defaultMaxListeners",{enumerable:!0,get:function(){return u},set:function(t){if("number"!=typeof t||t<0||a(t))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");u=t}}),s.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},s.prototype.setMaxListeners=function(t){if("number"!=typeof t||t<0||a(t))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+t+".");return this._maxListeners=t,this},s.prototype.getMaxListeners=function(){return l(this)},s.prototype.emit=function(t){for(var e=[],n=1;n<arguments.length;n++)e.push(arguments[n]);var r="error"===t,i=this._events;if(void 0!==i)r=r&&void 0===i.error;else if(!r)return!1;if(r){var a;if(e.length>0&&(a=e[0]),a instanceof Error)throw a;var s=new Error("Unhandled error."+(a?" ("+a.message+")":""));throw s.context=a,s}var u=i[t];if(void 0===u)return!1;if("function"==typeof u)o(u,this,e);else{var c=u.length,l=g(u,c);for(n=0;n<c;++n)o(l[n],this,e)}return!0},s.prototype.addListener=function(t,e){return h(this,t,e,!1)},s.prototype.on=s.prototype.addListener,s.prototype.prependListener=function(t,e){return h(this,t,e,!0)},s.prototype.once=function(t,e){return c(e),this.on(t,d(this,t,e)),this},s.prototype.prependOnceListener=function(t,e){return c(e),this.prependListener(t,d(this,t,e)),this},s.prototype.removeListener=function(t,e){var n,r,i,o,a;if(c(e),void 0===(r=this._events))return this;if(void 0===(n=r[t]))return this;if(n===e||n.listener===e)0==--this._eventsCount?this._events=Object.create(null):(delete r[t],r.removeListener&&this.emit("removeListener",t,n.listener||e));else if("function"!=typeof n){for(i=-1,o=n.length-1;o>=0;o--)if(n[o]===e||n[o].listener===e){a=n[o].listener,i=o;break}if(i<0)return this;0===i?n.shift():function(t,e){for(;e+1<t.length;e++)t[e]=t[e+1];t.pop()}(n,i),1===n.length&&(r[t]=n[0]),void 0!==r.removeListener&&this.emit("removeListener",t,a||e)}return this},s.prototype.off=s.prototype.removeListener,s.prototype.removeAllListeners=function(t){var e,n,r;if(void 0===(n=this._events))return this;if(void 0===n.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==n[t]&&(0==--this._eventsCount?this._events=Object.create(null):delete n[t]),this;if(0===arguments.length){var i,o=Object.keys(n);for(r=0;r<o.length;++r)"removeListener"!==(i=o[r])&&this.removeAllListeners(i);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(e=n[t]))this.removeListener(t,e);else if(void 0!==e)for(r=e.length-1;r>=0;r--)this.removeListener(t,e[r]);return this},s.prototype.listeners=function(t){return p(this,t,!0)},s.prototype.rawListeners=function(t){return p(this,t,!1)},s.listenerCount=function(t,e){return"function"==typeof t.listenerCount?t.listenerCount(e):m.call(t,e)},s.prototype.listenerCount=m,s.prototype.eventNames=function(){return this._eventsCount>0?r(this._events):[]}},function(t,e,n){var r=n(3),i=n(5),o=r.document,a=i(o)&&i(o.createElement);t.exports=function(t){return a?o.createElement(t):{}}},function(t,e,n){var r=n(3),i=n(19);t.exports=function(t,e){try{i(r,t,e)}catch(n){r[t]=e}return e}},function(t,e,n){var r=n(94),i=Function.toString;"function"!=typeof r.inspectSource&&(r.inspectSource=function(t){return i.call(t)}),t.exports=r.inspectSource},function(t,e,n){var r=n(3),i=n(92),o=r["__core-js_shared__"]||i("__core-js_shared__",{});t.exports=o},function(t,e,n){var r=n(25),i=n(47),o=n(98),a=n(6);t.exports=r("Reflect","ownKeys")||function(t){var e=i.f(a(t)),n=o.f;return n?e.concat(n(t)):e}},function(t,e,n){var r=n(3);t.exports=r},function(t,e){t.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},function(t,e){e.f=Object.getOwnPropertySymbols},function(t,e,n){var r=n(48),i=n(52),o=n(2);t.exports=!!Object.getOwnPropertySymbols&&!o((function(){return!Symbol.sham&&(r?38===i:i>37&&i<41)}))},function(t,e,n){var r=n(7),i=n(11),o=n(6),a=n(64);t.exports=r?Object.defineProperties:function(t,e){o(t);for(var n,r=a(e),s=r.length,u=0;s>u;)i.f(t,n=r[u++],e[n]);return t}},function(t,e,n){var r=n(2);t.exports=!r((function(){function t(){}return t.prototype.constructor=null,Object.getPrototypeOf(new t)!==t.prototype}))},function(t,e,n){var r=n(8),i=n(66),o=r("iterator"),a=Array.prototype;t.exports=function(t){return void 0!==t&&(i.Array===t||a[o]===t)}},function(t,e,n){var r={};r[n(8)("toStringTag")]="z",t.exports="[object z]"===String(r)},function(t,e,n){"use strict";var r=n(13),i=n(40),o=n(10);t.exports=function(t){for(var e=r(this),n=o(e.length),a=arguments.length,s=i(a>1?arguments[1]:void 0,n),u=a>2?arguments[2]:void 0,c=void 0===u?n:i(u,n);c>s;)e[s++]=t;return e}},function(t,e,n){"use strict";var r=n(0),i=n(106),o=n(30),a=n(42),s=n(32),u=n(19),c=n(20),l=n(8),h=n(28),f=n(66),d=n(136),p=d.IteratorPrototype,m=d.BUGGY_SAFARI_ITERATORS,g=l("iterator"),v=function(){return this};t.exports=function(t,e,n,l,d,y,b){i(n,e,l);var _,x,w,S=function(t){if(t===d&&L)return L;if(!m&&t in M)return M[t];switch(t){case"keys":case"values":case"entries":return function(){return new n(this,t)}}return function(){return new n(this)}},E=e+" Iterator",T=!1,M=t.prototype,A=M[g]||M["@@iterator"]||d&&M[d],L=!m&&A||S(d),D="Array"==e&&M.entries||A;if(D&&(_=o(D.call(new t)),p!==Object.prototype&&_.next&&(h||o(_)===p||(a?a(_,p):"function"!=typeof _[g]&&u(_,g,v)),s(_,E,!0,!0),h&&(f[E]=v))),"values"==d&&A&&"values"!==A.name&&(T=!0,L=function(){return A.call(this)}),h&&!b||M[g]===L||u(M,g,L),f[e]=L,d)if(x={values:S("values"),keys:y?L:S("keys"),entries:S("entries")},b)for(w in x)(m||T||!(w in M))&&c(M,w,x[w]);else r({target:e,proto:!0,forced:m||T},x);return x}},function(t,e,n){"use strict";var r=n(136).IteratorPrototype,i=n(34),o=n(35),a=n(32),s=n(66),u=function(){return this};t.exports=function(t,e,n){var c=e+" Iterator";return t.prototype=i(r,{next:o(1,n)}),a(t,c,!1,!0),s[c]=u,t}},function(t,e){t.exports="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof DataView},function(t,e,n){var r=n(10),i=n(109),o=n(18),a=Math.ceil,s=function(t){return function(e,n,s){var u,c,l=String(o(e)),h=l.length,f=void 0===s?" ":String(s),d=r(n);return d<=h||""==f?l:(u=d-h,(c=i.call(f,a(u/f.length))).length>u&&(c=c.slice(0,u)),t?l+c:c+l)}};t.exports={start:s(!1),end:s(!0)}},function(t,e,n){"use strict";var r=n(29),i=n(18);t.exports=function(t){var e=String(i(this)),n="",o=r(t);if(o<0||o==1/0)throw RangeError("Wrong number of repetitions");for(;o>0;(o>>>=1)&&(e+=e))1&o&&(n+=e);return n}},function(t,e){t.exports=Math.sign||function(t){return 0==(t=+t)||t!=t?t:t<0?-1:1}},function(t,e,n){var r,i,o,a=n(3),s=n(2),u=n(41),c=n(127),l=n(91),h=n(150),f=n(48),d=a.location,p=a.setImmediate,m=a.clearImmediate,g=a.process,v=a.MessageChannel,y=a.Dispatch,b=0,_={},x=function(t){if(_.hasOwnProperty(t)){var e=_[t];delete _[t],e()}},w=function(t){return function(){x(t)}},S=function(t){x(t.data)},E=function(t){a.postMessage(t+"",d.protocol+"//"+d.host)};p&&m||(p=function(t){for(var e=[],n=1;arguments.length>n;)e.push(arguments[n++]);return _[++b]=function(){("function"==typeof t?t:Function(t)).apply(void 0,e)},r(b),b},m=function(t){delete _[t]},f?r=function(t){g.nextTick(w(t))}:y&&y.now?r=function(t){y.now(w(t))}:v&&!h?(o=(i=new v).port2,i.port1.onmessage=S,r=u(o.postMessage,o,1)):a.addEventListener&&"function"==typeof postMessage&&!a.importScripts&&d&&"file:"!==d.protocol&&!s(E)?(r=E,a.addEventListener("message",S,!1)):r="onreadystatechange"in l("script")?function(t){c.appendChild(l("script")).onreadystatechange=function(){c.removeChild(this),x(t)}}:function(t){setTimeout(w(t),0)}),t.exports={set:p,clear:m}},function(t,e){t.exports=function(t){try{return{error:!1,value:t()}}catch(t){return{error:!0,value:t}}}},function(t,e,n){"use strict";var r=n(0),i=n(114);r({target:"RegExp",proto:!0,forced:/./.exec!==i},{exec:i})},function(t,e,n){"use strict";var r,i,o=n(56),a=n(72),s=n(75),u=RegExp.prototype.exec,c=s("native-string-replace",String.prototype.replace),l=u,h=(r=/a/,i=/b*/g,u.call(r,"a"),u.call(i,"a"),0!==r.lastIndex||0!==i.lastIndex),f=a.UNSUPPORTED_Y||a.BROKEN_CARET,d=void 0!==/()??/.exec("")[1];(h||d||f)&&(l=function(t){var e,n,r,i,a=this,s=f&&a.sticky,l=o.call(a),p=a.source,m=0,g=t;return s&&(-1===(l=l.replace("y","")).indexOf("g")&&(l+="g"),g=String(t).slice(a.lastIndex),a.lastIndex>0&&(!a.multiline||a.multiline&&"\n"!==t[a.lastIndex-1])&&(p="(?: "+p+")",g=" "+g,m++),n=new RegExp("^(?:"+p+")",l)),d&&(n=new RegExp("^"+p+"$(?!\\s)",l)),h&&(e=a.lastIndex),r=u.call(s?n:a,g),s?r?(r.input=r.input.slice(m),r[0]=r[0].slice(m),r.index=a.lastIndex,a.lastIndex+=r[0].length):a.lastIndex=0:h&&r&&(a.lastIndex=a.global?r.index+r[0].length:e),d&&r&&r.length>1&&c.call(r[0],n,(function(){for(i=1;i<arguments.length-2;i++)void 0===arguments[i]&&(r[i]=void 0)})),r}),t.exports=l},function(t,e,n){var r=n(71);t.exports=function(t){if(r(t))throw TypeError("The method doesn't accept regular expressions");return t}},function(t,e,n){var r=n(8)("match");t.exports=function(t){var e=/./;try{"/./"[t](e)}catch(n){try{return e[r]=!1,"/./"[t](e)}catch(t){}}return!1}},function(t,e,n){var r=n(2),i=n(83);t.exports=function(t){return r((function(){return!!i[t]()||""!=""[t]()||i[t].name!==t}))}},function(t,e,n){var r=n(3),i=n(2),o=n(76),a=n(9).NATIVE_ARRAY_BUFFER_VIEWS,s=r.ArrayBuffer,u=r.Int8Array;t.exports=!a||!i((function(){u(1)}))||!i((function(){new u(-1)}))||!o((function(t){new u,new u(null),new u(1.5),new u(t)}),!0)||i((function(){return 1!==new u(new s(2),1,void 0).length}))},function(t,e,n){var r,i,o;!function(a,s){"use strict";t.exports?t.exports=s(n(163),n(164),n(165)):(i=[n(163),n(164),n(165)],void 0===(o="function"==typeof(r=s)?r.apply(e,i):r)||(t.exports=o))}(0,(function(t,e,n,r){"use strict";var i=r&&r.URI;function o(t,e){var n=arguments.length>=1,r=arguments.length>=2;if(!(this instanceof o))return n?r?new o(t,e):new o(t):new o;if(void 0===t){if(n)throw new TypeError("undefined is not a valid argument for URI");t="undefined"!=typeof location?location.href+"":""}if(null===t&&n)throw new TypeError("null is not a valid argument for URI");return this.href(t),void 0!==e?this.absoluteTo(e):this}o.version="1.19.11";var a=o.prototype,s=Object.prototype.hasOwnProperty;function u(t){return t.replace(/([.*+?^=!:${}()|[\]\/\\])/g,"\\$1")}function c(t){return void 0===t?"Undefined":String(Object.prototype.toString.call(t)).slice(8,-1)}function l(t){return"Array"===c(t)}function h(t,e){var n,r,i={};if("RegExp"===c(e))i=null;else if(l(e))for(n=0,r=e.length;n<r;n++)i[e[n]]=!0;else i[e]=!0;for(n=0,r=t.length;n<r;n++){(i&&void 0!==i[t[n]]||!i&&e.test(t[n]))&&(t.splice(n,1),r--,n--)}return t}function f(t,e){var n,r;if(l(e)){for(n=0,r=e.length;n<r;n++)if(!f(t,e[n]))return!1;return!0}var i=c(e);for(n=0,r=t.length;n<r;n++)if("RegExp"===i){if("string"==typeof t[n]&&t[n].match(e))return!0}else if(t[n]===e)return!0;return!1}function d(t,e){if(!l(t)||!l(e))return!1;if(t.length!==e.length)return!1;t.sort(),e.sort();for(var n=0,r=t.length;n<r;n++)if(t[n]!==e[n])return!1;return!0}function p(t){return t.replace(/^\/+|\/+$/g,"")}function m(t){return escape(t)}function g(t){return encodeURIComponent(t).replace(/[!'()*]/g,m).replace(/\*/g,"%2A")}o._parts=function(){return{protocol:null,username:null,password:null,hostname:null,urn:null,port:null,path:null,query:null,fragment:null,preventInvalidHostname:o.preventInvalidHostname,duplicateQueryParameters:o.duplicateQueryParameters,escapeQuerySpace:o.escapeQuerySpace}},o.preventInvalidHostname=!1,o.duplicateQueryParameters=!1,o.escapeQuerySpace=!0,o.protocol_expression=/^[a-z][a-z0-9.+-]*$/i,o.idn_expression=/[^a-z0-9\._-]/i,o.punycode_expression=/(xn--)/i,o.ip4_expression=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,o.ip6_expression=/^\s*((([0-9A-Fa-f]{1,4}:){7}([0-9A-Fa-f]{1,4}|:))|(([0-9A-Fa-f]{1,4}:){6}(:[0-9A-Fa-f]{1,4}|((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){5}(((:[0-9A-Fa-f]{1,4}){1,2})|:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){4}(((:[0-9A-Fa-f]{1,4}){1,3})|((:[0-9A-Fa-f]{1,4})?:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){3}(((:[0-9A-Fa-f]{1,4}){1,4})|((:[0-9A-Fa-f]{1,4}){0,2}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){2}(((:[0-9A-Fa-f]{1,4}){1,5})|((:[0-9A-Fa-f]{1,4}){0,3}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){1}(((:[0-9A-Fa-f]{1,4}){1,6})|((:[0-9A-Fa-f]{1,4}){0,4}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(:(((:[0-9A-Fa-f]{1,4}){1,7})|((:[0-9A-Fa-f]{1,4}){0,5}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))(%.+)?\s*$/,o.find_uri_expression=/\b((?:[a-z][\w-]+:(?:\/{1,3}|[a-z0-9%])|www\d{0,3}[.]|[a-z0-9.\-]+[.][a-z]{2,4}\/)(?:[^\s()<>]+|\(([^\s()<>]+|(\([^\s()<>]+\)))*\))+(?:\(([^\s()<>]+|(\([^\s()<>]+\)))*\)|[^\s`!()\[\]{};:'".,<>?]))/gi,o.findUri={start:/\b(?:([a-z][a-z0-9.+-]*:\/\/)|www\.)/gi,end:/[\s\r\n]|$/,trim:/[`!()\[\]{};:'".,<>?]+$/,parens:/(\([^\)]*\)|\[[^\]]*\]|\{[^}]*\}|<[^>]*>)/g},o.leading_whitespace_expression=/^[\x00-\x20\u00a0\u1680\u2000-\u200a\u2028\u2029\u202f\u205f\u3000\ufeff]+/,o.ascii_tab_whitespace=/[\u0009\u000A\u000D]+/g,o.defaultPorts={http:"80",https:"443",ftp:"21",gopher:"70",ws:"80",wss:"443"},o.hostProtocols=["http","https"],o.invalid_hostname_characters=/[^a-zA-Z0-9\.\-:_]/,o.domAttributes={a:"href",blockquote:"cite",link:"href",base:"href",script:"src",form:"action",img:"src",area:"href",iframe:"src",embed:"src",source:"src",track:"src",input:"src",audio:"src",video:"src"},o.getDomAttribute=function(t){if(t&&t.nodeName){var e=t.nodeName.toLowerCase();if("input"!==e||"image"===t.type)return o.domAttributes[e]}},o.encode=g,o.decode=decodeURIComponent,o.iso8859=function(){o.encode=escape,o.decode=unescape},o.unicode=function(){o.encode=g,o.decode=decodeURIComponent},o.characters={pathname:{encode:{expression:/%(24|26|2B|2C|3B|3D|3A|40)/gi,map:{"%24":"$","%26":"&","%2B":"+","%2C":",","%3B":";","%3D":"=","%3A":":","%40":"@"}},decode:{expression:/[\/\?#]/g,map:{"/":"%2F","?":"%3F","#":"%23"}}},reserved:{encode:{expression:/%(21|23|24|26|27|28|29|2A|2B|2C|2F|3A|3B|3D|3F|40|5B|5D)/gi,map:{"%3A":":","%2F":"/","%3F":"?","%23":"#","%5B":"[","%5D":"]","%40":"@","%21":"!","%24":"$","%26":"&","%27":"'","%28":"(","%29":")","%2A":"*","%2B":"+","%2C":",","%3B":";","%3D":"="}}},urnpath:{encode:{expression:/%(21|24|27|28|29|2A|2B|2C|3B|3D|40)/gi,map:{"%21":"!","%24":"$","%27":"'","%28":"(","%29":")","%2A":"*","%2B":"+","%2C":",","%3B":";","%3D":"=","%40":"@"}},decode:{expression:/[\/\?#:]/g,map:{"/":"%2F","?":"%3F","#":"%23",":":"%3A"}}}},o.encodeQuery=function(t,e){var n=o.encode(t+"");return void 0===e&&(e=o.escapeQuerySpace),e?n.replace(/%20/g,"+"):n},o.decodeQuery=function(t,e){t+="",void 0===e&&(e=o.escapeQuerySpace);try{return o.decode(e?t.replace(/\+/g,"%20"):t)}catch(e){return t}};var v,y={encode:"encode",decode:"decode"},b=function(t,e){return function(n){try{return o[e](n+"").replace(o.characters[t][e].expression,(function(n){return o.characters[t][e].map[n]}))}catch(t){return n}}};for(v in y)o[v+"PathSegment"]=b("pathname",y[v]),o[v+"UrnPathSegment"]=b("urnpath",y[v]);var _=function(t,e,n){return function(r){var i;i=n?function(t){return o[e](o[n](t))}:o[e];for(var a=(r+"").split(t),s=0,u=a.length;s<u;s++)a[s]=i(a[s]);return a.join(t)}};function x(t){return function(e,n){return void 0===e?this._parts[t]||"":(this._parts[t]=e||null,this.build(!n),this)}}function w(t,e){return function(n,r){return void 0===n?this._parts[t]||"":(null!==n&&(n+="").charAt(0)===e&&(n=n.substring(1)),this._parts[t]=n,this.build(!r),this)}}o.decodePath=_("/","decodePathSegment"),o.decodeUrnPath=_(":","decodeUrnPathSegment"),o.recodePath=_("/","encodePathSegment","decode"),o.recodeUrnPath=_(":","encodeUrnPathSegment","decode"),o.encodeReserved=b("reserved","encode"),o.parse=function(t,e){var n;return e||(e={preventInvalidHostname:o.preventInvalidHostname}),(n=(t=(t=t.replace(o.leading_whitespace_expression,"")).replace(o.ascii_tab_whitespace,"")).indexOf("#"))>-1&&(e.fragment=t.substring(n+1)||null,t=t.substring(0,n)),(n=t.indexOf("?"))>-1&&(e.query=t.substring(n+1)||null,t=t.substring(0,n)),"//"===(t=(t=t.replace(/^(https?|ftp|wss?)?:+[/\\]*/i,"$1://")).replace(/^[/\\]{2,}/i,"//")).substring(0,2)?(e.protocol=null,t=t.substring(2),t=o.parseAuthority(t,e)):(n=t.indexOf(":"))>-1&&(e.protocol=t.substring(0,n)||null,e.protocol&&!e.protocol.match(o.protocol_expression)?e.protocol=void 0:"//"===t.substring(n+1,n+3).replace(/\\/g,"/")?(t=t.substring(n+3),t=o.parseAuthority(t,e)):(t=t.substring(n+1),e.urn=!0)),e.path=t,e},o.parseHost=function(t,e){t||(t="");var n,r,i=(t=t.replace(/\\/g,"/")).indexOf("/");if(-1===i&&(i=t.length),"["===t.charAt(0))n=t.indexOf("]"),e.hostname=t.substring(1,n)||null,e.port=t.substring(n+2,i)||null,"/"===e.port&&(e.port=null);else{var a=t.indexOf(":"),s=t.indexOf("/"),u=t.indexOf(":",a+1);-1!==u&&(-1===s||u<s)?(e.hostname=t.substring(0,i)||null,e.port=null):(r=t.substring(0,i).split(":"),e.hostname=r[0]||null,e.port=r[1]||null)}return e.hostname&&"/"!==t.substring(i).charAt(0)&&(i++,t="/"+t),e.preventInvalidHostname&&o.ensureValidHostname(e.hostname,e.protocol),e.port&&o.ensureValidPort(e.port),t.substring(i)||"/"},o.parseAuthority=function(t,e){return t=o.parseUserinfo(t,e),o.parseHost(t,e)},o.parseUserinfo=function(t,e){var n=t;-1!==t.indexOf("\\")&&(t=t.replace(/\\/g,"/"));var r,i=t.indexOf("/"),a=t.lastIndexOf("@",i>-1?i:t.length-1);return a>-1&&(-1===i||a<i)?(r=t.substring(0,a).split(":"),e.username=r[0]?o.decode(r[0]):null,r.shift(),e.password=r[0]?o.decode(r.join(":")):null,t=n.substring(a+1)):(e.username=null,e.password=null),t},o.parseQuery=function(t,e){if(!t)return{};if(!(t=t.replace(/&+/g,"&").replace(/^\?*&*|&+$/g,"")))return{};for(var n,r,i,a={},u=t.split("&"),c=u.length,l=0;l<c;l++)n=u[l].split("="),r=o.decodeQuery(n.shift(),e),i=n.length?o.decodeQuery(n.join("="),e):null,"__proto__"!==r&&(s.call(a,r)?("string"!=typeof a[r]&&null!==a[r]||(a[r]=[a[r]]),a[r].push(i)):a[r]=i);return a},o.build=function(t){var e="",n=!1;return t.protocol&&(e+=t.protocol+":"),t.urn||!e&&!t.hostname||(e+="//",n=!0),e+=o.buildAuthority(t)||"","string"==typeof t.path&&("/"!==t.path.charAt(0)&&n&&(e+="/"),e+=t.path),"string"==typeof t.query&&t.query&&(e+="?"+t.query),"string"==typeof t.fragment&&t.fragment&&(e+="#"+t.fragment),e},o.buildHost=function(t){var e="";return t.hostname?(o.ip6_expression.test(t.hostname)?e+="["+t.hostname+"]":e+=t.hostname,t.port&&(e+=":"+t.port),e):""},o.buildAuthority=function(t){return o.buildUserinfo(t)+o.buildHost(t)},o.buildUserinfo=function(t){var e="";return t.username&&(e+=o.encode(t.username)),t.password&&(e+=":"+o.encode(t.password)),e&&(e+="@"),e},o.buildQuery=function(t,e,n){var r,i,a,u,c="";for(i in t)if("__proto__"!==i&&s.call(t,i))if(l(t[i]))for(r={},a=0,u=t[i].length;a<u;a++)void 0!==t[i][a]&&void 0===r[t[i][a]+""]&&(c+="&"+o.buildQueryParameter(i,t[i][a],n),!0!==e&&(r[t[i][a]+""]=!0));else void 0!==t[i]&&(c+="&"+o.buildQueryParameter(i,t[i],n));return c.substring(1)},o.buildQueryParameter=function(t,e,n){return o.encodeQuery(t,n)+(null!==e?"="+o.encodeQuery(e,n):"")},o.addQuery=function(t,e,n){if("object"==typeof e)for(var r in e)s.call(e,r)&&o.addQuery(t,r,e[r]);else{if("string"!=typeof e)throw new TypeError("URI.addQuery() accepts an object, string as the name parameter");if(void 0===t[e])return void(t[e]=n);"string"==typeof t[e]&&(t[e]=[t[e]]),l(n)||(n=[n]),t[e]=(t[e]||[]).concat(n)}},o.setQuery=function(t,e,n){if("object"==typeof e)for(var r in e)s.call(e,r)&&o.setQuery(t,r,e[r]);else{if("string"!=typeof e)throw new TypeError("URI.setQuery() accepts an object, string as the name parameter");t[e]=void 0===n?null:n}},o.removeQuery=function(t,e,n){var r,i,a;if(l(e))for(r=0,i=e.length;r<i;r++)t[e[r]]=void 0;else if("RegExp"===c(e))for(a in t)e.test(a)&&(t[a]=void 0);else if("object"==typeof e)for(a in e)s.call(e,a)&&o.removeQuery(t,a,e[a]);else{if("string"!=typeof e)throw new TypeError("URI.removeQuery() accepts an object, string, RegExp as the first parameter");void 0!==n?"RegExp"===c(n)?!l(t[e])&&n.test(t[e])?t[e]=void 0:t[e]=h(t[e],n):t[e]!==String(n)||l(n)&&1!==n.length?l(t[e])&&(t[e]=h(t[e],n)):t[e]=void 0:t[e]=void 0}},o.hasQuery=function(t,e,n,r){switch(c(e)){case"String":break;case"RegExp":for(var i in t)if(s.call(t,i)&&e.test(i)&&(void 0===n||o.hasQuery(t,i,n)))return!0;return!1;case"Object":for(var a in e)if(s.call(e,a)&&!o.hasQuery(t,a,e[a]))return!1;return!0;default:throw new TypeError("URI.hasQuery() accepts a string, regular expression or object as the name parameter")}switch(c(n)){case"Undefined":return e in t;case"Boolean":return n===Boolean(l(t[e])?t[e].length:t[e]);case"Function":return!!n(t[e],e,t);case"Array":return!!l(t[e])&&(r?f:d)(t[e],n);case"RegExp":return l(t[e])?!!r&&f(t[e],n):Boolean(t[e]&&t[e].match(n));case"Number":n=String(n);case"String":return l(t[e])?!!r&&f(t[e],n):t[e]===n;default:throw new TypeError("URI.hasQuery() accepts undefined, boolean, string, number, RegExp, Function as the value parameter")}},o.joinPaths=function(){for(var t=[],e=[],n=0,r=0;r<arguments.length;r++){var i=new o(arguments[r]);t.push(i);for(var a=i.segment(),s=0;s<a.length;s++)"string"==typeof a[s]&&e.push(a[s]),a[s]&&n++}if(!e.length||!n)return new o("");var u=new o("").segment(e);return""!==t[0].path()&&"/"!==t[0].path().slice(0,1)||u.path("/"+u.path()),u.normalize()},o.commonPath=function(t,e){var n,r=Math.min(t.length,e.length);for(n=0;n<r;n++)if(t.charAt(n)!==e.charAt(n)){n--;break}return n<1?t.charAt(0)===e.charAt(0)&&"/"===t.charAt(0)?"/":"":("/"===t.charAt(n)&&"/"===e.charAt(n)||(n=t.substring(0,n).lastIndexOf("/")),t.substring(0,n+1))},o.withinString=function(t,e,n){n||(n={});var r=n.start||o.findUri.start,i=n.end||o.findUri.end,a=n.trim||o.findUri.trim,s=n.parens||o.findUri.parens,u=/[a-z0-9-]=["']?$/i;for(r.lastIndex=0;;){var c=r.exec(t);if(!c)break;var l=c.index;if(n.ignoreHtml){var h=t.slice(Math.max(l-3,0),l);if(h&&u.test(h))continue}for(var f=l+t.slice(l).search(i),d=t.slice(l,f),p=-1;;){var m=s.exec(d);if(!m)break;var g=m.index+m[0].length;p=Math.max(p,g)}if(!((d=p>-1?d.slice(0,p)+d.slice(p).replace(a,""):d.replace(a,"")).length<=c[0].length||n.ignore&&n.ignore.test(d))){var v=e(d,l,f=l+d.length,t);void 0!==v?(v=String(v),t=t.slice(0,l)+v+t.slice(f),r.lastIndex=l+v.length):r.lastIndex=f}}return r.lastIndex=0,t},o.ensureValidHostname=function(e,n){var r=!!e,i=!1;if(!!n&&(i=f(o.hostProtocols,n)),i&&!r)throw new TypeError("Hostname cannot be empty, if protocol is "+n);if(e&&e.match(o.invalid_hostname_characters)){if(!t)throw new TypeError('Hostname "'+e+'" contains characters other than [A-Z0-9.-:_] and Punycode.js is not available');if(t.toASCII(e).match(o.invalid_hostname_characters))throw new TypeError('Hostname "'+e+'" contains characters other than [A-Z0-9.-:_]')}},o.ensureValidPort=function(t){if(t){var e=Number(t);if(!(/^[0-9]+$/.test(e)&&e>0&&e<65536))throw new TypeError('Port "'+t+'" is not a valid port')}},o.noConflict=function(t){if(t){var e={URI:this.noConflict()};return r.URITemplate&&"function"==typeof r.URITemplate.noConflict&&(e.URITemplate=r.URITemplate.noConflict()),r.IPv6&&"function"==typeof r.IPv6.noConflict&&(e.IPv6=r.IPv6.noConflict()),r.SecondLevelDomains&&"function"==typeof r.SecondLevelDomains.noConflict&&(e.SecondLevelDomains=r.SecondLevelDomains.noConflict()),e}return r.URI===this&&(r.URI=i),this},a.build=function(t){return!0===t?this._deferred_build=!0:(void 0===t||this._deferred_build)&&(this._string=o.build(this._parts),this._deferred_build=!1),this},a.clone=function(){return new o(this)},a.valueOf=a.toString=function(){return this.build(!1)._string},a.protocol=x("protocol"),a.username=x("username"),a.password=x("password"),a.hostname=x("hostname"),a.port=x("port"),a.query=w("query","?"),a.fragment=w("fragment","#"),a.search=function(t,e){var n=this.query(t,e);return"string"==typeof n&&n.length?"?"+n:n},a.hash=function(t,e){var n=this.fragment(t,e);return"string"==typeof n&&n.length?"#"+n:n},a.pathname=function(t,e){if(void 0===t||!0===t){var n=this._parts.path||(this._parts.hostname?"/":"");return t?(this._parts.urn?o.decodeUrnPath:o.decodePath)(n):n}return this._parts.urn?this._parts.path=t?o.recodeUrnPath(t):"":this._parts.path=t?o.recodePath(t):"/",this.build(!e),this},a.path=a.pathname,a.href=function(t,e){var n;if(void 0===t)return this.toString();this._string="",this._parts=o._parts();var r=t instanceof o,i="object"==typeof t&&(t.hostname||t.path||t.pathname);t.nodeName&&(t=t[o.getDomAttribute(t)]||"",i=!1);if(!r&&i&&void 0!==t.pathname&&(t=t.toString()),"string"==typeof t||t instanceof String)this._parts=o.parse(String(t),this._parts);else{if(!r&&!i)throw new TypeError("invalid input");var a=r?t._parts:t;for(n in a)"query"!==n&&s.call(this._parts,n)&&(this._parts[n]=a[n]);a.query&&this.query(a.query,!1)}return this.build(!e),this},a.is=function(t){var e=!1,r=!1,i=!1,a=!1,s=!1,u=!1,c=!1,l=!this._parts.urn;switch(this._parts.hostname&&(l=!1,r=o.ip4_expression.test(this._parts.hostname),i=o.ip6_expression.test(this._parts.hostname),s=(a=!(e=r||i))&&n&&n.has(this._parts.hostname),u=a&&o.idn_expression.test(this._parts.hostname),c=a&&o.punycode_expression.test(this._parts.hostname)),t.toLowerCase()){case"relative":return l;case"absolute":return!l;case"domain":case"name":return a;case"sld":return s;case"ip":return e;case"ip4":case"ipv4":case"inet4":return r;case"ip6":case"ipv6":case"inet6":return i;case"idn":return u;case"url":return!this._parts.urn;case"urn":return!!this._parts.urn;case"punycode":return c}return null};var S=a.protocol,E=a.port,T=a.hostname;a.protocol=function(t,e){if(t&&!(t=t.replace(/:(\/\/)?$/,"")).match(o.protocol_expression))throw new TypeError('Protocol "'+t+"\" contains characters other than [A-Z0-9.+-] or doesn't start with [A-Z]");return S.call(this,t,e)},a.scheme=a.protocol,a.port=function(t,e){return this._parts.urn?void 0===t?"":this:(void 0!==t&&(0===t&&(t=null),t&&(":"===(t+="").charAt(0)&&(t=t.substring(1)),o.ensureValidPort(t))),E.call(this,t,e))},a.hostname=function(t,e){if(this._parts.urn)return void 0===t?"":this;if(void 0!==t){var n={preventInvalidHostname:this._parts.preventInvalidHostname};if("/"!==o.parseHost(t,n))throw new TypeError('Hostname "'+t+'" contains characters other than [A-Z0-9.-]');t=n.hostname,this._parts.preventInvalidHostname&&o.ensureValidHostname(t,this._parts.protocol)}return T.call(this,t,e)},a.origin=function(t,e){if(this._parts.urn)return void 0===t?"":this;if(void 0===t){var n=this.protocol();return this.authority()?(n?n+"://":"")+this.authority():""}var r=o(t);return this.protocol(r.protocol()).authority(r.authority()).build(!e),this},a.host=function(t,e){if(this._parts.urn)return void 0===t?"":this;if(void 0===t)return this._parts.hostname?o.buildHost(this._parts):"";if("/"!==o.parseHost(t,this._parts))throw new TypeError('Hostname "'+t+'" contains characters other than [A-Z0-9.-]');return this.build(!e),this},a.authority=function(t,e){if(this._parts.urn)return void 0===t?"":this;if(void 0===t)return this._parts.hostname?o.buildAuthority(this._parts):"";if("/"!==o.parseAuthority(t,this._parts))throw new TypeError('Hostname "'+t+'" contains characters other than [A-Z0-9.-]');return this.build(!e),this},a.userinfo=function(t,e){if(this._parts.urn)return void 0===t?"":this;if(void 0===t){var n=o.buildUserinfo(this._parts);return n?n.substring(0,n.length-1):n}return"@"!==t[t.length-1]&&(t+="@"),o.parseUserinfo(t,this._parts),this.build(!e),this},a.resource=function(t,e){var n;return void 0===t?this.path()+this.search()+this.hash():(n=o.parse(t),this._parts.path=n.path,this._parts.query=n.query,this._parts.fragment=n.fragment,this.build(!e),this)},a.subdomain=function(t,e){if(this._parts.urn)return void 0===t?"":this;if(void 0===t){if(!this._parts.hostname||this.is("IP"))return"";var n=this._parts.hostname.length-this.domain().length-1;return this._parts.hostname.substring(0,n)||""}var r=this._parts.hostname.length-this.domain().length,i=this._parts.hostname.substring(0,r),a=new RegExp("^"+u(i));if(t&&"."!==t.charAt(t.length-1)&&(t+="."),-1!==t.indexOf(":"))throw new TypeError("Domains cannot contain colons");return t&&o.ensureValidHostname(t,this._parts.protocol),this._parts.hostname=this._parts.hostname.replace(a,t),this.build(!e),this},a.domain=function(t,e){if(this._parts.urn)return void 0===t?"":this;if("boolean"==typeof t&&(e=t,t=void 0),void 0===t){if(!this._parts.hostname||this.is("IP"))return"";var n=this._parts.hostname.match(/\./g);if(n&&n.length<2)return this._parts.hostname;var r=this._parts.hostname.length-this.tld(e).length-1;return r=this._parts.hostname.lastIndexOf(".",r-1)+1,this._parts.hostname.substring(r)||""}if(!t)throw new TypeError("cannot set domain empty");if(-1!==t.indexOf(":"))throw new TypeError("Domains cannot contain colons");if(o.ensureValidHostname(t,this._parts.protocol),!this._parts.hostname||this.is("IP"))this._parts.hostname=t;else{var i=new RegExp(u(this.domain())+"$");this._parts.hostname=this._parts.hostname.replace(i,t)}return this.build(!e),this},a.tld=function(t,e){if(this._parts.urn)return void 0===t?"":this;if("boolean"==typeof t&&(e=t,t=void 0),void 0===t){if(!this._parts.hostname||this.is("IP"))return"";var r=this._parts.hostname.lastIndexOf("."),i=this._parts.hostname.substring(r+1);return!0!==e&&n&&n.list[i.toLowerCase()]&&n.get(this._parts.hostname)||i}var o;if(!t)throw new TypeError("cannot set TLD empty");if(t.match(/[^a-zA-Z0-9-]/)){if(!n||!n.is(t))throw new TypeError('TLD "'+t+'" contains characters other than [A-Z0-9]');o=new RegExp(u(this.tld())+"$"),this._parts.hostname=this._parts.hostname.replace(o,t)}else{if(!this._parts.hostname||this.is("IP"))throw new ReferenceError("cannot set TLD on non-domain host");o=new RegExp(u(this.tld())+"$"),this._parts.hostname=this._parts.hostname.replace(o,t)}return this.build(!e),this},a.directory=function(t,e){if(this._parts.urn)return void 0===t?"":this;if(void 0===t||!0===t){if(!this._parts.path&&!this._parts.hostname)return"";if("/"===this._parts.path)return"/";var n=this._parts.path.length-this.filename().length-1,r=this._parts.path.substring(0,n)||(this._parts.hostname?"/":"");return t?o.decodePath(r):r}var i=this._parts.path.length-this.filename().length,a=this._parts.path.substring(0,i),s=new RegExp("^"+u(a));return this.is("relative")||(t||(t="/"),"/"!==t.charAt(0)&&(t="/"+t)),t&&"/"!==t.charAt(t.length-1)&&(t+="/"),t=o.recodePath(t),this._parts.path=this._parts.path.replace(s,t),this.build(!e),this},a.filename=function(t,e){if(this._parts.urn)return void 0===t?"":this;if("string"!=typeof t){if(!this._parts.path||"/"===this._parts.path)return"";var n=this._parts.path.lastIndexOf("/"),r=this._parts.path.substring(n+1);return t?o.decodePathSegment(r):r}var i=!1;"/"===t.charAt(0)&&(t=t.substring(1)),t.match(/\.?\//)&&(i=!0);var a=new RegExp(u(this.filename())+"$");return t=o.recodePath(t),this._parts.path=this._parts.path.replace(a,t),i?this.normalizePath(e):this.build(!e),this},a.suffix=function(t,e){if(this._parts.urn)return void 0===t?"":this;if(void 0===t||!0===t){if(!this._parts.path||"/"===this._parts.path)return"";var n,r,i=this.filename(),a=i.lastIndexOf(".");return-1===a?"":(n=i.substring(a+1),r=/^[a-z0-9%]+$/i.test(n)?n:"",t?o.decodePathSegment(r):r)}"."===t.charAt(0)&&(t=t.substring(1));var s,c=this.suffix();if(c)s=t?new RegExp(u(c)+"$"):new RegExp(u("."+c)+"$");else{if(!t)return this;this._parts.path+="."+o.recodePath(t)}return s&&(t=o.recodePath(t),this._parts.path=this._parts.path.replace(s,t)),this.build(!e),this},a.segment=function(t,e,n){var r=this._parts.urn?":":"/",i=this.path(),o="/"===i.substring(0,1),a=i.split(r);if(void 0!==t&&"number"!=typeof t&&(n=e,e=t,t=void 0),void 0!==t&&"number"!=typeof t)throw new Error('Bad segment "'+t+'", must be 0-based integer');if(o&&a.shift(),t<0&&(t=Math.max(a.length+t,0)),void 0===e)return void 0===t?a:a[t];if(null===t||void 0===a[t])if(l(e)){a=[];for(var s=0,u=e.length;s<u;s++)(e[s].length||a.length&&a[a.length-1].length)&&(a.length&&!a[a.length-1].length&&a.pop(),a.push(p(e[s])))}else(e||"string"==typeof e)&&(e=p(e),""===a[a.length-1]?a[a.length-1]=e:a.push(e));else e?a[t]=p(e):a.splice(t,1);return o&&a.unshift(""),this.path(a.join(r),n)},a.segmentCoded=function(t,e,n){var r,i,a;if("number"!=typeof t&&(n=e,e=t,t=void 0),void 0===e){if(l(r=this.segment(t,e,n)))for(i=0,a=r.length;i<a;i++)r[i]=o.decode(r[i]);else r=void 0!==r?o.decode(r):void 0;return r}if(l(e))for(i=0,a=e.length;i<a;i++)e[i]=o.encode(e[i]);else e="string"==typeof e||e instanceof String?o.encode(e):e;return this.segment(t,e,n)};var M=a.query;return a.query=function(t,e){if(!0===t)return o.parseQuery(this._parts.query,this._parts.escapeQuerySpace);if("function"==typeof t){var n=o.parseQuery(this._parts.query,this._parts.escapeQuerySpace),r=t.call(this,n);return this._parts.query=o.buildQuery(r||n,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace),this.build(!e),this}return void 0!==t&&"string"!=typeof t?(this._parts.query=o.buildQuery(t,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace),this.build(!e),this):M.call(this,t,e)},a.setQuery=function(t,e,n){var r=o.parseQuery(this._parts.query,this._parts.escapeQuerySpace);if("string"==typeof t||t instanceof String)r[t]=void 0!==e?e:null;else{if("object"!=typeof t)throw new TypeError("URI.addQuery() accepts an object, string as the name parameter");for(var i in t)s.call(t,i)&&(r[i]=t[i])}return this._parts.query=o.buildQuery(r,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace),"string"!=typeof t&&(n=e),this.build(!n),this},a.addQuery=function(t,e,n){var r=o.parseQuery(this._parts.query,this._parts.escapeQuerySpace);return o.addQuery(r,t,void 0===e?null:e),this._parts.query=o.buildQuery(r,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace),"string"!=typeof t&&(n=e),this.build(!n),this},a.removeQuery=function(t,e,n){var r=o.parseQuery(this._parts.query,this._parts.escapeQuerySpace);return o.removeQuery(r,t,e),this._parts.query=o.buildQuery(r,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace),"string"!=typeof t&&(n=e),this.build(!n),this},a.hasQuery=function(t,e,n){var r=o.parseQuery(this._parts.query,this._parts.escapeQuerySpace);return o.hasQuery(r,t,e,n)},a.setSearch=a.setQuery,a.addSearch=a.addQuery,a.removeSearch=a.removeQuery,a.hasSearch=a.hasQuery,a.normalize=function(){return this._parts.urn?this.normalizeProtocol(!1).normalizePath(!1).normalizeQuery(!1).normalizeFragment(!1).build():this.normalizeProtocol(!1).normalizeHostname(!1).normalizePort(!1).normalizePath(!1).normalizeQuery(!1).normalizeFragment(!1).build()},a.normalizeProtocol=function(t){return"string"==typeof this._parts.protocol&&(this._parts.protocol=this._parts.protocol.toLowerCase(),this.build(!t)),this},a.normalizeHostname=function(n){return this._parts.hostname&&(this.is("IDN")&&t?this._parts.hostname=t.toASCII(this._parts.hostname):this.is("IPv6")&&e&&(this._parts.hostname=e.best(this._parts.hostname)),this._parts.hostname=this._parts.hostname.toLowerCase(),this.build(!n)),this},a.normalizePort=function(t){return"string"==typeof this._parts.protocol&&this._parts.port===o.defaultPorts[this._parts.protocol]&&(this._parts.port=null,this.build(!t)),this},a.normalizePath=function(t){var e,n=this._parts.path;if(!n)return this;if(this._parts.urn)return this._parts.path=o.recodeUrnPath(this._parts.path),this.build(!t),this;if("/"===this._parts.path)return this;var r,i,a="";for("/"!==(n=o.recodePath(n)).charAt(0)&&(e=!0,n="/"+n),"/.."!==n.slice(-3)&&"/."!==n.slice(-2)||(n+="/"),n=n.replace(/(\/(\.\/)+)|(\/\.$)/g,"/").replace(/\/{2,}/g,"/"),e&&(a=n.substring(1).match(/^(\.\.\/)+/)||"")&&(a=a[0]);-1!==(r=n.search(/\/\.\.(\/|$)/));)0!==r?(-1===(i=n.substring(0,r).lastIndexOf("/"))&&(i=r),n=n.substring(0,i)+n.substring(r+3)):n=n.substring(3);return e&&this.is("relative")&&(n=a+n.substring(1)),this._parts.path=n,this.build(!t),this},a.normalizePathname=a.normalizePath,a.normalizeQuery=function(t){return"string"==typeof this._parts.query&&(this._parts.query.length?this.query(o.parseQuery(this._parts.query,this._parts.escapeQuerySpace)):this._parts.query=null,this.build(!t)),this},a.normalizeFragment=function(t){return this._parts.fragment||(this._parts.fragment=null,this.build(!t)),this},a.normalizeSearch=a.normalizeQuery,a.normalizeHash=a.normalizeFragment,a.iso8859=function(){var t=o.encode,e=o.decode;o.encode=escape,o.decode=decodeURIComponent;try{this.normalize()}finally{o.encode=t,o.decode=e}return this},a.unicode=function(){var t=o.encode,e=o.decode;o.encode=g,o.decode=unescape;try{this.normalize()}finally{o.encode=t,o.decode=e}return this},a.readable=function(){var e=this.clone();e.username("").password("").normalize();var n="";if(e._parts.protocol&&(n+=e._parts.protocol+"://"),e._parts.hostname&&(e.is("punycode")&&t?(n+=t.toUnicode(e._parts.hostname),e._parts.port&&(n+=":"+e._parts.port)):n+=e.host()),e._parts.hostname&&e._parts.path&&"/"!==e._parts.path.charAt(0)&&(n+="/"),n+=e.path(!0),e._parts.query){for(var r="",i=0,a=e._parts.query.split("&"),s=a.length;i<s;i++){var u=(a[i]||"").split("=");r+="&"+o.decodeQuery(u[0],this._parts.escapeQuerySpace).replace(/&/g,"%26"),void 0!==u[1]&&(r+="="+o.decodeQuery(u[1],this._parts.escapeQuerySpace).replace(/&/g,"%26"))}n+="?"+r.substring(1)}return n+=o.decodeQuery(e.hash(),!0)},a.absoluteTo=function(t){var e,n,r,i=this.clone(),a=["protocol","username","password","hostname","port"];if(this._parts.urn)throw new Error("URNs do not have any generally defined hierarchical components");if(t instanceof o||(t=new o(t)),i._parts.protocol)return i;if(i._parts.protocol=t._parts.protocol,this._parts.hostname)return i;for(n=0;r=a[n];n++)i._parts[r]=t._parts[r];return i._parts.path?(".."===i._parts.path.substring(-2)&&(i._parts.path+="/"),"/"!==i.path().charAt(0)&&(e=(e=t.directory())||(0===t.path().indexOf("/")?"/":""),i._parts.path=(e?e+"/":"")+i._parts.path,i.normalizePath())):(i._parts.path=t._parts.path,i._parts.query||(i._parts.query=t._parts.query)),i.build(),i},a.relativeTo=function(t){var e,n,r,i,a,s=this.clone().normalize();if(s._parts.urn)throw new Error("URNs do not have any generally defined hierarchical components");if(t=new o(t).normalize(),e=s._parts,n=t._parts,i=s.path(),a=t.path(),"/"!==i.charAt(0))throw new Error("URI is already relative");if("/"!==a.charAt(0))throw new Error("Cannot calculate a URI relative to another relative URI");if(e.protocol===n.protocol&&(e.protocol=null),e.username!==n.username||e.password!==n.password)return s.build();if(null!==e.protocol||null!==e.username||null!==e.password)return s.build();if(e.hostname!==n.hostname||e.port!==n.port)return s.build();if(e.hostname=null,e.port=null,i===a)return e.path="",s.build();if(!(r=o.commonPath(i,a)))return s.build();var u=n.path.substring(r.length).replace(/[^\/]*$/,"").replace(/.*?\//g,"../");return e.path=u+e.path.substring(r.length)||"./",s.build()},a.equals=function(t){var e,n,r,i,a,u=this.clone(),c=new o(t),h={};if(u.normalize(),c.normalize(),u.toString()===c.toString())return!0;if(r=u.query(),i=c.query(),u.query(""),c.query(""),u.toString()!==c.toString())return!1;if(r.length!==i.length)return!1;for(a in e=o.parseQuery(r,this._parts.escapeQuerySpace),n=o.parseQuery(i,this._parts.escapeQuerySpace),e)if(s.call(e,a)){if(l(e[a])){if(!d(e[a],n[a]))return!1}else if(e[a]!==n[a])return!1;h[a]=!0}for(a in n)if(s.call(n,a)&&!h[a])return!1;return!0},a.preventInvalidHostname=function(t){return this._parts.preventInvalidHostname=!!t,this},a.duplicateQueryParameters=function(t){return this._parts.duplicateQueryParameters=!!t,this},a.escapeQuerySpace=function(t){return this._parts.escapeQuerySpace=!!t,this},o}))},function(t,e){function n(t,e,n){t.addEventListener("wheel",e,n)}t.exports=n,t.exports.addWheelListener=n,t.exports.removeWheelListener=function(t,e,n){t.removeEventListener("wheel",e,n)}},function(t,e,n){var r=function(t){"use strict";var e=Object.prototype,n=e.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},i=r.iterator||"@@iterator",o=r.asyncIterator||"@@asyncIterator",a=r.toStringTag||"@@toStringTag";function s(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(t){s=function(t,e,n){return t[e]=n}}function u(t,e,n,r){var i=e&&e.prototype instanceof h?e:h,o=Object.create(i.prototype),a=new S(r||[]);return o._invoke=function(t,e,n){var r="suspendedStart";return function(i,o){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===i)throw o;return T()}for(n.method=i,n.arg=o;;){var a=n.delegate;if(a){var s=_(a,n);if(s){if(s===l)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var u=c(t,e,n);if("normal"===u.type){if(r=n.done?"completed":"suspendedYield",u.arg===l)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(r="completed",n.method="throw",n.arg=u.arg)}}}(t,n,a),o}function c(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}t.wrap=u;var l={};function h(){}function f(){}function d(){}var p={};p[i]=function(){return this};var m=Object.getPrototypeOf,g=m&&m(m(E([])));g&&g!==e&&n.call(g,i)&&(p=g);var v=d.prototype=h.prototype=Object.create(p);function y(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function b(t,e){var r;this._invoke=function(i,o){function a(){return new e((function(r,a){!function r(i,o,a,s){var u=c(t[i],t,o);if("throw"!==u.type){var l=u.arg,h=l.value;return h&&"object"==typeof h&&n.call(h,"__await")?e.resolve(h.__await).then((function(t){r("next",t,a,s)}),(function(t){r("throw",t,a,s)})):e.resolve(h).then((function(t){l.value=t,a(l)}),(function(t){return r("throw",t,a,s)}))}s(u.arg)}(i,o,r,a)}))}return r=r?r.then(a,a):a()}}function _(t,e){var n=t.iterator[e.method];if(void 0===n){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,_(t,e),"throw"===e.method))return l;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return l}var r=c(n,t.iterator,e.arg);if("throw"===r.type)return e.method="throw",e.arg=r.arg,e.delegate=null,l;var i=r.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,l):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,l)}function x(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function w(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function S(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(x,this),this.reset(!0)}function E(t){if(t){var e=t[i];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,o=function e(){for(;++r<t.length;)if(n.call(t,r))return e.value=t[r],e.done=!1,e;return e.value=void 0,e.done=!0,e};return o.next=o}}return{next:T}}function T(){return{value:void 0,done:!0}}return f.prototype=v.constructor=d,d.constructor=f,f.displayName=s(d,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===f||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,d):(t.__proto__=d,s(t,a,"GeneratorFunction")),t.prototype=Object.create(v),t},t.awrap=function(t){return{__await:t}},y(b.prototype),b.prototype[o]=function(){return this},t.AsyncIterator=b,t.async=function(e,n,r,i,o){void 0===o&&(o=Promise);var a=new b(u(e,n,r,i),o);return t.isGeneratorFunction(n)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},y(v),s(v,a,"Generator"),v[i]=function(){return this},v.toString=function(){return"[object Generator]"},t.keys=function(t){var e=[];for(var n in t)e.push(n);return e.reverse(),function n(){for(;e.length;){var r=e.pop();if(r in t)return n.value=r,n.done=!1,n}return n.done=!0,n}},t.values=E,S.prototype={constructor:S,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(w),!t)for(var e in this)"t"===e.charAt(0)&&n.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function r(n,r){return a.type="throw",a.arg=t,e.next=n,r&&(e.method="next",e.arg=void 0),!!r}for(var i=this.tryEntries.length-1;i>=0;--i){var o=this.tryEntries[i],a=o.completion;if("root"===o.tryLoc)return r("end");if(o.tryLoc<=this.prev){var s=n.call(o,"catchLoc"),u=n.call(o,"finallyLoc");if(s&&u){if(this.prev<o.catchLoc)return r(o.catchLoc,!0);if(this.prev<o.finallyLoc)return r(o.finallyLoc)}else if(s){if(this.prev<o.catchLoc)return r(o.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return r(o.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=t,a.arg=e,o?(this.method="next",this.next=o.finallyLoc,l):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),l},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),w(n),l}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var i=r.arg;w(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:E(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=void 0),l}},t}(t.exports);try{regeneratorRuntime=r}catch(t){Function("r","regeneratorRuntime = r")(r)}},function(t,e,n){var r=n(7),i=n(2),o=n(91);t.exports=!r&&!i((function(){return 7!=Object.defineProperty(o("div"),"a",{get:function(){return 7}}).a}))},function(t,e,n){var r=n(3),i=n(93),o=r.WeakMap;t.exports="function"==typeof o&&/native code/.test(i(o))},function(t,e,n){var r=n(15),i=n(95),o=n(17),a=n(11);t.exports=function(t,e){for(var n=i(e),s=a.f,u=o.f,c=0;c<n.length;c++){var l=n[c];r(t,l)||s(t,l,u(e,l))}}},function(t,e,n){var r=n(15),i=n(24),o=n(61).indexOf,a=n(60);t.exports=function(t,e){var n,s=i(t),u=0,c=[];for(n in s)!r(a,n)&&r(s,n)&&c.push(n);for(;e.length>u;)r(s,n=e[u++])&&(~o(c,n)||c.push(n));return c}},function(t,e,n){var r=n(99);t.exports=r&&!Symbol.sham&&"symbol"==typeof Symbol.iterator},function(t,e,n){var r=n(25);t.exports=r("document","documentElement")},function(t,e,n){var r=n(24),i=n(47).f,o={}.toString,a="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];t.exports.f=function(t){return a&&"[object Window]"==o.call(t)?function(t){try{return i(t)}catch(t){return a.slice()}}(t):i(r(t))}},function(t,e,n){var r=n(8);e.f=r},function(t,e,n){var r=n(5);t.exports=function(t){if(!r(t)&&null!==t)throw TypeError("Can't set "+String(t)+" as a prototype");return t}},function(t,e,n){var r=n(6);t.exports=function(t){var e=t.return;if(void 0!==e)return r(e.call(t)).value}},function(t,e,n){"use strict";var r=n(13),i=n(40),o=n(10),a=Math.min;t.exports=[].copyWithin||function(t,e){var n=r(this),s=o(n.length),u=i(t,s),c=i(e,s),l=arguments.length>2?arguments[2]:void 0,h=a((void 0===l?s:i(l,s))-c,s-u),f=1;for(c<u&&u<c+h&&(f=-1,c+=h-1,u+=h-1);h-- >0;)c in n?n[u]=n[c]:delete n[u],u+=f,c+=f;return n}},function(t,e,n){"use strict";var r=n(49),i=n(10),o=n(41),a=function(t,e,n,s,u,c,l,h){for(var f,d=u,p=0,m=!!l&&o(l,h,3);p<s;){if(p in n){if(f=m?m(n[p],p,e):n[p],c>0&&r(f))d=a(t,e,f,i(f.length),d,c-1)-1;else{if(d>=9007199254740991)throw TypeError("Exceed the acceptable array length");t[d]=f}d++}p++}return d};t.exports=a},function(t,e,n){"use strict";var r=n(16).forEach,i=n(37)("forEach");t.exports=i?[].forEach:function(t){return r(this,t,arguments.length>1?arguments[1]:void 0)}},function(t,e,n){"use strict";var r=n(41),i=n(13),o=n(200),a=n(102),s=n(10),u=n(50),c=n(67);t.exports=function(t){var e,n,l,h,f,d,p=i(t),m="function"==typeof this?this:Array,g=arguments.length,v=g>1?arguments[1]:void 0,y=void 0!==v,b=c(p),_=0;if(y&&(v=r(v,g>2?arguments[2]:void 0,2)),null==b||m==Array&&a(b))for(n=new m(e=s(p.length));e>_;_++)d=y?v(p[_],_):p[_],u(n,_,d);else for(f=(h=b.call(p)).next,n=new m;!(l=f.call(h)).done;_++)d=y?o(h,v,[l.value,_],!0):l.value,u(n,_,d);return n.length=_,n}},function(t,e,n){"use strict";var r,i,o,a=n(2),s=n(30),u=n(19),c=n(15),l=n(8),h=n(28),f=l("iterator"),d=!1;[].keys&&("next"in(o=[].keys())?(i=s(s(o)))!==Object.prototype&&(r=i):d=!0);var p=null==r||a((function(){var t={};return r[f].call(t)!==t}));p&&(r={}),h&&!p||c(r,f)||u(r,f,(function(){return this})),t.exports={IteratorPrototype:r,BUGGY_SAFARI_ITERATORS:d}},function(t,e,n){"use strict";var r=n(24),i=n(29),o=n(10),a=n(37),s=Math.min,u=[].lastIndexOf,c=!!u&&1/[1].lastIndexOf(1,-0)<0,l=a("lastIndexOf"),h=c||!l;t.exports=h?function(t){if(c)return u.apply(this,arguments)||0;var e=r(this),n=o(e.length),a=n-1;for(arguments.length>1&&(a=s(a,i(arguments[1]))),a<0&&(a=n+a);a>=0;a--)if(a in e&&e[a]===t)return a||0;return-1}:u},function(t,e,n){var r=n(29),i=n(10);t.exports=function(t){if(void 0===t)return 0;var e=r(t),n=i(e);if(e!==n)throw RangeError("Wrong length or index");return n}},function(t,e,n){"use strict";var r=n(22),i=n(5),o=[].slice,a={},s=function(t,e,n){if(!(e in a)){for(var r=[],i=0;i<e;i++)r[i]="a["+i+"]";a[e]=Function("C,a","return new C("+r.join(",")+")")}return a[e](t,n)};t.exports=Function.bind||function(t){var e=r(this),n=o.call(arguments,1),a=function(){var r=n.concat(o.call(arguments));return this instanceof a?s(e,r.length,r):e.apply(t,r)};return i(e.prototype)&&(a.prototype=e.prototype),a}},function(t,e,n){"use strict";var r=n(11).f,i=n(34),o=n(54),a=n(41),s=n(45),u=n(43),c=n(105),l=n(53),h=n(7),f=n(51).fastKey,d=n(21),p=d.set,m=d.getterFor;t.exports={getConstructor:function(t,e,n,c){var l=t((function(t,r){s(t,l,e),p(t,{type:e,index:i(null),first:void 0,last:void 0,size:0}),h||(t.size=0),null!=r&&u(r,t[c],{that:t,AS_ENTRIES:n})})),d=m(e),g=function(t,e,n){var r,i,o=d(t),a=v(t,e);return a?a.value=n:(o.last=a={index:i=f(e,!0),key:e,value:n,previous:r=o.last,next:void 0,removed:!1},o.first||(o.first=a),r&&(r.next=a),h?o.size++:t.size++,"F"!==i&&(o.index[i]=a)),t},v=function(t,e){var n,r=d(t),i=f(e);if("F"!==i)return r.index[i];for(n=r.first;n;n=n.next)if(n.key==e)return n};return o(l.prototype,{clear:function(){for(var t=d(this),e=t.index,n=t.first;n;)n.removed=!0,n.previous&&(n.previous=n.previous.next=void 0),delete e[n.index],n=n.next;t.first=t.last=void 0,h?t.size=0:this.size=0},delete:function(t){var e=d(this),n=v(this,t);if(n){var r=n.next,i=n.previous;delete e.index[n.index],n.removed=!0,i&&(i.next=r),r&&(r.previous=i),e.first==n&&(e.first=r),e.last==n&&(e.last=i),h?e.size--:this.size--}return!!n},forEach:function(t){for(var e,n=d(this),r=a(t,arguments.length>1?arguments[1]:void 0,3);e=e?e.next:n.first;)for(r(e.value,e.key,this);e&&e.removed;)e=e.previous},has:function(t){return!!v(this,t)}}),o(l.prototype,n?{get:function(t){var e=v(this,t);return e&&e.value},set:function(t,e){return g(this,0===t?0:t,e)}}:{add:function(t){return g(this,t=0===t?0:t,t)}}),h&&r(l.prototype,"size",{get:function(){return d(this).size}}),l},setStrong:function(t,e,n){var r=e+" Iterator",i=m(e),o=m(r);c(t,e,(function(t,e){p(this,{type:r,target:t,state:i(t),kind:e,last:void 0})}),(function(){for(var t=o(this),e=t.kind,n=t.last;n&&n.removed;)n=n.previous;return t.target&&(t.last=n=n?n.next:t.state.first)?"keys"==e?{value:n.key,done:!1}:"values"==e?{value:n.value,done:!1}:{value:[n.key,n.value],done:!1}:(t.target=void 0,{value:void 0,done:!0})}),n?"entries":"values",!n,!0),l(e)}}},function(t,e){var n=Math.log;t.exports=Math.log1p||function(t){return(t=+t)>-1e-8&&t<1e-8?t-t*t/2:n(1+t)}},function(t,e,n){var r=n(5),i=Math.floor;t.exports=function(t){return!r(t)&&isFinite(t)&&i(t)===t}},function(t,e,n){var r=n(3),i=n(55).trim,o=n(83),a=r.parseFloat,s=1/a(o+"-0")!=-1/0;t.exports=s?function(t){var e=i(String(t)),n=a(e);return 0===n&&"-"==e.charAt(0)?-0:n}:a},function(t,e,n){var r=n(3),i=n(55).trim,o=n(83),a=r.parseInt,s=/^[+-]?0[Xx]/,u=8!==a(o+"08")||22!==a(o+"0x16");t.exports=u?function(t,e){var n=i(String(t));return a(n,e>>>0||(s.test(n)?16:10))}:a},function(t,e,n){var r=n(36);t.exports=function(t){if("number"!=typeof t&&"Number"!=r(t))throw TypeError("Incorrect invocation");return+t}},function(t,e,n){"use strict";var r=n(7),i=n(2),o=n(64),a=n(98),s=n(73),u=n(13),c=n(58),l=Object.assign,h=Object.defineProperty;t.exports=!l||i((function(){if(r&&1!==l({b:1},l(h({},"a",{enumerable:!0,get:function(){h(this,"b",{value:3,enumerable:!1})}}),{b:2})).b)return!0;var t={},e={},n=Symbol();return t[n]=7,"abcdefghijklmnopqrst".split("").forEach((function(t){e[t]=t})),7!=l({},t)[n]||"abcdefghijklmnopqrst"!=o(l({},e)).join("")}))?function(t,e){for(var n=u(t),i=arguments.length,l=1,h=a.f,f=s.f;i>l;)for(var d,p=c(arguments[l++]),m=h?o(p).concat(h(p)):o(p),g=m.length,v=0;g>v;)d=m[v++],r&&!f.call(p,d)||(n[d]=p[d]);return n}:l},function(t,e,n){var r=n(7),i=n(64),o=n(24),a=n(73).f,s=function(t){return function(e){for(var n,s=o(e),u=i(s),c=u.length,l=0,h=[];c>l;)n=u[l++],r&&!a.call(s,n)||h.push(t?[n,s[n]]:s[n]);return h}};t.exports={entries:s(!0),values:s(!1)}},function(t,e){t.exports=Object.is||function(t,e){return t===e?0!==t||1/t==1/e:t!=t&&e!=e}},function(t,e,n){var r=n(3);t.exports=r.Promise},function(t,e,n){var r=n(63);t.exports=/(?:iphone|ipod|ipad).*applewebkit/i.test(r)},function(t,e,n){var r,i,o,a,s,u,c,l,h=n(3),f=n(17).f,d=n(111).set,p=n(150),m=n(298),g=n(48),v=h.MutationObserver||h.WebKitMutationObserver,y=h.document,b=h.process,_=h.Promise,x=f(h,"queueMicrotask"),w=x&&x.value;w||(r=function(){var t,e;for(g&&(t=b.domain)&&t.exit();i;){e=i.fn,i=i.next;try{e()}catch(t){throw i?a():o=void 0,t}}o=void 0,t&&t.enter()},p||g||m||!v||!y?_&&_.resolve?(c=_.resolve(void 0),l=c.then,a=function(){l.call(c,r)}):a=g?function(){b.nextTick(r)}:function(){d.call(h,r)}:(s=!0,u=y.createTextNode(""),new v(r).observe(u,{characterData:!0}),a=function(){u.data=s=!s})),t.exports=w||function(t){var e={fn:t,next:void 0};o&&(o.next=e),i||(i=e,a()),o=e}},function(t,e,n){var r=n(6),i=n(5),o=n(85);t.exports=function(t,e){if(r(t),i(e)&&e.constructor===t)return e;var n=o.f(t);return(0,n.resolve)(e),n.promise}},function(t,e,n){"use strict";var r=n(86).charAt,i=n(21),o=n(105),a=i.set,s=i.getterFor("String Iterator");o(String,"String",(function(t){a(this,{type:"String Iterator",string:String(t),index:0})}),(function(){var t,e=s(this),n=e.string,i=e.index;return i>=n.length?{value:void 0,done:!0}:(t=r(n,i),e.index+=t.length,{value:t,done:!1})}))},function(t,e,n){var r=n(63);t.exports=/Version\/10(?:\.\d+){1,2}(?: [\w./]+)?(?: Mobile\/\w+)? Safari\//.test(r)},function(t,e,n){var r=n(13),i=Math.floor,o="".replace,a=/\$([$&'`]|\d{1,2}|<[^>]*>)/g,s=/\$([$&'`]|\d{1,2})/g;t.exports=function(t,e,n,u,c,l){var h=n+t.length,f=u.length,d=s;return void 0!==c&&(c=r(c),d=a),o.call(l,d,(function(r,o){var a;switch(o.charAt(0)){case"$":return"$";case"&":return t;case"`":return e.slice(0,n);case"'":return e.slice(h);case"<":a=c[o.slice(1,-1)];break;default:var s=+o;if(0===s)return r;if(s>f){var l=i(s/10);return 0===l?r:l<=f?void 0===u[l-1]?o.charAt(1):u[l-1]+o.charAt(1):r}a=u[s-1]}return void 0===a?"":a}))}},function(t,e,n){var r=n(355);t.exports=function(t,e){var n=r(t);if(n%e)throw RangeError("Wrong offset");return n}},function(t,e,n){var r=n(13),i=n(10),o=n(67),a=n(102),s=n(41),u=n(9).aTypedArrayConstructor;t.exports=function(t){var e,n,c,l,h,f,d=r(t),p=arguments.length,m=p>1?arguments[1]:void 0,g=void 0!==m,v=o(d);if(null!=v&&!a(v))for(f=(h=v.call(d)).next,d=[];!(l=f.call(h)).done;)d.push(l.value);for(g&&p>2&&(m=s(m,arguments[2],2)),n=i(d.length),c=new(u(this))(n),e=0;n>e;e++)c[e]=g?m(d[e],e):d[e];return c}},function(t,e,n){"use strict";var r=n(54),i=n(51).getWeakData,o=n(6),a=n(5),s=n(45),u=n(43),c=n(16),l=n(15),h=n(21),f=h.set,d=h.getterFor,p=c.find,m=c.findIndex,g=0,v=function(t){return t.frozen||(t.frozen=new y)},y=function(){this.entries=[]},b=function(t,e){return p(t.entries,(function(t){return t[0]===e}))};y.prototype={get:function(t){var e=b(this,t);if(e)return e[1]},has:function(t){return!!b(this,t)},set:function(t,e){var n=b(this,t);n?n[1]=e:this.entries.push([t,e])},delete:function(t){var e=m(this.entries,(function(e){return e[0]===t}));return~e&&this.entries.splice(e,1),!!~e}},t.exports={getConstructor:function(t,e,n,c){var h=t((function(t,r){s(t,h,e),f(t,{type:e,id:g++,frozen:void 0}),null!=r&&u(r,t[c],{that:t,AS_ENTRIES:n})})),p=d(e),m=function(t,e,n){var r=p(t),a=i(o(e),!0);return!0===a?v(r).set(e,n):a[r.id]=n,t};return r(h.prototype,{delete:function(t){var e=p(this);if(!a(t))return!1;var n=i(t);return!0===n?v(e).delete(t):n&&l(n,e.id)&&delete n[e.id]},has:function(t){var e=p(this);if(!a(t))return!1;var n=i(t);return!0===n?v(e).has(t):n&&l(n,e.id)}}),r(h.prototype,n?{get:function(t){var e=p(this);if(a(t)){var n=i(t);return!0===n?v(e).get(t):n?n[e.id]:void 0}},set:function(t,e){return m(this,t,e)}}:{add:function(t){return m(this,t,!0)}}),h}}},function(t,e){t.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},function(t,e,n){var r=n(2),i=n(8),o=n(28),a=i("iterator");t.exports=!r((function(){var t=new URL("b?a=1&b=2&c=3","http://a"),e=t.searchParams,n="";return t.pathname="c%20d",e.forEach((function(t,r){e.delete("b"),n+=r+t})),o&&!t.toJSON||!e.sort||"http://a/c%20d?a=1&c=3"!==t.href||"3"!==e.get("c")||"a=1"!==String(new URLSearchParams("?a=1"))||!e[a]||"a"!==new URL("https://a@b").username||"b"!==new URLSearchParams(new URLSearchParams("a=b")).get("a")||"xn--e1aybc"!==new URL("http://").host||"#%D0%B1"!==new URL("http://a#").hash||"a1c3"!==n||"x"!==new URL("http://x",void 0).host}))},function(t,e,n){"use strict";n(77);var r=n(0),i=n(25),o=n(160),a=n(20),s=n(54),u=n(32),c=n(106),l=n(21),h=n(45),f=n(15),d=n(41),p=n(68),m=n(6),g=n(5),v=n(34),y=n(35),b=n(399),_=n(67),x=n(8),w=i("fetch"),S=i("Headers"),E=x("iterator"),T=l.set,M=l.getterFor("URLSearchParams"),A=l.getterFor("URLSearchParamsIterator"),L=/\+/g,D=Array(4),C=function(t){return D[t-1]||(D[t-1]=RegExp("((?:%[\\da-f]{2}){"+t+"})","gi"))},P=function(t){try{return decodeURIComponent(t)}catch(e){return t}},R=function(t){var e=t.replace(L," "),n=4;try{return decodeURIComponent(e)}catch(t){for(;n;)e=e.replace(C(n--),P);return e}},k=/[!'()~]|%20/g,O={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+"},I=function(t){return O[t]},F=function(t){return encodeURIComponent(t).replace(k,I)},z=function(t,e){if(e)for(var n,r,i=e.split("&"),o=0;o<i.length;)(n=i[o++]).length&&(r=n.split("="),t.push({key:R(r.shift()),value:R(r.join("="))}))},B=function(t){this.entries.length=0,z(this.entries,t)},N=function(t,e){if(t<e)throw TypeError("Not enough arguments")},U=c((function(t,e){T(this,{type:"URLSearchParamsIterator",iterator:b(M(t).entries),kind:e})}),"Iterator",(function(){var t=A(this),e=t.kind,n=t.iterator.next(),r=n.value;return n.done||(n.value="keys"===e?r.key:"values"===e?r.value:[r.key,r.value]),n})),j=function(){h(this,j,"URLSearchParams");var t,e,n,r,i,o,a,s,u,c=arguments.length>0?arguments[0]:void 0,l=this,d=[];if(T(l,{type:"URLSearchParams",entries:d,updateURL:function(){},updateSearchParams:B}),void 0!==c)if(g(c))if("function"==typeof(t=_(c)))for(n=(e=t.call(c)).next;!(r=n.call(e)).done;){if((a=(o=(i=b(m(r.value))).next).call(i)).done||(s=o.call(i)).done||!o.call(i).done)throw TypeError("Expected sequence with length 2");d.push({key:a.value+"",value:s.value+""})}else for(u in c)f(c,u)&&d.push({key:u,value:c[u]+""});else z(d,"string"==typeof c?"?"===c.charAt(0)?c.slice(1):c:c+"")},H=j.prototype;s(H,{append:function(t,e){N(arguments.length,2);var n=M(this);n.entries.push({key:t+"",value:e+""}),n.updateURL()},delete:function(t){N(arguments.length,1);for(var e=M(this),n=e.entries,r=t+"",i=0;i<n.length;)n[i].key===r?n.splice(i,1):i++;e.updateURL()},get:function(t){N(arguments.length,1);for(var e=M(this).entries,n=t+"",r=0;r<e.length;r++)if(e[r].key===n)return e[r].value;return null},getAll:function(t){N(arguments.length,1);for(var e=M(this).entries,n=t+"",r=[],i=0;i<e.length;i++)e[i].key===n&&r.push(e[i].value);return r},has:function(t){N(arguments.length,1);for(var e=M(this).entries,n=t+"",r=0;r<e.length;)if(e[r++].key===n)return!0;return!1},set:function(t,e){N(arguments.length,1);for(var n,r=M(this),i=r.entries,o=!1,a=t+"",s=e+"",u=0;u<i.length;u++)(n=i[u]).key===a&&(o?i.splice(u--,1):(o=!0,n.value=s));o||i.push({key:a,value:s}),r.updateURL()},sort:function(){var t,e,n,r=M(this),i=r.entries,o=i.slice();for(i.length=0,n=0;n<o.length;n++){for(t=o[n],e=0;e<n;e++)if(i[e].key>t.key){i.splice(e,0,t);break}e===n&&i.push(t)}r.updateURL()},forEach:function(t){for(var e,n=M(this).entries,r=d(t,arguments.length>1?arguments[1]:void 0,3),i=0;i<n.length;)r((e=n[i++]).value,e.key,this)},keys:function(){return new U(this,"keys")},values:function(){return new U(this,"values")},entries:function(){return new U(this,"entries")}},{enumerable:!0}),a(H,E,H.entries),a(H,"toString",(function(){for(var t,e=M(this).entries,n=[],r=0;r<e.length;)t=e[r++],n.push(F(t.key)+"="+F(t.value));return n.join("&")}),{enumerable:!0}),u(j,"URLSearchParams"),r({global:!0,forced:!o},{URLSearchParams:j}),o||"function"!=typeof w||"function"!=typeof S||r({global:!0,enumerable:!0,forced:!0},{fetch:function(t){var e,n,r,i=[t];return arguments.length>1&&(g(e=arguments[1])&&(n=e.body,"URLSearchParams"===p(n)&&((r=e.headers?new S(e.headers):new S).has("content-type")||r.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"),e=v(e,{body:y(0,String(n)),headers:y(0,r)}))),i.push(e)),w.apply(this,i)}}),t.exports={URLSearchParams:j,getState:M}},function(t,e){var n,r,i=t.exports={};function o(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function s(t){if(n===setTimeout)return setTimeout(t,0);if((n===o||!n)&&setTimeout)return n=setTimeout,setTimeout(t,0);try{return n(t,0)}catch(e){try{return n.call(null,t,0)}catch(e){return n.call(this,t,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:o}catch(t){n=o}try{r="function"==typeof clearTimeout?clearTimeout:a}catch(t){r=a}}();var u,c=[],l=!1,h=-1;function f(){l&&u&&(l=!1,u.length?c=u.concat(c):h=-1,c.length&&d())}function d(){if(!l){var t=s(f);l=!0;for(var e=c.length;e;){for(u=c,c=[];++h<e;)u&&u[h].run();h=-1,e=c.length}u=null,l=!1,function(t){if(r===clearTimeout)return clearTimeout(t);if((r===a||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(t);try{r(t)}catch(e){try{return r.call(null,t)}catch(e){return r.call(this,t)}}}(t)}}function p(t,e){this.fun=t,this.array=e}function m(){}i.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];c.push(new p(t,e)),1!==c.length||l||s(d)},p.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=m,i.addListener=m,i.once=m,i.off=m,i.removeListener=m,i.removeAllListeners=m,i.emit=m,i.prependListener=m,i.prependOnceListener=m,i.listeners=function(t){return[]},i.binding=function(t){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(t){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},function(t,e,n){(function(t,r){var i;!function(o){e&&e.nodeType,t&&t.nodeType;var a="object"==typeof r&&r;a.global!==a&&a.window!==a&&a.self;var s,u=2147483647,c=/^xn--/,l=/[^\x20-\x7E]/,h=/[\x2E\u3002\uFF0E\uFF61]/g,f={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},d=Math.floor,p=String.fromCharCode;function m(t){throw new RangeError(f[t])}function g(t,e){for(var n=t.length,r=[];n--;)r[n]=e(t[n]);return r}function v(t,e){var n=t.split("@"),r="";return n.length>1&&(r=n[0]+"@",t=n[1]),r+g((t=t.replace(h,".")).split("."),e).join(".")}function y(t){for(var e,n,r=[],i=0,o=t.length;i<o;)(e=t.charCodeAt(i++))>=55296&&e<=56319&&i<o?56320==(64512&(n=t.charCodeAt(i++)))?r.push(((1023&e)<<10)+(1023&n)+65536):(r.push(e),i--):r.push(e);return r}function b(t){return g(t,(function(t){var e="";return t>65535&&(e+=p((t-=65536)>>>10&1023|55296),t=56320|1023&t),e+=p(t)})).join("")}function _(t,e){return t+22+75*(t<26)-((0!=e)<<5)}function x(t,e,n){var r=0;for(t=n?d(t/700):t>>1,t+=d(t/e);t>455;r+=36)t=d(t/35);return d(r+36*t/(t+38))}function w(t){var e,n,r,i,o,a,s,c,l,h,f,p=[],g=t.length,v=0,y=128,_=72;for((n=t.lastIndexOf("-"))<0&&(n=0),r=0;r<n;++r)t.charCodeAt(r)>=128&&m("not-basic"),p.push(t.charCodeAt(r));for(i=n>0?n+1:0;i<g;){for(o=v,a=1,s=36;i>=g&&m("invalid-input"),((c=(f=t.charCodeAt(i++))-48<10?f-22:f-65<26?f-65:f-97<26?f-97:36)>=36||c>d((u-v)/a))&&m("overflow"),v+=c*a,!(c<(l=s<=_?1:s>=_+26?26:s-_));s+=36)a>d(u/(h=36-l))&&m("overflow"),a*=h;_=x(v-o,e=p.length+1,0==o),d(v/e)>u-y&&m("overflow"),y+=d(v/e),v%=e,p.splice(v++,0,y)}return b(p)}function S(t){var e,n,r,i,o,a,s,c,l,h,f,g,v,b,w,S=[];for(g=(t=y(t)).length,e=128,n=0,o=72,a=0;a<g;++a)(f=t[a])<128&&S.push(p(f));for(r=i=S.length,i&&S.push("-");r<g;){for(s=u,a=0;a<g;++a)(f=t[a])>=e&&f<s&&(s=f);for(s-e>d((u-n)/(v=r+1))&&m("overflow"),n+=(s-e)*v,e=s,a=0;a<g;++a)if((f=t[a])<e&&++n>u&&m("overflow"),f==e){for(c=n,l=36;!(c<(h=l<=o?1:l>=o+26?26:l-o));l+=36)w=c-h,b=36-h,S.push(p(_(h+w%b,0))),c=d(w/b);S.push(p(_(c,0))),o=x(n,v,r==i),n=0,++r}++n,++e}return S.join("")}s={version:"1.3.2",ucs2:{decode:y,encode:b},decode:w,encode:S,toASCII:function(t){return v(t,(function(t){return l.test(t)?"xn--"+S(t):t}))},toUnicode:function(t){return v(t,(function(t){return c.test(t)?w(t.slice(4).toLowerCase()):t}))}},void 0===(i=function(){return s}.call(e,n,e,t))||(t.exports=i)}()}).call(this,n(405)(t),n(57))},function(t,e,n){var r,i;!function(o,a){"use strict";t.exports?t.exports=a():void 0===(i="function"==typeof(r=a)?r.call(e,n,e,t):r)||(t.exports=i)}(0,(function(t){"use strict";var e=t&&t.IPv6;return{best:function(t){var e,n,r=t.toLowerCase().split(":"),i=r.length,o=8;for(""===r[0]&&""===r[1]&&""===r[2]?(r.shift(),r.shift()):""===r[0]&&""===r[1]?r.shift():""===r[i-1]&&""===r[i-2]&&r.pop(),-1!==r[(i=r.length)-1].indexOf(".")&&(o=7),e=0;e<i&&""!==r[e];e++);if(e<o)for(r.splice(e,1,"0000");r.length<o;)r.splice(e,0,"0000");for(var a=0;a<o;a++){n=r[a].split("");for(var s=0;s<3&&("0"===n[0]&&n.length>1);s++)n.splice(0,1);r[a]=n.join("")}var u=-1,c=0,l=0,h=-1,f=!1;for(a=0;a<o;a++)f?"0"===r[a]?l+=1:(f=!1,l>c&&(u=h,c=l)):"0"===r[a]&&(f=!0,h=a,l=1);l>c&&(u=h,c=l),c>1&&r.splice(u,c,""),i=r.length;var d="";for(""===r[0]&&(d=":"),a=0;a<i&&(d+=r[a],a!==i-1);a++)d+=":";return""===r[i-1]&&(d+=":"),d},noConflict:function(){return t.IPv6===this&&(t.IPv6=e),this}}}))},function(t,e,n){var r,i;!function(o,a){"use strict";t.exports?t.exports=a():void 0===(i="function"==typeof(r=a)?r.call(e,n,e,t):r)||(t.exports=i)}(0,(function(t){"use strict";var e=t&&t.SecondLevelDomains,n={list:{ac:" com gov mil net org ",ae:" ac co gov mil name net org pro sch ",af:" com edu gov net org ",al:" com edu gov mil net org ",ao:" co ed gv it og pb ",ar:" com edu gob gov int mil net org tur ",at:" ac co gv or ",au:" asn com csiro edu gov id net org ",ba:" co com edu gov mil net org rs unbi unmo unsa untz unze ",bb:" biz co com edu gov info net org store tv ",bh:" biz cc com edu gov info net org ",bn:" com edu gov net org ",bo:" com edu gob gov int mil net org tv ",br:" adm adv agr am arq art ato b bio blog bmd cim cng cnt com coop ecn edu eng esp etc eti far flog fm fnd fot fst g12 ggf gov imb ind inf jor jus lel mat med mil mus net nom not ntr odo org ppg pro psc psi qsl rec slg srv tmp trd tur tv vet vlog wiki zlg ",bs:" com edu gov net org ",bz:" du et om ov rg ",ca:" ab bc mb nb nf nl ns nt nu on pe qc sk yk ",ck:" biz co edu gen gov info net org ",cn:" ac ah bj com cq edu fj gd gov gs gx gz ha hb he hi hl hn jl js jx ln mil net nm nx org qh sc sd sh sn sx tj tw xj xz yn zj ",co:" com edu gov mil net nom org ",cr:" ac c co ed fi go or sa ",cy:" ac biz com ekloges gov ltd name net org parliament press pro tm ",do:" art com edu gob gov mil net org sld web ",dz:" art asso com edu gov net org pol ",ec:" com edu fin gov info med mil net org pro ",eg:" com edu eun gov mil name net org sci ",er:" com edu gov ind mil net org rochest w ",es:" com edu gob nom org ",et:" biz com edu gov info name net org ",fj:" ac biz com info mil name net org pro ",fk:" ac co gov net nom org ",fr:" asso com f gouv nom prd presse tm ",gg:" co net org ",gh:" com edu gov mil org ",gn:" ac com gov net org ",gr:" com edu gov mil net org ",gt:" com edu gob ind mil net org ",gu:" com edu gov net org ",hk:" com edu gov idv net org ",hu:" 2000 agrar bolt casino city co erotica erotika film forum games hotel info ingatlan jogasz konyvelo lakas media news org priv reklam sex shop sport suli szex tm tozsde utazas video ",id:" ac co go mil net or sch web ",il:" ac co gov idf k12 muni net org ",in:" ac co edu ernet firm gen gov i ind mil net nic org res ",iq:" com edu gov i mil net org ",ir:" ac co dnssec gov i id net org sch ",it:" edu gov ",je:" co net org ",jo:" com edu gov mil name net org sch ",jp:" ac ad co ed go gr lg ne or ",ke:" ac co go info me mobi ne or sc ",kh:" com edu gov mil net org per ",ki:" biz com de edu gov info mob net org tel ",km:" asso com coop edu gouv k medecin mil nom notaires pharmaciens presse tm veterinaire ",kn:" edu gov net org ",kr:" ac busan chungbuk chungnam co daegu daejeon es gangwon go gwangju gyeongbuk gyeonggi gyeongnam hs incheon jeju jeonbuk jeonnam k kg mil ms ne or pe re sc seoul ulsan ",kw:" com edu gov net org ",ky:" com edu gov net org ",kz:" com edu gov mil net org ",lb:" com edu gov net org ",lk:" assn com edu gov grp hotel int ltd net ngo org sch soc web ",lr:" com edu gov net org ",lv:" asn com conf edu gov id mil net org ",ly:" com edu gov id med net org plc sch ",ma:" ac co gov m net org press ",mc:" asso tm ",me:" ac co edu gov its net org priv ",mg:" com edu gov mil nom org prd tm ",mk:" com edu gov inf name net org pro ",ml:" com edu gov net org presse ",mn:" edu gov org ",mo:" com edu gov net org ",mt:" com edu gov net org ",mv:" aero biz com coop edu gov info int mil museum name net org pro ",mw:" ac co com coop edu gov int museum net org ",mx:" com edu gob net org ",my:" com edu gov mil name net org sch ",nf:" arts com firm info net other per rec store web ",ng:" biz com edu gov mil mobi name net org sch ",ni:" ac co com edu gob mil net nom org ",np:" com edu gov mil net org ",nr:" biz com edu gov info net org ",om:" ac biz co com edu gov med mil museum net org pro sch ",pe:" com edu gob mil net nom org sld ",ph:" com edu gov i mil net ngo org ",pk:" biz com edu fam gob gok gon gop gos gov net org web ",pl:" art bialystok biz com edu gda gdansk gorzow gov info katowice krakow lodz lublin mil net ngo olsztyn org poznan pwr radom slupsk szczecin torun warszawa waw wroc wroclaw zgora ",pr:" ac biz com edu est gov info isla name net org pro prof ",ps:" com edu gov net org plo sec ",pw:" belau co ed go ne or ",ro:" arts com firm info nom nt org rec store tm www ",rs:" ac co edu gov in org ",sb:" com edu gov net org ",sc:" com edu gov net org ",sh:" co com edu gov net nom org ",sl:" com edu gov net org ",st:" co com consulado edu embaixada gov mil net org principe saotome store ",sv:" com edu gob org red ",sz:" ac co org ",tr:" av bbs bel biz com dr edu gen gov info k12 name net org pol tel tsk tv web ",tt:" aero biz cat co com coop edu gov info int jobs mil mobi museum name net org pro tel travel ",tw:" club com ebiz edu game gov idv mil net org ",mu:" ac co com gov net or org ",mz:" ac co edu gov org ",na:" co com ",nz:" ac co cri geek gen govt health iwi maori mil net org parliament school ",pa:" abo ac com edu gob ing med net nom org sld ",pt:" com edu gov int net nome org publ ",py:" com edu gov mil net org ",qa:" com edu gov mil net org ",re:" asso com nom ",ru:" ac adygeya altai amur arkhangelsk astrakhan bashkiria belgorod bir bryansk buryatia cbg chel chelyabinsk chita chukotka chuvashia com dagestan e-burg edu gov grozny int irkutsk ivanovo izhevsk jar joshkar-ola kalmykia kaluga kamchatka karelia kazan kchr kemerovo khabarovsk khakassia khv kirov koenig komi kostroma kranoyarsk kuban kurgan kursk lipetsk magadan mari mari-el marine mil mordovia mosreg msk murmansk nalchik net nnov nov novosibirsk nsk omsk orenburg org oryol penza perm pp pskov ptz rnd ryazan sakhalin samara saratov simbirsk smolensk spb stavropol stv surgut tambov tatarstan tom tomsk tsaritsyn tsk tula tuva tver tyumen udm udmurtia ulan-ude vladikavkaz vladimir vladivostok volgograd vologda voronezh vrn vyatka yakutia yamal yekaterinburg yuzhno-sakhalinsk ",rw:" ac co com edu gouv gov int mil net ",sa:" com edu gov med net org pub sch ",sd:" com edu gov info med net org tv ",se:" a ac b bd c d e f g h i k l m n o org p parti pp press r s t tm u w x y z ",sg:" com edu gov idn net org per ",sn:" art com edu gouv org perso univ ",sy:" com edu gov mil net news org ",th:" ac co go in mi net or ",tj:" ac biz co com edu go gov info int mil name net nic org test web ",tn:" agrinet com defense edunet ens fin gov ind info intl mincom nat net org perso rnrt rns rnu tourism ",tz:" ac co go ne or ",ua:" biz cherkassy chernigov chernovtsy ck cn co com crimea cv dn dnepropetrovsk donetsk dp edu gov if in ivano-frankivsk kh kharkov kherson khmelnitskiy kiev kirovograd km kr ks kv lg lugansk lutsk lviv me mk net nikolaev od odessa org pl poltava pp rovno rv sebastopol sumy te ternopil uzhgorod vinnica vn zaporizhzhe zhitomir zp zt ",ug:" ac co go ne or org sc ",uk:" ac bl british-library co cym gov govt icnet jet lea ltd me mil mod national-library-scotland nel net nhs nic nls org orgn parliament plc police sch scot soc ",us:" dni fed isa kids nsn ",uy:" com edu gub mil net org ",ve:" co com edu gob info mil net org web ",vi:" co com k12 net org ",vn:" ac biz com edu gov health info int name net org pro ",ye:" co com gov ltd me net org plc ",yu:" ac co edu gov org ",za:" ac agric alt bourse city co cybernet db edu gov grondar iaccess imt inca landesign law mil net ngo nis nom olivetti org pix school tm web ",zm:" ac co com edu gov net org sch ",com:"ar br cn de eu gb gr hu jpn kr no qc ru sa se uk us uy za ",net:"gb jp se uk ",org:"ae",de:"com "},has:function(t){var e=t.lastIndexOf(".");if(e<=0||e>=t.length-1)return!1;var r=t.lastIndexOf(".",e-1);if(r<=0||r>=e-1)return!1;var i=n.list[t.slice(e+1)];return!!i&&i.indexOf(" "+t.slice(r+1,e)+" ")>=0},is:function(t){var e=t.lastIndexOf(".");if(e<=0||e>=t.length-1)return!1;if(t.lastIndexOf(".",e-1)>=0)return!1;var r=n.list[t.slice(e+1)];return!!r&&r.indexOf(" "+t.slice(0,e)+" ")>=0},get:function(t){var e=t.lastIndexOf(".");if(e<=0||e>=t.length-1)return null;var r=t.lastIndexOf(".",e-1);if(r<=0||r>=e-1)return null;var i=n.list[t.slice(e+1)];return i?i.indexOf(" "+t.slice(r+1,e)+" ")<0?null:t.slice(r+1):null},noConflict:function(){return t.SecondLevelDomains===this&&(t.SecondLevelDomains=e),this}};return n}))},function(t,e,n){var r,i,o;i=[n(404)],void 0===(o="function"==typeof(r=function(t){var e,n;function r(t,e){if(t.indexOf)return t.indexOf(e);for(var n=t.length;n--;)if(t[n]===e)return n;return-1}function i(t,e){var n=r(t,e);-1!==n&&t.splice(n,1)}function o(t,e){return"[object "+e+"]"===Object.prototype.toString.call(t)}function a(t){return o(t,"RegExp")}function s(t){return o(t,"Array")}function u(t){return"function"==typeof t}function c(t){return null===t||"null"===t?null:"true"===t||"false"!==t&&(void 0===t||"undefined"===t?void 0:""===t||isNaN(t)?t:parseFloat(t))}function l(t,e){for(var n,r,i,o,a=(t||"").replace("?","").split("&"),u=-1,l={};r=a[++u];)n=r.indexOf("="),o=r.substring(0,n),i=decodeURIComponent(r.substring(n+1)),!1!==e&&(i=c(i)),o in l?s(l[o])?l[o].push(i):l[o]=[l[o],i]:l[o]=i;return l}function h(){this.bypassed=new t.Signal,this.routed=new t.Signal,this._routes=[],this._prevRoutes=[],this._piped=[],this.resetState()}function f(e,n,r,i){var o=a(e),s=i.patternLexer;this._router=i,this._pattern=e,this._paramsIds=o?null:s.getParamIds(e),this._optionalParamsIds=o?null:s.getOptionalParamsIds(e),this._matchRegexp=o?e:s.compilePattern(e,i.ignoreCase),this.matched=new t.Signal,this.switched=new t.Signal,n&&this.matched.add(n),this._priority=r||0}return n=""===/t(.+)?/.exec("t")[1],h.prototype={greedy:!1,greedyEnabled:!0,ignoreCase:!0,ignoreState:!1,shouldTypecast:!1,normalizeFn:null,resetState:function(){this._prevRoutes.length=0,this._prevMatchedRequest=null,this._prevBypassedRequest=null},create:function(){return new h},addRoute:function(t,e,n){var r=new f(t,e,n,this);return this._sortedInsert(r),r},removeRoute:function(t){i(this._routes,t),t._destroy()},removeAllRoutes:function(){for(var t=this.getNumRoutes();t--;)this._routes[t]._destroy();this._routes.length=0},parse:function(t,e){if(t=t||"",e=e||[],this.ignoreState||t!==this._prevMatchedRequest&&t!==this._prevBypassedRequest){var n,r=this._getMatchedRoutes(t),i=0,o=r.length;if(o)for(this._prevMatchedRequest=t,this._notifyPrevRoutes(r,t),this._prevRoutes=r;i<o;)(n=r[i]).route.matched.dispatch.apply(n.route.matched,e.concat(n.params)),n.isFirst=!i,this.routed.dispatch.apply(this.routed,e.concat([t,n])),i+=1;else this._prevBypassedRequest=t,this.bypassed.dispatch.apply(this.bypassed,e.concat([t]));this._pipeParse(t,e)}},_notifyPrevRoutes:function(t,e){for(var n,r=0;n=this._prevRoutes[r++];)n.route.switched&&this._didSwitch(n.route,t)&&n.route.switched.dispatch(e)},_didSwitch:function(t,e){for(var n,r=0;n=e[r++];)if(n.route===t)return!1;return!0},_pipeParse:function(t,e){for(var n,r=0;n=this._piped[r++];)n.parse(t,e)},getNumRoutes:function(){return this._routes.length},_sortedInsert:function(t){var e=this._routes,n=e.length;do{--n}while(e[n]&&t._priority<=e[n]._priority);e.splice(n+1,0,t)},_getMatchedRoutes:function(t){for(var e,n=[],r=this._routes,i=r.length;(e=r[--i])&&((!n.length||this.greedy||e.greedy)&&e.match(t)&&n.push({route:e,params:e._getParamsArray(t)}),this.greedyEnabled||!n.length););return n},pipe:function(t){this._piped.push(t)},unpipe:function(t){i(this._piped,t)},toString:function(){return"[crossroads numRoutes:"+this.getNumRoutes()+"]"}},(e=new h).VERSION="0.12.2",e.NORM_AS_ARRAY=function(t,e){return[e.vals_]},e.NORM_AS_OBJECT=function(t,e){return[e]},f.prototype={greedy:!1,rules:void 0,match:function(t){return t=t||"",this._matchRegexp.test(t)&&this._validateParams(t)},_validateParams:function(t){var e,n=this.rules,r=this._getParamsObject(t);for(e in n)if("normalize_"!==e&&n.hasOwnProperty(e)&&!this._isValidParam(t,e,r))return!1;return!0},_isValidParam:function(t,e,n){var i=this.rules[e],o=n[e],c=!1,l=0===e.indexOf("?");return null==o&&this._optionalParamsIds&&-1!==r(this._optionalParamsIds,e)?c=!0:a(i)?(l&&(o=n[e+"_"]),c=i.test(o)):s(i)?(l&&(o=n[e+"_"]),c=this._isValidArrayRule(i,o)):u(i)&&(c=i(o,t,n)),c},_isValidArrayRule:function(t,e){if(!this._router.ignoreCase)return-1!==r(t,e);"string"==typeof e&&(e=e.toLowerCase());for(var n,i=t.length;i--;)if(("string"==typeof(n=t[i])?n.toLowerCase():n)===e)return!0;return!1},_getParamsObject:function(t){for(var e,i,o=this._router.shouldTypecast,a=this._router.patternLexer.getParamValues(t,this._matchRegexp,o),s={},u=a.length;u--;)i=a[u],this._paramsIds&&(0===(e=this._paramsIds[u]).indexOf("?")&&i&&(s[e+"_"]=i,i=l(i,o),a[u]=i),n&&""===i&&-1!==r(this._optionalParamsIds,e)&&(i=void 0,a[u]=i),s[e]=i),s[u]=i;return s.request_=o?c(t):t,s.vals_=a,s},_getParamsArray:function(t){var e=this.rules?this.rules.normalize_:null;return(e=e||this._router.normalizeFn)&&u(e)?e(t,this._getParamsObject(t)):this._getParamsObject(t).vals_},interpolate:function(t){var e=this._router.patternLexer.interpolate(this._pattern,t);if(!this._validateParams(e))throw new Error("Generated string doesn't validate against `Route.rules`.");return e},dispose:function(){this._router.removeRoute(this)},_destroy:function(){this.matched.dispose(),this.switched.dispose(),this.matched=this.switched=this._pattern=this._matchRegexp=null},toString:function(){return'[Route pattern:"'+this._pattern+'", numListeners:'+this.matched.getNumListeners()+"]"}},h.prototype.patternLexer=function(){var t=/[\\.+*?\^$\[\](){}\/'#]/g,e=/^\/|\/$/g,n=/\/$/g,r=/(?:\{|:)([^}:]+)(?:\}|:)/g,i={OS:{rgx:/([:}]|\w(?=\/))\/?(:|(?:\{\?))/g,save:"$1{{id}}$2",res:"\\/?"},RS:{rgx:/([:}])\/?(\{)/g,save:"$1{{id}}$2",res:"\\/"},RQ:{rgx:/\{\?([^}]+)\}/g,res:"\\?([^#]+)"},OQ:{rgx:/:\?([^:]+):/g,res:"(?:\\?([^#]*))?"},OR:{rgx:/:([^:]+)\*:/g,res:"(.*)?"},RR:{rgx:/\{([^}]+)\*\}/g,res:"(.+)"},RP:{rgx:/\{([^}]+)\}/g,res:"([^\\/?]+)"},OP:{rgx:/:([^:]+):/g,res:"([^\\/?]+)?/?"}},o=1;function a(t,e){var n,r=[];for(t.lastIndex=0;n=t.exec(e);)r.push(n[1]);return r}function u(t,e,n){var r,o;for(o in i)i.hasOwnProperty(o)&&(r=i[o],t=t.replace(r[e],r[n]));return t}return function(){var t,e;for(t in i)i.hasOwnProperty(t)&&((e=i[t]).id="__CR_"+t+"__",e.save="save"in e?e.save.replace("{{id}}",e.id):e.id,e.rRestore=new RegExp(e.id,"g"))}(),{strict:function(){o=2},loose:function(){o=1},legacy:function(){o=3},getParamIds:function(t){return a(r,t)},getOptionalParamsIds:function(t){return a(i.OP.rgx,t)},getParamValues:function(t,e,n){var r=e.exec(t);return r&&(r.shift(),n&&(r=function(t){for(var e=t.length,n=[];e--;)n[e]=c(t[e]);return n}(r))),r},compilePattern:function(r,i){return(r=r||"")&&(1===o?r=r.replace(e,""):3===o&&(r=r.replace(n,"")),r=u(r,"rgx","save"),r=u(r=r.replace(t,"\\$&"),"rRestore","res"),1===o&&(r="\\/?"+r)),2!==o&&(r+="\\/?"),new RegExp("^"+r+"$",i?"i":"")},interpolate:function(t,e){if(e=e||{},"string"!=typeof t)throw new Error("Route pattern should be a string.");return i.OS.trail||(i.OS.trail=new RegExp("(?:"+i.OS.id+")+$")),t.replace(i.OS.rgx,i.OS.save).replace(r,(function(t,n){var r;if(n="?"===n.substr(0,1)?n.substr(1):n,null!=e[n]){if("object"==typeof e[n]){var i,o=[];for(var a in e[n])if(s(i=e[n][a]))for(var u in i)"[]"==a.slice(-2)?o.push(encodeURI(a.slice(0,-2))+"[]="+encodeURI(i[u])):o.push(encodeURI(a+"="+i[u]));else o.push(encodeURI(a+"="+i));r="?"+o.join("&")}else r=String(e[n]);if(-1===t.indexOf("*")&&-1!==r.indexOf("/"))throw new Error('Invalid value "'+r+'" for segment "'+t+'".')}else{if(-1!==t.indexOf("{"))throw new Error("The segment "+t+" is required.");r=""}return r})).replace(i.OS.trail,"").replace(i.OS.rRestore,"/")}}}(),e})?r.apply(e,i):r)||(t.exports=o)},function(t,e,n){"use strict";const r=n(406),i=/\s?<!doctype html>|(<html\b[^>]*>|<body\b[^>]*>|<x-[^>]+>)+/i,o=new RegExp(r.map(t=>`<${t}\\b[^>]*>`).join("|"),"i");t.exports=t=>i.test(t)||o.test(t)},function(t,e,n){var r,i,o;i=[],void 0===(o="function"==typeof(r=function(){return function(t){function e(t){return" "===t||"\t"===t||"\n"===t||"\f"===t||"\r"===t}function n(e){var n,r=e.exec(t.substring(m));if(r)return n=r[0],m+=n.length,n}for(var r,i,o,a,s,u=t.length,c=/^[ \t\n\r\u000c]+/,l=/^[, \t\n\r\u000c]+/,h=/^[^ \t\n\r\u000c]+/,f=/[,]+$/,d=/^\d+$/,p=/^-?(?:[0-9]+|[0-9]*\.[0-9]+)(?:[eE][+-]?[0-9]+)?$/,m=0,g=[];;){if(n(l),m>=u)return g;r=n(h),i=[],","===r.slice(-1)?(r=r.replace(f,""),y()):v()}function v(){for(n(c),o="",a="in descriptor";;){if(s=t.charAt(m),"in descriptor"===a)if(e(s))o&&(i.push(o),o="",a="after descriptor");else{if(","===s)return m+=1,o&&i.push(o),void y();if("("===s)o+=s,a="in parens";else{if(""===s)return o&&i.push(o),void y();o+=s}}else if("in parens"===a)if(")"===s)o+=s,a="in descriptor";else{if(""===s)return i.push(o),void y();o+=s}else if("after descriptor"===a)if(e(s));else{if(""===s)return void y();a="in descriptor",m-=1}m+=1}}function y(){var e,n,o,a,s,u,c,l,h,f=!1,m={};for(a=0;a<i.length;a++)u=(s=i[a])[s.length-1],c=s.substring(0,s.length-1),l=parseInt(c,10),h=parseFloat(c),d.test(c)&&"w"===u?((e||n)&&(f=!0),0===l?f=!0:e=l):p.test(c)&&"x"===u?((e||n||o)&&(f=!0),h<0?f=!0:n=h):d.test(c)&&"h"===u?((o||n)&&(f=!0),0===l?f=!0:o=l):f=!0;f?console&&console.log&&console.log("Invalid srcset descriptor found in '"+t+"' at '"+s+"'."):(m.url=r,e&&(m.w=e),n&&(m.d=n),o&&(m.h=o),g.push(m))}}})?r.apply(e,i):r)||(t.exports=o)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.findClosestIndex=function(t,e,n){for(var r={index:-1,distance:Number.POSITIVE_INFINITY,value:0},i=0;i<t.length;i++){var o=t[i],a=o;if(n){var s=n(o,i,t);switch(s){case!1:continue;case!0:break;default:a=s}}if("number"!=typeof a)throw new TypeError("Expected a number value. Received "+a+".");var u=Math.abs(a-e);if(0===u)return i;u<r.distance&&(r={index:i,distance:u,value:a})}return r.index},e.findClosest=function(t,n,r){return t[e.findClosestIndex(t,n,r)]},e.default=e.findClosest},function(t,e){function n(t,e,n){var r,i,o,a,s;function u(){var c=Date.now()-a;c<e&&c>=0?r=setTimeout(u,e-c):(r=null,n||(s=t.apply(o,i),o=i=null))}null==e&&(e=100);var c=function(){o=this,i=arguments,a=Date.now();var c=n&&!r;return r||(r=setTimeout(u,e)),c&&(s=t.apply(o,i),o=i=null),s};return c.clear=function(){r&&(clearTimeout(r),r=null)},c.flush=function(){r&&(s=t.apply(o,i),o=i=null,clearTimeout(r),r=null)},c}n.debounce=n,t.exports=n},function(t,e,n){n(409),t.exports=n(410)},function(t,e,n){n(173),n(174),n(175),n(176),n(177),n(178),n(179),n(180),n(181),n(182),n(183),n(184),n(185),n(186),n(187),n(188),n(189),n(190),n(191),n(192),n(193),n(194),n(195),n(196),n(197),n(198),n(199),n(201),n(202),n(203),n(77),n(204),n(205),n(206),n(207),n(208),n(209),n(210),n(211),n(212),n(213),n(214),n(215),n(216),n(217),n(218),n(220),n(221),n(222),n(223),n(224),n(226),n(227),n(229),n(230),n(231),n(232),n(233),n(234),n(235),n(236),n(237),n(238),n(239),n(240),n(241),n(242),n(243),n(244),n(246),n(247),n(248),n(249),n(250),n(251),n(252),n(253),n(254),n(255),n(256),n(257),n(258),n(260),n(261),n(262),n(263),n(264),n(265),n(266),n(267),n(268),n(269),n(270),n(271),n(272),n(273),n(274),n(275),n(276),n(277),n(278),n(279),n(280),n(281),n(282),n(283),n(284),n(285),n(286),n(287),n(288),n(289),n(290),n(291),n(292),n(294),n(295),n(296),n(297),n(300),n(301),n(302),n(303),n(304),n(305),n(306),n(307),n(308),n(309),n(310),n(311),n(312),n(313),n(314),n(315),n(316),n(317),n(113),n(318),n(319),n(320),n(321),n(322),n(323),n(324),n(325),n(326),n(153),n(327),n(328),n(329),n(330),n(331),n(332),n(333),n(334),n(335),n(336),n(337),n(338),n(339),n(340),n(341),n(342),n(343),n(344),n(345),n(346),n(347),n(348),n(349),n(350),n(351),n(352),n(353),n(354),n(356),n(357),n(358),n(359),n(360),n(361),n(362),n(363),n(364),n(365),n(366),n(367),n(369),n(370),n(371),n(372),n(373),n(374),n(375),n(376),n(377),n(378),n(379),n(380),n(381),n(382),n(383),n(384),n(385),n(386),n(387),n(388),n(389),n(390),n(391),n(392),n(393),n(394),n(395),n(396),n(397),n(400),n(161),t.exports=n(96)},function(t,e,n){"use strict";var r=n(0),i=n(3),o=n(25),a=n(28),s=n(7),u=n(99),c=n(126),l=n(2),h=n(15),f=n(49),d=n(5),p=n(6),m=n(13),g=n(24),v=n(31),y=n(35),b=n(34),_=n(64),x=n(47),w=n(128),S=n(98),E=n(17),T=n(11),M=n(73),A=n(19),L=n(20),D=n(75),C=n(74),P=n(60),R=n(59),k=n(8),O=n(129),I=n(23),F=n(32),z=n(21),B=n(16).forEach,N=C("hidden"),U=k("toPrimitive"),j=z.set,H=z.getterFor("Symbol"),V=Object.prototype,G=i.Symbol,W=o("JSON","stringify"),q=E.f,X=T.f,Y=w.f,Z=M.f,J=D("symbols"),Q=D("op-symbols"),K=D("string-to-symbol-registry"),$=D("symbol-to-string-registry"),tt=D("wks"),et=i.QObject,nt=!et||!et.prototype||!et.prototype.findChild,rt=s&&l((function(){return 7!=b(X({},"a",{get:function(){return X(this,"a",{value:7}).a}})).a}))?function(t,e,n){var r=q(V,e);r&&delete V[e],X(t,e,n),r&&t!==V&&X(V,e,r)}:X,it=function(t,e){var n=J[t]=b(G.prototype);return j(n,{type:"Symbol",tag:t,description:e}),s||(n.description=e),n},ot=c?function(t){return"symbol"==typeof t}:function(t){return Object(t)instanceof G},at=function(t,e,n){t===V&&at(Q,e,n),p(t);var r=v(e,!0);return p(n),h(J,r)?(n.enumerable?(h(t,N)&&t[N][r]&&(t[N][r]=!1),n=b(n,{enumerable:y(0,!1)})):(h(t,N)||X(t,N,y(1,{})),t[N][r]=!0),rt(t,r,n)):X(t,r,n)},st=function(t,e){p(t);var n=g(e),r=_(n).concat(ht(n));return B(r,(function(e){s&&!ut.call(n,e)||at(t,e,n[e])})),t},ut=function(t){var e=v(t,!0),n=Z.call(this,e);return!(this===V&&h(J,e)&&!h(Q,e))&&(!(n||!h(this,e)||!h(J,e)||h(this,N)&&this[N][e])||n)},ct=function(t,e){var n=g(t),r=v(e,!0);if(n!==V||!h(J,r)||h(Q,r)){var i=q(n,r);return!i||!h(J,r)||h(n,N)&&n[N][r]||(i.enumerable=!0),i}},lt=function(t){var e=Y(g(t)),n=[];return B(e,(function(t){h(J,t)||h(P,t)||n.push(t)})),n},ht=function(t){var e=t===V,n=Y(e?Q:g(t)),r=[];return B(n,(function(t){!h(J,t)||e&&!h(V,t)||r.push(J[t])})),r};(u||(L((G=function(){if(this instanceof G)throw TypeError("Symbol is not a constructor");var t=arguments.length&&void 0!==arguments[0]?String(arguments[0]):void 0,e=R(t),n=function(t){this===V&&n.call(Q,t),h(this,N)&&h(this[N],e)&&(this[N][e]=!1),rt(this,e,y(1,t))};return s&&nt&&rt(V,e,{configurable:!0,set:n}),it(e,t)}).prototype,"toString",(function(){return H(this).tag})),L(G,"withoutSetter",(function(t){return it(R(t),t)})),M.f=ut,T.f=at,E.f=ct,x.f=w.f=lt,S.f=ht,O.f=function(t){return it(k(t),t)},s&&(X(G.prototype,"description",{configurable:!0,get:function(){return H(this).description}}),a||L(V,"propertyIsEnumerable",ut,{unsafe:!0}))),r({global:!0,wrap:!0,forced:!u,sham:!u},{Symbol:G}),B(_(tt),(function(t){I(t)})),r({target:"Symbol",stat:!0,forced:!u},{for:function(t){var e=String(t);if(h(K,e))return K[e];var n=G(e);return K[e]=n,$[n]=e,n},keyFor:function(t){if(!ot(t))throw TypeError(t+" is not a symbol");if(h($,t))return $[t]},useSetter:function(){nt=!0},useSimple:function(){nt=!1}}),r({target:"Object",stat:!0,forced:!u,sham:!s},{create:function(t,e){return void 0===e?b(t):st(b(t),e)},defineProperty:at,defineProperties:st,getOwnPropertyDescriptor:ct}),r({target:"Object",stat:!0,forced:!u},{getOwnPropertyNames:lt,getOwnPropertySymbols:ht}),r({target:"Object",stat:!0,forced:l((function(){S.f(1)}))},{getOwnPropertySymbols:function(t){return S.f(m(t))}}),W)&&r({target:"JSON",stat:!0,forced:!u||l((function(){var t=G();return"[null]"!=W([t])||"{}"!=W({a:t})||"{}"!=W(Object(t))}))},{stringify:function(t,e,n){for(var r,i=[t],o=1;arguments.length>o;)i.push(arguments[o++]);if(r=e,(d(e)||void 0!==t)&&!ot(t))return f(e)||(e=function(t,e){if("function"==typeof r&&(e=r.call(this,t,e)),!ot(e))return e}),i[1]=e,W.apply(null,i)}});G.prototype[U]||A(G.prototype,U,G.prototype.valueOf),F(G,"Symbol"),P[N]=!0},function(t,e,n){"use strict";var r=n(0),i=n(7),o=n(3),a=n(15),s=n(5),u=n(11).f,c=n(124),l=o.Symbol;if(i&&"function"==typeof l&&(!("description"in l.prototype)||void 0!==l().description)){var h={},f=function(){var t=arguments.length<1||void 0===arguments[0]?void 0:String(arguments[0]),e=this instanceof f?new l(t):void 0===t?l():l(t);return""===t&&(h[e]=!0),e};c(f,l);var d=f.prototype=l.prototype;d.constructor=f;var p=d.toString,m="Symbol(test)"==String(l("test")),g=/^Symbol\((.*)\)[^)]+$/;u(d,"description",{configurable:!0,get:function(){var t=s(this)?this.valueOf():this,e=p.call(t);if(a(h,t))return"";var n=m?e.slice(7,-1):e.replace(g,"$1");return""===n?void 0:n}}),r({global:!0,forced:!0},{Symbol:f})}},function(t,e,n){n(23)("asyncIterator")},function(t,e,n){n(23)("hasInstance")},function(t,e,n){n(23)("isConcatSpreadable")},function(t,e,n){n(23)("iterator")},function(t,e,n){n(23)("match")},function(t,e,n){n(23)("matchAll")},function(t,e,n){n(23)("replace")},function(t,e,n){n(23)("search")},function(t,e,n){n(23)("species")},function(t,e,n){n(23)("split")},function(t,e,n){n(23)("toPrimitive")},function(t,e,n){n(23)("toStringTag")},function(t,e,n){n(23)("unscopables")},function(t,e,n){"use strict";var r=n(0),i=n(30),o=n(42),a=n(34),s=n(19),u=n(35),c=n(43),l=function(t,e){var n=this;if(!(n instanceof l))return new l(t,e);o&&(n=o(new Error(void 0),i(n))),void 0!==e&&s(n,"message",String(e));var r=[];return c(t,r.push,{that:r}),s(n,"errors",r),n};l.prototype=a(Error.prototype,{constructor:u(5,l),message:u(5,""),name:u(5,"AggregateError")}),r({global:!0},{AggregateError:l})},function(t,e,n){"use strict";var r=n(0),i=n(2),o=n(49),a=n(5),s=n(13),u=n(10),c=n(50),l=n(65),h=n(69),f=n(8),d=n(52),p=f("isConcatSpreadable"),m=d>=51||!i((function(){var t=[];return t[p]=!1,t.concat()[0]!==t})),g=h("concat"),v=function(t){if(!a(t))return!1;var e=t[p];return void 0!==e?!!e:o(t)};r({target:"Array",proto:!0,forced:!m||!g},{concat:function(t){var e,n,r,i,o,a=s(this),h=l(a,0),f=0;for(e=-1,r=arguments.length;e<r;e++)if(v(o=-1===e?a:arguments[e])){if(f+(i=u(o.length))>9007199254740991)throw TypeError("Maximum allowed index exceeded");for(n=0;n<i;n++,f++)n in o&&c(h,f,o[n])}else{if(f>=9007199254740991)throw TypeError("Maximum allowed index exceeded");c(h,f++,o)}return h.length=f,h}})},function(t,e,n){var r=n(0),i=n(132),o=n(44);r({target:"Array",proto:!0},{copyWithin:i}),o("copyWithin")},function(t,e,n){"use strict";var r=n(0),i=n(16).every;r({target:"Array",proto:!0,forced:!n(37)("every")},{every:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0)}})},function(t,e,n){var r=n(0),i=n(104),o=n(44);r({target:"Array",proto:!0},{fill:i}),o("fill")},function(t,e,n){"use strict";var r=n(0),i=n(16).filter;r({target:"Array",proto:!0,forced:!n(69)("filter")},{filter:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0)}})},function(t,e,n){"use strict";var r=n(0),i=n(16).find,o=n(44),a=!0;"find"in[]&&Array(1).find((function(){a=!1})),r({target:"Array",proto:!0,forced:a},{find:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0)}}),o("find")},function(t,e,n){"use strict";var r=n(0),i=n(16).findIndex,o=n(44),a=!0;"findIndex"in[]&&Array(1).findIndex((function(){a=!1})),r({target:"Array",proto:!0,forced:a},{findIndex:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0)}}),o("findIndex")},function(t,e,n){"use strict";var r=n(0),i=n(133),o=n(13),a=n(10),s=n(29),u=n(65);r({target:"Array",proto:!0},{flat:function(){var t=arguments.length?arguments[0]:void 0,e=o(this),n=a(e.length),r=u(e,0);return r.length=i(r,e,e,n,0,void 0===t?1:s(t)),r}})},function(t,e,n){"use strict";var r=n(0),i=n(133),o=n(13),a=n(10),s=n(22),u=n(65);r({target:"Array",proto:!0},{flatMap:function(t){var e,n=o(this),r=a(n.length);return s(t),(e=u(n,0)).length=i(e,n,n,r,0,1,t,arguments.length>1?arguments[1]:void 0),e}})},function(t,e,n){"use strict";var r=n(0),i=n(134);r({target:"Array",proto:!0,forced:[].forEach!=i},{forEach:i})},function(t,e,n){var r=n(0),i=n(135);r({target:"Array",stat:!0,forced:!n(76)((function(t){Array.from(t)}))},{from:i})},function(t,e,n){var r=n(6),i=n(131);t.exports=function(t,e,n,o){try{return o?e(r(n)[0],n[1]):e(n)}catch(e){throw i(t),e}}},function(t,e,n){"use strict";var r=n(0),i=n(61).includes,o=n(44);r({target:"Array",proto:!0},{includes:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0)}}),o("includes")},function(t,e,n){"use strict";var r=n(0),i=n(61).indexOf,o=n(37),a=[].indexOf,s=!!a&&1/[1].indexOf(1,-0)<0,u=o("indexOf");r({target:"Array",proto:!0,forced:s||!u},{indexOf:function(t){return s?a.apply(this,arguments)||0:i(this,t,arguments.length>1?arguments[1]:void 0)}})},function(t,e,n){n(0)({target:"Array",stat:!0},{isArray:n(49)})},function(t,e,n){"use strict";var r=n(0),i=n(58),o=n(24),a=n(37),s=[].join,u=i!=Object,c=a("join",",");r({target:"Array",proto:!0,forced:u||!c},{join:function(t){return s.call(o(this),void 0===t?",":t)}})},function(t,e,n){var r=n(0),i=n(137);r({target:"Array",proto:!0,forced:i!==[].lastIndexOf},{lastIndexOf:i})},function(t,e,n){"use strict";var r=n(0),i=n(16).map;r({target:"Array",proto:!0,forced:!n(69)("map")},{map:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0)}})},function(t,e,n){"use strict";var r=n(0),i=n(2),o=n(50);r({target:"Array",stat:!0,forced:i((function(){function t(){}return!(Array.of.call(t)instanceof t)}))},{of:function(){for(var t=0,e=arguments.length,n=new("function"==typeof this?this:Array)(e);e>t;)o(n,t,arguments[t++]);return n.length=e,n}})},function(t,e,n){"use strict";var r=n(0),i=n(78).left,o=n(37),a=n(52),s=n(48);r({target:"Array",proto:!0,forced:!o("reduce")||!s&&a>79&&a<83},{reduce:function(t){return i(this,t,arguments.length,arguments.length>1?arguments[1]:void 0)}})},function(t,e,n){"use strict";var r=n(0),i=n(78).right,o=n(37),a=n(52),s=n(48);r({target:"Array",proto:!0,forced:!o("reduceRight")||!s&&a>79&&a<83},{reduceRight:function(t){return i(this,t,arguments.length,arguments.length>1?arguments[1]:void 0)}})},function(t,e,n){"use strict";var r=n(0),i=n(49),o=[].reverse,a=[1,2];r({target:"Array",proto:!0,forced:String(a)===String(a.reverse())},{reverse:function(){return i(this)&&(this.length=this.length),o.call(this)}})},function(t,e,n){"use strict";var r=n(0),i=n(5),o=n(49),a=n(40),s=n(10),u=n(24),c=n(50),l=n(8),h=n(69)("slice"),f=l("species"),d=[].slice,p=Math.max;r({target:"Array",proto:!0,forced:!h},{slice:function(t,e){var n,r,l,h=u(this),m=s(h.length),g=a(t,m),v=a(void 0===e?m:e,m);if(o(h)&&("function"!=typeof(n=h.constructor)||n!==Array&&!o(n.prototype)?i(n)&&null===(n=n[f])&&(n=void 0):n=void 0,n===Array||void 0===n))return d.call(h,g,v);for(r=new(void 0===n?Array:n)(p(v-g,0)),l=0;g<v;g++,l++)g in h&&c(r,l,h[g]);return r.length=l,r}})},function(t,e,n){"use strict";var r=n(0),i=n(16).some;r({target:"Array",proto:!0,forced:!n(37)("some")},{some:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0)}})},function(t,e,n){"use strict";var r=n(0),i=n(22),o=n(13),a=n(2),s=n(37),u=[],c=u.sort,l=a((function(){u.sort(void 0)})),h=a((function(){u.sort(null)})),f=s("sort");r({target:"Array",proto:!0,forced:l||!h||!f},{sort:function(t){return void 0===t?c.call(o(this)):c.call(o(this),i(t))}})},function(t,e,n){n(53)("Array")},function(t,e,n){"use strict";var r=n(0),i=n(40),o=n(29),a=n(10),s=n(13),u=n(65),c=n(50),l=n(69)("splice"),h=Math.max,f=Math.min;r({target:"Array",proto:!0,forced:!l},{splice:function(t,e){var n,r,l,d,p,m,g=s(this),v=a(g.length),y=i(t,v),b=arguments.length;if(0===b?n=r=0:1===b?(n=0,r=v-y):(n=b-2,r=f(h(o(e),0),v-y)),v+n-r>9007199254740991)throw TypeError("Maximum allowed length exceeded");for(l=u(g,r),d=0;d<r;d++)(p=y+d)in g&&c(l,d,g[p]);if(l.length=r,n<r){for(d=y;d<v-r;d++)m=d+n,(p=d+r)in g?g[m]=g[p]:delete g[m];for(d=v;d>v-r+n;d--)delete g[d-1]}else if(n>r)for(d=v-r;d>y;d--)m=d+n-1,(p=d+r-1)in g?g[m]=g[p]:delete g[m];for(d=0;d<n;d++)g[d+y]=arguments[d+2];return g.length=v-r+n,l}})},function(t,e,n){n(44)("flat")},function(t,e,n){n(44)("flatMap")},function(t,e,n){"use strict";var r=n(0),i=n(3),o=n(79),a=n(53),s=o.ArrayBuffer;r({global:!0,forced:i.ArrayBuffer!==s},{ArrayBuffer:s}),a("ArrayBuffer")},function(t,e){var n=Math.abs,r=Math.pow,i=Math.floor,o=Math.log,a=Math.LN2;t.exports={pack:function(t,e,s){var u,c,l,h=new Array(s),f=8*s-e-1,d=(1<<f)-1,p=d>>1,m=23===e?r(2,-24)-r(2,-77):0,g=t<0||0===t&&1/t<0?1:0,v=0;for((t=n(t))!=t||t===1/0?(c=t!=t?1:0,u=d):(u=i(o(t)/a),t*(l=r(2,-u))<1&&(u--,l*=2),(t+=u+p>=1?m/l:m*r(2,1-p))*l>=2&&(u++,l/=2),u+p>=d?(c=0,u=d):u+p>=1?(c=(t*l-1)*r(2,e),u+=p):(c=t*r(2,p-1)*r(2,e),u=0));e>=8;h[v++]=255&c,c/=256,e-=8);for(u=u<<e|c,f+=e;f>0;h[v++]=255&u,u/=256,f-=8);return h[--v]|=128*g,h},unpack:function(t,e){var n,i=t.length,o=8*i-e-1,a=(1<<o)-1,s=a>>1,u=o-7,c=i-1,l=t[c--],h=127&l;for(l>>=7;u>0;h=256*h+t[c],c--,u-=8);for(n=h&(1<<-u)-1,h>>=-u,u+=e;u>0;n=256*n+t[c],c--,u-=8);if(0===h)h=1-s;else{if(h===a)return n?NaN:l?-1/0:1/0;n+=r(2,e),h-=s}return(l?-1:1)*n*r(2,h-e)}}},function(t,e,n){var r=n(0),i=n(9);r({target:"ArrayBuffer",stat:!0,forced:!i.NATIVE_ARRAY_BUFFER_VIEWS},{isView:i.isView})},function(t,e,n){"use strict";var r=n(0),i=n(2),o=n(79),a=n(6),s=n(40),u=n(10),c=n(38),l=o.ArrayBuffer,h=o.DataView,f=l.prototype.slice;r({target:"ArrayBuffer",proto:!0,unsafe:!0,forced:i((function(){return!new l(2).slice(1,void 0).byteLength}))},{slice:function(t,e){if(void 0!==f&&void 0===e)return f.call(a(this),t);for(var n=a(this).byteLength,r=s(t,n),i=s(void 0===e?n:e,n),o=new(c(this,l))(u(i-r)),d=new h(this),p=new h(o),m=0;r<i;)p.setUint8(m++,d.getUint8(r++));return o}})},function(t,e,n){var r=n(0),i=n(79);r({global:!0,forced:!n(107)},{DataView:i.DataView})},function(t,e,n){n(0)({target:"Date",stat:!0},{now:function(){return(new Date).getTime()}})},function(t,e,n){var r=n(0),i=n(225);r({target:"Date",proto:!0,forced:Date.prototype.toISOString!==i},{toISOString:i})},function(t,e,n){"use strict";var r=n(2),i=n(108).start,o=Math.abs,a=Date.prototype,s=a.getTime,u=a.toISOString;t.exports=r((function(){return"0385-07-25T07:06:39.999Z"!=u.call(new Date(-50000000000001))}))||!r((function(){u.call(new Date(NaN))}))?function(){if(!isFinite(s.call(this)))throw RangeError("Invalid time value");var t=this.getUTCFullYear(),e=this.getUTCMilliseconds(),n=t<0?"-":t>9999?"+":"";return n+i(o(t),n?6:4,0)+"-"+i(this.getUTCMonth()+1,2,0)+"-"+i(this.getUTCDate(),2,0)+"T"+i(this.getUTCHours(),2,0)+":"+i(this.getUTCMinutes(),2,0)+":"+i(this.getUTCSeconds(),2,0)+"."+i(e,3,0)+"Z"}:u},function(t,e,n){"use strict";var r=n(0),i=n(2),o=n(13),a=n(31);r({target:"Date",proto:!0,forced:i((function(){return null!==new Date(NaN).toJSON()||1!==Date.prototype.toJSON.call({toISOString:function(){return 1}})}))},{toJSON:function(t){var e=o(this),n=a(e);return"number"!=typeof n||isFinite(n)?e.toISOString():null}})},function(t,e,n){var r=n(19),i=n(228),o=n(8)("toPrimitive"),a=Date.prototype;o in a||r(a,o,i)},function(t,e,n){"use strict";var r=n(6),i=n(31);t.exports=function(t){if("string"!==t&&"number"!==t&&"default"!==t)throw TypeError("Incorrect hint");return i(r(this),"number"!==t)}},function(t,e,n){var r=n(20),i=Date.prototype,o=i.toString,a=i.getTime;new Date(NaN)+""!="Invalid Date"&&r(i,"toString",(function(){var t=a.call(this);return t==t?o.call(this):"Invalid Date"}))},function(t,e,n){n(0)({target:"Function",proto:!0},{bind:n(139)})},function(t,e,n){"use strict";var r=n(5),i=n(11),o=n(30),a=n(8)("hasInstance"),s=Function.prototype;a in s||i.f(s,a,{value:function(t){if("function"!=typeof this||!r(t))return!1;if(!r(this.prototype))return t instanceof this;for(;t=o(t);)if(this.prototype===t)return!0;return!1}})},function(t,e,n){var r=n(7),i=n(11).f,o=Function.prototype,a=o.toString,s=/^\s*function ([^ (]*)/;r&&!("name"in o)&&i(o,"name",{configurable:!0,get:function(){try{return a.call(this).match(s)[1]}catch(t){return""}}})},function(t,e,n){n(0)({global:!0},{globalThis:n(3)})},function(t,e,n){var r=n(0),i=n(25),o=n(2),a=i("JSON","stringify"),s=/[\uD800-\uDFFF]/g,u=/^[\uD800-\uDBFF]$/,c=/^[\uDC00-\uDFFF]$/,l=function(t,e,n){var r=n.charAt(e-1),i=n.charAt(e+1);return u.test(t)&&!c.test(i)||c.test(t)&&!u.test(r)?"\\u"+t.charCodeAt(0).toString(16):t},h=o((function(){return'"\\udf06\\ud834"'!==a("\udf06\ud834")||'"\\udead"'!==a("\udead")}));a&&r({target:"JSON",stat:!0,forced:h},{stringify:function(t,e,n){var r=a.apply(null,arguments);return"string"==typeof r?r.replace(s,l):r}})},function(t,e,n){var r=n(3);n(32)(r.JSON,"JSON",!0)},function(t,e,n){"use strict";var r=n(80),i=n(140);t.exports=r("Map",(function(t){return function(){return t(this,arguments.length?arguments[0]:void 0)}}),i)},function(t,e,n){var r=n(0),i=n(141),o=Math.acosh,a=Math.log,s=Math.sqrt,u=Math.LN2;r({target:"Math",stat:!0,forced:!o||710!=Math.floor(o(Number.MAX_VALUE))||o(1/0)!=1/0},{acosh:function(t){return(t=+t)<1?NaN:t>94906265.62425156?a(t)+u:i(t-1+s(t-1)*s(t+1))}})},function(t,e,n){var r=n(0),i=Math.asinh,o=Math.log,a=Math.sqrt;r({target:"Math",stat:!0,forced:!(i&&1/i(0)>0)},{asinh:function t(e){return isFinite(e=+e)&&0!=e?e<0?-t(-e):o(e+a(e*e+1)):e}})},function(t,e,n){var r=n(0),i=Math.atanh,o=Math.log;r({target:"Math",stat:!0,forced:!(i&&1/i(-0)<0)},{atanh:function(t){return 0==(t=+t)?t:o((1+t)/(1-t))/2}})},function(t,e,n){var r=n(0),i=n(110),o=Math.abs,a=Math.pow;r({target:"Math",stat:!0},{cbrt:function(t){return i(t=+t)*a(o(t),1/3)}})},function(t,e,n){var r=n(0),i=Math.floor,o=Math.log,a=Math.LOG2E;r({target:"Math",stat:!0},{clz32:function(t){return(t>>>=0)?31-i(o(t+.5)*a):32}})},function(t,e,n){var r=n(0),i=n(82),o=Math.cosh,a=Math.abs,s=Math.E;r({target:"Math",stat:!0,forced:!o||o(710)===1/0},{cosh:function(t){var e=i(a(t)-1)+1;return(e+1/(e*s*s))*(s/2)}})},function(t,e,n){var r=n(0),i=n(82);r({target:"Math",stat:!0,forced:i!=Math.expm1},{expm1:i})},function(t,e,n){n(0)({target:"Math",stat:!0},{fround:n(245)})},function(t,e,n){var r=n(110),i=Math.abs,o=Math.pow,a=o(2,-52),s=o(2,-23),u=o(2,127)*(2-s),c=o(2,-126);t.exports=Math.fround||function(t){var e,n,o=i(t),l=r(t);return o<c?l*(o/c/s+1/a-1/a)*c*s:(n=(e=(1+s/a)*o)-(e-o))>u||n!=n?l*(1/0):l*n}},function(t,e,n){var r=n(0),i=Math.hypot,o=Math.abs,a=Math.sqrt;r({target:"Math",stat:!0,forced:!!i&&i(1/0,NaN)!==1/0},{hypot:function(t,e){for(var n,r,i=0,s=0,u=arguments.length,c=0;s<u;)c<(n=o(arguments[s++]))?(i=i*(r=c/n)*r+1,c=n):i+=n>0?(r=n/c)*r:n;return c===1/0?1/0:c*a(i)}})},function(t,e,n){var r=n(0),i=n(2),o=Math.imul;r({target:"Math",stat:!0,forced:i((function(){return-5!=o(4294967295,5)||2!=o.length}))},{imul:function(t,e){var n=+t,r=+e,i=65535&n,o=65535&r;return 0|i*o+((65535&n>>>16)*o+i*(65535&r>>>16)<<16>>>0)}})},function(t,e,n){var r=n(0),i=Math.log,o=Math.LOG10E;r({target:"Math",stat:!0},{log10:function(t){return i(t)*o}})},function(t,e,n){n(0)({target:"Math",stat:!0},{log1p:n(141)})},function(t,e,n){var r=n(0),i=Math.log,o=Math.LN2;r({target:"Math",stat:!0},{log2:function(t){return i(t)/o}})},function(t,e,n){n(0)({target:"Math",stat:!0},{sign:n(110)})},function(t,e,n){var r=n(0),i=n(2),o=n(82),a=Math.abs,s=Math.exp,u=Math.E;r({target:"Math",stat:!0,forced:i((function(){return-2e-17!=Math.sinh(-2e-17)}))},{sinh:function(t){return a(t=+t)<1?(o(t)-o(-t))/2:(s(t-1)-s(-t-1))*(u/2)}})},function(t,e,n){var r=n(0),i=n(82),o=Math.exp;r({target:"Math",stat:!0},{tanh:function(t){var e=i(t=+t),n=i(-t);return e==1/0?1:n==1/0?-1:(e-n)/(o(t)+o(-t))}})},function(t,e,n){n(32)(Math,"Math",!0)},function(t,e,n){var r=n(0),i=Math.ceil,o=Math.floor;r({target:"Math",stat:!0},{trunc:function(t){return(t>0?o:i)(t)}})},function(t,e,n){"use strict";var r=n(7),i=n(3),o=n(62),a=n(20),s=n(15),u=n(36),c=n(81),l=n(31),h=n(2),f=n(34),d=n(47).f,p=n(17).f,m=n(11).f,g=n(55).trim,v=i.Number,y=v.prototype,b="Number"==u(f(y)),_=function(t){var e,n,r,i,o,a,s,u,c=l(t,!1);if("string"==typeof c&&c.length>2)if(43===(e=(c=g(c)).charCodeAt(0))||45===e){if(88===(n=c.charCodeAt(2))||120===n)return NaN}else if(48===e){switch(c.charCodeAt(1)){case 66:case 98:r=2,i=49;break;case 79:case 111:r=8,i=55;break;default:return+c}for(a=(o=c.slice(2)).length,s=0;s<a;s++)if((u=o.charCodeAt(s))<48||u>i)return NaN;return parseInt(o,r)}return+c};if(o("Number",!v(" 0o1")||!v("0b1")||v("+0x1"))){for(var x,w=function(t){var e=arguments.length<1?0:t,n=this;return n instanceof w&&(b?h((function(){y.valueOf.call(n)})):"Number"!=u(n))?c(new v(_(e)),n,w):_(e)},S=r?d(v):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger,fromString,range".split(","),E=0;S.length>E;E++)s(v,x=S[E])&&!s(w,x)&&m(w,x,p(v,x));w.prototype=y,y.constructor=w,a(i,"Number",w)}},function(t,e,n){n(0)({target:"Number",stat:!0},{EPSILON:Math.pow(2,-52)})},function(t,e,n){n(0)({target:"Number",stat:!0},{isFinite:n(259)})},function(t,e,n){var r=n(3).isFinite;t.exports=Number.isFinite||function(t){return"number"==typeof t&&r(t)}},function(t,e,n){n(0)({target:"Number",stat:!0},{isInteger:n(142)})},function(t,e,n){n(0)({target:"Number",stat:!0},{isNaN:function(t){return t!=t}})},function(t,e,n){var r=n(0),i=n(142),o=Math.abs;r({target:"Number",stat:!0},{isSafeInteger:function(t){return i(t)&&o(t)<=9007199254740991}})},function(t,e,n){n(0)({target:"Number",stat:!0},{MAX_SAFE_INTEGER:9007199254740991})},function(t,e,n){n(0)({target:"Number",stat:!0},{MIN_SAFE_INTEGER:-9007199254740991})},function(t,e,n){var r=n(0),i=n(143);r({target:"Number",stat:!0,forced:Number.parseFloat!=i},{parseFloat:i})},function(t,e,n){var r=n(0),i=n(144);r({target:"Number",stat:!0,forced:Number.parseInt!=i},{parseInt:i})},function(t,e,n){"use strict";var r=n(0),i=n(29),o=n(145),a=n(109),s=n(2),u=1..toFixed,c=Math.floor,l=function(t,e,n){return 0===e?n:e%2==1?l(t,e-1,n*t):l(t*t,e/2,n)},h=function(t,e,n){for(var r=-1,i=n;++r<6;)i+=e*t[r],t[r]=i%1e7,i=c(i/1e7)},f=function(t,e){for(var n=6,r=0;--n>=0;)r+=t[n],t[n]=c(r/e),r=r%e*1e7},d=function(t){for(var e=6,n="";--e>=0;)if(""!==n||0===e||0!==t[e]){var r=String(t[e]);n=""===n?r:n+a.call("0",7-r.length)+r}return n};r({target:"Number",proto:!0,forced:u&&("0.000"!==8e-5.toFixed(3)||"1"!==.9.toFixed(0)||"1.25"!==1.255.toFixed(2)||"1000000000000000128"!==(0xde0b6b3a7640080).toFixed(0))||!s((function(){u.call({})}))},{toFixed:function(t){var e,n,r,s,u=o(this),c=i(t),p=[0,0,0,0,0,0],m="",g="0";if(c<0||c>20)throw RangeError("Incorrect fraction digits");if(u!=u)return"NaN";if(u<=-1e21||u>=1e21)return String(u);if(u<0&&(m="-",u=-u),u>1e-21)if(n=(e=function(t){for(var e=0,n=t;n>=4096;)e+=12,n/=4096;for(;n>=2;)e+=1,n/=2;return e}(u*l(2,69,1))-69)<0?u*l(2,-e,1):u/l(2,e,1),n*=4503599627370496,(e=52-e)>0){for(h(p,0,n),r=c;r>=7;)h(p,1e7,0),r-=7;for(h(p,l(10,r,1),0),r=e-1;r>=23;)f(p,1<<23),r-=23;f(p,1<<r),h(p,1,1),f(p,2),g=d(p)}else h(p,0,n),h(p,1<<-e,0),g=d(p)+a.call("0",c);return g=c>0?m+((s=g.length)<=c?"0."+a.call("0",c-s)+g:g.slice(0,s-c)+"."+g.slice(s-c)):m+g}})},function(t,e,n){"use strict";var r=n(0),i=n(2),o=n(145),a=1..toPrecision;r({target:"Number",proto:!0,forced:i((function(){return"1"!==a.call(1,void 0)}))||!i((function(){a.call({})}))},{toPrecision:function(t){return void 0===t?a.call(o(this)):a.call(o(this),t)}})},function(t,e,n){var r=n(0),i=n(146);r({target:"Object",stat:!0,forced:Object.assign!==i},{assign:i})},function(t,e,n){n(0)({target:"Object",stat:!0,sham:!n(7)},{create:n(34)})},function(t,e,n){"use strict";var r=n(0),i=n(7),o=n(84),a=n(13),s=n(22),u=n(11);i&&r({target:"Object",proto:!0,forced:o},{__defineGetter__:function(t,e){u.f(a(this),t,{get:s(e),enumerable:!0,configurable:!0})}})},function(t,e,n){var r=n(0),i=n(7);r({target:"Object",stat:!0,forced:!i,sham:!i},{defineProperties:n(100)})},function(t,e,n){var r=n(0),i=n(7);r({target:"Object",stat:!0,forced:!i,sham:!i},{defineProperty:n(11).f})},function(t,e,n){"use strict";var r=n(0),i=n(7),o=n(84),a=n(13),s=n(22),u=n(11);i&&r({target:"Object",proto:!0,forced:o},{__defineSetter__:function(t,e){u.f(a(this),t,{set:s(e),enumerable:!0,configurable:!0})}})},function(t,e,n){var r=n(0),i=n(147).entries;r({target:"Object",stat:!0},{entries:function(t){return i(t)}})},function(t,e,n){var r=n(0),i=n(70),o=n(2),a=n(5),s=n(51).onFreeze,u=Object.freeze;r({target:"Object",stat:!0,forced:o((function(){u(1)})),sham:!i},{freeze:function(t){return u&&a(t)?u(s(t)):t}})},function(t,e,n){var r=n(0),i=n(43),o=n(50);r({target:"Object",stat:!0},{fromEntries:function(t){var e={};return i(t,(function(t,n){o(e,t,n)}),{AS_ENTRIES:!0}),e}})},function(t,e,n){var r=n(0),i=n(2),o=n(24),a=n(17).f,s=n(7),u=i((function(){a(1)}));r({target:"Object",stat:!0,forced:!s||u,sham:!s},{getOwnPropertyDescriptor:function(t,e){return a(o(t),e)}})},function(t,e,n){var r=n(0),i=n(7),o=n(95),a=n(24),s=n(17),u=n(50);r({target:"Object",stat:!0,sham:!i},{getOwnPropertyDescriptors:function(t){for(var e,n,r=a(t),i=s.f,c=o(r),l={},h=0;c.length>h;)void 0!==(n=i(r,e=c[h++]))&&u(l,e,n);return l}})},function(t,e,n){var r=n(0),i=n(2),o=n(128).f;r({target:"Object",stat:!0,forced:i((function(){return!Object.getOwnPropertyNames(1)}))},{getOwnPropertyNames:o})},function(t,e,n){var r=n(0),i=n(2),o=n(13),a=n(30),s=n(101);r({target:"Object",stat:!0,forced:i((function(){a(1)})),sham:!s},{getPrototypeOf:function(t){return a(o(t))}})},function(t,e,n){n(0)({target:"Object",stat:!0},{is:n(148)})},function(t,e,n){var r=n(0),i=n(2),o=n(5),a=Object.isExtensible;r({target:"Object",stat:!0,forced:i((function(){a(1)}))},{isExtensible:function(t){return!!o(t)&&(!a||a(t))}})},function(t,e,n){var r=n(0),i=n(2),o=n(5),a=Object.isFrozen;r({target:"Object",stat:!0,forced:i((function(){a(1)}))},{isFrozen:function(t){return!o(t)||!!a&&a(t)}})},function(t,e,n){var r=n(0),i=n(2),o=n(5),a=Object.isSealed;r({target:"Object",stat:!0,forced:i((function(){a(1)}))},{isSealed:function(t){return!o(t)||!!a&&a(t)}})},function(t,e,n){var r=n(0),i=n(13),o=n(64);r({target:"Object",stat:!0,forced:n(2)((function(){o(1)}))},{keys:function(t){return o(i(t))}})},function(t,e,n){"use strict";var r=n(0),i=n(7),o=n(84),a=n(13),s=n(31),u=n(30),c=n(17).f;i&&r({target:"Object",proto:!0,forced:o},{__lookupGetter__:function(t){var e,n=a(this),r=s(t,!0);do{if(e=c(n,r))return e.get}while(n=u(n))}})},function(t,e,n){"use strict";var r=n(0),i=n(7),o=n(84),a=n(13),s=n(31),u=n(30),c=n(17).f;i&&r({target:"Object",proto:!0,forced:o},{__lookupSetter__:function(t){var e,n=a(this),r=s(t,!0);do{if(e=c(n,r))return e.set}while(n=u(n))}})},function(t,e,n){var r=n(0),i=n(5),o=n(51).onFreeze,a=n(70),s=n(2),u=Object.preventExtensions;r({target:"Object",stat:!0,forced:s((function(){u(1)})),sham:!a},{preventExtensions:function(t){return u&&i(t)?u(o(t)):t}})},function(t,e,n){var r=n(0),i=n(5),o=n(51).onFreeze,a=n(70),s=n(2),u=Object.seal;r({target:"Object",stat:!0,forced:s((function(){u(1)})),sham:!a},{seal:function(t){return u&&i(t)?u(o(t)):t}})},function(t,e,n){n(0)({target:"Object",stat:!0},{setPrototypeOf:n(42)})},function(t,e,n){var r=n(103),i=n(20),o=n(293);r||i(Object.prototype,"toString",o,{unsafe:!0})},function(t,e,n){"use strict";var r=n(103),i=n(68);t.exports=r?{}.toString:function(){return"[object "+i(this)+"]"}},function(t,e,n){var r=n(0),i=n(147).values;r({target:"Object",stat:!0},{values:function(t){return i(t)}})},function(t,e,n){var r=n(0),i=n(143);r({global:!0,forced:parseFloat!=i},{parseFloat:i})},function(t,e,n){var r=n(0),i=n(144);r({global:!0,forced:parseInt!=i},{parseInt:i})},function(t,e,n){"use strict";var r,i,o,a,s=n(0),u=n(28),c=n(3),l=n(25),h=n(149),f=n(20),d=n(54),p=n(32),m=n(53),g=n(5),v=n(22),y=n(45),b=n(93),_=n(43),x=n(76),w=n(38),S=n(111).set,E=n(151),T=n(152),M=n(299),A=n(85),L=n(112),D=n(21),C=n(62),P=n(8),R=n(48),k=n(52),O=P("species"),I="Promise",F=D.get,z=D.set,B=D.getterFor(I),N=h,U=c.TypeError,j=c.document,H=c.process,V=l("fetch"),G=A.f,W=G,q=!!(j&&j.createEvent&&c.dispatchEvent),X="function"==typeof PromiseRejectionEvent,Y=C(I,(function(){if(!(b(N)!==String(N))){if(66===k)return!0;if(!R&&!X)return!0}if(u&&!N.prototype.finally)return!0;if(k>=51&&/native code/.test(N))return!1;var t=N.resolve(1),e=function(t){t((function(){}),(function(){}))};return(t.constructor={})[O]=e,!(t.then((function(){}))instanceof e)})),Z=Y||!x((function(t){N.all(t).catch((function(){}))})),J=function(t){var e;return!(!g(t)||"function"!=typeof(e=t.then))&&e},Q=function(t,e){if(!t.notified){t.notified=!0;var n=t.reactions;E((function(){for(var r=t.value,i=1==t.state,o=0;n.length>o;){var a,s,u,c=n[o++],l=i?c.ok:c.fail,h=c.resolve,f=c.reject,d=c.domain;try{l?(i||(2===t.rejection&&et(t),t.rejection=1),!0===l?a=r:(d&&d.enter(),a=l(r),d&&(d.exit(),u=!0)),a===c.promise?f(U("Promise-chain cycle")):(s=J(a))?s.call(a,h,f):h(a)):f(r)}catch(t){d&&!u&&d.exit(),f(t)}}t.reactions=[],t.notified=!1,e&&!t.rejection&&$(t)}))}},K=function(t,e,n){var r,i;q?((r=j.createEvent("Event")).promise=e,r.reason=n,r.initEvent(t,!1,!0),c.dispatchEvent(r)):r={promise:e,reason:n},!X&&(i=c["on"+t])?i(r):"unhandledrejection"===t&&M("Unhandled promise rejection",n)},$=function(t){S.call(c,(function(){var e,n=t.facade,r=t.value;if(tt(t)&&(e=L((function(){R?H.emit("unhandledRejection",r,n):K("unhandledrejection",n,r)})),t.rejection=R||tt(t)?2:1,e.error))throw e.value}))},tt=function(t){return 1!==t.rejection&&!t.parent},et=function(t){S.call(c,(function(){var e=t.facade;R?H.emit("rejectionHandled",e):K("rejectionhandled",e,t.value)}))},nt=function(t,e,n){return function(r){t(e,r,n)}},rt=function(t,e,n){t.done||(t.done=!0,n&&(t=n),t.value=e,t.state=2,Q(t,!0))},it=function(t,e,n){if(!t.done){t.done=!0,n&&(t=n);try{if(t.facade===e)throw U("Promise can't be resolved itself");var r=J(e);r?E((function(){var n={done:!1};try{r.call(e,nt(it,n,t),nt(rt,n,t))}catch(e){rt(n,e,t)}})):(t.value=e,t.state=1,Q(t,!1))}catch(e){rt({done:!1},e,t)}}};Y&&(N=function(t){y(this,N,I),v(t),r.call(this);var e=F(this);try{t(nt(it,e),nt(rt,e))}catch(t){rt(e,t)}},(r=function(t){z(this,{type:I,done:!1,notified:!1,parent:!1,reactions:[],rejection:!1,state:0,value:void 0})}).prototype=d(N.prototype,{then:function(t,e){var n=B(this),r=G(w(this,N));return r.ok="function"!=typeof t||t,r.fail="function"==typeof e&&e,r.domain=R?H.domain:void 0,n.parent=!0,n.reactions.push(r),0!=n.state&&Q(n,!1),r.promise},catch:function(t){return this.then(void 0,t)}}),i=function(){var t=new r,e=F(t);this.promise=t,this.resolve=nt(it,e),this.reject=nt(rt,e)},A.f=G=function(t){return t===N||t===o?new i(t):W(t)},u||"function"!=typeof h||(a=h.prototype.then,f(h.prototype,"then",(function(t,e){var n=this;return new N((function(t,e){a.call(n,t,e)})).then(t,e)}),{unsafe:!0}),"function"==typeof V&&s({global:!0,enumerable:!0,forced:!0},{fetch:function(t){return T(N,V.apply(c,arguments))}}))),s({global:!0,wrap:!0,forced:Y},{Promise:N}),p(N,I,!1,!0),m(I),o=l(I),s({target:I,stat:!0,forced:Y},{reject:function(t){var e=G(this);return e.reject.call(void 0,t),e.promise}}),s({target:I,stat:!0,forced:u||Y},{resolve:function(t){return T(u&&this===o?N:this,t)}}),s({target:I,stat:!0,forced:Z},{all:function(t){var e=this,n=G(e),r=n.resolve,i=n.reject,o=L((function(){var n=v(e.resolve),o=[],a=0,s=1;_(t,(function(t){var u=a++,c=!1;o.push(void 0),s++,n.call(e,t).then((function(t){c||(c=!0,o[u]=t,--s||r(o))}),i)})),--s||r(o)}));return o.error&&i(o.value),n.promise},race:function(t){var e=this,n=G(e),r=n.reject,i=L((function(){var i=v(e.resolve);_(t,(function(t){i.call(e,t).then(n.resolve,r)}))}));return i.error&&r(i.value),n.promise}})},function(t,e,n){var r=n(63);t.exports=/web0s(?!.*chrome)/i.test(r)},function(t,e,n){var r=n(3);t.exports=function(t,e){var n=r.console;n&&n.error&&(1===arguments.length?n.error(t):n.error(t,e))}},function(t,e,n){"use strict";var r=n(0),i=n(22),o=n(85),a=n(112),s=n(43);r({target:"Promise",stat:!0},{allSettled:function(t){var e=this,n=o.f(e),r=n.resolve,u=n.reject,c=a((function(){var n=i(e.resolve),o=[],a=0,u=1;s(t,(function(t){var i=a++,s=!1;o.push(void 0),u++,n.call(e,t).then((function(t){s||(s=!0,o[i]={status:"fulfilled",value:t},--u||r(o))}),(function(t){s||(s=!0,o[i]={status:"rejected",reason:t},--u||r(o))}))})),--u||r(o)}));return c.error&&u(c.value),n.promise}})},function(t,e,n){"use strict";var r=n(0),i=n(22),o=n(25),a=n(85),s=n(112),u=n(43);r({target:"Promise",stat:!0},{any:function(t){var e=this,n=a.f(e),r=n.resolve,c=n.reject,l=s((function(){var n=i(e.resolve),a=[],s=0,l=1,h=!1;u(t,(function(t){var i=s++,u=!1;a.push(void 0),l++,n.call(e,t).then((function(t){u||h||(h=!0,r(t))}),(function(t){u||h||(u=!0,a[i]=t,--l||c(new(o("AggregateError"))(a,"No one promise resolved")))}))})),--l||c(new(o("AggregateError"))(a,"No one promise resolved"))}));return l.error&&c(l.value),n.promise}})},function(t,e,n){"use strict";var r=n(0),i=n(28),o=n(149),a=n(2),s=n(25),u=n(38),c=n(152),l=n(20);r({target:"Promise",proto:!0,real:!0,forced:!!o&&a((function(){o.prototype.finally.call({then:function(){}},(function(){}))}))},{finally:function(t){var e=u(this,s("Promise")),n="function"==typeof t;return this.then(n?function(n){return c(e,t()).then((function(){return n}))}:t,n?function(n){return c(e,t()).then((function(){throw n}))}:t)}}),i||"function"!=typeof o||o.prototype.finally||l(o.prototype,"finally",s("Promise").prototype.finally)},function(t,e,n){var r=n(0),i=n(25),o=n(22),a=n(6),s=n(2),u=i("Reflect","apply"),c=Function.apply;r({target:"Reflect",stat:!0,forced:!s((function(){u((function(){}))}))},{apply:function(t,e,n){return o(t),a(n),u?u(t,e,n):c.call(t,e,n)}})},function(t,e,n){var r=n(0),i=n(25),o=n(22),a=n(6),s=n(5),u=n(34),c=n(139),l=n(2),h=i("Reflect","construct"),f=l((function(){function t(){}return!(h((function(){}),[],t)instanceof t)})),d=!l((function(){h((function(){}))})),p=f||d;r({target:"Reflect",stat:!0,forced:p,sham:p},{construct:function(t,e){o(t),a(e);var n=arguments.length<3?t:o(arguments[2]);if(d&&!f)return h(t,e,n);if(t==n){switch(e.length){case 0:return new t;case 1:return new t(e[0]);case 2:return new t(e[0],e[1]);case 3:return new t(e[0],e[1],e[2]);case 4:return new t(e[0],e[1],e[2],e[3])}var r=[null];return r.push.apply(r,e),new(c.apply(t,r))}var i=n.prototype,l=u(s(i)?i:Object.prototype),p=Function.apply.call(t,l,e);return s(p)?p:l}})},function(t,e,n){var r=n(0),i=n(7),o=n(6),a=n(31),s=n(11);r({target:"Reflect",stat:!0,forced:n(2)((function(){Reflect.defineProperty(s.f({},1,{value:1}),1,{value:2})})),sham:!i},{defineProperty:function(t,e,n){o(t);var r=a(e,!0);o(n);try{return s.f(t,r,n),!0}catch(t){return!1}}})},function(t,e,n){var r=n(0),i=n(6),o=n(17).f;r({target:"Reflect",stat:!0},{deleteProperty:function(t,e){var n=o(i(t),e);return!(n&&!n.configurable)&&delete t[e]}})},function(t,e,n){var r=n(0),i=n(5),o=n(6),a=n(15),s=n(17),u=n(30);r({target:"Reflect",stat:!0},{get:function t(e,n){var r,c,l=arguments.length<3?e:arguments[2];return o(e)===l?e[n]:(r=s.f(e,n))?a(r,"value")?r.value:void 0===r.get?void 0:r.get.call(l):i(c=u(e))?t(c,n,l):void 0}})},function(t,e,n){var r=n(0),i=n(7),o=n(6),a=n(17);r({target:"Reflect",stat:!0,sham:!i},{getOwnPropertyDescriptor:function(t,e){return a.f(o(t),e)}})},function(t,e,n){var r=n(0),i=n(6),o=n(30);r({target:"Reflect",stat:!0,sham:!n(101)},{getPrototypeOf:function(t){return o(i(t))}})},function(t,e,n){n(0)({target:"Reflect",stat:!0},{has:function(t,e){return e in t}})},function(t,e,n){var r=n(0),i=n(6),o=Object.isExtensible;r({target:"Reflect",stat:!0},{isExtensible:function(t){return i(t),!o||o(t)}})},function(t,e,n){n(0)({target:"Reflect",stat:!0},{ownKeys:n(95)})},function(t,e,n){var r=n(0),i=n(25),o=n(6);r({target:"Reflect",stat:!0,sham:!n(70)},{preventExtensions:function(t){o(t);try{var e=i("Object","preventExtensions");return e&&e(t),!0}catch(t){return!1}}})},function(t,e,n){var r=n(0),i=n(6),o=n(5),a=n(15),s=n(2),u=n(11),c=n(17),l=n(30),h=n(35);r({target:"Reflect",stat:!0,forced:s((function(){var t=function(){},e=u.f(new t,"a",{configurable:!0});return!1!==Reflect.set(t.prototype,"a",1,e)}))},{set:function t(e,n,r){var s,f,d=arguments.length<4?e:arguments[3],p=c.f(i(e),n);if(!p){if(o(f=l(e)))return t(f,n,r,d);p=h(0)}if(a(p,"value")){if(!1===p.writable||!o(d))return!1;if(s=c.f(d,n)){if(s.get||s.set||!1===s.writable)return!1;s.value=r,u.f(d,n,s)}else u.f(d,n,h(0,r));return!0}return void 0!==p.set&&(p.set.call(d,r),!0)}})},function(t,e,n){var r=n(0),i=n(6),o=n(130),a=n(42);a&&r({target:"Reflect",stat:!0},{setPrototypeOf:function(t,e){i(t),o(e);try{return a(t,e),!0}catch(t){return!1}}})},function(t,e,n){var r=n(0),i=n(3),o=n(32);r({global:!0},{Reflect:{}}),o(i.Reflect,"Reflect",!0)},function(t,e,n){var r=n(7),i=n(3),o=n(62),a=n(81),s=n(11).f,u=n(47).f,c=n(71),l=n(56),h=n(72),f=n(20),d=n(2),p=n(21).set,m=n(53),g=n(8)("match"),v=i.RegExp,y=v.prototype,b=/a/g,_=/a/g,x=new v(b)!==b,w=h.UNSUPPORTED_Y;if(r&&o("RegExp",!x||w||d((function(){return _[g]=!1,v(b)!=b||v(_)==_||"/a/i"!=v(b,"i")})))){for(var S=function(t,e){var n,r=this instanceof S,i=c(t),o=void 0===e;if(!r&&i&&t.constructor===S&&o)return t;x?i&&!o&&(t=t.source):t instanceof S&&(o&&(e=l.call(t)),t=t.source),w&&(n=!!e&&e.indexOf("y")>-1)&&(e=e.replace(/y/g,""));var s=a(x?new v(t,e):v(t,e),r?this:y,S);return w&&n&&p(s,{sticky:n}),s},E=function(t){t in S||s(S,t,{configurable:!0,get:function(){return v[t]},set:function(e){v[t]=e}})},T=u(v),M=0;T.length>M;)E(T[M++]);y.constructor=S,S.prototype=y,f(i,"RegExp",S)}m("RegExp")},function(t,e,n){var r=n(7),i=n(11),o=n(56),a=n(72).UNSUPPORTED_Y;r&&("g"!=/./g.flags||a)&&i.f(RegExp.prototype,"flags",{configurable:!0,get:o})},function(t,e,n){var r=n(7),i=n(72).UNSUPPORTED_Y,o=n(11).f,a=n(21).get,s=RegExp.prototype;r&&i&&o(RegExp.prototype,"sticky",{configurable:!0,get:function(){if(this!==s){if(this instanceof RegExp)return!!a(this).sticky;throw TypeError("Incompatible receiver, RegExp required")}}})},function(t,e,n){"use strict";n(113);var r,i,o=n(0),a=n(5),s=(r=!1,(i=/[ac]/).exec=function(){return r=!0,/./.exec.apply(this,arguments)},!0===i.test("abc")&&r),u=/./.test;o({target:"RegExp",proto:!0,forced:!s},{test:function(t){if("function"!=typeof this.exec)return u.call(this,t);var e=this.exec(t);if(null!==e&&!a(e))throw new Error("RegExp exec method returned something other than an Object or null");return!!e}})},function(t,e,n){"use strict";var r=n(20),i=n(6),o=n(2),a=n(56),s=RegExp.prototype,u=s.toString,c=o((function(){return"/a/b"!=u.call({source:"a",flags:"b"})})),l="toString"!=u.name;(c||l)&&r(RegExp.prototype,"toString",(function(){var t=i(this),e=String(t.source),n=t.flags;return"/"+e+"/"+String(void 0===n&&t instanceof RegExp&&!("flags"in s)?a.call(t):n)}),{unsafe:!0})},function(t,e,n){"use strict";var r=n(80),i=n(140);t.exports=r("Set",(function(t){return function(){return t(this,arguments.length?arguments[0]:void 0)}}),i)},function(t,e,n){"use strict";var r=n(0),i=n(86).codeAt;r({target:"String",proto:!0},{codePointAt:function(t){return i(this,t)}})},function(t,e,n){"use strict";var r,i=n(0),o=n(17).f,a=n(10),s=n(115),u=n(18),c=n(116),l=n(28),h="".endsWith,f=Math.min,d=c("endsWith");i({target:"String",proto:!0,forced:!!(l||d||(r=o(String.prototype,"endsWith"),!r||r.writable))&&!d},{endsWith:function(t){var e=String(u(this));s(t);var n=arguments.length>1?arguments[1]:void 0,r=a(e.length),i=void 0===n?r:f(a(n),r),o=String(t);return h?h.call(e,o,i):e.slice(i-o.length,i)===o}})},function(t,e,n){var r=n(0),i=n(40),o=String.fromCharCode,a=String.fromCodePoint;r({target:"String",stat:!0,forced:!!a&&1!=a.length},{fromCodePoint:function(t){for(var e,n=[],r=arguments.length,a=0;r>a;){if(e=+arguments[a++],i(e,1114111)!==e)throw RangeError(e+" is not a valid code point");n.push(e<65536?o(e):o(55296+((e-=65536)>>10),e%1024+56320))}return n.join("")}})},function(t,e,n){"use strict";var r=n(0),i=n(115),o=n(18);r({target:"String",proto:!0,forced:!n(116)("includes")},{includes:function(t){return!!~String(o(this)).indexOf(i(t),arguments.length>1?arguments[1]:void 0)}})},function(t,e,n){"use strict";var r=n(87),i=n(6),o=n(10),a=n(18),s=n(88),u=n(89);r("match",1,(function(t,e,n){return[function(e){var n=a(this),r=null==e?void 0:e[t];return void 0!==r?r.call(e,n):new RegExp(e)[t](String(n))},function(t){var r=n(e,t,this);if(r.done)return r.value;var a=i(t),c=String(this);if(!a.global)return u(a,c);var l=a.unicode;a.lastIndex=0;for(var h,f=[],d=0;null!==(h=u(a,c));){var p=String(h[0]);f[d]=p,""===p&&(a.lastIndex=s(c,o(a.lastIndex),l)),d++}return 0===d?null:f}]}))},function(t,e,n){"use strict";var r=n(0),i=n(106),o=n(18),a=n(10),s=n(22),u=n(6),c=n(36),l=n(71),h=n(56),f=n(19),d=n(2),p=n(8),m=n(38),g=n(88),v=n(21),y=n(28),b=p("matchAll"),_=v.set,x=v.getterFor("RegExp String Iterator"),w=RegExp.prototype,S=w.exec,E="".matchAll,T=!!E&&!d((function(){"a".matchAll(/./)})),M=i((function(t,e,n,r){_(this,{type:"RegExp String Iterator",regexp:t,string:e,global:n,unicode:r,done:!1})}),"RegExp String",(function(){var t=x(this);if(t.done)return{value:void 0,done:!0};var e=t.regexp,n=t.string,r=function(t,e){var n,r=t.exec;if("function"==typeof r){if("object"!=typeof(n=r.call(t,e)))throw TypeError("Incorrect exec result");return n}return S.call(t,e)}(e,n);return null===r?{value:void 0,done:t.done=!0}:t.global?(""==String(r[0])&&(e.lastIndex=g(n,a(e.lastIndex),t.unicode)),{value:r,done:!1}):(t.done=!0,{value:r,done:!1})})),A=function(t){var e,n,r,i,o,s,c=u(this),l=String(t);return e=m(c,RegExp),void 0===(n=c.flags)&&c instanceof RegExp&&!("flags"in w)&&(n=h.call(c)),r=void 0===n?"":String(n),i=new e(e===RegExp?c.source:c,r),o=!!~r.indexOf("g"),s=!!~r.indexOf("u"),i.lastIndex=a(c.lastIndex),new M(i,l,o,s)};r({target:"String",proto:!0,forced:T},{matchAll:function(t){var e,n,r,i=o(this);if(null!=t){if(l(t)&&!~String(o("flags"in w?t.flags:h.call(t))).indexOf("g"))throw TypeError("`.matchAll` does not allow non-global regexes");if(T)return E.apply(i,arguments);if(void 0===(n=t[b])&&y&&"RegExp"==c(t)&&(n=A),null!=n)return s(n).call(t,i)}else if(T)return E.apply(i,arguments);return e=String(i),r=new RegExp(t,"g"),y?A.call(r,e):r[b](e)}}),y||b in w||f(w,b,A)},function(t,e,n){"use strict";var r=n(0),i=n(108).end;r({target:"String",proto:!0,forced:n(154)},{padEnd:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0)}})},function(t,e,n){"use strict";var r=n(0),i=n(108).start;r({target:"String",proto:!0,forced:n(154)},{padStart:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0)}})},function(t,e,n){var r=n(0),i=n(24),o=n(10);r({target:"String",stat:!0},{raw:function(t){for(var e=i(t.raw),n=o(e.length),r=arguments.length,a=[],s=0;n>s;)a.push(String(e[s++])),s<r&&a.push(String(arguments[s]));return a.join("")}})},function(t,e,n){n(0)({target:"String",proto:!0},{repeat:n(109)})},function(t,e,n){"use strict";var r=n(87),i=n(6),o=n(10),a=n(29),s=n(18),u=n(88),c=n(155),l=n(89),h=Math.max,f=Math.min;r("replace",2,(function(t,e,n,r){var d=r.REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE,p=r.REPLACE_KEEPS_$0,m=d?"$":"$0";return[function(n,r){var i=s(this),o=null==n?void 0:n[t];return void 0!==o?o.call(n,i,r):e.call(String(i),n,r)},function(t,r){if(!d&&p||"string"==typeof r&&-1===r.indexOf(m)){var s=n(e,t,this,r);if(s.done)return s.value}var g=i(t),v=String(this),y="function"==typeof r;y||(r=String(r));var b=g.global;if(b){var _=g.unicode;g.lastIndex=0}for(var x=[];;){var w=l(g,v);if(null===w)break;if(x.push(w),!b)break;""===String(w[0])&&(g.lastIndex=u(v,o(g.lastIndex),_))}for(var S,E="",T=0,M=0;M<x.length;M++){w=x[M];for(var A=String(w[0]),L=h(f(a(w.index),v.length),0),D=[],C=1;C<w.length;C++)D.push(void 0===(S=w[C])?S:String(S));var P=w.groups;if(y){var R=[A].concat(D,L,v);void 0!==P&&R.push(P);var k=String(r.apply(void 0,R))}else k=c(A,v,L,D,P,r);L>=T&&(E+=v.slice(T,L)+k,T=L+A.length)}return E+v.slice(T)}]}))},function(t,e,n){"use strict";var r=n(0),i=n(18),o=n(71),a=n(56),s=n(155),u=n(8),c=n(28),l=u("replace"),h=RegExp.prototype,f=Math.max,d=function(t,e,n){return n>t.length?-1:""===e?n:t.indexOf(e,n)};r({target:"String",proto:!0},{replaceAll:function(t,e){var n,r,u,p,m,g,v,y,b=i(this),_=0,x=0,w="";if(null!=t){if((n=o(t))&&!~String(i("flags"in h?t.flags:a.call(t))).indexOf("g"))throw TypeError("`.replaceAll` does not allow non-global regexes");if(void 0!==(r=t[l]))return r.call(t,b,e);if(c&&n)return String(b).replace(t,e)}for(u=String(b),p=String(t),(m="function"==typeof e)||(e=String(e)),g=p.length,v=f(1,g),_=d(u,p,0);-1!==_;)y=m?String(e(p,_,u)):s(p,u,_,[],void 0,e),w+=u.slice(x,_)+y,x=_+g,_=d(u,p,_+v);return x<u.length&&(w+=u.slice(x)),w}})},function(t,e,n){"use strict";var r=n(87),i=n(6),o=n(18),a=n(148),s=n(89);r("search",1,(function(t,e,n){return[function(e){var n=o(this),r=null==e?void 0:e[t];return void 0!==r?r.call(e,n):new RegExp(e)[t](String(n))},function(t){var r=n(e,t,this);if(r.done)return r.value;var o=i(t),u=String(this),c=o.lastIndex;a(c,0)||(o.lastIndex=0);var l=s(o,u);return a(o.lastIndex,c)||(o.lastIndex=c),null===l?-1:l.index}]}))},function(t,e,n){"use strict";var r=n(87),i=n(71),o=n(6),a=n(18),s=n(38),u=n(88),c=n(10),l=n(89),h=n(114),f=n(72).UNSUPPORTED_Y,d=[].push,p=Math.min;r("split",2,(function(t,e,n){var r;return r="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length?function(t,n){var r=String(a(this)),o=void 0===n?4294967295:n>>>0;if(0===o)return[];if(void 0===t)return[r];if(!i(t))return e.call(r,t,o);for(var s,u,c,l=[],f=(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.unicode?"u":"")+(t.sticky?"y":""),p=0,m=new RegExp(t.source,f+"g");(s=h.call(m,r))&&!((u=m.lastIndex)>p&&(l.push(r.slice(p,s.index)),s.length>1&&s.index<r.length&&d.apply(l,s.slice(1)),c=s[0].length,p=u,l.length>=o));)m.lastIndex===s.index&&m.lastIndex++;return p===r.length?!c&&m.test("")||l.push(""):l.push(r.slice(p)),l.length>o?l.slice(0,o):l}:"0".split(void 0,0).length?function(t,n){return void 0===t&&0===n?[]:e.call(this,t,n)}:e,[function(e,n){var i=a(this),o=null==e?void 0:e[t];return void 0!==o?o.call(e,i,n):r.call(String(i),e,n)},function(t,i){var a=n(r,t,this,i,r!==e);if(a.done)return a.value;var h=o(t),d=String(this),m=s(h,RegExp),g=h.unicode,v=(h.ignoreCase?"i":"")+(h.multiline?"m":"")+(h.unicode?"u":"")+(f?"g":"y"),y=new m(f?"^(?:"+h.source+")":h,v),b=void 0===i?4294967295:i>>>0;if(0===b)return[];if(0===d.length)return null===l(y,d)?[d]:[];for(var _=0,x=0,w=[];x<d.length;){y.lastIndex=f?0:x;var S,E=l(y,f?d.slice(x):d);if(null===E||(S=p(c(y.lastIndex+(f?x:0)),d.length))===_)x=u(d,x,g);else{if(w.push(d.slice(_,x)),w.length===b)return w;for(var T=1;T<=E.length-1;T++)if(w.push(E[T]),w.length===b)return w;x=_=S}}return w.push(d.slice(_)),w}]}),f)},function(t,e,n){"use strict";var r,i=n(0),o=n(17).f,a=n(10),s=n(115),u=n(18),c=n(116),l=n(28),h="".startsWith,f=Math.min,d=c("startsWith");i({target:"String",proto:!0,forced:!!(l||d||(r=o(String.prototype,"startsWith"),!r||r.writable))&&!d},{startsWith:function(t){var e=String(u(this));s(t);var n=a(f(arguments.length>1?arguments[1]:void 0,e.length)),r=String(t);return h?h.call(e,r,n):e.slice(n,n+r.length)===r}})},function(t,e,n){"use strict";var r=n(0),i=n(55).trim;r({target:"String",proto:!0,forced:n(117)("trim")},{trim:function(){return i(this)}})},function(t,e,n){"use strict";var r=n(0),i=n(55).end,o=n(117)("trimEnd"),a=o?function(){return i(this)}:"".trimEnd;r({target:"String",proto:!0,forced:o},{trimEnd:a,trimRight:a})},function(t,e,n){"use strict";var r=n(0),i=n(55).start,o=n(117)("trimStart"),a=o?function(){return i(this)}:"".trimStart;r({target:"String",proto:!0,forced:o},{trimStart:a,trimLeft:a})},function(t,e,n){"use strict";var r=n(0),i=n(26);r({target:"String",proto:!0,forced:n(27)("anchor")},{anchor:function(t){return i(this,"a","name",t)}})},function(t,e,n){"use strict";var r=n(0),i=n(26);r({target:"String",proto:!0,forced:n(27)("big")},{big:function(){return i(this,"big","","")}})},function(t,e,n){"use strict";var r=n(0),i=n(26);r({target:"String",proto:!0,forced:n(27)("blink")},{blink:function(){return i(this,"blink","","")}})},function(t,e,n){"use strict";var r=n(0),i=n(26);r({target:"String",proto:!0,forced:n(27)("bold")},{bold:function(){return i(this,"b","","")}})},function(t,e,n){"use strict";var r=n(0),i=n(26);r({target:"String",proto:!0,forced:n(27)("fixed")},{fixed:function(){return i(this,"tt","","")}})},function(t,e,n){"use strict";var r=n(0),i=n(26);r({target:"String",proto:!0,forced:n(27)("fontcolor")},{fontcolor:function(t){return i(this,"font","color",t)}})},function(t,e,n){"use strict";var r=n(0),i=n(26);r({target:"String",proto:!0,forced:n(27)("fontsize")},{fontsize:function(t){return i(this,"font","size",t)}})},function(t,e,n){"use strict";var r=n(0),i=n(26);r({target:"String",proto:!0,forced:n(27)("italics")},{italics:function(){return i(this,"i","","")}})},function(t,e,n){"use strict";var r=n(0),i=n(26);r({target:"String",proto:!0,forced:n(27)("link")},{link:function(t){return i(this,"a","href",t)}})},function(t,e,n){"use strict";var r=n(0),i=n(26);r({target:"String",proto:!0,forced:n(27)("small")},{small:function(){return i(this,"small","","")}})},function(t,e,n){"use strict";var r=n(0),i=n(26);r({target:"String",proto:!0,forced:n(27)("strike")},{strike:function(){return i(this,"strike","","")}})},function(t,e,n){"use strict";var r=n(0),i=n(26);r({target:"String",proto:!0,forced:n(27)("sub")},{sub:function(){return i(this,"sub","","")}})},function(t,e,n){"use strict";var r=n(0),i=n(26);r({target:"String",proto:!0,forced:n(27)("sup")},{sup:function(){return i(this,"sup","","")}})},function(t,e,n){n(39)("Float32",(function(t){return function(e,n,r){return t(this,e,n,r)}}))},function(t,e,n){var r=n(29);t.exports=function(t){var e=r(t);if(e<0)throw RangeError("The argument can't be less than 0");return e}},function(t,e,n){n(39)("Float64",(function(t){return function(e,n,r){return t(this,e,n,r)}}))},function(t,e,n){n(39)("Int8",(function(t){return function(e,n,r){return t(this,e,n,r)}}))},function(t,e,n){n(39)("Int16",(function(t){return function(e,n,r){return t(this,e,n,r)}}))},function(t,e,n){n(39)("Int32",(function(t){return function(e,n,r){return t(this,e,n,r)}}))},function(t,e,n){n(39)("Uint8",(function(t){return function(e,n,r){return t(this,e,n,r)}}))},function(t,e,n){n(39)("Uint8",(function(t){return function(e,n,r){return t(this,e,n,r)}}),!0)},function(t,e,n){n(39)("Uint16",(function(t){return function(e,n,r){return t(this,e,n,r)}}))},function(t,e,n){n(39)("Uint32",(function(t){return function(e,n,r){return t(this,e,n,r)}}))},function(t,e,n){"use strict";var r=n(9),i=n(132),o=r.aTypedArray;(0,r.exportTypedArrayMethod)("copyWithin",(function(t,e){return i.call(o(this),t,e,arguments.length>2?arguments[2]:void 0)}))},function(t,e,n){"use strict";var r=n(9),i=n(16).every,o=r.aTypedArray;(0,r.exportTypedArrayMethod)("every",(function(t){return i(o(this),t,arguments.length>1?arguments[1]:void 0)}))},function(t,e,n){"use strict";var r=n(9),i=n(104),o=r.aTypedArray;(0,r.exportTypedArrayMethod)("fill",(function(t){return i.apply(o(this),arguments)}))},function(t,e,n){"use strict";var r=n(9),i=n(16).filter,o=n(368),a=r.aTypedArray;(0,r.exportTypedArrayMethod)("filter",(function(t){var e=i(a(this),t,arguments.length>1?arguments[1]:void 0);return o(this,e)}))},function(t,e,n){var r=n(9).aTypedArrayConstructor,i=n(38);t.exports=function(t,e){for(var n=i(t,t.constructor),o=0,a=e.length,s=new(r(n))(a);a>o;)s[o]=e[o++];return s}},function(t,e,n){"use strict";var r=n(9),i=n(16).find,o=r.aTypedArray;(0,r.exportTypedArrayMethod)("find",(function(t){return i(o(this),t,arguments.length>1?arguments[1]:void 0)}))},function(t,e,n){"use strict";var r=n(9),i=n(16).findIndex,o=r.aTypedArray;(0,r.exportTypedArrayMethod)("findIndex",(function(t){return i(o(this),t,arguments.length>1?arguments[1]:void 0)}))},function(t,e,n){"use strict";var r=n(9),i=n(16).forEach,o=r.aTypedArray;(0,r.exportTypedArrayMethod)("forEach",(function(t){i(o(this),t,arguments.length>1?arguments[1]:void 0)}))},function(t,e,n){"use strict";var r=n(118);(0,n(9).exportTypedArrayStaticMethod)("from",n(157),r)},function(t,e,n){"use strict";var r=n(9),i=n(61).includes,o=r.aTypedArray;(0,r.exportTypedArrayMethod)("includes",(function(t){return i(o(this),t,arguments.length>1?arguments[1]:void 0)}))},function(t,e,n){"use strict";var r=n(9),i=n(61).indexOf,o=r.aTypedArray;(0,r.exportTypedArrayMethod)("indexOf",(function(t){return i(o(this),t,arguments.length>1?arguments[1]:void 0)}))},function(t,e,n){"use strict";var r=n(3),i=n(9),o=n(77),a=n(8)("iterator"),s=r.Uint8Array,u=o.values,c=o.keys,l=o.entries,h=i.aTypedArray,f=i.exportTypedArrayMethod,d=s&&s.prototype[a],p=!!d&&("values"==d.name||null==d.name),m=function(){return u.call(h(this))};f("entries",(function(){return l.call(h(this))})),f("keys",(function(){return c.call(h(this))})),f("values",m,!p),f(a,m,!p)},function(t,e,n){"use strict";var r=n(9),i=r.aTypedArray,o=r.exportTypedArrayMethod,a=[].join;o("join",(function(t){return a.apply(i(this),arguments)}))},function(t,e,n){"use strict";var r=n(9),i=n(137),o=r.aTypedArray;(0,r.exportTypedArrayMethod)("lastIndexOf",(function(t){return i.apply(o(this),arguments)}))},function(t,e,n){"use strict";var r=n(9),i=n(16).map,o=n(38),a=r.aTypedArray,s=r.aTypedArrayConstructor;(0,r.exportTypedArrayMethod)("map",(function(t){return i(a(this),t,arguments.length>1?arguments[1]:void 0,(function(t,e){return new(s(o(t,t.constructor)))(e)}))}))},function(t,e,n){"use strict";var r=n(9),i=n(118),o=r.aTypedArrayConstructor;(0,r.exportTypedArrayStaticMethod)("of",(function(){for(var t=0,e=arguments.length,n=new(o(this))(e);e>t;)n[t]=arguments[t++];return n}),i)},function(t,e,n){"use strict";var r=n(9),i=n(78).left,o=r.aTypedArray;(0,r.exportTypedArrayMethod)("reduce",(function(t){return i(o(this),t,arguments.length,arguments.length>1?arguments[1]:void 0)}))},function(t,e,n){"use strict";var r=n(9),i=n(78).right,o=r.aTypedArray;(0,r.exportTypedArrayMethod)("reduceRight",(function(t){return i(o(this),t,arguments.length,arguments.length>1?arguments[1]:void 0)}))},function(t,e,n){"use strict";var r=n(9),i=r.aTypedArray,o=r.exportTypedArrayMethod,a=Math.floor;o("reverse",(function(){for(var t,e=i(this).length,n=a(e/2),r=0;r<n;)t=this[r],this[r++]=this[--e],this[e]=t;return this}))},function(t,e,n){"use strict";var r=n(9),i=n(10),o=n(156),a=n(13),s=n(2),u=r.aTypedArray;(0,r.exportTypedArrayMethod)("set",(function(t){u(this);var e=o(arguments.length>1?arguments[1]:void 0,1),n=this.length,r=a(t),s=i(r.length),c=0;if(s+e>n)throw RangeError("Wrong length");for(;c<s;)this[e+c]=r[c++]}),s((function(){new Int8Array(1).set({})})))},function(t,e,n){"use strict";var r=n(9),i=n(38),o=n(2),a=r.aTypedArray,s=r.aTypedArrayConstructor,u=r.exportTypedArrayMethod,c=[].slice;u("slice",(function(t,e){for(var n=c.call(a(this),t,e),r=i(this,this.constructor),o=0,u=n.length,l=new(s(r))(u);u>o;)l[o]=n[o++];return l}),o((function(){new Int8Array(1).slice()})))},function(t,e,n){"use strict";var r=n(9),i=n(16).some,o=r.aTypedArray;(0,r.exportTypedArrayMethod)("some",(function(t){return i(o(this),t,arguments.length>1?arguments[1]:void 0)}))},function(t,e,n){"use strict";var r=n(9),i=r.aTypedArray,o=r.exportTypedArrayMethod,a=[].sort;o("sort",(function(t){return a.call(i(this),t)}))},function(t,e,n){"use strict";var r=n(9),i=n(10),o=n(40),a=n(38),s=r.aTypedArray;(0,r.exportTypedArrayMethod)("subarray",(function(t,e){var n=s(this),r=n.length,u=o(t,r);return new(a(n,n.constructor))(n.buffer,n.byteOffset+u*n.BYTES_PER_ELEMENT,i((void 0===e?r:o(e,r))-u))}))},function(t,e,n){"use strict";var r=n(3),i=n(9),o=n(2),a=r.Int8Array,s=i.aTypedArray,u=i.exportTypedArrayMethod,c=[].toLocaleString,l=[].slice,h=!!a&&o((function(){c.call(new a(1))}));u("toLocaleString",(function(){return c.apply(h?l.call(s(this)):s(this),arguments)}),o((function(){return[1,2].toLocaleString()!=new a([1,2]).toLocaleString()}))||!o((function(){a.prototype.toLocaleString.call([1,2])})))},function(t,e,n){"use strict";var r=n(9).exportTypedArrayMethod,i=n(2),o=n(3).Uint8Array,a=o&&o.prototype||{},s=[].toString,u=[].join;i((function(){s.call({})}))&&(s=function(){return u.call(this)});var c=a.toString!=s;r("toString",s,c)},function(t,e,n){"use strict";var r,i=n(3),o=n(54),a=n(51),s=n(80),u=n(158),c=n(5),l=n(21).enforce,h=n(123),f=!i.ActiveXObject&&"ActiveXObject"in i,d=Object.isExtensible,p=function(t){return function(){return t(this,arguments.length?arguments[0]:void 0)}},m=t.exports=s("WeakMap",p,u);if(h&&f){r=u.getConstructor(p,"WeakMap",!0),a.REQUIRED=!0;var g=m.prototype,v=g.delete,y=g.has,b=g.get,_=g.set;o(g,{delete:function(t){if(c(t)&&!d(t)){var e=l(this);return e.frozen||(e.frozen=new r),v.call(this,t)||e.frozen.delete(t)}return v.call(this,t)},has:function(t){if(c(t)&&!d(t)){var e=l(this);return e.frozen||(e.frozen=new r),y.call(this,t)||e.frozen.has(t)}return y.call(this,t)},get:function(t){if(c(t)&&!d(t)){var e=l(this);return e.frozen||(e.frozen=new r),y.call(this,t)?b.call(this,t):e.frozen.get(t)}return b.call(this,t)},set:function(t,e){if(c(t)&&!d(t)){var n=l(this);n.frozen||(n.frozen=new r),y.call(this,t)?_.call(this,t,e):n.frozen.set(t,e)}else _.call(this,t,e);return this}})}},function(t,e,n){"use strict";n(80)("WeakSet",(function(t){return function(){return t(this,arguments.length?arguments[0]:void 0)}}),n(158))},function(t,e,n){var r=n(3),i=n(159),o=n(134),a=n(19);for(var s in i){var u=r[s],c=u&&u.prototype;if(c&&c.forEach!==o)try{a(c,"forEach",o)}catch(t){c.forEach=o}}},function(t,e,n){var r=n(3),i=n(159),o=n(77),a=n(19),s=n(8),u=s("iterator"),c=s("toStringTag"),l=o.values;for(var h in i){var f=r[h],d=f&&f.prototype;if(d){if(d[u]!==l)try{a(d,u,l)}catch(t){d[u]=l}if(d[c]||a(d,c,h),i[h])for(var p in o)if(d[p]!==o[p])try{a(d,p,o[p])}catch(t){d[p]=o[p]}}}},function(t,e,n){var r=n(0),i=n(3),o=n(111);r({global:!0,bind:!0,enumerable:!0,forced:!i.setImmediate||!i.clearImmediate},{setImmediate:o.set,clearImmediate:o.clear})},function(t,e,n){var r=n(0),i=n(3),o=n(151),a=n(48),s=i.process;r({global:!0,enumerable:!0,noTargetGet:!0},{queueMicrotask:function(t){var e=a&&s.domain;o(e?e.bind(t):t)}})},function(t,e,n){var r=n(0),i=n(3),o=n(63),a=[].slice,s=function(t){return function(e,n){var r=arguments.length>2,i=r?a.call(arguments,2):void 0;return t(r?function(){("function"==typeof e?e:Function(e)).apply(this,i)}:e,n)}};r({global:!0,bind:!0,forced:/MSIE .\./.test(o)},{setTimeout:s(i.setTimeout),setInterval:s(i.setInterval)})},function(t,e,n){"use strict";n(153);var r,i=n(0),o=n(7),a=n(160),s=n(3),u=n(100),c=n(20),l=n(45),h=n(15),f=n(146),d=n(135),p=n(86).codeAt,m=n(398),g=n(32),v=n(161),y=n(21),b=s.URL,_=v.URLSearchParams,x=v.getState,w=y.set,S=y.getterFor("URL"),E=Math.floor,T=Math.pow,M=/[A-Za-z]/,A=/[\d+-.A-Za-z]/,L=/\d/,D=/^(0x|0X)/,C=/^[0-7]+$/,P=/^\d+$/,R=/^[\dA-Fa-f]+$/,k=/[\u0000\t\u000A\u000D #%/:?@[\\]]/,O=/[\u0000\t\u000A\u000D #/:?@[\\]]/,I=/^[\u0000-\u001F ]+|[\u0000-\u001F ]+$/g,F=/[\t\u000A\u000D]/g,z=function(t,e){var n,r,i;if("["==e.charAt(0)){if("]"!=e.charAt(e.length-1))return"Invalid host";if(!(n=N(e.slice(1,-1))))return"Invalid host";t.host=n}else if(X(t)){if(e=m(e),k.test(e))return"Invalid host";if(null===(n=B(e)))return"Invalid host";t.host=n}else{if(O.test(e))return"Invalid host";for(n="",r=d(e),i=0;i<r.length;i++)n+=W(r[i],j);t.host=n}},B=function(t){var e,n,r,i,o,a,s,u=t.split(".");if(u.length&&""==u[u.length-1]&&u.pop(),(e=u.length)>4)return t;for(n=[],r=0;r<e;r++){if(""==(i=u[r]))return t;if(o=10,i.length>1&&"0"==i.charAt(0)&&(o=D.test(i)?16:8,i=i.slice(8==o?1:2)),""===i)a=0;else{if(!(10==o?P:8==o?C:R).test(i))return t;a=parseInt(i,o)}n.push(a)}for(r=0;r<e;r++)if(a=n[r],r==e-1){if(a>=T(256,5-e))return null}else if(a>255)return null;for(s=n.pop(),r=0;r<n.length;r++)s+=n[r]*T(256,3-r);return s},N=function(t){var e,n,r,i,o,a,s,u=[0,0,0,0,0,0,0,0],c=0,l=null,h=0,f=function(){return t.charAt(h)};if(":"==f()){if(":"!=t.charAt(1))return;h+=2,l=++c}for(;f();){if(8==c)return;if(":"!=f()){for(e=n=0;n<4&&R.test(f());)e=16*e+parseInt(f(),16),h++,n++;if("."==f()){if(0==n)return;if(h-=n,c>6)return;for(r=0;f();){if(i=null,r>0){if(!("."==f()&&r<4))return;h++}if(!L.test(f()))return;for(;L.test(f());){if(o=parseInt(f(),10),null===i)i=o;else{if(0==i)return;i=10*i+o}if(i>255)return;h++}u[c]=256*u[c]+i,2!=++r&&4!=r||c++}if(4!=r)return;break}if(":"==f()){if(h++,!f())return}else if(f())return;u[c++]=e}else{if(null!==l)return;h++,l=++c}}if(null!==l)for(a=c-l,c=7;0!=c&&a>0;)s=u[c],u[c--]=u[l+a-1],u[l+--a]=s;else if(8!=c)return;return u},U=function(t){var e,n,r,i;if("number"==typeof t){for(e=[],n=0;n<4;n++)e.unshift(t%256),t=E(t/256);return e.join(".")}if("object"==typeof t){for(e="",r=function(t){for(var e=null,n=1,r=null,i=0,o=0;o<8;o++)0!==t[o]?(i>n&&(e=r,n=i),r=null,i=0):(null===r&&(r=o),++i);return i>n&&(e=r,n=i),e}(t),n=0;n<8;n++)i&&0===t[n]||(i&&(i=!1),r===n?(e+=n?":":"::",i=!0):(e+=t[n].toString(16),n<7&&(e+=":")));return"["+e+"]"}return t},j={},H=f({},j,{" ":1,'"':1,"<":1,">":1,"`":1}),V=f({},H,{"#":1,"?":1,"{":1,"}":1}),G=f({},V,{"/":1,":":1,";":1,"=":1,"@":1,"[":1,"\\":1,"]":1,"^":1,"|":1}),W=function(t,e){var n=p(t,0);return n>32&&n<127&&!h(e,t)?t:encodeURIComponent(t)},q={ftp:21,file:null,http:80,https:443,ws:80,wss:443},X=function(t){return h(q,t.scheme)},Y=function(t){return""!=t.username||""!=t.password},Z=function(t){return!t.host||t.cannotBeABaseURL||"file"==t.scheme},J=function(t,e){var n;return 2==t.length&&M.test(t.charAt(0))&&(":"==(n=t.charAt(1))||!e&&"|"==n)},Q=function(t){var e;return t.length>1&&J(t.slice(0,2))&&(2==t.length||"/"===(e=t.charAt(2))||"\\"===e||"?"===e||"#"===e)},K=function(t){var e=t.path,n=e.length;!n||"file"==t.scheme&&1==n&&J(e[0],!0)||e.pop()},$=function(t){return"."===t||"%2e"===t.toLowerCase()},tt={},et={},nt={},rt={},it={},ot={},at={},st={},ut={},ct={},lt={},ht={},ft={},dt={},pt={},mt={},gt={},vt={},yt={},bt={},_t={},xt=function(t,e,n,i){var o,a,s,u,c,l=n||tt,f=0,p="",m=!1,g=!1,v=!1;for(n||(t.scheme="",t.username="",t.password="",t.host=null,t.port=null,t.path=[],t.query=null,t.fragment=null,t.cannotBeABaseURL=!1,e=e.replace(I,"")),e=e.replace(F,""),o=d(e);f<=o.length;){switch(a=o[f],l){case tt:if(!a||!M.test(a)){if(n)return"Invalid scheme";l=nt;continue}p+=a.toLowerCase(),l=et;break;case et:if(a&&(A.test(a)||"+"==a||"-"==a||"."==a))p+=a.toLowerCase();else{if(":"!=a){if(n)return"Invalid scheme";p="",l=nt,f=0;continue}if(n&&(X(t)!=h(q,p)||"file"==p&&(Y(t)||null!==t.port)||"file"==t.scheme&&!t.host))return;if(t.scheme=p,n)return void(X(t)&&q[t.scheme]==t.port&&(t.port=null));p="","file"==t.scheme?l=dt:X(t)&&i&&i.scheme==t.scheme?l=rt:X(t)?l=st:"/"==o[f+1]?(l=it,f++):(t.cannotBeABaseURL=!0,t.path.push(""),l=yt)}break;case nt:if(!i||i.cannotBeABaseURL&&"#"!=a)return"Invalid scheme";if(i.cannotBeABaseURL&&"#"==a){t.scheme=i.scheme,t.path=i.path.slice(),t.query=i.query,t.fragment="",t.cannotBeABaseURL=!0,l=_t;break}l="file"==i.scheme?dt:ot;continue;case rt:if("/"!=a||"/"!=o[f+1]){l=ot;continue}l=ut,f++;break;case it:if("/"==a){l=ct;break}l=vt;continue;case ot:if(t.scheme=i.scheme,a==r)t.username=i.username,t.password=i.password,t.host=i.host,t.port=i.port,t.path=i.path.slice(),t.query=i.query;else if("/"==a||"\\"==a&&X(t))l=at;else if("?"==a)t.username=i.username,t.password=i.password,t.host=i.host,t.port=i.port,t.path=i.path.slice(),t.query="",l=bt;else{if("#"!=a){t.username=i.username,t.password=i.password,t.host=i.host,t.port=i.port,t.path=i.path.slice(),t.path.pop(),l=vt;continue}t.username=i.username,t.password=i.password,t.host=i.host,t.port=i.port,t.path=i.path.slice(),t.query=i.query,t.fragment="",l=_t}break;case at:if(!X(t)||"/"!=a&&"\\"!=a){if("/"!=a){t.username=i.username,t.password=i.password,t.host=i.host,t.port=i.port,l=vt;continue}l=ct}else l=ut;break;case st:if(l=ut,"/"!=a||"/"!=p.charAt(f+1))continue;f++;break;case ut:if("/"!=a&&"\\"!=a){l=ct;continue}break;case ct:if("@"==a){m&&(p="%40"+p),m=!0,s=d(p);for(var y=0;y<s.length;y++){var b=s[y];if(":"!=b||v){var _=W(b,G);v?t.password+=_:t.username+=_}else v=!0}p=""}else if(a==r||"/"==a||"?"==a||"#"==a||"\\"==a&&X(t)){if(m&&""==p)return"Invalid authority";f-=d(p).length+1,p="",l=lt}else p+=a;break;case lt:case ht:if(n&&"file"==t.scheme){l=mt;continue}if(":"!=a||g){if(a==r||"/"==a||"?"==a||"#"==a||"\\"==a&&X(t)){if(X(t)&&""==p)return"Invalid host";if(n&&""==p&&(Y(t)||null!==t.port))return;if(u=z(t,p))return u;if(p="",l=gt,n)return;continue}"["==a?g=!0:"]"==a&&(g=!1),p+=a}else{if(""==p)return"Invalid host";if(u=z(t,p))return u;if(p="",l=ft,n==ht)return}break;case ft:if(!L.test(a)){if(a==r||"/"==a||"?"==a||"#"==a||"\\"==a&&X(t)||n){if(""!=p){var x=parseInt(p,10);if(x>65535)return"Invalid port";t.port=X(t)&&x===q[t.scheme]?null:x,p=""}if(n)return;l=gt;continue}return"Invalid port"}p+=a;break;case dt:if(t.scheme="file","/"==a||"\\"==a)l=pt;else{if(!i||"file"!=i.scheme){l=vt;continue}if(a==r)t.host=i.host,t.path=i.path.slice(),t.query=i.query;else if("?"==a)t.host=i.host,t.path=i.path.slice(),t.query="",l=bt;else{if("#"!=a){Q(o.slice(f).join(""))||(t.host=i.host,t.path=i.path.slice(),K(t)),l=vt;continue}t.host=i.host,t.path=i.path.slice(),t.query=i.query,t.fragment="",l=_t}}break;case pt:if("/"==a||"\\"==a){l=mt;break}i&&"file"==i.scheme&&!Q(o.slice(f).join(""))&&(J(i.path[0],!0)?t.path.push(i.path[0]):t.host=i.host),l=vt;continue;case mt:if(a==r||"/"==a||"\\"==a||"?"==a||"#"==a){if(!n&&J(p))l=vt;else if(""==p){if(t.host="",n)return;l=gt}else{if(u=z(t,p))return u;if("localhost"==t.host&&(t.host=""),n)return;p="",l=gt}continue}p+=a;break;case gt:if(X(t)){if(l=vt,"/"!=a&&"\\"!=a)continue}else if(n||"?"!=a)if(n||"#"!=a){if(a!=r&&(l=vt,"/"!=a))continue}else t.fragment="",l=_t;else t.query="",l=bt;break;case vt:if(a==r||"/"==a||"\\"==a&&X(t)||!n&&("?"==a||"#"==a)){if(".."===(c=(c=p).toLowerCase())||"%2e."===c||".%2e"===c||"%2e%2e"===c?(K(t),"/"==a||"\\"==a&&X(t)||t.path.push("")):$(p)?"/"==a||"\\"==a&&X(t)||t.path.push(""):("file"==t.scheme&&!t.path.length&&J(p)&&(t.host&&(t.host=""),p=p.charAt(0)+":"),t.path.push(p)),p="","file"==t.scheme&&(a==r||"?"==a||"#"==a))for(;t.path.length>1&&""===t.path[0];)t.path.shift();"?"==a?(t.query="",l=bt):"#"==a&&(t.fragment="",l=_t)}else p+=W(a,V);break;case yt:"?"==a?(t.query="",l=bt):"#"==a?(t.fragment="",l=_t):a!=r&&(t.path[0]+=W(a,j));break;case bt:n||"#"!=a?a!=r&&("'"==a&&X(t)?t.query+="%27":t.query+="#"==a?"%23":W(a,j)):(t.fragment="",l=_t);break;case _t:a!=r&&(t.fragment+=W(a,H))}f++}},wt=function(t){var e,n,r=l(this,wt,"URL"),i=arguments.length>1?arguments[1]:void 0,a=String(t),s=w(r,{type:"URL"});if(void 0!==i)if(i instanceof wt)e=S(i);else if(n=xt(e={},String(i)))throw TypeError(n);if(n=xt(s,a,null,e))throw TypeError(n);var u=s.searchParams=new _,c=x(u);c.updateSearchParams(s.query),c.updateURL=function(){s.query=String(u)||null},o||(r.href=Et.call(r),r.origin=Tt.call(r),r.protocol=Mt.call(r),r.username=At.call(r),r.password=Lt.call(r),r.host=Dt.call(r),r.hostname=Ct.call(r),r.port=Pt.call(r),r.pathname=Rt.call(r),r.search=kt.call(r),r.searchParams=Ot.call(r),r.hash=It.call(r))},St=wt.prototype,Et=function(){var t=S(this),e=t.scheme,n=t.username,r=t.password,i=t.host,o=t.port,a=t.path,s=t.query,u=t.fragment,c=e+":";return null!==i?(c+="//",Y(t)&&(c+=n+(r?":"+r:"")+"@"),c+=U(i),null!==o&&(c+=":"+o)):"file"==e&&(c+="//"),c+=t.cannotBeABaseURL?a[0]:a.length?"/"+a.join("/"):"",null!==s&&(c+="?"+s),null!==u&&(c+="#"+u),c},Tt=function(){var t=S(this),e=t.scheme,n=t.port;if("blob"==e)try{return new wt(e.path[0]).origin}catch(t){return"null"}return"file"!=e&&X(t)?e+"://"+U(t.host)+(null!==n?":"+n:""):"null"},Mt=function(){return S(this).scheme+":"},At=function(){return S(this).username},Lt=function(){return S(this).password},Dt=function(){var t=S(this),e=t.host,n=t.port;return null===e?"":null===n?U(e):U(e)+":"+n},Ct=function(){var t=S(this).host;return null===t?"":U(t)},Pt=function(){var t=S(this).port;return null===t?"":String(t)},Rt=function(){var t=S(this),e=t.path;return t.cannotBeABaseURL?e[0]:e.length?"/"+e.join("/"):""},kt=function(){var t=S(this).query;return t?"?"+t:""},Ot=function(){return S(this).searchParams},It=function(){var t=S(this).fragment;return t?"#"+t:""},Ft=function(t,e){return{get:t,set:e,configurable:!0,enumerable:!0}};if(o&&u(St,{href:Ft(Et,(function(t){var e=S(this),n=String(t),r=xt(e,n);if(r)throw TypeError(r);x(e.searchParams).updateSearchParams(e.query)})),origin:Ft(Tt),protocol:Ft(Mt,(function(t){var e=S(this);xt(e,String(t)+":",tt)})),username:Ft(At,(function(t){var e=S(this),n=d(String(t));if(!Z(e)){e.username="";for(var r=0;r<n.length;r++)e.username+=W(n[r],G)}})),password:Ft(Lt,(function(t){var e=S(this),n=d(String(t));if(!Z(e)){e.password="";for(var r=0;r<n.length;r++)e.password+=W(n[r],G)}})),host:Ft(Dt,(function(t){var e=S(this);e.cannotBeABaseURL||xt(e,String(t),lt)})),hostname:Ft(Ct,(function(t){var e=S(this);e.cannotBeABaseURL||xt(e,String(t),ht)})),port:Ft(Pt,(function(t){var e=S(this);Z(e)||(""==(t=String(t))?e.port=null:xt(e,t,ft))})),pathname:Ft(Rt,(function(t){var e=S(this);e.cannotBeABaseURL||(e.path=[],xt(e,t+"",gt))})),search:Ft(kt,(function(t){var e=S(this);""==(t=String(t))?e.query=null:("?"==t.charAt(0)&&(t=t.slice(1)),e.query="",xt(e,t,bt)),x(e.searchParams).updateSearchParams(e.query)})),searchParams:Ft(Ot),hash:Ft(It,(function(t){var e=S(this);""!=(t=String(t))?("#"==t.charAt(0)&&(t=t.slice(1)),e.fragment="",xt(e,t,_t)):e.fragment=null}))}),c(St,"toJSON",(function(){return Et.call(this)}),{enumerable:!0}),c(St,"toString",(function(){return Et.call(this)}),{enumerable:!0}),b){var zt=b.createObjectURL,Bt=b.revokeObjectURL;zt&&c(wt,"createObjectURL",(function(t){return zt.apply(b,arguments)})),Bt&&c(wt,"revokeObjectURL",(function(t){return Bt.apply(b,arguments)}))}g(wt,"URL"),i({global:!0,forced:!a,sham:!o},{URL:wt})},function(t,e,n){"use strict";var r=/[^\0-\u007E]/,i=/[.\u3002\uFF0E\uFF61]/g,o="Overflow: input needs wider integers to process",a=Math.floor,s=String.fromCharCode,u=function(t){return t+22+75*(t<26)},c=function(t,e,n){var r=0;for(t=n?a(t/700):t>>1,t+=a(t/e);t>455;r+=36)t=a(t/35);return a(r+36*t/(t+38))},l=function(t){var e,n,r=[],i=(t=function(t){for(var e=[],n=0,r=t.length;n<r;){var i=t.charCodeAt(n++);if(i>=55296&&i<=56319&&n<r){var o=t.charCodeAt(n++);56320==(64512&o)?e.push(((1023&i)<<10)+(1023&o)+65536):(e.push(i),n--)}else e.push(i)}return e}(t)).length,l=128,h=0,f=72;for(e=0;e<t.length;e++)(n=t[e])<128&&r.push(s(n));var d=r.length,p=d;for(d&&r.push("-");p<i;){var m=2147483647;for(e=0;e<t.length;e++)(n=t[e])>=l&&n<m&&(m=n);var g=p+1;if(m-l>a((2147483647-h)/g))throw RangeError(o);for(h+=(m-l)*g,l=m,e=0;e<t.length;e++){if((n=t[e])<l&&++h>2147483647)throw RangeError(o);if(n==l){for(var v=h,y=36;;y+=36){var b=y<=f?1:y>=f+26?26:y-f;if(v<b)break;var _=v-b,x=36-b;r.push(s(u(b+_%x))),v=a(_/x)}r.push(s(u(v))),f=c(h,g,p==d),h=0,++p}}++h,++l}return r.join("")};t.exports=function(t){var e,n,o=[],a=t.toLowerCase().replace(i,".").split(".");for(e=0;e<a.length;e++)n=a[e],o.push(r.test(n)?"xn--"+l(n):n);return o.join(".")}},function(t,e,n){var r=n(6),i=n(67);t.exports=function(t){var e=i(t);if("function"!=typeof e)throw TypeError(String(t)+" is not iterable");return r(e.call(t))}},function(t,e,n){"use strict";n(0)({target:"URL",proto:!0,enumerable:!0},{toJSON:function(){return URL.prototype.toString.call(this)}})},function(t,e){try{document.querySelector(":scope *")}catch(t){!function(t){var e=/:scope(?![\w-])/gi,n=a(t.querySelector);t.querySelector=function(t){return n.apply(this,arguments)};var r=a(t.querySelectorAll);if(t.querySelectorAll=function(t){return r.apply(this,arguments)},t.matches){var i=a(t.matches);t.matches=function(t){return i.apply(this,arguments)}}if(t.closest){var o=a(t.closest);t.closest=function(t){return o.apply(this,arguments)}}function a(t){return function(n){var r=n&&e.test(n);if(r){var i="q"+Math.floor(9e6*Math.random())+1e6;arguments[0]=n.replace(e,"["+i+"]"),this.setAttribute(i,"");var o=t.apply(this,arguments);return this.removeAttribute(i),o}return t.apply(this,arguments)}}}(Element.prototype)}},function(t,e,n){(function(t){var r=void 0!==t&&t||"undefined"!=typeof self&&self||window,i=Function.prototype.apply;function o(t,e){this._id=t,this._clearFn=e}e.setTimeout=function(){return new o(i.call(setTimeout,r,arguments),clearTimeout)},e.setInterval=function(){return new o(i.call(setInterval,r,arguments),clearInterval)},e.clearTimeout=e.clearInterval=function(t){t&&t.close()},o.prototype.unref=o.prototype.ref=function(){},o.prototype.close=function(){this._clearFn.call(r,this._id)},e.enroll=function(t,e){clearTimeout(t._idleTimeoutId),t._idleTimeout=e},e.unenroll=function(t){clearTimeout(t._idleTimeoutId),t._idleTimeout=-1},e._unrefActive=e.active=function(t){clearTimeout(t._idleTimeoutId);var e=t._idleTimeout;e>=0&&(t._idleTimeoutId=setTimeout((function(){t._onTimeout&&t._onTimeout()}),e))},n(403),e.setImmediate="undefined"!=typeof self&&self.setImmediate||void 0!==t&&t.setImmediate||this&&this.setImmediate,e.clearImmediate="undefined"!=typeof self&&self.clearImmediate||void 0!==t&&t.clearImmediate||this&&this.clearImmediate}).call(this,n(57))},function(t,e,n){(function(t,e){!function(t,n){"use strict";if(!t.setImmediate){var r,i,o,a,s,u=1,c={},l=!1,h=t.document,f=Object.getPrototypeOf&&Object.getPrototypeOf(t);f=f&&f.setTimeout?f:t,"[object process]"==={}.toString.call(t.process)?r=function(t){e.nextTick((function(){p(t)}))}:!function(){if(t.postMessage&&!t.importScripts){var e=!0,n=t.onmessage;return t.onmessage=function(){e=!1},t.postMessage("","*"),t.onmessage=n,e}}()?t.MessageChannel?((o=new MessageChannel).port1.onmessage=function(t){p(t.data)},r=function(t){o.port2.postMessage(t)}):h&&"onreadystatechange"in h.createElement("script")?(i=h.documentElement,r=function(t){var e=h.createElement("script");e.onreadystatechange=function(){p(t),e.onreadystatechange=null,i.removeChild(e),e=null},i.appendChild(e)}):r=function(t){setTimeout(p,0,t)}:(a="setImmediate$"+Math.random()+"$",s=function(e){e.source===t&&"string"==typeof e.data&&0===e.data.indexOf(a)&&p(+e.data.slice(a.length))},t.addEventListener?t.addEventListener("message",s,!1):t.attachEvent("onmessage",s),r=function(e){t.postMessage(a+e,"*")}),f.setImmediate=function(t){"function"!=typeof t&&(t=new Function(""+t));for(var e=new Array(arguments.length-1),n=0;n<e.length;n++)e[n]=arguments[n+1];var i={callback:t,args:e};return c[u]=i,r(u),u++},f.clearImmediate=d}function d(t){delete c[t]}function p(t){if(l)setTimeout(p,0,t);else{var e=c[t];if(e){l=!0;try{!function(t){var e=t.callback,n=t.args;switch(n.length){case 0:e();break;case 1:e(n[0]);break;case 2:e(n[0],n[1]);break;case 3:e(n[0],n[1],n[2]);break;default:e.apply(void 0,n)}}(e)}finally{d(t),l=!1}}}}}("undefined"==typeof self?void 0===t?this:t:self)}).call(this,n(57),n(162))},function(t,e,n){var r;!function(i){function o(t,e,n,r,i){this._listener=e,this._isOnce=n,this.context=r,this._signal=t,this._priority=i||0}function a(t,e){if("function"!=typeof t)throw new Error("listener is a required param of {fn}() and should be a Function.".replace("{fn}",e))}function s(){this._bindings=[],this._prevParams=null;var t=this;this.dispatch=function(){s.prototype.dispatch.apply(t,arguments)}}o.prototype={active:!0,params:null,execute:function(t){var e,n;return this.active&&this._listener&&(n=this.params?this.params.concat(t):t,e=this._listener.apply(this.context,n),this._isOnce&&this.detach()),e},detach:function(){return this.isBound()?this._signal.remove(this._listener,this.context):null},isBound:function(){return!!this._signal&&!!this._listener},isOnce:function(){return this._isOnce},getListener:function(){return this._listener},getSignal:function(){return this._signal},_destroy:function(){delete this._signal,delete this._listener,delete this.context},toString:function(){return"[SignalBinding isOnce:"+this._isOnce+", isBound:"+this.isBound()+", active:"+this.active+"]"}},s.prototype={VERSION:"1.0.0",memorize:!1,_shouldPropagate:!0,active:!0,_registerListener:function(t,e,n,r){var i,a=this._indexOfListener(t,n);if(-1!==a){if((i=this._bindings[a]).isOnce()!==e)throw new Error("You cannot add"+(e?"":"Once")+"() then add"+(e?"Once":"")+"() the same listener without removing the relationship first.")}else i=new o(this,t,e,n,r),this._addBinding(i);return this.memorize&&this._prevParams&&i.execute(this._prevParams),i},_addBinding:function(t){var e=this._bindings.length;do{--e}while(this._bindings[e]&&t._priority<=this._bindings[e]._priority);this._bindings.splice(e+1,0,t)},_indexOfListener:function(t,e){for(var n,r=this._bindings.length;r--;)if((n=this._bindings[r])._listener===t&&n.context===e)return r;return-1},has:function(t,e){return-1!==this._indexOfListener(t,e)},add:function(t,e,n){return a(t,"add"),this._registerListener(t,!1,e,n)},addOnce:function(t,e,n){return a(t,"addOnce"),this._registerListener(t,!0,e,n)},remove:function(t,e){a(t,"remove");var n=this._indexOfListener(t,e);return-1!==n&&(this._bindings[n]._destroy(),this._bindings.splice(n,1)),t},removeAll:function(){for(var t=this._bindings.length;t--;)this._bindings[t]._destroy();this._bindings.length=0},getNumListeners:function(){return this._bindings.length},halt:function(){this._shouldPropagate=!1},dispatch:function(t){if(this.active){var e,n=Array.prototype.slice.call(arguments),r=this._bindings.length;if(this.memorize&&(this._prevParams=n),r){e=this._bindings.slice(),this._shouldPropagate=!0;do{r--}while(e[r]&&this._shouldPropagate&&!1!==e[r].execute(n))}}},forget:function(){this._prevParams=null},dispose:function(){this.removeAll(),delete this._bindings,delete this._prevParams},toString:function(){return"[Signal active:"+this.active+" numListeners:"+this.getNumListeners()+"]"}};var u=s;u.Signal=s,void 0===(r=function(){return u}.call(e,n,e,t))||(t.exports=r)}()},function(t,e){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),t.webpackPolyfill=1),t}},function(t,e,n){"use strict";t.exports=n(407)},function(t){t.exports=JSON.parse('["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","label","legend","li","link","main","map","mark","math","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rb","rp","rt","rtc","ruby","s","samp","script","search","section","select","slot","small","source","span","strong","style","sub","summary","sup","svg","table","tbody","td","template","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr"]')},function(t,e){function n(t,e){var n=t.length,r=new Array(n),i={},o=n,a=function(t){for(var e=new Map,n=0,r=t.length;n<r;n++){var i=t[n];e.has(i[0])||e.set(i[0],new Set),e.has(i[1])||e.set(i[1],new Set),e.get(i[0]).add(i[1])}return e}(e),s=function(t){for(var e=new Map,n=0,r=t.length;n<r;n++)e.set(t[n],n);return e}(t);for(e.forEach((function(t){if(!s.has(t[0])||!s.has(t[1]))throw new Error("Unknown node. There is an unknown node in the supplied edges.")}));o--;)i[o]||u(t[o],o,new Set);return r;function u(t,e,o){if(o.has(t)){var c;try{c=", node was:"+JSON.stringify(t)}catch(t){c=""}throw new Error("Cyclic dependency"+c)}if(!s.has(t))throw new Error("Found unknown node. Make sure to provided all involved nodes. Unknown node: "+JSON.stringify(t));if(!i[e]){i[e]=!0;var l=a.get(t)||new Set;if(e=(l=Array.from(l)).length){o.add(t);do{var h=l[--e];u(h,s.get(h),o)}while(e);o.delete(t)}r[--n]=t}}}t.exports=function(t){return n(function(t){for(var e=new Set,n=0,r=t.length;n<r;n++){var i=t[n];e.add(i[0]),e.add(i[1])}return Array.from(e)}(t),t)},t.exports.array=n},function(t,e,n){"use strict";n.r(e);var r={};n.r(r),n.d(r,"titleReveal",(function(){return d_})),n.d(r,"linkArrowTopReveal",(function(){return x_})),n.d(r,"imageReveal",(function(){return D_})),n.d(r,"YReveal",(function(){return z_}));var i={};n.r(i),n.d(i,"Hero01Component",(function(){return Xu})),n.d(i,"Gallery03Component",(function(){return ec})),n.d(i,"Video04Component",(function(){return uc})),n.d(i,"Bureau05Component",(function(){return gc})),n.d(i,"Inter06Component",(function(){return dy})),n.d(i,"Gallery08Component",(function(){return xy})),n.d(i,"News10Component",(function(){return Dy})),n.d(i,"Grid12Component",(function(){return Ny})),n.d(i,"Media16Component",(function(){return Xy})),n.d(i,"Formation22Component",(function(){return eb})),n.d(i,"Gallery26Component",(function(){return cb})),n.d(i,"Formation28Component",(function(){return bb})),n.d(i,"Formation29Component",(function(){return Db})),n.d(i,"Arguments34Component",(function(){return zb})),n.d(i,"Expertise35Component",(function(){return qb})),n.d(i,"Contact39Component",(function(){return n_})),n.d(i,"TalentHead41Component",(function(){return q_})),n.d(i,"Postes43Component",(function(){return nx})),n.d(i,"Gallery45Component",(function(){return hx})),n.d(i,"Globe46Component",(function(){return Dx})),n.d(i,"Career47Component",(function(){return zx})),n.d(i,"Office",(function(){return qx})),n.d(i,"Articles",(function(){return pw})),n.d(i,"Article",(function(){return Tw})),n.d(i,"ProfileWelcome",(function(){return Jw})),n.d(i,"ProfileSignUp",(function(){return iS})),n.d(i,"AccountLogout",(function(){return dS})),n.d(i,"AccountUpdate",(function(){return SS})),n.d(i,"Text",(function(){return RS})),n.d(i,"Checkbox",(function(){return US})),n.d(i,"Radio",(function(){return YS})),n.d(i,"NavigationComponent",(function(){return nE})),n.d(i,"HomeSlideshow",(function(){return fE})),n.d(i,"HeaderComponent",(function(){return SE})),n.d(i,"BreadcrumbComponent",(function(){return PE}));var o=n(1),a=n.n(o);n(172),n(121);function s(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function u(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}var c,l,h,f,d,p,m,g,v,y,b,_,x,w,S,E={autoSleep:120,force3D:"auto",nullTargetWarn:1,units:{lineHeight:""}},T={duration:.5,overwrite:!1,delay:0},M=1e8,A=2*Math.PI,L=A/4,D=0,C=Math.sqrt,P=Math.cos,R=Math.sin,k=function(t){return"string"==typeof t},O=function(t){return"function"==typeof t},I=function(t){return"number"==typeof t},F=function(t){return void 0===t},z=function(t){return"object"==typeof t},B=function(t){return!1!==t},N=function(){return"undefined"!=typeof window},U=function(t){return O(t)||k(t)},j="function"==typeof ArrayBuffer&&ArrayBuffer.isView||function(){},H=Array.isArray,V=/(?:-?\.?\d|\.)+/gi,G=/[-+=.]*\d+[.e\-+]*\d*[e\-+]*\d*/g,W=/[-+=.]*\d+[.e-]*\d*[a-z%]*/g,q=/[-+=.]*\d+\.?\d*(?:e-|e\+)?\d*/gi,X=/[+-]=-?[.\d]+/,Y=/[^,'"\[\]\s]+/gi,Z=/^[+\-=e\s\d]*\d+[.\d]*([a-z]*|%)\s*$/i,J={},Q={},K=function(t){return(Q=At(t,J))&&An},$=function(t,e){return console.warn("Invalid property",t,"set to",e,"Missing plugin? gsap.registerPlugin()")},tt=function(t,e){return!e&&console.warn(t)},et=function(t,e){return t&&(J[t]=e)&&Q&&(Q[t]=e)||J},nt=function(){return 0},rt={suppressEvents:!0,isStart:!0,kill:!1},it={suppressEvents:!0,kill:!1},ot={suppressEvents:!0},at={},st=[],ut={},ct={},lt={},ht=30,ft=[],dt="",pt=function(t){var e,n,r=t[0];if(z(r)||O(r)||(t=[t]),!(e=(r._gsap||{}).harness)){for(n=ft.length;n--&&!ft[n].targetTest(r););e=ft[n]}for(n=t.length;n--;)t[n]&&(t[n]._gsap||(t[n]._gsap=new Ue(t[n],e)))||t.splice(n,1);return t},mt=function(t){return t._gsap||pt(ie(t))[0]._gsap},gt=function(t,e,n){return(n=t[e])&&O(n)?t[e]():F(n)&&t.getAttribute&&t.getAttribute(e)||n},vt=function(t,e){return(t=t.split(",")).forEach(e)||t},yt=function(t){return Math.round(1e5*t)/1e5||0},bt=function(t){return Math.round(1e7*t)/1e7||0},_t=function(t,e){var n=e.charAt(0),r=parseFloat(e.substr(2));return t=parseFloat(t),"+"===n?t+r:"-"===n?t-r:"*"===n?t*r:t/r},xt=function(t,e){for(var n=e.length,r=0;t.indexOf(e[r])<0&&++r<n;);return r<n},wt=function(){var t,e,n=st.length,r=st.slice(0);for(ut={},st.length=0,t=0;t<n;t++)(e=r[t])&&e._lazy&&(e.render(e._lazy[0],e._lazy[1],!0)._lazy=0)},St=function(t,e,n,r){st.length&&!l&&wt(),t.render(e,n,r||l&&e<0&&(t._initted||t._startAt)),st.length&&!l&&wt()},Et=function(t){var e=parseFloat(t);return(e||0===e)&&(t+"").match(Y).length<2?e:k(t)?t.trim():t},Tt=function(t){return t},Mt=function(t,e){for(var n in e)n in t||(t[n]=e[n]);return t},At=function(t,e){for(var n in e)t[n]=e[n];return t},Lt=function t(e,n){for(var r in n)"__proto__"!==r&&"constructor"!==r&&"prototype"!==r&&(e[r]=z(n[r])?t(e[r]||(e[r]={}),n[r]):n[r]);return e},Dt=function(t,e){var n,r={};for(n in t)n in e||(r[n]=t[n]);return r},Ct=function(t){var e,n=t.parent||f,r=t.keyframes?(e=H(t.keyframes),function(t,n){for(var r in n)r in t||"duration"===r&&e||"ease"===r||(t[r]=n[r])}):Mt;if(B(t.inherit))for(;n;)r(t,n.vars.defaults),n=n.parent||n._dp;return t},Pt=function(t,e,n,r,i){void 0===n&&(n="_first"),void 0===r&&(r="_last");var o,a=t[r];if(i)for(o=e[i];a&&a[i]>o;)a=a._prev;return a?(e._next=a._next,a._next=e):(e._next=t[n],t[n]=e),e._next?e._next._prev=e:t[r]=e,e._prev=a,e.parent=e._dp=t,e},Rt=function(t,e,n,r){void 0===n&&(n="_first"),void 0===r&&(r="_last");var i=e._prev,o=e._next;i?i._next=o:t[n]===e&&(t[n]=o),o?o._prev=i:t[r]===e&&(t[r]=i),e._next=e._prev=e.parent=null},kt=function(t,e){t.parent&&(!e||t.parent.autoRemoveChildren)&&t.parent.remove&&t.parent.remove(t),t._act=0},Ot=function(t,e){if(t&&(!e||e._end>t._dur||e._start<0))for(var n=t;n;)n._dirty=1,n=n.parent;return t},It=function(t){for(var e=t.parent;e&&e.parent;)e._dirty=1,e.totalDuration(),e=e.parent;return t},Ft=function(t,e,n,r){return t._startAt&&(l?t._startAt.revert(it):t.vars.immediateRender&&!t.vars.autoRevert||t._startAt.render(e,!0,r))},zt=function(t){return t._repeat?Bt(t._tTime,t=t.duration()+t._rDelay)*t:0},Bt=function(t,e){var n=Math.floor(t/=e);return t&&n===t?n-1:n},Nt=function(t,e){return(t-e._start)*e._ts+(e._ts>=0?0:e._dirty?e.totalDuration():e._tDur)},Ut=function(t){return t._end=bt(t._start+(t._tDur/Math.abs(t._ts||t._rts||1e-8)||0))},jt=function(t,e){var n=t._dp;return n&&n.smoothChildTiming&&t._ts&&(t._start=bt(n._time-(t._ts>0?e/t._ts:((t._dirty?t.totalDuration():t._tDur)-e)/-t._ts)),Ut(t),n._dirty||Ot(n,t)),t},Ht=function(t,e){var n;if((e._time||!e._dur&&e._initted||e._start<t._time&&(e._dur||!e.add))&&(n=Nt(t.rawTime(),e),(!e._dur||$t(0,e.totalDuration(),n)-e._tTime>1e-8)&&e.render(n,!0)),Ot(t,e)._dp&&t._initted&&t._time>=t._dur&&t._ts){if(t._dur<t.duration())for(n=t;n._dp;)n.rawTime()>=0&&n.totalTime(n._tTime),n=n._dp;t._zTime=-1e-8}},Vt=function(t,e,n,r){return e.parent&&kt(e),e._start=bt((I(n)?n:n||t!==f?Jt(t,n,e):t._time)+e._delay),e._end=bt(e._start+(e.totalDuration()/Math.abs(e.timeScale())||0)),Pt(t,e,"_first","_last",t._sort?"_start":0),qt(e)||(t._recent=e),r||Ht(t,e),t._ts<0&&jt(t,t._tTime),t},Gt=function(t,e){return(J.ScrollTrigger||$("scrollTrigger",e))&&J.ScrollTrigger.create(e,t)},Wt=function(t,e,n,r,i){return Ye(t,e,i),t._initted?!n&&t._pt&&!l&&(t._dur&&!1!==t.vars.lazy||!t._dur&&t.vars.lazy)&&v!==Ae.frame?(st.push(t),t._lazy=[i,r],1):void 0:1},qt=function(t){var e=t.data;return"isFromStart"===e||"isStart"===e},Xt=function(t,e,n,r){var i=t._repeat,o=bt(e)||0,a=t._tTime/t._tDur;return a&&!r&&(t._time*=o/t._dur),t._dur=o,t._tDur=i?i<0?1e10:bt(o*(i+1)+t._rDelay*i):o,a>0&&!r&&jt(t,t._tTime=t._tDur*a),t.parent&&Ut(t),n||Ot(t.parent,t),t},Yt=function(t){return t instanceof He?Ot(t):Xt(t,t._dur)},Zt={_start:0,endTime:nt,totalDuration:nt},Jt=function t(e,n,r){var i,o,a,s=e.labels,u=e._recent||Zt,c=e.duration()>=M?u.endTime(!1):e._dur;return k(n)&&(isNaN(n)||n in s)?(o=n.charAt(0),a="%"===n.substr(-1),i=n.indexOf("="),"<"===o||">"===o?(i>=0&&(n=n.replace(/=/,"")),("<"===o?u._start:u.endTime(u._repeat>=0))+(parseFloat(n.substr(1))||0)*(a?(i<0?u:r).totalDuration()/100:1)):i<0?(n in s||(s[n]=c),s[n]):(o=parseFloat(n.charAt(i-1)+n.substr(i+1)),a&&r&&(o=o/100*(H(r)?r[0]:r).totalDuration()),i>1?t(e,n.substr(0,i-1),r)+o:c+o)):null==n?c:+n},Qt=function(t,e,n){var r,i,o=I(e[1]),a=(o?2:1)+(t<2?0:1),s=e[a];if(o&&(s.duration=e[1]),s.parent=n,t){for(r=s,i=n;i&&!("immediateRender"in r);)r=i.vars.defaults||{},i=B(i.vars.inherit)&&i.parent;s.immediateRender=B(r.immediateRender),t<2?s.runBackwards=1:s.startAt=e[a-1]}return new $e(e[0],s,e[a+1])},Kt=function(t,e){return t||0===t?e(t):e},$t=function(t,e,n){return n<t?t:n>e?e:n},te=function(t,e){return k(t)&&(e=Z.exec(t))?e[1]:""},ee=[].slice,ne=function(t,e){return t&&z(t)&&"length"in t&&(!e&&!t.length||t.length-1 in t&&z(t[0]))&&!t.nodeType&&t!==d},re=function(t,e,n){return void 0===n&&(n=[]),t.forEach((function(t){var r;return k(t)&&!e||ne(t,1)?(r=n).push.apply(r,ie(t)):n.push(t)}))||n},ie=function(t,e,n){return h&&!e&&h.selector?h.selector(t):!k(t)||n||!p&&Le()?H(t)?re(t,n):ne(t)?ee.call(t,0):t?[t]:[]:ee.call((e||m).querySelectorAll(t),0)},oe=function(t){return t=ie(t)[0]||tt("Invalid scope")||{},function(e){var n=t.current||t.nativeElement||t;return ie(e,n.querySelectorAll?n:n===t?tt("Invalid scope")||m.createElement("div"):t)}},ae=function(t){return t.sort((function(){return.5-Math.random()}))},se=function(t){if(O(t))return t;var e=z(t)?t:{each:t},n=Ie(e.ease),r=e.from||0,i=parseFloat(e.base)||0,o={},a=r>0&&r<1,s=isNaN(r)||a,u=e.axis,c=r,l=r;return k(r)?c=l={center:.5,edges:.5,end:1}[r]||0:!a&&s&&(c=r[0],l=r[1]),function(t,a,h){var f,d,p,m,g,v,y,b,_,x=(h||e).length,w=o[x];if(!w){if(!(_="auto"===e.grid?0:(e.grid||[1,M])[1])){for(y=-M;y<(y=h[_++].getBoundingClientRect().left)&&_<x;);_<x&&_--}for(w=o[x]=[],f=s?Math.min(_,x)*c-.5:r%_,d=_===M?0:s?x*l/_-.5:r/_|0,y=0,b=M,v=0;v<x;v++)p=v%_-f,m=d-(v/_|0),w[v]=g=u?Math.abs("y"===u?m:p):C(p*p+m*m),g>y&&(y=g),g<b&&(b=g);"random"===r&&ae(w),w.max=y-b,w.min=b,w.v=x=(parseFloat(e.amount)||parseFloat(e.each)*(_>x?x-1:u?"y"===u?x/_:_:Math.max(_,x/_))||0)*("edges"===r?-1:1),w.b=x<0?i-x:i,w.u=te(e.amount||e.each)||0,n=n&&x<0?ke(n):n}return x=(w[t]-w.min)/w.max||0,bt(w.b+(n?n(x):x)*w.v)+w.u}},ue=function(t){var e=Math.pow(10,((t+"").split(".")[1]||"").length);return function(n){var r=bt(Math.round(parseFloat(n)/t)*t*e);return(r-r%1)/e+(I(n)?0:te(n))}},ce=function(t,e){var n,r,i=H(t);return!i&&z(t)&&(n=i=t.radius||M,t.values?(t=ie(t.values),(r=!I(t[0]))&&(n*=n)):t=ue(t.increment)),Kt(e,i?O(t)?function(e){return r=t(e),Math.abs(r-e)<=n?r:e}:function(e){for(var i,o,a=parseFloat(r?e.x:e),s=parseFloat(r?e.y:0),u=M,c=0,l=t.length;l--;)(i=r?(i=t[l].x-a)*i+(o=t[l].y-s)*o:Math.abs(t[l]-a))<u&&(u=i,c=l);return c=!n||u<=n?t[c]:e,r||c===e||I(e)?c:c+te(e)}:ue(t))},le=function(t,e,n,r){return Kt(H(t)?!e:!0===n?!!(n=0):!r,(function(){return H(t)?t[~~(Math.random()*t.length)]:(n=n||1e-5)&&(r=n<1?Math.pow(10,(n+"").length-2):1)&&Math.floor(Math.round((t-n/2+Math.random()*(e-t+.99*n))/n)*n*r)/r}))},he=function(t,e,n){return Kt(n,(function(n){return t[~~e(n)]}))},fe=function(t){for(var e,n,r,i,o=0,a="";~(e=t.indexOf("random(",o));)r=t.indexOf(")",e),i="["===t.charAt(e+7),n=t.substr(e+7,r-e-7).match(i?Y:V),a+=t.substr(o,e-o)+le(i?n:+n[0],i?0:+n[1],+n[2]||1e-5),o=r+1;return a+t.substr(o,t.length-o)},de=function(t,e,n,r,i){var o=e-t,a=r-n;return Kt(i,(function(e){return n+((e-t)/o*a||0)}))},pe=function(t,e,n){var r,i,o,a=t.labels,s=M;for(r in a)(i=a[r]-e)<0==!!n&&i&&s>(i=Math.abs(i))&&(o=r,s=i);return o},me=function(t,e,n){var r,i,o,a=t.vars,s=a[e],u=h,c=t._ctx;if(s)return r=a[e+"Params"],i=a.callbackScope||t,n&&st.length&&wt(),c&&(h=c),o=r?s.apply(i,r):s.call(i),h=u,o},ge=function(t){return kt(t),t.scrollTrigger&&t.scrollTrigger.kill(!!l),t.progress()<1&&me(t,"onInterrupt"),t},ve=[],ye=function(t){if(t)if(t=!t.name&&t.default||t,N()||t.headless){var e=t.name,n=O(t),r=e&&!n&&t.init?function(){this._props=[]}:t,i={init:nt,render:cn,add:qe,kill:hn,modifier:ln,rawVars:0},o={targetTest:0,get:0,getSetter:on,aliases:{},register:0};if(Le(),t!==r){if(ct[e])return;Mt(r,Mt(Dt(t,i),o)),At(r.prototype,At(i,Dt(t,o))),ct[r.prop=e]=r,t.targetTest&&(ft.push(r),at[e]=1),e=("css"===e?"CSS":e.charAt(0).toUpperCase()+e.substr(1))+"Plugin"}et(e,r),t.register&&t.register(An,r,pn)}else ve.push(t)},be={aqua:[0,255,255],lime:[0,255,0],silver:[192,192,192],black:[0,0,0],maroon:[128,0,0],teal:[0,128,128],blue:[0,0,255],navy:[0,0,128],white:[255,255,255],olive:[128,128,0],yellow:[255,255,0],orange:[255,165,0],gray:[128,128,128],purple:[128,0,128],green:[0,128,0],red:[255,0,0],pink:[255,192,203],cyan:[0,255,255],transparent:[255,255,255,0]},_e=function(t,e,n){return 255*(6*(t+=t<0?1:t>1?-1:0)<1?e+(n-e)*t*6:t<.5?n:3*t<2?e+(n-e)*(2/3-t)*6:e)+.5|0},xe=function(t,e,n){var r,i,o,a,s,u,c,l,h,f,d=t?I(t)?[t>>16,t>>8&255,255&t]:0:be.black;if(!d){if(","===t.substr(-1)&&(t=t.substr(0,t.length-1)),be[t])d=be[t];else if("#"===t.charAt(0)){if(t.length<6&&(r=t.charAt(1),i=t.charAt(2),o=t.charAt(3),t="#"+r+r+i+i+o+o+(5===t.length?t.charAt(4)+t.charAt(4):"")),9===t.length)return[(d=parseInt(t.substr(1,6),16))>>16,d>>8&255,255&d,parseInt(t.substr(7),16)/255];d=[(t=parseInt(t.substr(1),16))>>16,t>>8&255,255&t]}else if("hsl"===t.substr(0,3))if(d=f=t.match(V),e){if(~t.indexOf("="))return d=t.match(G),n&&d.length<4&&(d[3]=1),d}else a=+d[0]%360/360,s=+d[1]/100,r=2*(u=+d[2]/100)-(i=u<=.5?u*(s+1):u+s-u*s),d.length>3&&(d[3]*=1),d[0]=_e(a+1/3,r,i),d[1]=_e(a,r,i),d[2]=_e(a-1/3,r,i);else d=t.match(V)||be.transparent;d=d.map(Number)}return e&&!f&&(r=d[0]/255,i=d[1]/255,o=d[2]/255,u=((c=Math.max(r,i,o))+(l=Math.min(r,i,o)))/2,c===l?a=s=0:(h=c-l,s=u>.5?h/(2-c-l):h/(c+l),a=c===r?(i-o)/h+(i<o?6:0):c===i?(o-r)/h+2:(r-i)/h+4,a*=60),d[0]=~~(a+.5),d[1]=~~(100*s+.5),d[2]=~~(100*u+.5)),n&&d.length<4&&(d[3]=1),d},we=function(t){var e=[],n=[],r=-1;return t.split(Ee).forEach((function(t){var i=t.match(W)||[];e.push.apply(e,i),n.push(r+=i.length+1)})),e.c=n,e},Se=function(t,e,n){var r,i,o,a,s="",u=(t+s).match(Ee),c=e?"hsla(":"rgba(",l=0;if(!u)return t;if(u=u.map((function(t){return(t=xe(t,e,1))&&c+(e?t[0]+","+t[1]+"%,"+t[2]+"%,"+t[3]:t.join(","))+")"})),n&&(o=we(t),(r=n.c).join(s)!==o.c.join(s)))for(a=(i=t.replace(Ee,"1").split(W)).length-1;l<a;l++)s+=i[l]+(~r.indexOf(l)?u.shift()||c+"0,0,0,0)":(o.length?o:u.length?u:n).shift());if(!i)for(a=(i=t.split(Ee)).length-1;l<a;l++)s+=i[l]+u[l];return s+i[a]},Ee=function(){var t,e="(?:\\b(?:(?:rgb|rgba|hsl|hsla)\\(.+?\\))|\\B#(?:[0-9a-f]{3,4}){1,2}\\b";for(t in be)e+="|"+t+"\\b";return new RegExp(e+")","gi")}(),Te=/hsl[a]?\(/,Me=function(t){var e,n=t.join(" ");if(Ee.lastIndex=0,Ee.test(n))return e=Te.test(n),t[1]=Se(t[1],e),t[0]=Se(t[0],e,we(t[1])),!0},Ae=function(){var t,e,n,r,i,o,a=Date.now,s=500,u=33,c=a(),l=c,h=1e3/240,f=h,v=[],y=function n(d){var p,m,g,y,b=a()-l,_=!0===d;if((b>s||b<0)&&(c+=b-u),((p=(g=(l+=b)-c)-f)>0||_)&&(y=++r.frame,i=g-1e3*r.time,r.time=g/=1e3,f+=p+(p>=h?4:h-p),m=1),_||(t=e(n)),m)for(o=0;o<v.length;o++)v[o](g,i,y,d)};return r={time:0,frame:0,tick:function(){y(!0)},deltaRatio:function(t){return i/(1e3/(t||60))},wake:function(){g&&(!p&&N()&&(d=p=window,m=d.document||{},J.gsap=An,(d.gsapVersions||(d.gsapVersions=[])).push(An.version),K(Q||d.GreenSockGlobals||!d.gsap&&d||{}),ve.forEach(ye)),n="undefined"!=typeof requestAnimationFrame&&requestAnimationFrame,t&&r.sleep(),e=n||function(t){return setTimeout(t,f-1e3*r.time+1|0)},b=1,y(2))},sleep:function(){(n?cancelAnimationFrame:clearTimeout)(t),b=0,e=nt},lagSmoothing:function(t,e){s=t||1/0,u=Math.min(e||33,s)},fps:function(t){h=1e3/(t||240),f=1e3*r.time+h},add:function(t,e,n){var i=e?function(e,n,o,a){t(e,n,o,a),r.remove(i)}:t;return r.remove(t),v[n?"unshift":"push"](i),Le(),i},remove:function(t,e){~(e=v.indexOf(t))&&v.splice(e,1)&&o>=e&&o--},_listeners:v}}(),Le=function(){return!b&&Ae.wake()},De={},Ce=/^[\d.\-M][\d.\-,\s]/,Pe=/["']/g,Re=function(t){for(var e,n,r,i={},o=t.substr(1,t.length-3).split(":"),a=o[0],s=1,u=o.length;s<u;s++)n=o[s],e=s!==u-1?n.lastIndexOf(","):n.length,r=n.substr(0,e),i[a]=isNaN(r)?r.replace(Pe,"").trim():+r,a=n.substr(e+1).trim();return i},ke=function(t){return function(e){return 1-t(1-e)}},Oe=function t(e,n){for(var r,i=e._first;i;)i instanceof He?t(i,n):!i.vars.yoyoEase||i._yoyo&&i._repeat||i._yoyo===n||(i.timeline?t(i.timeline,n):(r=i._ease,i._ease=i._yEase,i._yEase=r,i._yoyo=n)),i=i._next},Ie=function(t,e){return t&&(O(t)?t:De[t]||function(t){var e,n,r,i,o=(t+"").split("("),a=De[o[0]];return a&&o.length>1&&a.config?a.config.apply(null,~t.indexOf("{")?[Re(o[1])]:(e=t,n=e.indexOf("(")+1,r=e.indexOf(")"),i=e.indexOf("(",n),e.substring(n,~i&&i<r?e.indexOf(")",r+1):r)).split(",").map(Et)):De._CE&&Ce.test(t)?De._CE("",t):a}(t))||e},Fe=function(t,e,n,r){void 0===n&&(n=function(t){return 1-e(1-t)}),void 0===r&&(r=function(t){return t<.5?e(2*t)/2:1-e(2*(1-t))/2});var i,o={easeIn:e,easeOut:n,easeInOut:r};return vt(t,(function(t){for(var e in De[t]=J[t]=o,De[i=t.toLowerCase()]=n,o)De[i+("easeIn"===e?".in":"easeOut"===e?".out":".inOut")]=De[t+"."+e]=o[e]})),o},ze=function(t){return function(e){return e<.5?(1-t(1-2*e))/2:.5+t(2*(e-.5))/2}},Be=function t(e,n,r){var i=n>=1?n:1,o=(r||(e?.3:.45))/(n<1?n:1),a=o/A*(Math.asin(1/i)||0),s=function(t){return 1===t?1:i*Math.pow(2,-10*t)*R((t-a)*o)+1},u="out"===e?s:"in"===e?function(t){return 1-s(1-t)}:ze(s);return o=A/o,u.config=function(n,r){return t(e,n,r)},u},Ne=function t(e,n){void 0===n&&(n=1.70158);var r=function(t){return t?--t*t*((n+1)*t+n)+1:0},i="out"===e?r:"in"===e?function(t){return 1-r(1-t)}:ze(r);return i.config=function(n){return t(e,n)},i};vt("Linear,Quad,Cubic,Quart,Quint,Strong",(function(t,e){var n=e<5?e+1:e;Fe(t+",Power"+(n-1),e?function(t){return Math.pow(t,n)}:function(t){return t},(function(t){return 1-Math.pow(1-t,n)}),(function(t){return t<.5?Math.pow(2*t,n)/2:1-Math.pow(2*(1-t),n)/2}))})),De.Linear.easeNone=De.none=De.Linear.easeIn,Fe("Elastic",Be("in"),Be("out"),Be()),_=7.5625,w=1/(x=2.75),Fe("Bounce",(function(t){return 1-S(1-t)}),S=function(t){return t<w?_*t*t:t<.7272727272727273?_*Math.pow(t-1.5/x,2)+.75:t<.9090909090909092?_*(t-=2.25/x)*t+.9375:_*Math.pow(t-2.625/x,2)+.984375}),Fe("Expo",(function(t){return t?Math.pow(2,10*(t-1)):0})),Fe("Circ",(function(t){return-(C(1-t*t)-1)})),Fe("Sine",(function(t){return 1===t?1:1-P(t*L)})),Fe("Back",Ne("in"),Ne("out"),Ne()),De.SteppedEase=De.steps=J.SteppedEase={config:function(t,e){void 0===t&&(t=1);var n=1/t,r=t+(e?0:1),i=e?1:0;return function(t){return((r*$t(0,1-1e-8,t)|0)+i)*n}}},T.ease=De["quad.out"],vt("onComplete,onUpdate,onStart,onRepeat,onReverseComplete,onInterrupt",(function(t){return dt+=t+","+t+"Params,"}));var Ue=function(t,e){this.id=D++,t._gsap=this,this.target=t,this.harness=e,this.get=e?e.get:gt,this.set=e?e.getSetter:on},je=function(){function t(t){this.vars=t,this._delay=+t.delay||0,(this._repeat=t.repeat===1/0?-2:t.repeat||0)&&(this._rDelay=t.repeatDelay||0,this._yoyo=!!t.yoyo||!!t.yoyoEase),this._ts=1,Xt(this,+t.duration,1,1),this.data=t.data,h&&(this._ctx=h,h.data.push(this)),b||Ae.wake()}var e=t.prototype;return e.delay=function(t){return t||0===t?(this.parent&&this.parent.smoothChildTiming&&this.startTime(this._start+t-this._delay),this._delay=t,this):this._delay},e.duration=function(t){return arguments.length?this.totalDuration(this._repeat>0?t+(t+this._rDelay)*this._repeat:t):this.totalDuration()&&this._dur},e.totalDuration=function(t){return arguments.length?(this._dirty=0,Xt(this,this._repeat<0?t:(t-this._repeat*this._rDelay)/(this._repeat+1))):this._tDur},e.totalTime=function(t,e){if(Le(),!arguments.length)return this._tTime;var n=this._dp;if(n&&n.smoothChildTiming&&this._ts){for(jt(this,t),!n._dp||n.parent||Ht(n,this);n&&n.parent;)n.parent._time!==n._start+(n._ts>=0?n._tTime/n._ts:(n.totalDuration()-n._tTime)/-n._ts)&&n.totalTime(n._tTime,!0),n=n.parent;!this.parent&&this._dp.autoRemoveChildren&&(this._ts>0&&t<this._tDur||this._ts<0&&t>0||!this._tDur&&!t)&&Vt(this._dp,this,this._start-this._delay)}return(this._tTime!==t||!this._dur&&!e||this._initted&&1e-8===Math.abs(this._zTime)||!t&&!this._initted&&(this.add||this._ptLookup))&&(this._ts||(this._pTime=t),St(this,t,e)),this},e.time=function(t,e){return arguments.length?this.totalTime(Math.min(this.totalDuration(),t+zt(this))%(this._dur+this._rDelay)||(t?this._dur:0),e):this._time},e.totalProgress=function(t,e){return arguments.length?this.totalTime(this.totalDuration()*t,e):this.totalDuration()?Math.min(1,this._tTime/this._tDur):this.rawTime()>0?1:0},e.progress=function(t,e){return arguments.length?this.totalTime(this.duration()*(!this._yoyo||1&this.iteration()?t:1-t)+zt(this),e):this.duration()?Math.min(1,this._time/this._dur):this.rawTime()>0?1:0},e.iteration=function(t,e){var n=this.duration()+this._rDelay;return arguments.length?this.totalTime(this._time+(t-1)*n,e):this._repeat?Bt(this._tTime,n)+1:1},e.timeScale=function(t,e){if(!arguments.length)return-1e-8===this._rts?0:this._rts;if(this._rts===t)return this;var n=this.parent&&this._ts?Nt(this.parent._time,this):this._tTime;return this._rts=+t||0,this._ts=this._ps||-1e-8===t?0:this._rts,this.totalTime($t(-Math.abs(this._delay),this._tDur,n),!1!==e),Ut(this),It(this)},e.paused=function(t){return arguments.length?(this._ps!==t&&(this._ps=t,t?(this._pTime=this._tTime||Math.max(-this._delay,this.rawTime()),this._ts=this._act=0):(Le(),this._ts=this._rts,this.totalTime(this.parent&&!this.parent.smoothChildTiming?this.rawTime():this._tTime||this._pTime,1===this.progress()&&1e-8!==Math.abs(this._zTime)&&(this._tTime-=1e-8)))),this):this._ps},e.startTime=function(t){if(arguments.length){this._start=t;var e=this.parent||this._dp;return e&&(e._sort||!this.parent)&&Vt(e,this,t-this._delay),this}return this._start},e.endTime=function(t){return this._start+(B(t)?this.totalDuration():this.duration())/Math.abs(this._ts||1)},e.rawTime=function(t){var e=this.parent||this._dp;return e?t&&(!this._ts||this._repeat&&this._time&&this.totalProgress()<1)?this._tTime%(this._dur+this._rDelay):this._ts?Nt(e.rawTime(t),this):this._tTime:this._tTime},e.revert=function(t){void 0===t&&(t=ot);var e=l;return l=t,(this._initted||this._startAt)&&(this.timeline&&this.timeline.revert(t),this.totalTime(-.01,t.suppressEvents)),"nested"!==this.data&&!1!==t.kill&&this.kill(),l=e,this},e.globalTime=function(t){for(var e=this,n=arguments.length?t:e.rawTime();e;)n=e._start+n/(Math.abs(e._ts)||1),e=e._dp;return!this.parent&&this._sat?this._sat.globalTime(t):n},e.repeat=function(t){return arguments.length?(this._repeat=t===1/0?-2:t,Yt(this)):-2===this._repeat?1/0:this._repeat},e.repeatDelay=function(t){if(arguments.length){var e=this._time;return this._rDelay=t,Yt(this),e?this.time(e):this}return this._rDelay},e.yoyo=function(t){return arguments.length?(this._yoyo=t,this):this._yoyo},e.seek=function(t,e){return this.totalTime(Jt(this,t),B(e))},e.restart=function(t,e){return this.play().totalTime(t?-this._delay:0,B(e))},e.play=function(t,e){return null!=t&&this.seek(t,e),this.reversed(!1).paused(!1)},e.reverse=function(t,e){return null!=t&&this.seek(t||this.totalDuration(),e),this.reversed(!0).paused(!1)},e.pause=function(t,e){return null!=t&&this.seek(t,e),this.paused(!0)},e.resume=function(){return this.paused(!1)},e.reversed=function(t){return arguments.length?(!!t!==this.reversed()&&this.timeScale(-this._rts||(t?-1e-8:0)),this):this._rts<0},e.invalidate=function(){return this._initted=this._act=0,this._zTime=-1e-8,this},e.isActive=function(){var t,e=this.parent||this._dp,n=this._start;return!(e&&!(this._ts&&this._initted&&e.isActive()&&(t=e.rawTime(!0))>=n&&t<this.endTime(!0)-1e-8))},e.eventCallback=function(t,e,n){var r=this.vars;return arguments.length>1?(e?(r[t]=e,n&&(r[t+"Params"]=n),"onUpdate"===t&&(this._onUpdate=e)):delete r[t],this):r[t]},e.then=function(t){var e=this;return new Promise((function(n){var r=O(t)?t:Tt,i=function(){var t=e.then;e.then=null,O(r)&&(r=r(e))&&(r.then||r===e)&&(e.then=t),n(r),e.then=t};e._initted&&1===e.totalProgress()&&e._ts>=0||!e._tTime&&e._ts<0?i():e._prom=i}))},e.kill=function(){ge(this)},t}();Mt(je.prototype,{_time:0,_start:0,_end:0,_tTime:0,_tDur:0,_dirty:0,_repeat:0,_yoyo:!1,parent:null,_initted:!1,_rDelay:0,_ts:1,_dp:0,ratio:0,_zTime:-1e-8,_prom:0,_ps:!1,_rts:1});var He=function(t){function e(e,n){var r;return void 0===e&&(e={}),(r=t.call(this,e)||this).labels={},r.smoothChildTiming=!!e.smoothChildTiming,r.autoRemoveChildren=!!e.autoRemoveChildren,r._sort=B(e.sortChildren),f&&Vt(e.parent||f,s(r),n),e.reversed&&r.reverse(),e.paused&&r.paused(!0),e.scrollTrigger&&Gt(s(r),e.scrollTrigger),r}u(e,t);var n=e.prototype;return n.to=function(t,e,n){return Qt(0,arguments,this),this},n.from=function(t,e,n){return Qt(1,arguments,this),this},n.fromTo=function(t,e,n,r){return Qt(2,arguments,this),this},n.set=function(t,e,n){return e.duration=0,e.parent=this,Ct(e).repeatDelay||(e.repeat=0),e.immediateRender=!!e.immediateRender,new $e(t,e,Jt(this,n),1),this},n.call=function(t,e,n){return Vt(this,$e.delayedCall(0,t,e),n)},n.staggerTo=function(t,e,n,r,i,o,a){return n.duration=e,n.stagger=n.stagger||r,n.onComplete=o,n.onCompleteParams=a,n.parent=this,new $e(t,n,Jt(this,i)),this},n.staggerFrom=function(t,e,n,r,i,o,a){return n.runBackwards=1,Ct(n).immediateRender=B(n.immediateRender),this.staggerTo(t,e,n,r,i,o,a)},n.staggerFromTo=function(t,e,n,r,i,o,a,s){return r.startAt=n,Ct(r).immediateRender=B(r.immediateRender),this.staggerTo(t,e,r,i,o,a,s)},n.render=function(t,e,n){var r,i,o,a,s,u,c,h,d,p,m,g,v=this._time,y=this._dirty?this.totalDuration():this._tDur,b=this._dur,_=t<=0?0:bt(t),x=this._zTime<0!=t<0&&(this._initted||!b);if(this!==f&&_>y&&t>=0&&(_=y),_!==this._tTime||n||x){if(v!==this._time&&b&&(_+=this._time-v,t+=this._time-v),r=_,d=this._start,u=!(h=this._ts),x&&(b||(v=this._zTime),(t||!e)&&(this._zTime=t)),this._repeat){if(m=this._yoyo,s=b+this._rDelay,this._repeat<-1&&t<0)return this.totalTime(100*s+t,e,n);if(r=bt(_%s),_===y?(a=this._repeat,r=b):((a=~~(_/s))&&a===_/s&&(r=b,a--),r>b&&(r=b)),p=Bt(this._tTime,s),!v&&this._tTime&&p!==a&&this._tTime-p*s-this._dur<=0&&(p=a),m&&1&a&&(r=b-r,g=1),a!==p&&!this._lock){var w=m&&1&p,S=w===(m&&1&a);if(a<p&&(w=!w),v=w?0:_%b?b:_,this._lock=1,this.render(v||(g?0:bt(a*s)),e,!b)._lock=0,this._tTime=_,!e&&this.parent&&me(this,"onRepeat"),this.vars.repeatRefresh&&!g&&(this.invalidate()._lock=1),v&&v!==this._time||u!==!this._ts||this.vars.onRepeat&&!this.parent&&!this._act)return this;if(b=this._dur,y=this._tDur,S&&(this._lock=2,v=w?b:-1e-4,this.render(v,!0),this.vars.repeatRefresh&&!g&&this.invalidate()),this._lock=0,!this._ts&&!u)return this;Oe(this,g)}}if(this._hasPause&&!this._forcing&&this._lock<2&&(c=function(t,e,n){var r;if(n>e)for(r=t._first;r&&r._start<=n;){if("isPause"===r.data&&r._start>e)return r;r=r._next}else for(r=t._last;r&&r._start>=n;){if("isPause"===r.data&&r._start<e)return r;r=r._prev}}(this,bt(v),bt(r)))&&(_-=r-(r=c._start)),this._tTime=_,this._time=r,this._act=!h,this._initted||(this._onUpdate=this.vars.onUpdate,this._initted=1,this._zTime=t,v=0),!v&&r&&!e&&!a&&(me(this,"onStart"),this._tTime!==_))return this;if(r>=v&&t>=0)for(i=this._first;i;){if(o=i._next,(i._act||r>=i._start)&&i._ts&&c!==i){if(i.parent!==this)return this.render(t,e,n);if(i.render(i._ts>0?(r-i._start)*i._ts:(i._dirty?i.totalDuration():i._tDur)+(r-i._start)*i._ts,e,n),r!==this._time||!this._ts&&!u){c=0,o&&(_+=this._zTime=-1e-8);break}}i=o}else{i=this._last;for(var E=t<0?t:r;i;){if(o=i._prev,(i._act||E<=i._end)&&i._ts&&c!==i){if(i.parent!==this)return this.render(t,e,n);if(i.render(i._ts>0?(E-i._start)*i._ts:(i._dirty?i.totalDuration():i._tDur)+(E-i._start)*i._ts,e,n||l&&(i._initted||i._startAt)),r!==this._time||!this._ts&&!u){c=0,o&&(_+=this._zTime=E?-1e-8:1e-8);break}}i=o}}if(c&&!e&&(this.pause(),c.render(r>=v?0:-1e-8)._zTime=r>=v?1:-1,this._ts))return this._start=d,Ut(this),this.render(t,e,n);this._onUpdate&&!e&&me(this,"onUpdate",!0),(_===y&&this._tTime>=this.totalDuration()||!_&&v)&&(d!==this._start&&Math.abs(h)===Math.abs(this._ts)||this._lock||((t||!b)&&(_===y&&this._ts>0||!_&&this._ts<0)&&kt(this,1),e||t<0&&!v||!_&&!v&&y||(me(this,_===y&&t>=0?"onComplete":"onReverseComplete",!0),this._prom&&!(_<y&&this.timeScale()>0)&&this._prom())))}return this},n.add=function(t,e){var n=this;if(I(e)||(e=Jt(this,e,t)),!(t instanceof je)){if(H(t))return t.forEach((function(t){return n.add(t,e)})),this;if(k(t))return this.addLabel(t,e);if(!O(t))return this;t=$e.delayedCall(0,t)}return this!==t?Vt(this,t,e):this},n.getChildren=function(t,e,n,r){void 0===t&&(t=!0),void 0===e&&(e=!0),void 0===n&&(n=!0),void 0===r&&(r=-M);for(var i=[],o=this._first;o;)o._start>=r&&(o instanceof $e?e&&i.push(o):(n&&i.push(o),t&&i.push.apply(i,o.getChildren(!0,e,n)))),o=o._next;return i},n.getById=function(t){for(var e=this.getChildren(1,1,1),n=e.length;n--;)if(e[n].vars.id===t)return e[n]},n.remove=function(t){return k(t)?this.removeLabel(t):O(t)?this.killTweensOf(t):(Rt(this,t),t===this._recent&&(this._recent=this._last),Ot(this))},n.totalTime=function(e,n){return arguments.length?(this._forcing=1,!this._dp&&this._ts&&(this._start=bt(Ae.time-(this._ts>0?e/this._ts:(this.totalDuration()-e)/-this._ts))),t.prototype.totalTime.call(this,e,n),this._forcing=0,this):this._tTime},n.addLabel=function(t,e){return this.labels[t]=Jt(this,e),this},n.removeLabel=function(t){return delete this.labels[t],this},n.addPause=function(t,e,n){var r=$e.delayedCall(0,e||nt,n);return r.data="isPause",this._hasPause=1,Vt(this,r,Jt(this,t))},n.removePause=function(t){var e=this._first;for(t=Jt(this,t);e;)e._start===t&&"isPause"===e.data&&kt(e),e=e._next},n.killTweensOf=function(t,e,n){for(var r=this.getTweensOf(t,n),i=r.length;i--;)Ve!==r[i]&&r[i].kill(t,e);return this},n.getTweensOf=function(t,e){for(var n,r=[],i=ie(t),o=this._first,a=I(e);o;)o instanceof $e?xt(o._targets,i)&&(a?(!Ve||o._initted&&o._ts)&&o.globalTime(0)<=e&&o.globalTime(o.totalDuration())>e:!e||o.isActive())&&r.push(o):(n=o.getTweensOf(i,e)).length&&r.push.apply(r,n),o=o._next;return r},n.tweenTo=function(t,e){e=e||{};var n,r=this,i=Jt(r,t),o=e,a=o.startAt,s=o.onStart,u=o.onStartParams,c=o.immediateRender,l=$e.to(r,Mt({ease:e.ease||"none",lazy:!1,immediateRender:!1,time:i,overwrite:"auto",duration:e.duration||Math.abs((i-(a&&"time"in a?a.time:r._time))/r.timeScale())||1e-8,onStart:function(){if(r.pause(),!n){var t=e.duration||Math.abs((i-(a&&"time"in a?a.time:r._time))/r.timeScale());l._dur!==t&&Xt(l,t,0,1).render(l._time,!0,!0),n=1}s&&s.apply(l,u||[])}},e));return c?l.render(0):l},n.tweenFromTo=function(t,e,n){return this.tweenTo(e,Mt({startAt:{time:Jt(this,t)}},n))},n.recent=function(){return this._recent},n.nextLabel=function(t){return void 0===t&&(t=this._time),pe(this,Jt(this,t))},n.previousLabel=function(t){return void 0===t&&(t=this._time),pe(this,Jt(this,t),1)},n.currentLabel=function(t){return arguments.length?this.seek(t,!0):this.previousLabel(this._time+1e-8)},n.shiftChildren=function(t,e,n){void 0===n&&(n=0);for(var r,i=this._first,o=this.labels;i;)i._start>=n&&(i._start+=t,i._end+=t),i=i._next;if(e)for(r in o)o[r]>=n&&(o[r]+=t);return Ot(this)},n.invalidate=function(e){var n=this._first;for(this._lock=0;n;)n.invalidate(e),n=n._next;return t.prototype.invalidate.call(this,e)},n.clear=function(t){void 0===t&&(t=!0);for(var e,n=this._first;n;)e=n._next,this.remove(n),n=e;return this._dp&&(this._time=this._tTime=this._pTime=0),t&&(this.labels={}),Ot(this)},n.totalDuration=function(t){var e,n,r,i=0,o=this,a=o._last,s=M;if(arguments.length)return o.timeScale((o._repeat<0?o.duration():o.totalDuration())/(o.reversed()?-t:t));if(o._dirty){for(r=o.parent;a;)e=a._prev,a._dirty&&a.totalDuration(),(n=a._start)>s&&o._sort&&a._ts&&!o._lock?(o._lock=1,Vt(o,a,n-a._delay,1)._lock=0):s=n,n<0&&a._ts&&(i-=n,(!r&&!o._dp||r&&r.smoothChildTiming)&&(o._start+=n/o._ts,o._time-=n,o._tTime-=n),o.shiftChildren(-n,!1,-Infinity),s=0),a._end>i&&a._ts&&(i=a._end),a=e;Xt(o,o===f&&o._time>i?o._time:i,1,1),o._dirty=0}return o._tDur},e.updateRoot=function(t){if(f._ts&&(St(f,Nt(t,f)),v=Ae.frame),Ae.frame>=ht){ht+=E.autoSleep||120;var e=f._first;if((!e||!e._ts)&&E.autoSleep&&Ae._listeners.length<2){for(;e&&!e._ts;)e=e._next;e||Ae.sleep()}}},e}(je);Mt(He.prototype,{_lock:0,_hasPause:0,_forcing:0});var Ve,Ge,We=function(t,e,n,r,i,o,a){var s,u,c,l,h,f,d,p,m=new pn(this._pt,t,e,0,1,un,null,i),g=0,v=0;for(m.b=n,m.e=r,n+="",(d=~(r+="").indexOf("random("))&&(r=fe(r)),o&&(o(p=[n,r],t,e),n=p[0],r=p[1]),u=n.match(q)||[];s=q.exec(r);)l=s[0],h=r.substring(g,s.index),c?c=(c+1)%5:"rgba("===h.substr(-5)&&(c=1),l!==u[v++]&&(f=parseFloat(u[v-1])||0,m._pt={_next:m._pt,p:h||1===v?h:",",s:f,c:"="===l.charAt(1)?_t(f,l)-f:parseFloat(l)-f,m:c&&c<4?Math.round:0},g=q.lastIndex);return m.c=g<r.length?r.substring(g,r.length):"",m.fp=a,(X.test(r)||d)&&(m.e=0),this._pt=m,m},qe=function(t,e,n,r,i,o,a,s,u,c){O(r)&&(r=r(i||0,t,o));var l,h=t[e],f="get"!==n?n:O(h)?u?t[e.indexOf("set")||!O(t["get"+e.substr(3)])?e:"get"+e.substr(3)](u):t[e]():h,d=O(h)?u?nn:en:tn;if(k(r)&&(~r.indexOf("random(")&&(r=fe(r)),"="===r.charAt(1)&&((l=_t(f,r)+(te(f)||0))||0===l)&&(r=l)),!c||f!==r||Ge)return isNaN(f*r)||""===r?(!h&&!(e in t)&&$(e,r),We.call(this,t,e,f,r,d,s||E.stringFilter,u)):(l=new pn(this._pt,t,e,+f||0,r-(f||0),"boolean"==typeof h?sn:an,0,d),u&&(l.fp=u),a&&l.modifier(a,this,t),this._pt=l)},Xe=function(t,e,n,r,i,o){var a,s,u,c;if(ct[t]&&!1!==(a=new ct[t]).init(i,a.rawVars?e[t]:function(t,e,n,r,i){if(O(t)&&(t=Je(t,i,e,n,r)),!z(t)||t.style&&t.nodeType||H(t)||j(t))return k(t)?Je(t,i,e,n,r):t;var o,a={};for(o in t)a[o]=Je(t[o],i,e,n,r);return a}(e[t],r,i,o,n),n,r,o)&&(n._pt=s=new pn(n._pt,i,t,0,1,a.render,a,0,a.priority),n!==y))for(u=n._ptLookup[n._targets.indexOf(i)],c=a._props.length;c--;)u[a._props[c]]=s;return a},Ye=function t(e,n,r){var i,o,a,s,u,h,d,p,m,g,v,y,b,_=e.vars,x=_.ease,w=_.startAt,S=_.immediateRender,E=_.lazy,A=_.onUpdate,L=_.runBackwards,D=_.yoyoEase,C=_.keyframes,P=_.autoRevert,R=e._dur,k=e._startAt,O=e._targets,I=e.parent,F=I&&"nested"===I.data?I.vars.targets:O,z="auto"===e._overwrite&&!c,N=e.timeline;if(N&&(!C||!x)&&(x="none"),e._ease=Ie(x,T.ease),e._yEase=D?ke(Ie(!0===D?x:D,T.ease)):0,D&&e._yoyo&&!e._repeat&&(D=e._yEase,e._yEase=e._ease,e._ease=D),e._from=!N&&!!_.runBackwards,!N||C&&!_.stagger){if(y=(p=O[0]?mt(O[0]).harness:0)&&_[p.prop],i=Dt(_,at),k&&(k._zTime<0&&k.progress(1),n<0&&L&&S&&!P?k.render(-1,!0):k.revert(L&&R?it:rt),k._lazy=0),w){if(kt(e._startAt=$e.set(O,Mt({data:"isStart",overwrite:!1,parent:I,immediateRender:!0,lazy:!k&&B(E),startAt:null,delay:0,onUpdate:A&&function(){return me(e,"onUpdate")},stagger:0},w))),e._startAt._dp=0,e._startAt._sat=e,n<0&&(l||!S&&!P)&&e._startAt.revert(it),S&&R&&n<=0&&r<=0)return void(n&&(e._zTime=n))}else if(L&&R&&!k)if(n&&(S=!1),a=Mt({overwrite:!1,data:"isFromStart",lazy:S&&!k&&B(E),immediateRender:S,stagger:0,parent:I},i),y&&(a[p.prop]=y),kt(e._startAt=$e.set(O,a)),e._startAt._dp=0,e._startAt._sat=e,n<0&&(l?e._startAt.revert(it):e._startAt.render(-1,!0)),e._zTime=n,S){if(!n)return}else t(e._startAt,1e-8,1e-8);for(e._pt=e._ptCache=0,E=R&&B(E)||E&&!R,o=0;o<O.length;o++){if(d=(u=O[o])._gsap||pt(O)[o]._gsap,e._ptLookup[o]=g={},ut[d.id]&&st.length&&wt(),v=F===O?o:F.indexOf(u),p&&!1!==(m=new p).init(u,y||i,e,v,F)&&(e._pt=s=new pn(e._pt,u,m.name,0,1,m.render,m,0,m.priority),m._props.forEach((function(t){g[t]=s})),m.priority&&(h=1)),!p||y)for(a in i)ct[a]&&(m=Xe(a,i,e,v,u,F))?m.priority&&(h=1):g[a]=s=qe.call(e,u,a,"get",i[a],v,F,0,_.stringFilter);e._op&&e._op[o]&&e.kill(u,e._op[o]),z&&e._pt&&(Ve=e,f.killTweensOf(u,g,e.globalTime(n)),b=!e.parent,Ve=0),e._pt&&E&&(ut[d.id]=1)}h&&dn(e),e._onInit&&e._onInit(e)}e._onUpdate=A,e._initted=(!e._op||e._pt)&&!b,C&&n<=0&&N.render(M,!0,!0)},Ze=function(t,e,n,r){var i,o,a=e.ease||r||"power1.inOut";if(H(e))o=n[t]||(n[t]=[]),e.forEach((function(t,n){return o.push({t:n/(e.length-1)*100,v:t,e:a})}));else for(i in e)o=n[i]||(n[i]=[]),"ease"===i||o.push({t:parseFloat(t),v:e[i],e:a})},Je=function(t,e,n,r,i){return O(t)?t.call(e,n,r,i):k(t)&&~t.indexOf("random(")?fe(t):t},Qe=dt+"repeat,repeatDelay,yoyo,repeatRefresh,yoyoEase,autoRevert",Ke={};vt(Qe+",id,stagger,delay,duration,paused,scrollTrigger",(function(t){return Ke[t]=1}));var $e=function(t){function e(e,n,r,i){var o;"number"==typeof n&&(r.duration=n,n=r,r=null);var a,u,l,h,d,p,m,g,v=(o=t.call(this,i?n:Ct(n))||this).vars,y=v.duration,b=v.delay,_=v.immediateRender,x=v.stagger,w=v.overwrite,S=v.keyframes,T=v.defaults,M=v.scrollTrigger,A=v.yoyoEase,L=n.parent||f,D=(H(e)||j(e)?I(e[0]):"length"in n)?[e]:ie(e);if(o._targets=D.length?pt(D):tt("GSAP target "+e+" not found. https://gsap.com",!E.nullTargetWarn)||[],o._ptLookup=[],o._overwrite=w,S||x||U(y)||U(b)){if(n=o.vars,(a=o.timeline=new He({data:"nested",defaults:T||{},targets:L&&"nested"===L.data?L.vars.targets:D})).kill(),a.parent=a._dp=s(o),a._start=0,x||U(y)||U(b)){if(h=D.length,m=x&&se(x),z(x))for(d in x)~Qe.indexOf(d)&&(g||(g={}),g[d]=x[d]);for(u=0;u<h;u++)(l=Dt(n,Ke)).stagger=0,A&&(l.yoyoEase=A),g&&At(l,g),p=D[u],l.duration=+Je(y,s(o),u,p,D),l.delay=(+Je(b,s(o),u,p,D)||0)-o._delay,!x&&1===h&&l.delay&&(o._delay=b=l.delay,o._start+=b,l.delay=0),a.to(p,l,m?m(u,p,D):0),a._ease=De.none;a.duration()?y=b=0:o.timeline=0}else if(S){Ct(Mt(a.vars.defaults,{ease:"none"})),a._ease=Ie(S.ease||n.ease||"none");var C,P,R,k=0;if(H(S))S.forEach((function(t){return a.to(D,t,">")})),a.duration();else{for(d in l={},S)"ease"===d||"easeEach"===d||Ze(d,S[d],l,S.easeEach);for(d in l)for(C=l[d].sort((function(t,e){return t.t-e.t})),k=0,u=0;u<C.length;u++)(R={ease:(P=C[u]).e,duration:(P.t-(u?C[u-1].t:0))/100*y})[d]=P.v,a.to(D,R,k),k+=R.duration;a.duration()<y&&a.to({},{duration:y-a.duration()})}}y||o.duration(y=a.duration())}else o.timeline=0;return!0!==w||c||(Ve=s(o),f.killTweensOf(D),Ve=0),Vt(L,s(o),r),n.reversed&&o.reverse(),n.paused&&o.paused(!0),(_||!y&&!S&&o._start===bt(L._time)&&B(_)&&function t(e){return!e||e._ts&&t(e.parent)}(s(o))&&"nested"!==L.data)&&(o._tTime=-1e-8,o.render(Math.max(0,-b)||0)),M&&Gt(s(o),M),o}u(e,t);var n=e.prototype;return n.render=function(t,e,n){var r,i,o,a,s,u,c,h,f,d=this._time,p=this._tDur,m=this._dur,g=t<0,v=t>p-1e-8&&!g?p:t<1e-8?0:t;if(m){if(v!==this._tTime||!t||n||!this._initted&&this._tTime||this._startAt&&this._zTime<0!==g){if(r=v,h=this.timeline,this._repeat){if(a=m+this._rDelay,this._repeat<-1&&g)return this.totalTime(100*a+t,e,n);if(r=bt(v%a),v===p?(o=this._repeat,r=m):((o=~~(v/a))&&o===bt(v/a)&&(r=m,o--),r>m&&(r=m)),(u=this._yoyo&&1&o)&&(f=this._yEase,r=m-r),s=Bt(this._tTime,a),r===d&&!n&&this._initted&&o===s)return this._tTime=v,this;o!==s&&(h&&this._yEase&&Oe(h,u),this.vars.repeatRefresh&&!u&&!this._lock&&this._time!==a&&this._initted&&(this._lock=n=1,this.render(bt(a*o),!0).invalidate()._lock=0))}if(!this._initted){if(Wt(this,g?t:r,n,e,v))return this._tTime=0,this;if(!(d===this._time||n&&this.vars.repeatRefresh&&o!==s))return this;if(m!==this._dur)return this.render(t,e,n)}if(this._tTime=v,this._time=r,!this._act&&this._ts&&(this._act=1,this._lazy=0),this.ratio=c=(f||this._ease)(r/m),this._from&&(this.ratio=c=1-c),r&&!d&&!e&&!o&&(me(this,"onStart"),this._tTime!==v))return this;for(i=this._pt;i;)i.r(c,i.d),i=i._next;h&&h.render(t<0?t:h._dur*h._ease(r/this._dur),e,n)||this._startAt&&(this._zTime=t),this._onUpdate&&!e&&(g&&Ft(this,t,0,n),me(this,"onUpdate")),this._repeat&&o!==s&&this.vars.onRepeat&&!e&&this.parent&&me(this,"onRepeat"),v!==this._tDur&&v||this._tTime!==v||(g&&!this._onUpdate&&Ft(this,t,0,!0),(t||!m)&&(v===this._tDur&&this._ts>0||!v&&this._ts<0)&&kt(this,1),e||g&&!d||!(v||d||u)||(me(this,v===p?"onComplete":"onReverseComplete",!0),this._prom&&!(v<p&&this.timeScale()>0)&&this._prom()))}}else!function(t,e,n,r){var i,o,a,s=t.ratio,u=e<0||!e&&(!t._start&&function t(e){var n=e.parent;return n&&n._ts&&n._initted&&!n._lock&&(n.rawTime()<0||t(n))}(t)&&(t._initted||!qt(t))||(t._ts<0||t._dp._ts<0)&&!qt(t))?0:1,c=t._rDelay,h=0;if(c&&t._repeat&&(h=$t(0,t._tDur,e),o=Bt(h,c),t._yoyo&&1&o&&(u=1-u),o!==Bt(t._tTime,c)&&(s=1-u,t.vars.repeatRefresh&&t._initted&&t.invalidate())),u!==s||l||r||1e-8===t._zTime||!e&&t._zTime){if(!t._initted&&Wt(t,e,r,n,h))return;for(a=t._zTime,t._zTime=e||(n?1e-8:0),n||(n=e&&!a),t.ratio=u,t._from&&(u=1-u),t._time=0,t._tTime=h,i=t._pt;i;)i.r(u,i.d),i=i._next;e<0&&Ft(t,e,0,!0),t._onUpdate&&!n&&me(t,"onUpdate"),h&&t._repeat&&!n&&t.parent&&me(t,"onRepeat"),(e>=t._tDur||e<0)&&t.ratio===u&&(u&&kt(t,1),n||l||(me(t,u?"onComplete":"onReverseComplete",!0),t._prom&&t._prom()))}else t._zTime||(t._zTime=e)}(this,t,e,n);return this},n.targets=function(){return this._targets},n.invalidate=function(e){return(!e||!this.vars.runBackwards)&&(this._startAt=0),this._pt=this._op=this._onUpdate=this._lazy=this.ratio=0,this._ptLookup=[],this.timeline&&this.timeline.invalidate(e),t.prototype.invalidate.call(this,e)},n.resetTo=function(t,e,n,r,i){b||Ae.wake(),this._ts||this.play();var o=Math.min(this._dur,(this._dp._time-this._start)*this._ts);return this._initted||Ye(this,o),function(t,e,n,r,i,o,a,s){var u,c,l,h,f=(t._pt&&t._ptCache||(t._ptCache={}))[e];if(!f)for(f=t._ptCache[e]=[],l=t._ptLookup,h=t._targets.length;h--;){if((u=l[h][e])&&u.d&&u.d._pt)for(u=u.d._pt;u&&u.p!==e&&u.fp!==e;)u=u._next;if(!u)return Ge=1,t.vars[e]="+=0",Ye(t,a),Ge=0,s?tt(e+" not eligible for reset"):1;f.push(u)}for(h=f.length;h--;)(u=(c=f[h])._pt||c).s=!r&&0!==r||i?u.s+(r||0)+o*u.c:r,u.c=n-u.s,c.e&&(c.e=yt(n)+te(c.e)),c.b&&(c.b=u.s+te(c.b))}(this,t,e,n,r,this._ease(o/this._dur),o,i)?this.resetTo(t,e,n,r,1):(jt(this,0),this.parent||Pt(this._dp,this,"_first","_last",this._dp._sort?"_start":0),this.render(0))},n.kill=function(t,e){if(void 0===e&&(e="all"),!(t||e&&"all"!==e))return this._lazy=this._pt=0,this.parent?ge(this):this;if(this.timeline){var n=this.timeline.totalDuration();return this.timeline.killTweensOf(t,e,Ve&&!0!==Ve.vars.overwrite)._first||ge(this),this.parent&&n!==this.timeline.totalDuration()&&Xt(this,this._dur*this.timeline._tDur/n,0,1),this}var r,i,o,a,s,u,c,l=this._targets,h=t?ie(t):l,f=this._ptLookup,d=this._pt;if((!e||"all"===e)&&function(t,e){for(var n=t.length,r=n===e.length;r&&n--&&t[n]===e[n];);return n<0}(l,h))return"all"===e&&(this._pt=0),ge(this);for(r=this._op=this._op||[],"all"!==e&&(k(e)&&(s={},vt(e,(function(t){return s[t]=1})),e=s),e=function(t,e){var n,r,i,o,a=t[0]?mt(t[0]).harness:0,s=a&&a.aliases;if(!s)return e;for(r in n=At({},e),s)if(r in n)for(i=(o=s[r].split(",")).length;i--;)n[o[i]]=n[r];return n}(l,e)),c=l.length;c--;)if(~h.indexOf(l[c]))for(s in i=f[c],"all"===e?(r[c]=e,a=i,o={}):(o=r[c]=r[c]||{},a=e),a)(u=i&&i[s])&&("kill"in u.d&&!0!==u.d.kill(s)||Rt(this,u,"_pt"),delete i[s]),"all"!==o&&(o[s]=1);return this._initted&&!this._pt&&d&&ge(this),this},e.to=function(t,n){return new e(t,n,arguments[2])},e.from=function(t,e){return Qt(1,arguments)},e.delayedCall=function(t,n,r,i){return new e(n,0,{immediateRender:!1,lazy:!1,overwrite:!1,delay:t,onComplete:n,onReverseComplete:n,onCompleteParams:r,onReverseCompleteParams:r,callbackScope:i})},e.fromTo=function(t,e,n){return Qt(2,arguments)},e.set=function(t,n){return n.duration=0,n.repeatDelay||(n.repeat=0),new e(t,n)},e.killTweensOf=function(t,e,n){return f.killTweensOf(t,e,n)},e}(je);Mt($e.prototype,{_targets:[],_lazy:0,_startAt:0,_op:0,_onInit:0}),vt("staggerTo,staggerFrom,staggerFromTo",(function(t){$e[t]=function(){var e=new He,n=ee.call(arguments,0);return n.splice("staggerFromTo"===t?5:4,0,0),e[t].apply(e,n)}}));var tn=function(t,e,n){return t[e]=n},en=function(t,e,n){return t[e](n)},nn=function(t,e,n,r){return t[e](r.fp,n)},rn=function(t,e,n){return t.setAttribute(e,n)},on=function(t,e){return O(t[e])?en:F(t[e])&&t.setAttribute?rn:tn},an=function(t,e){return e.set(e.t,e.p,Math.round(1e6*(e.s+e.c*t))/1e6,e)},sn=function(t,e){return e.set(e.t,e.p,!!(e.s+e.c*t),e)},un=function(t,e){var n=e._pt,r="";if(!t&&e.b)r=e.b;else if(1===t&&e.e)r=e.e;else{for(;n;)r=n.p+(n.m?n.m(n.s+n.c*t):Math.round(1e4*(n.s+n.c*t))/1e4)+r,n=n._next;r+=e.c}e.set(e.t,e.p,r,e)},cn=function(t,e){for(var n=e._pt;n;)n.r(t,n.d),n=n._next},ln=function(t,e,n,r){for(var i,o=this._pt;o;)i=o._next,o.p===r&&o.modifier(t,e,n),o=i},hn=function(t){for(var e,n,r=this._pt;r;)n=r._next,r.p===t&&!r.op||r.op===t?Rt(this,r,"_pt"):r.dep||(e=1),r=n;return!e},fn=function(t,e,n,r){r.mSet(t,e,r.m.call(r.tween,n,r.mt),r)},dn=function(t){for(var e,n,r,i,o=t._pt;o;){for(e=o._next,n=r;n&&n.pr>o.pr;)n=n._next;(o._prev=n?n._prev:i)?o._prev._next=o:r=o,(o._next=n)?n._prev=o:i=o,o=e}t._pt=r},pn=function(){function t(t,e,n,r,i,o,a,s,u){this.t=e,this.s=r,this.c=i,this.p=n,this.r=o||an,this.d=a||this,this.set=s||tn,this.pr=u||0,this._next=t,t&&(t._prev=this)}return t.prototype.modifier=function(t,e,n){this.mSet=this.mSet||this.set,this.set=fn,this.m=t,this.mt=n,this.tween=e},t}();vt(dt+"parent,duration,ease,delay,overwrite,runBackwards,startAt,yoyo,immediateRender,repeat,repeatDelay,data,paused,reversed,lazy,callbackScope,stringFilter,id,yoyoEase,stagger,inherit,repeatRefresh,keyframes,autoRevert,scrollTrigger",(function(t){return at[t]=1})),J.TweenMax=J.TweenLite=$e,J.TimelineLite=J.TimelineMax=He,f=new He({sortChildren:!1,defaults:T,autoRemoveChildren:!0,id:"root",smoothChildTiming:!0}),E.stringFilter=Me;var mn=[],gn={},vn=[],yn=0,bn=0,_n=function(t){return(gn[t]||vn).map((function(t){return t()}))},xn=function(){var t=Date.now(),e=[];t-yn>2&&(_n("matchMediaInit"),mn.forEach((function(t){var n,r,i,o,a=t.queries,s=t.conditions;for(r in a)(n=d.matchMedia(a[r]).matches)&&(i=1),n!==s[r]&&(s[r]=n,o=1);o&&(t.revert(),i&&e.push(t))})),_n("matchMediaRevert"),e.forEach((function(t){return t.onMatch(t,(function(e){return t.add(null,e)}))})),yn=t,_n("matchMedia"))},wn=function(){function t(t,e){this.selector=e&&oe(e),this.data=[],this._r=[],this.isReverted=!1,this.id=bn++,t&&this.add(t)}var e=t.prototype;return e.add=function(t,e,n){O(t)&&(n=e,e=t,t=O);var r=this,i=function(){var t,i=h,o=r.selector;return i&&i!==r&&i.data.push(r),n&&(r.selector=oe(n)),h=r,t=e.apply(r,arguments),O(t)&&r._r.push(t),h=i,r.selector=o,r.isReverted=!1,t};return r.last=i,t===O?i(r,(function(t){return r.add(null,t)})):t?r[t]=i:i},e.ignore=function(t){var e=h;h=null,t(this),h=e},e.getTweens=function(){var e=[];return this.data.forEach((function(n){return n instanceof t?e.push.apply(e,n.getTweens()):n instanceof $e&&!(n.parent&&"nested"===n.parent.data)&&e.push(n)})),e},e.clear=function(){this._r.length=this.data.length=0},e.kill=function(t,e){var n=this;if(t?function(){for(var e,r=n.getTweens(),i=n.data.length;i--;)"isFlip"===(e=n.data[i]).data&&(e.revert(),e.getChildren(!0,!0,!1).forEach((function(t){return r.splice(r.indexOf(t),1)})));for(r.map((function(t){return{g:t._dur||t._delay||t._sat&&!t._sat.vars.immediateRender?t.globalTime(0):-1/0,t:t}})).sort((function(t,e){return e.g-t.g||-1/0})).forEach((function(e){return e.t.revert(t)})),i=n.data.length;i--;)(e=n.data[i])instanceof He?"nested"!==e.data&&(e.scrollTrigger&&e.scrollTrigger.revert(),e.kill()):!(e instanceof $e)&&e.revert&&e.revert(t);n._r.forEach((function(e){return e(t,n)})),n.isReverted=!0}():this.data.forEach((function(t){return t.kill&&t.kill()})),this.clear(),e)for(var r=mn.length;r--;)mn[r].id===this.id&&mn.splice(r,1)},e.revert=function(t){this.kill(t||{})},t}(),Sn=function(){function t(t){this.contexts=[],this.scope=t,h&&h.data.push(this)}var e=t.prototype;return e.add=function(t,e,n){z(t)||(t={matches:t});var r,i,o,a=new wn(0,n||this.scope),s=a.conditions={};for(i in h&&!a.selector&&(a.selector=h.selector),this.contexts.push(a),e=a.add("onMatch",e),a.queries=t,t)"all"===i?o=1:(r=d.matchMedia(t[i]))&&(mn.indexOf(a)<0&&mn.push(a),(s[i]=r.matches)&&(o=1),r.addListener?r.addListener(xn):r.addEventListener("change",xn));return o&&e(a,(function(t){return a.add(null,t)})),this},e.revert=function(t){this.kill(t||{})},e.kill=function(t){this.contexts.forEach((function(e){return e.kill(t,!0)}))},t}(),En={registerPlugin:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];e.forEach((function(t){return ye(t)}))},timeline:function(t){return new He(t)},getTweensOf:function(t,e){return f.getTweensOf(t,e)},getProperty:function(t,e,n,r){k(t)&&(t=ie(t)[0]);var i=mt(t||{}).get,o=n?Tt:Et;return"native"===n&&(n=""),t?e?o((ct[e]&&ct[e].get||i)(t,e,n,r)):function(e,n,r){return o((ct[e]&&ct[e].get||i)(t,e,n,r))}:t},quickSetter:function(t,e,n){if((t=ie(t)).length>1){var r=t.map((function(t){return An.quickSetter(t,e,n)})),i=r.length;return function(t){for(var e=i;e--;)r[e](t)}}t=t[0]||{};var o=ct[e],a=mt(t),s=a.harness&&(a.harness.aliases||{})[e]||e,u=o?function(e){var r=new o;y._pt=0,r.init(t,n?e+n:e,y,0,[t]),r.render(1,r),y._pt&&cn(1,y)}:a.set(t,s);return o?u:function(e){return u(t,s,n?e+n:e,a,1)}},quickTo:function(t,e,n){var r,i=An.to(t,At(((r={})[e]="+=0.1",r.paused=!0,r),n||{})),o=function(t,n,r){return i.resetTo(e,t,n,r)};return o.tween=i,o},isTweening:function(t){return f.getTweensOf(t,!0).length>0},defaults:function(t){return t&&t.ease&&(t.ease=Ie(t.ease,T.ease)),Lt(T,t||{})},config:function(t){return Lt(E,t||{})},registerEffect:function(t){var e=t.name,n=t.effect,r=t.plugins,i=t.defaults,o=t.extendTimeline;(r||"").split(",").forEach((function(t){return t&&!ct[t]&&!J[t]&&tt(e+" effect requires "+t+" plugin.")})),lt[e]=function(t,e,r){return n(ie(t),Mt(e||{},i),r)},o&&(He.prototype[e]=function(t,n,r){return this.add(lt[e](t,z(n)?n:(r=n)&&{},this),r)})},registerEase:function(t,e){De[t]=Ie(e)},parseEase:function(t,e){return arguments.length?Ie(t,e):De},getById:function(t){return f.getById(t)},exportRoot:function(t,e){void 0===t&&(t={});var n,r,i=new He(t);for(i.smoothChildTiming=B(t.smoothChildTiming),f.remove(i),i._dp=0,i._time=i._tTime=f._time,n=f._first;n;)r=n._next,!e&&!n._dur&&n instanceof $e&&n.vars.onComplete===n._targets[0]||Vt(i,n,n._start-n._delay),n=r;return Vt(f,i,0),i},context:function(t,e){return t?new wn(t,e):h},matchMedia:function(t){return new Sn(t)},matchMediaRefresh:function(){return mn.forEach((function(t){var e,n,r=t.conditions;for(n in r)r[n]&&(r[n]=!1,e=1);e&&t.revert()}))||xn()},addEventListener:function(t,e){var n=gn[t]||(gn[t]=[]);~n.indexOf(e)||n.push(e)},removeEventListener:function(t,e){var n=gn[t],r=n&&n.indexOf(e);r>=0&&n.splice(r,1)},utils:{wrap:function t(e,n,r){var i=n-e;return H(e)?he(e,t(0,e.length),n):Kt(r,(function(t){return(i+(t-e)%i)%i+e}))},wrapYoyo:function t(e,n,r){var i=n-e,o=2*i;return H(e)?he(e,t(0,e.length-1),n):Kt(r,(function(t){return e+((t=(o+(t-e)%o)%o||0)>i?o-t:t)}))},distribute:se,random:le,snap:ce,normalize:function(t,e,n){return de(t,e,0,1,n)},getUnit:te,clamp:function(t,e,n){return Kt(n,(function(n){return $t(t,e,n)}))},splitColor:xe,toArray:ie,selector:oe,mapRange:de,pipe:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return function(t){return e.reduce((function(t,e){return e(t)}),t)}},unitize:function(t,e){return function(n){return t(parseFloat(n))+(e||te(n))}},interpolate:function t(e,n,r,i){var o=isNaN(e+n)?0:function(t){return(1-t)*e+t*n};if(!o){var a,s,u,c,l,h=k(e),f={};if(!0===r&&(i=1)&&(r=null),h)e={p:e},n={p:n};else if(H(e)&&!H(n)){for(u=[],c=e.length,l=c-2,s=1;s<c;s++)u.push(t(e[s-1],e[s]));c--,o=function(t){t*=c;var e=Math.min(l,~~t);return u[e](t-e)},r=n}else i||(e=At(H(e)?[]:{},e));if(!u){for(a in n)qe.call(f,e,a,"get",n[a]);o=function(t){return cn(t,f)||(h?e.p:e)}}}return Kt(r,o)},shuffle:ae},install:K,effects:lt,ticker:Ae,updateRoot:He.updateRoot,plugins:ct,globalTimeline:f,core:{PropTween:pn,globals:et,Tween:$e,Timeline:He,Animation:je,getCache:mt,_removeLinkedListItem:Rt,reverting:function(){return l},context:function(t){return t&&h&&(h.data.push(t),t._ctx=h),h},suppressOverwrites:function(t){return c=t}}};vt("to,from,fromTo,delayedCall,set,killTweensOf",(function(t){return En[t]=$e[t]})),Ae.add(He.updateRoot),y=En.to({},{duration:0});var Tn=function(t,e){for(var n=t._pt;n&&n.p!==e&&n.op!==e&&n.fp!==e;)n=n._next;return n},Mn=function(t,e){return{name:t,rawVars:1,init:function(t,n,r){r._onInit=function(t){var r,i;if(k(n)&&(r={},vt(n,(function(t){return r[t]=1})),n=r),e){for(i in r={},n)r[i]=e(n[i]);n=r}!function(t,e){var n,r,i,o=t._targets;for(n in e)for(r=o.length;r--;)(i=t._ptLookup[r][n])&&(i=i.d)&&(i._pt&&(i=Tn(i,n)),i&&i.modifier&&i.modifier(e[n],t,o[r],n))}(t,n)}}}},An=En.registerPlugin({name:"attr",init:function(t,e,n,r,i){var o,a,s;for(o in this.tween=n,e)s=t.getAttribute(o)||"",(a=this.add(t,"setAttribute",(s||0)+"",e[o],r,i,0,0,o)).op=o,a.b=s,this._props.push(o)},render:function(t,e){for(var n=e._pt;n;)l?n.set(n.t,n.p,n.b,n):n.r(t,n.d),n=n._next}},{name:"endArray",init:function(t,e){for(var n=e.length;n--;)this.add(t,n,t[n]||0,e[n],0,0,0,0,0,1)}},Mn("roundProps",ue),Mn("modifiers"),Mn("snap",ce))||En;$e.version=He.version=An.version="3.12.5",g=1,N()&&Le();De.Power0,De.Power1,De.Power2,De.Power3,De.Power4,De.Linear,De.Quad,De.Cubic,De.Quart;var Ln,Dn,Cn,Pn,Rn,kn,On,In,Fn=De.Quint,zn=(De.Strong,De.Elastic,De.Back,De.SteppedEase,De.Bounce,De.Sine,De.Expo,De.Circ,{}),Bn=180/Math.PI,Nn=Math.PI/180,Un=Math.atan2,jn=/([A-Z])/g,Hn=/(left|right|width|margin|padding|x)/i,Vn=/[\s,\(]\S/,Gn={autoAlpha:"opacity,visibility",scale:"scaleX,scaleY",alpha:"opacity"},Wn=function(t,e){return e.set(e.t,e.p,Math.round(1e4*(e.s+e.c*t))/1e4+e.u,e)},qn=function(t,e){return e.set(e.t,e.p,1===t?e.e:Math.round(1e4*(e.s+e.c*t))/1e4+e.u,e)},Xn=function(t,e){return e.set(e.t,e.p,t?Math.round(1e4*(e.s+e.c*t))/1e4+e.u:e.b,e)},Yn=function(t,e){var n=e.s+e.c*t;e.set(e.t,e.p,~~(n+(n<0?-.5:.5))+e.u,e)},Zn=function(t,e){return e.set(e.t,e.p,t?e.e:e.b,e)},Jn=function(t,e){return e.set(e.t,e.p,1!==t?e.b:e.e,e)},Qn=function(t,e,n){return t.style[e]=n},Kn=function(t,e,n){return t.style.setProperty(e,n)},$n=function(t,e,n){return t._gsap[e]=n},tr=function(t,e,n){return t._gsap.scaleX=t._gsap.scaleY=n},er=function(t,e,n,r,i){var o=t._gsap;o.scaleX=o.scaleY=n,o.renderTransform(i,o)},nr=function(t,e,n,r,i){var o=t._gsap;o[e]=n,o.renderTransform(i,o)},rr="transform",ir=rr+"Origin",or=function t(e,n){var r=this,i=this.target,o=i.style,a=i._gsap;if(e in zn&&o){if(this.tfm=this.tfm||{},"transform"===e)return Gn.transform.split(",").forEach((function(e){return t.call(r,e,n)}));if(~(e=Gn[e]||e).indexOf(",")?e.split(",").forEach((function(t){return r.tfm[t]=Sr(i,t)})):this.tfm[e]=a.x?a[e]:Sr(i,e),e===ir&&(this.tfm.zOrigin=a.zOrigin),this.props.indexOf(rr)>=0)return;a.svg&&(this.svgo=i.getAttribute("data-svg-origin"),this.props.push(ir,n,"")),e=rr}(o||n)&&this.props.push(e,n,o[e])},ar=function(t){t.translate&&(t.removeProperty("translate"),t.removeProperty("scale"),t.removeProperty("rotate"))},sr=function(){var t,e,n=this.props,r=this.target,i=r.style,o=r._gsap;for(t=0;t<n.length;t+=3)n[t+1]?r[n[t]]=n[t+2]:n[t+2]?i[n[t]]=n[t+2]:i.removeProperty("--"===n[t].substr(0,2)?n[t]:n[t].replace(jn,"-$1").toLowerCase());if(this.tfm){for(e in this.tfm)o[e]=this.tfm[e];o.svg&&(o.renderTransform(),r.setAttribute("data-svg-origin",this.svgo||"")),(t=On())&&t.isStart||i[rr]||(ar(i),o.zOrigin&&i[ir]&&(i[ir]+=" "+o.zOrigin+"px",o.zOrigin=0,o.renderTransform()),o.uncache=1)}},ur=function(t,e){var n={target:t,props:[],revert:sr,save:or};return t._gsap||An.core.getCache(t),e&&e.split(",").forEach((function(t){return n.save(t)})),n},cr=function(t,e){var n=Dn.createElementNS?Dn.createElementNS((e||"http://www.w3.org/1999/xhtml").replace(/^https/,"http"),t):Dn.createElement(t);return n&&n.style?n:Dn.createElement(t)},lr=function t(e,n,r){var i=getComputedStyle(e);return i[n]||i.getPropertyValue(n.replace(jn,"-$1").toLowerCase())||i.getPropertyValue(n)||!r&&t(e,fr(n)||n,1)||""},hr="O,Moz,ms,Ms,Webkit".split(","),fr=function(t,e,n){var r=(e||Rn).style,i=5;if(t in r&&!n)return t;for(t=t.charAt(0).toUpperCase()+t.substr(1);i--&&!(hr[i]+t in r););return i<0?null:(3===i?"ms":i>=0?hr[i]:"")+t},dr=function(){"undefined"!=typeof window&&window.document&&(Ln=window,Dn=Ln.document,Cn=Dn.documentElement,Rn=cr("div")||{style:{}},cr("div"),rr=fr(rr),ir=rr+"Origin",Rn.style.cssText="border-width:0;line-height:0;position:absolute;padding:0",In=!!fr("perspective"),On=An.core.reverting,Pn=1)},pr=function t(e){var n,r=cr("svg",this.ownerSVGElement&&this.ownerSVGElement.getAttribute("xmlns")||"http://www.w3.org/2000/svg"),i=this.parentNode,o=this.nextSibling,a=this.style.cssText;if(Cn.appendChild(r),r.appendChild(this),this.style.display="block",e)try{n=this.getBBox(),this._gsapBBox=this.getBBox,this.getBBox=t}catch(t){}else this._gsapBBox&&(n=this._gsapBBox());return i&&(o?i.insertBefore(this,o):i.appendChild(this)),Cn.removeChild(r),this.style.cssText=a,n},mr=function(t,e){for(var n=e.length;n--;)if(t.hasAttribute(e[n]))return t.getAttribute(e[n])},gr=function(t){var e;try{e=t.getBBox()}catch(n){e=pr.call(t,!0)}return e&&(e.width||e.height)||t.getBBox===pr||(e=pr.call(t,!0)),!e||e.width||e.x||e.y?e:{x:+mr(t,["x","cx","x1"])||0,y:+mr(t,["y","cy","y1"])||0,width:0,height:0}},vr=function(t){return!(!t.getCTM||t.parentNode&&!t.ownerSVGElement||!gr(t))},yr=function(t,e){if(e){var n,r=t.style;e in zn&&e!==ir&&(e=rr),r.removeProperty?("ms"!==(n=e.substr(0,2))&&"webkit"!==e.substr(0,6)||(e="-"+e),r.removeProperty("--"===n?e:e.replace(jn,"-$1").toLowerCase())):r.removeAttribute(e)}},br=function(t,e,n,r,i,o){var a=new pn(t._pt,e,n,0,1,o?Jn:Zn);return t._pt=a,a.b=r,a.e=i,t._props.push(n),a},_r={deg:1,rad:1,turn:1},xr={grid:1,flex:1},wr=function t(e,n,r,i){var o,a,s,u,c=parseFloat(r)||0,l=(r+"").trim().substr((c+"").length)||"px",h=Rn.style,f=Hn.test(n),d="svg"===e.tagName.toLowerCase(),p=(d?"client":"offset")+(f?"Width":"Height"),m="px"===i,g="%"===i;if(i===l||!c||_r[i]||_r[l])return c;if("px"!==l&&!m&&(c=t(e,n,r,"px")),u=e.getCTM&&vr(e),(g||"%"===l)&&(zn[n]||~n.indexOf("adius")))return o=u?e.getBBox()[f?"width":"height"]:e[p],yt(g?c/o*100:c/100*o);if(h[f?"width":"height"]=100+(m?l:i),a=~n.indexOf("adius")||"em"===i&&e.appendChild&&!d?e:e.parentNode,u&&(a=(e.ownerSVGElement||{}).parentNode),a&&a!==Dn&&a.appendChild||(a=Dn.body),(s=a._gsap)&&g&&s.width&&f&&s.time===Ae.time&&!s.uncache)return yt(c/s.width*100);if(!g||"height"!==n&&"width"!==n)(g||"%"===l)&&!xr[lr(a,"display")]&&(h.position=lr(e,"position")),a===e&&(h.position="static"),a.appendChild(Rn),o=Rn[p],a.removeChild(Rn),h.position="absolute";else{var v=e.style[n];e.style[n]=100+i,o=e[p],v?e.style[n]=v:yr(e,n)}return f&&g&&((s=mt(a)).time=Ae.time,s.width=a[p]),yt(m?o*c/100:o&&c?100/o*c:0)},Sr=function(t,e,n,r){var i;return Pn||dr(),e in Gn&&"transform"!==e&&~(e=Gn[e]).indexOf(",")&&(e=e.split(",")[0]),zn[e]&&"transform"!==e?(i=Or(t,r),i="transformOrigin"!==e?i[e]:i.svg?i.origin:Ir(lr(t,ir))+" "+i.zOrigin+"px"):(!(i=t.style[e])||"auto"===i||r||~(i+"").indexOf("calc("))&&(i=Ar[e]&&Ar[e](t,e,n)||lr(t,e)||gt(t,e)||("opacity"===e?1:0)),n&&!~(i+"").trim().indexOf(" ")?wr(t,e,i,n)+n:i},Er=function(t,e,n,r){if(!n||"none"===n){var i=fr(e,t,1),o=i&&lr(t,i,1);o&&o!==n?(e=i,n=o):"borderColor"===e&&(n=lr(t,"borderTopColor"))}var a,s,u,c,l,h,f,d,p,m,g,v=new pn(this._pt,t.style,e,0,1,un),y=0,b=0;if(v.b=n,v.e=r,n+="","auto"===(r+="")&&(h=t.style[e],t.style[e]=r,r=lr(t,e)||r,h?t.style[e]=h:yr(t,e)),Me(a=[n,r]),r=a[1],u=(n=a[0]).match(W)||[],(r.match(W)||[]).length){for(;s=W.exec(r);)f=s[0],p=r.substring(y,s.index),l?l=(l+1)%5:"rgba("!==p.substr(-5)&&"hsla("!==p.substr(-5)||(l=1),f!==(h=u[b++]||"")&&(c=parseFloat(h)||0,g=h.substr((c+"").length),"="===f.charAt(1)&&(f=_t(c,f)+g),d=parseFloat(f),m=f.substr((d+"").length),y=W.lastIndex-m.length,m||(m=m||E.units[e]||g,y===r.length&&(r+=m,v.e+=m)),g!==m&&(c=wr(t,e,h,m)||0),v._pt={_next:v._pt,p:p||1===b?p:",",s:c,c:d-c,m:l&&l<4||"zIndex"===e?Math.round:0});v.c=y<r.length?r.substring(y,r.length):""}else v.r="display"===e&&"none"===r?Jn:Zn;return X.test(r)&&(v.e=0),this._pt=v,v},Tr={top:"0%",bottom:"100%",left:"0%",right:"100%",center:"50%"},Mr=function(t,e){if(e.tween&&e.tween._time===e.tween._dur){var n,r,i,o=e.t,a=o.style,s=e.u,u=o._gsap;if("all"===s||!0===s)a.cssText="",r=1;else for(i=(s=s.split(",")).length;--i>-1;)n=s[i],zn[n]&&(r=1,n="transformOrigin"===n?ir:rr),yr(o,n);r&&(yr(o,rr),u&&(u.svg&&o.removeAttribute("transform"),Or(o,1),u.uncache=1,ar(a)))}},Ar={clearProps:function(t,e,n,r,i){if("isFromStart"!==i.data){var o=t._pt=new pn(t._pt,e,n,0,0,Mr);return o.u=r,o.pr=-10,o.tween=i,t._props.push(n),1}}},Lr=[1,0,0,1,0,0],Dr={},Cr=function(t){return"matrix(1, 0, 0, 1, 0, 0)"===t||"none"===t||!t},Pr=function(t){var e=lr(t,rr);return Cr(e)?Lr:e.substr(7).match(G).map(yt)},Rr=function(t,e){var n,r,i,o,a=t._gsap||mt(t),s=t.style,u=Pr(t);return a.svg&&t.getAttribute("transform")?"1,0,0,1,0,0"===(u=[(i=t.transform.baseVal.consolidate().matrix).a,i.b,i.c,i.d,i.e,i.f]).join(",")?Lr:u:(u!==Lr||t.offsetParent||t===Cn||a.svg||(i=s.display,s.display="block",(n=t.parentNode)&&t.offsetParent||(o=1,r=t.nextElementSibling,Cn.appendChild(t)),u=Pr(t),i?s.display=i:yr(t,"display"),o&&(r?n.insertBefore(t,r):n?n.appendChild(t):Cn.removeChild(t))),e&&u.length>6?[u[0],u[1],u[4],u[5],u[12],u[13]]:u)},kr=function(t,e,n,r,i,o){var a,s,u,c=t._gsap,l=i||Rr(t,!0),h=c.xOrigin||0,f=c.yOrigin||0,d=c.xOffset||0,p=c.yOffset||0,m=l[0],g=l[1],v=l[2],y=l[3],b=l[4],_=l[5],x=e.split(" "),w=parseFloat(x[0])||0,S=parseFloat(x[1])||0;n?l!==Lr&&(s=m*y-g*v)&&(u=w*(-g/s)+S*(m/s)-(m*_-g*b)/s,w=w*(y/s)+S*(-v/s)+(v*_-y*b)/s,S=u):(w=(a=gr(t)).x+(~x[0].indexOf("%")?w/100*a.width:w),S=a.y+(~(x[1]||x[0]).indexOf("%")?S/100*a.height:S)),r||!1!==r&&c.smooth?(b=w-h,_=S-f,c.xOffset=d+(b*m+_*v)-b,c.yOffset=p+(b*g+_*y)-_):c.xOffset=c.yOffset=0,c.xOrigin=w,c.yOrigin=S,c.smooth=!!r,c.origin=e,c.originIsAbsolute=!!n,t.style[ir]="0px 0px",o&&(br(o,c,"xOrigin",h,w),br(o,c,"yOrigin",f,S),br(o,c,"xOffset",d,c.xOffset),br(o,c,"yOffset",p,c.yOffset)),t.setAttribute("data-svg-origin",w+" "+S)},Or=function(t,e){var n=t._gsap||new Ue(t);if("x"in n&&!e&&!n.uncache)return n;var r,i,o,a,s,u,c,l,h,f,d,p,m,g,v,y,b,_,x,w,S,T,M,A,L,D,C,P,R,k,O,I,F=t.style,z=n.scaleX<0,B=getComputedStyle(t),N=lr(t,ir)||"0";return r=i=o=u=c=l=h=f=d=0,a=s=1,n.svg=!(!t.getCTM||!vr(t)),B.translate&&("none"===B.translate&&"none"===B.scale&&"none"===B.rotate||(F[rr]=("none"!==B.translate?"translate3d("+(B.translate+" 0 0").split(" ").slice(0,3).join(", ")+") ":"")+("none"!==B.rotate?"rotate("+B.rotate+") ":"")+("none"!==B.scale?"scale("+B.scale.split(" ").join(",")+") ":"")+("none"!==B[rr]?B[rr]:"")),F.scale=F.rotate=F.translate="none"),g=Rr(t,n.svg),n.svg&&(n.uncache?(L=t.getBBox(),N=n.xOrigin-L.x+"px "+(n.yOrigin-L.y)+"px",A=""):A=!e&&t.getAttribute("data-svg-origin"),kr(t,A||N,!!A||n.originIsAbsolute,!1!==n.smooth,g)),p=n.xOrigin||0,m=n.yOrigin||0,g!==Lr&&(_=g[0],x=g[1],w=g[2],S=g[3],r=T=g[4],i=M=g[5],6===g.length?(a=Math.sqrt(_*_+x*x),s=Math.sqrt(S*S+w*w),u=_||x?Un(x,_)*Bn:0,(h=w||S?Un(w,S)*Bn+u:0)&&(s*=Math.abs(Math.cos(h*Nn))),n.svg&&(r-=p-(p*_+m*w),i-=m-(p*x+m*S))):(I=g[6],k=g[7],C=g[8],P=g[9],R=g[10],O=g[11],r=g[12],i=g[13],o=g[14],c=(v=Un(I,R))*Bn,v&&(A=T*(y=Math.cos(-v))+C*(b=Math.sin(-v)),L=M*y+P*b,D=I*y+R*b,C=T*-b+C*y,P=M*-b+P*y,R=I*-b+R*y,O=k*-b+O*y,T=A,M=L,I=D),l=(v=Un(-w,R))*Bn,v&&(y=Math.cos(-v),O=S*(b=Math.sin(-v))+O*y,_=A=_*y-C*b,x=L=x*y-P*b,w=D=w*y-R*b),u=(v=Un(x,_))*Bn,v&&(A=_*(y=Math.cos(v))+x*(b=Math.sin(v)),L=T*y+M*b,x=x*y-_*b,M=M*y-T*b,_=A,T=L),c&&Math.abs(c)+Math.abs(u)>359.9&&(c=u=0,l=180-l),a=yt(Math.sqrt(_*_+x*x+w*w)),s=yt(Math.sqrt(M*M+I*I)),v=Un(T,M),h=Math.abs(v)>2e-4?v*Bn:0,d=O?1/(O<0?-O:O):0),n.svg&&(A=t.getAttribute("transform"),n.forceCSS=t.setAttribute("transform","")||!Cr(lr(t,rr)),A&&t.setAttribute("transform",A))),Math.abs(h)>90&&Math.abs(h)<270&&(z?(a*=-1,h+=u<=0?180:-180,u+=u<=0?180:-180):(s*=-1,h+=h<=0?180:-180)),e=e||n.uncache,n.x=r-((n.xPercent=r&&(!e&&n.xPercent||(Math.round(t.offsetWidth/2)===Math.round(-r)?-50:0)))?t.offsetWidth*n.xPercent/100:0)+"px",n.y=i-((n.yPercent=i&&(!e&&n.yPercent||(Math.round(t.offsetHeight/2)===Math.round(-i)?-50:0)))?t.offsetHeight*n.yPercent/100:0)+"px",n.z=o+"px",n.scaleX=yt(a),n.scaleY=yt(s),n.rotation=yt(u)+"deg",n.rotationX=yt(c)+"deg",n.rotationY=yt(l)+"deg",n.skewX=h+"deg",n.skewY=f+"deg",n.transformPerspective=d+"px",(n.zOrigin=parseFloat(N.split(" ")[2])||!e&&n.zOrigin||0)&&(F[ir]=Ir(N)),n.xOffset=n.yOffset=0,n.force3D=E.force3D,n.renderTransform=n.svg?Nr:In?Br:zr,n.uncache=0,n},Ir=function(t){return(t=t.split(" "))[0]+" "+t[1]},Fr=function(t,e,n){var r=te(e);return yt(parseFloat(e)+parseFloat(wr(t,"x",n+"px",r)))+r},zr=function(t,e){e.z="0px",e.rotationY=e.rotationX="0deg",e.force3D=0,Br(t,e)},Br=function(t,e){var n=e||this,r=n.xPercent,i=n.yPercent,o=n.x,a=n.y,s=n.z,u=n.rotation,c=n.rotationY,l=n.rotationX,h=n.skewX,f=n.skewY,d=n.scaleX,p=n.scaleY,m=n.transformPerspective,g=n.force3D,v=n.target,y=n.zOrigin,b="",_="auto"===g&&t&&1!==t||!0===g;if(y&&("0deg"!==l||"0deg"!==c)){var x,w=parseFloat(c)*Nn,S=Math.sin(w),E=Math.cos(w);w=parseFloat(l)*Nn,x=Math.cos(w),o=Fr(v,o,S*x*-y),a=Fr(v,a,-Math.sin(w)*-y),s=Fr(v,s,E*x*-y+y)}"0px"!==m&&(b+="perspective("+m+") "),(r||i)&&(b+="translate("+r+"%, "+i+"%) "),(_||"0px"!==o||"0px"!==a||"0px"!==s)&&(b+="0px"!==s||_?"translate3d("+o+", "+a+", "+s+") ":"translate("+o+", "+a+") "),"0deg"!==u&&(b+="rotate("+u+") "),"0deg"!==c&&(b+="rotateY("+c+") "),"0deg"!==l&&(b+="rotateX("+l+") "),"0deg"===h&&"0deg"===f||(b+="skew("+h+", "+f+") "),1===d&&1===p||(b+="scale("+d+", "+p+") "),v.style[rr]=b||"translate(0, 0)"},Nr=function(t,e){var n,r,i,o,a,s=e||this,u=s.xPercent,c=s.yPercent,l=s.x,h=s.y,f=s.rotation,d=s.skewX,p=s.skewY,m=s.scaleX,g=s.scaleY,v=s.target,y=s.xOrigin,b=s.yOrigin,_=s.xOffset,x=s.yOffset,w=s.forceCSS,S=parseFloat(l),E=parseFloat(h);f=parseFloat(f),d=parseFloat(d),(p=parseFloat(p))&&(d+=p=parseFloat(p),f+=p),f||d?(f*=Nn,d*=Nn,n=Math.cos(f)*m,r=Math.sin(f)*m,i=Math.sin(f-d)*-g,o=Math.cos(f-d)*g,d&&(p*=Nn,a=Math.tan(d-p),i*=a=Math.sqrt(1+a*a),o*=a,p&&(a=Math.tan(p),n*=a=Math.sqrt(1+a*a),r*=a)),n=yt(n),r=yt(r),i=yt(i),o=yt(o)):(n=m,o=g,r=i=0),(S&&!~(l+"").indexOf("px")||E&&!~(h+"").indexOf("px"))&&(S=wr(v,"x",l,"px"),E=wr(v,"y",h,"px")),(y||b||_||x)&&(S=yt(S+y-(y*n+b*i)+_),E=yt(E+b-(y*r+b*o)+x)),(u||c)&&(a=v.getBBox(),S=yt(S+u/100*a.width),E=yt(E+c/100*a.height)),a="matrix("+n+","+r+","+i+","+o+","+S+","+E+")",v.setAttribute("transform",a),w&&(v.style[rr]=a)},Ur=function(t,e,n,r,i){var o,a,s=k(i),u=parseFloat(i)*(s&&~i.indexOf("rad")?Bn:1)-r,c=r+u+"deg";return s&&("short"===(o=i.split("_")[1])&&(u%=360)!==u%180&&(u+=u<0?360:-360),"cw"===o&&u<0?u=(u+36e9)%360-360*~~(u/360):"ccw"===o&&u>0&&(u=(u-36e9)%360-360*~~(u/360))),t._pt=a=new pn(t._pt,e,n,r,u,qn),a.e=c,a.u="deg",t._props.push(n),a},jr=function(t,e){for(var n in e)t[n]=e[n];return t},Hr=function(t,e,n){var r,i,o,a,s,u,c,l=jr({},n._gsap),h=n.style;for(i in l.svg?(o=n.getAttribute("transform"),n.setAttribute("transform",""),h[rr]=e,r=Or(n,1),yr(n,rr),n.setAttribute("transform",o)):(o=getComputedStyle(n)[rr],h[rr]=e,r=Or(n,1),h[rr]=o),zn)(o=l[i])!==(a=r[i])&&"perspective,force3D,transformOrigin,svgOrigin".indexOf(i)<0&&(s=te(o)!==(c=te(a))?wr(n,i,o,c):parseFloat(o),u=parseFloat(a),t._pt=new pn(t._pt,r,i,s,u-s,Wn),t._pt.u=c||0,t._props.push(i));jr(r,l)};vt("padding,margin,Width,Radius",(function(t,e){var n="Top",r="Right",i="Bottom",o="Left",a=(e<3?[n,r,i,o]:[n+o,n+r,i+r,i+o]).map((function(n){return e<2?t+n:"border"+n+t}));Ar[e>1?"border"+t:t]=function(t,e,n,r,i){var o,s;if(arguments.length<4)return o=a.map((function(e){return Sr(t,e,n)})),5===(s=o.join(" ")).split(o[0]).length?o[0]:s;o=(r+"").split(" "),s={},a.forEach((function(t,e){return s[t]=o[e]=o[e]||o[(e-1)/2|0]})),t.init(e,s,i)}}));var Vr,Gr,Wr={name:"css",register:dr,targetTest:function(t){return t.style&&t.nodeType},init:function(t,e,n,r,i){var o,a,s,u,c,l,h,f,d,p,m,g,v,y,b,_,x,w,S,T,M=this._props,A=t.style,L=n.vars.startAt;for(h in Pn||dr(),this.styles=this.styles||ur(t),_=this.styles.props,this.tween=n,e)if("autoRound"!==h&&(a=e[h],!ct[h]||!Xe(h,e,n,r,t,i)))if(c=typeof a,l=Ar[h],"function"===c&&(c=typeof(a=a.call(n,r,t,i))),"string"===c&&~a.indexOf("random(")&&(a=fe(a)),l)l(this,t,h,a,n)&&(b=1);else if("--"===h.substr(0,2))o=(getComputedStyle(t).getPropertyValue(h)+"").trim(),a+="",Ee.lastIndex=0,Ee.test(o)||(f=te(o),d=te(a)),d?f!==d&&(o=wr(t,h,o,d)+d):f&&(a+=f),this.add(A,"setProperty",o,a,r,i,0,0,h),M.push(h),_.push(h,0,A[h]);else if("undefined"!==c){if(L&&h in L?(o="function"==typeof L[h]?L[h].call(n,r,t,i):L[h],k(o)&&~o.indexOf("random(")&&(o=fe(o)),te(o+"")||"auto"===o||(o+=E.units[h]||te(Sr(t,h))||""),"="===(o+"").charAt(1)&&(o=Sr(t,h))):o=Sr(t,h),u=parseFloat(o),(p="string"===c&&"="===a.charAt(1)&&a.substr(0,2))&&(a=a.substr(2)),s=parseFloat(a),h in Gn&&("autoAlpha"===h&&(1===u&&"hidden"===Sr(t,"visibility")&&s&&(u=0),_.push("visibility",0,A.visibility),br(this,A,"visibility",u?"inherit":"hidden",s?"inherit":"hidden",!s)),"scale"!==h&&"transform"!==h&&~(h=Gn[h]).indexOf(",")&&(h=h.split(",")[0])),m=h in zn)if(this.styles.save(h),g||((v=t._gsap).renderTransform&&!e.parseTransform||Or(t,e.parseTransform),y=!1!==e.smoothOrigin&&v.smooth,(g=this._pt=new pn(this._pt,A,rr,0,1,v.renderTransform,v,0,-1)).dep=1),"scale"===h)this._pt=new pn(this._pt,v,"scaleY",v.scaleY,(p?_t(v.scaleY,p+s):s)-v.scaleY||0,Wn),this._pt.u=0,M.push("scaleY",h),h+="X";else{if("transformOrigin"===h){_.push(ir,0,A[ir]),w=void 0,S=void 0,T=void 0,w=(x=a).split(" "),S=w[0],T=w[1]||"50%","top"!==S&&"bottom"!==S&&"left"!==T&&"right"!==T||(x=S,S=T,T=x),w[0]=Tr[S]||S,w[1]=Tr[T]||T,a=w.join(" "),v.svg?kr(t,a,0,y,0,this):((d=parseFloat(a.split(" ")[2])||0)!==v.zOrigin&&br(this,v,"zOrigin",v.zOrigin,d),br(this,A,h,Ir(o),Ir(a)));continue}if("svgOrigin"===h){kr(t,a,1,y,0,this);continue}if(h in Dr){Ur(this,v,h,u,p?_t(u,p+a):a);continue}if("smoothOrigin"===h){br(this,v,"smooth",v.smooth,a);continue}if("force3D"===h){v[h]=a;continue}if("transform"===h){Hr(this,a,t);continue}}else h in A||(h=fr(h)||h);if(m||(s||0===s)&&(u||0===u)&&!Vn.test(a)&&h in A)s||(s=0),(f=(o+"").substr((u+"").length))!==(d=te(a)||(h in E.units?E.units[h]:f))&&(u=wr(t,h,o,d)),this._pt=new pn(this._pt,m?v:A,h,u,(p?_t(u,p+s):s)-u,m||"px"!==d&&"zIndex"!==h||!1===e.autoRound?Wn:Yn),this._pt.u=d||0,f!==d&&"%"!==d&&(this._pt.b=o,this._pt.r=Xn);else if(h in A)Er.call(this,t,h,o,p?p+a:a);else if(h in t)this.add(t,h,o||t[h],p?p+a:a,r,i);else if("parseTransform"!==h){$(h,a);continue}m||(h in A?_.push(h,0,A[h]):_.push(h,1,o||t[h])),M.push(h)}b&&dn(this)},render:function(t,e){if(e.tween._time||!On())for(var n=e._pt;n;)n.r(t,n.d),n=n._next;else e.styles.revert()},get:Sr,aliases:Gn,getSetter:function(t,e,n){var r=Gn[e];return r&&r.indexOf(",")<0&&(e=r),e in zn&&e!==ir&&(t._gsap.x||Sr(t,"x"))?n&&kn===n?"scale"===e?tr:$n:(kn=n||{})&&("scale"===e?er:nr):t.style&&!F(t.style[e])?Qn:~e.indexOf("-")?Kn:on(t,e)},core:{_removeProperty:yr,_getMatrix:Rr}};An.utils.checkPrefix=fr,An.core.getStyleSaver=ur,Gr=vt("x,y,z,scale,scaleX,scaleY,xPercent,yPercent,"+(Vr="rotation,rotationX,rotationY,skewX,skewY")+",transform,transformOrigin,svgOrigin,force3D,smoothOrigin,transformPerspective",(function(t){zn[t]=1})),vt(Vr,(function(t){E.units[t]="deg",Dr[t]=1})),Gn[Gr[13]]="x,y,z,scale,scaleX,scaleY,xPercent,yPercent,"+Vr,vt("0:translateX,1:translateY,2:translateZ,8:rotate,8:rotationZ,8:rotateZ,9:rotateX,10:rotateY",(function(t){var e=t.split(":");Gn[e[1]]=Gr[e[0]]})),vt("x,y,z,top,right,bottom,left,width,height,fontSize,padding,margin,perspective",(function(t){E.units[t]="px"})),An.registerPlugin(Wr);var qr=An.registerPlugin(Wr)||An,Xr=qr.core.Tween;function Yr(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var Zr,Jr,Qr,Kr,$r,ti,ei,ni,ri,ii,oi,ai,si,ui=function(){return Zr||"undefined"!=typeof window&&(Zr=window.gsap)&&Zr.registerPlugin&&Zr},ci=1,li=[],hi=[],fi=[],di=Date.now,pi=function(t,e){return e},mi=function(t,e){return~fi.indexOf(t)&&fi[fi.indexOf(t)+1][e]},gi=function(t){return!!~ii.indexOf(t)},vi=function(t,e,n,r,i){return t.addEventListener(e,n,{passive:!1!==r,capture:!!i})},yi=function(t,e,n,r){return t.removeEventListener(e,n,!!r)},bi=function(){return oi&&oi.isPressed||hi.cache++},_i=function(t,e){var n=function n(r){if(r||0===r){ci&&(Qr.history.scrollRestoration="manual");var i=oi&&oi.isPressed;r=n.v=Math.round(r)||(oi&&oi.iOS?1:0),t(r),n.cacheID=hi.cache,i&&pi("ss",r)}else(e||hi.cache!==n.cacheID||pi("ref"))&&(n.cacheID=hi.cache,n.v=t());return n.v+n.offset};return n.offset=0,t&&n},xi={s:"scrollLeft",p:"left",p2:"Left",os:"right",os2:"Right",d:"width",d2:"Width",a:"x",sc:_i((function(t){return arguments.length?Qr.scrollTo(t,wi.sc()):Qr.pageXOffset||Kr.scrollLeft||$r.scrollLeft||ti.scrollLeft||0}))},wi={s:"scrollTop",p:"top",p2:"Top",os:"bottom",os2:"Bottom",d:"height",d2:"Height",a:"y",op:xi,sc:_i((function(t){return arguments.length?Qr.scrollTo(xi.sc(),t):Qr.pageYOffset||Kr.scrollTop||$r.scrollTop||ti.scrollTop||0}))},Si=function(t,e){return(e&&e._ctx&&e._ctx.selector||Zr.utils.toArray)(t)[0]||("string"==typeof t&&!1!==Zr.config().nullTargetWarn?console.warn("Element not found:",t):null)},Ei=function(t,e){var n=e.s,r=e.sc;gi(t)&&(t=Kr.scrollingElement||$r);var i=hi.indexOf(t),o=r===wi.sc?1:2;!~i&&(i=hi.push(t)-1),hi[i+o]||vi(t,"scroll",bi);var a=hi[i+o],s=a||(hi[i+o]=_i(mi(t,n),!0)||(gi(t)?r:_i((function(e){return arguments.length?t[n]=e:t[n]}))));return s.target=t,a||(s.smooth="smooth"===Zr.getProperty(t,"scrollBehavior")),s},Ti=function(t,e,n){var r=t,i=t,o=di(),a=o,s=e||50,u=Math.max(500,3*s),c=function(t,e){var u=di();e||u-o>s?(i=r,r=t,a=o,o=u):n?r+=t:r=i+(t-i)/(u-a)*(o-a)};return{update:c,reset:function(){i=r=n?0:r,a=o=0},getVelocity:function(t){var e=a,s=i,l=di();return(t||0===t)&&t!==r&&c(t),o===a||l-a>u?0:(r+(n?s:-s))/((n?l:o)-e)*1e3}}},Mi=function(t,e){return e&&!t._gsapAllow&&t.preventDefault(),t.changedTouches?t.changedTouches[0]:t},Ai=function(t){var e=Math.max.apply(Math,t),n=Math.min.apply(Math,t);return Math.abs(e)>=Math.abs(n)?e:n},Li=function(){var t,e,n,r;(ri=Zr.core.globals().ScrollTrigger)&&ri.core&&(t=ri.core,e=t.bridge||{},n=t._scrollers,r=t._proxies,n.push.apply(n,hi),r.push.apply(r,fi),hi=n,fi=r,pi=function(t,n){return e[t](n)})},Di=function(t){return Zr=t||ui(),!Jr&&Zr&&"undefined"!=typeof document&&document.body&&(Qr=window,Kr=document,$r=Kr.documentElement,ti=Kr.body,ii=[Qr,Kr,$r,ti],Zr.utils.clamp,si=Zr.core.context||function(){},ni="onpointerenter"in ti?"pointer":"mouse",ei=Ci.isTouch=Qr.matchMedia&&Qr.matchMedia("(hover: none), (pointer: coarse)").matches?1:"ontouchstart"in Qr||navigator.maxTouchPoints>0||navigator.msMaxTouchPoints>0?2:0,ai=Ci.eventTypes=("ontouchstart"in $r?"touchstart,touchmove,touchcancel,touchend":"onpointerdown"in $r?"pointerdown,pointermove,pointercancel,pointerup":"mousedown,mousemove,mouseup,mouseup").split(","),setTimeout((function(){return ci=0}),500),Li(),Jr=1),Jr};xi.op=wi,hi.cache=0;var Ci=function(){function t(t){this.init(t)}var e,n,r;return t.prototype.init=function(t){Jr||Di(Zr)||console.warn("Please gsap.registerPlugin(Observer)"),ri||Li();var e=t.tolerance,n=t.dragMinimum,r=t.type,i=t.target,o=t.lineHeight,a=t.debounce,s=t.preventDefault,u=t.onStop,c=t.onStopDelay,l=t.ignore,h=t.wheelSpeed,f=t.event,d=t.onDragStart,p=t.onDragEnd,m=t.onDrag,g=t.onPress,v=t.onRelease,y=t.onRight,b=t.onLeft,_=t.onUp,x=t.onDown,w=t.onChangeX,S=t.onChangeY,E=t.onChange,T=t.onToggleX,M=t.onToggleY,A=t.onHover,L=t.onHoverEnd,D=t.onMove,C=t.ignoreCheck,P=t.isNormalizer,R=t.onGestureStart,k=t.onGestureEnd,O=t.onWheel,I=t.onEnable,F=t.onDisable,z=t.onClick,B=t.scrollSpeed,N=t.capture,U=t.allowClicks,j=t.lockAxis,H=t.onLockAxis;this.target=i=Si(i)||$r,this.vars=t,l&&(l=Zr.utils.toArray(l)),e=e||1e-9,n=n||0,h=h||1,B=B||1,r=r||"wheel,touch,pointer",a=!1!==a,o||(o=parseFloat(Qr.getComputedStyle(ti).lineHeight)||22);var V,G,W,q,X,Y,Z,J=this,Q=0,K=0,$=t.passive||!s,tt=Ei(i,xi),et=Ei(i,wi),nt=tt(),rt=et(),it=~r.indexOf("touch")&&!~r.indexOf("pointer")&&"pointerdown"===ai[0],ot=gi(i),at=i.ownerDocument||Kr,st=[0,0,0],ut=[0,0,0],ct=0,lt=function(){return ct=di()},ht=function(t,e){return(J.event=t)&&l&&~l.indexOf(t.target)||e&&it&&"touch"!==t.pointerType||C&&C(t,e)},ft=function(){var t=J.deltaX=Ai(st),n=J.deltaY=Ai(ut),r=Math.abs(t)>=e,i=Math.abs(n)>=e;E&&(r||i)&&E(J,t,n,st,ut),r&&(y&&J.deltaX>0&&y(J),b&&J.deltaX<0&&b(J),w&&w(J),T&&J.deltaX<0!=Q<0&&T(J),Q=J.deltaX,st[0]=st[1]=st[2]=0),i&&(x&&J.deltaY>0&&x(J),_&&J.deltaY<0&&_(J),S&&S(J),M&&J.deltaY<0!=K<0&&M(J),K=J.deltaY,ut[0]=ut[1]=ut[2]=0),(q||W)&&(D&&D(J),W&&(m(J),W=!1),q=!1),Y&&!(Y=!1)&&H&&H(J),X&&(O(J),X=!1),V=0},dt=function(t,e,n){st[n]+=t,ut[n]+=e,J._vx.update(t),J._vy.update(e),a?V||(V=requestAnimationFrame(ft)):ft()},pt=function(t,e){j&&!Z&&(J.axis=Z=Math.abs(t)>Math.abs(e)?"x":"y",Y=!0),"y"!==Z&&(st[2]+=t,J._vx.update(t,!0)),"x"!==Z&&(ut[2]+=e,J._vy.update(e,!0)),a?V||(V=requestAnimationFrame(ft)):ft()},mt=function(t){if(!ht(t,1)){var e=(t=Mi(t,s)).clientX,r=t.clientY,i=e-J.x,o=r-J.y,a=J.isDragging;J.x=e,J.y=r,(a||Math.abs(J.startX-e)>=n||Math.abs(J.startY-r)>=n)&&(m&&(W=!0),a||(J.isDragging=!0),pt(i,o),a||d&&d(J))}},gt=J.onPress=function(t){ht(t,1)||t&&t.button||(J.axis=Z=null,G.pause(),J.isPressed=!0,t=Mi(t),Q=K=0,J.startX=J.x=t.clientX,J.startY=J.y=t.clientY,J._vx.reset(),J._vy.reset(),vi(P?i:at,ai[1],mt,$,!0),J.deltaX=J.deltaY=0,g&&g(J))},vt=J.onRelease=function(t){if(!ht(t,1)){yi(P?i:at,ai[1],mt,!0);var e=!isNaN(J.y-J.startY),n=J.isDragging,r=n&&(Math.abs(J.x-J.startX)>3||Math.abs(J.y-J.startY)>3),o=Mi(t);!r&&e&&(J._vx.reset(),J._vy.reset(),s&&U&&Zr.delayedCall(.08,(function(){if(di()-ct>300&&!t.defaultPrevented)if(t.target.click)t.target.click();else if(at.createEvent){var e=at.createEvent("MouseEvents");e.initMouseEvent("click",!0,!0,Qr,1,o.screenX,o.screenY,o.clientX,o.clientY,!1,!1,!1,!1,0,null),t.target.dispatchEvent(e)}}))),J.isDragging=J.isGesturing=J.isPressed=!1,u&&n&&!P&&G.restart(!0),p&&n&&p(J),v&&v(J,r)}},yt=function(t){return t.touches&&t.touches.length>1&&(J.isGesturing=!0)&&R(t,J.isDragging)},bt=function(){return(J.isGesturing=!1)||k(J)},_t=function(t){if(!ht(t)){var e=tt(),n=et();dt((e-nt)*B,(n-rt)*B,1),nt=e,rt=n,u&&G.restart(!0)}},xt=function(t){if(!ht(t)){t=Mi(t,s),O&&(X=!0);var e=(1===t.deltaMode?o:2===t.deltaMode?Qr.innerHeight:1)*h;dt(t.deltaX*e,t.deltaY*e,0),u&&!P&&G.restart(!0)}},wt=function(t){if(!ht(t)){var e=t.clientX,n=t.clientY,r=e-J.x,i=n-J.y;J.x=e,J.y=n,q=!0,u&&G.restart(!0),(r||i)&&pt(r,i)}},St=function(t){J.event=t,A(J)},Et=function(t){J.event=t,L(J)},Tt=function(t){return ht(t)||Mi(t,s)&&z(J)};G=J._dc=Zr.delayedCall(c||.25,(function(){J._vx.reset(),J._vy.reset(),G.pause(),u&&u(J)})).pause(),J.deltaX=J.deltaY=0,J._vx=Ti(0,50,!0),J._vy=Ti(0,50,!0),J.scrollX=tt,J.scrollY=et,J.isDragging=J.isGesturing=J.isPressed=!1,si(this),J.enable=function(t){return J.isEnabled||(vi(ot?at:i,"scroll",bi),r.indexOf("scroll")>=0&&vi(ot?at:i,"scroll",_t,$,N),r.indexOf("wheel")>=0&&vi(i,"wheel",xt,$,N),(r.indexOf("touch")>=0&&ei||r.indexOf("pointer")>=0)&&(vi(i,ai[0],gt,$,N),vi(at,ai[2],vt),vi(at,ai[3],vt),U&&vi(i,"click",lt,!0,!0),z&&vi(i,"click",Tt),R&&vi(at,"gesturestart",yt),k&&vi(at,"gestureend",bt),A&&vi(i,ni+"enter",St),L&&vi(i,ni+"leave",Et),D&&vi(i,ni+"move",wt)),J.isEnabled=!0,t&&t.type&&gt(t),I&&I(J)),J},J.disable=function(){J.isEnabled&&(li.filter((function(t){return t!==J&&gi(t.target)})).length||yi(ot?at:i,"scroll",bi),J.isPressed&&(J._vx.reset(),J._vy.reset(),yi(P?i:at,ai[1],mt,!0)),yi(ot?at:i,"scroll",_t,N),yi(i,"wheel",xt,N),yi(i,ai[0],gt,N),yi(at,ai[2],vt),yi(at,ai[3],vt),yi(i,"click",lt,!0),yi(i,"click",Tt),yi(at,"gesturestart",yt),yi(at,"gestureend",bt),yi(i,ni+"enter",St),yi(i,ni+"leave",Et),yi(i,ni+"move",wt),J.isEnabled=J.isPressed=J.isDragging=!1,F&&F(J))},J.kill=J.revert=function(){J.disable();var t=li.indexOf(J);t>=0&&li.splice(t,1),oi===J&&(oi=0)},li.push(J),P&&gi(i)&&(oi=J),J.enable(f)},e=t,(n=[{key:"velocityX",get:function(){return this._vx.getVelocity()}},{key:"velocityY",get:function(){return this._vy.getVelocity()}}])&&Yr(e.prototype,n),r&&Yr(e,r),t}();Ci.version="3.12.5",Ci.create=function(t){return new Ci(t)},Ci.register=Di,Ci.getAll=function(){return li.slice()},Ci.getById=function(t){return li.filter((function(e){return e.vars.id===t}))[0]},ui()&&Zr.registerPlugin(Ci);var Pi,Ri,ki,Oi,Ii,Fi,zi,Bi,Ni,Ui,ji,Hi,Vi,Gi,Wi,qi,Xi,Yi,Zi,Ji,Qi,Ki,$i,to,eo,no,ro,io,oo,ao,so,uo,co,lo,ho,fo,po,mo,go=1,vo=Date.now,yo=vo(),bo=0,_o=0,xo=function(t,e,n){var r=Oo(t)&&("clamp("===t.substr(0,6)||t.indexOf("max")>-1);return n["_"+e+"Clamp"]=r,r?t.substr(6,t.length-7):t},wo=function(t,e){return!e||Oo(t)&&"clamp("===t.substr(0,6)?t:"clamp("+t+")"},So=function(){return Gi=1},Eo=function(){return Gi=0},To=function(t){return t},Mo=function(t){return Math.round(1e5*t)/1e5||0},Ao=function(){return"undefined"!=typeof window},Lo=function(){return Pi||Ao()&&(Pi=window.gsap)&&Pi.registerPlugin&&Pi},Do=function(t){return!!~zi.indexOf(t)},Co=function(t){return("Height"===t?so:ki["inner"+t])||Ii["client"+t]||Fi["client"+t]},Po=function(t){return mi(t,"getBoundingClientRect")||(Do(t)?function(){return Ra.width=ki.innerWidth,Ra.height=so,Ra}:function(){return Wo(t)})},Ro=function(t,e){var n=e.s,r=e.d2,i=e.d,o=e.a;return Math.max(0,(n="scroll"+r)&&(o=mi(t,n))?o()-Po(t)()[i]:Do(t)?(Ii[n]||Fi[n])-Co(r):t[n]-t["offset"+r])},ko=function(t,e){for(var n=0;n<Zi.length;n+=3)(!e||~e.indexOf(Zi[n+1]))&&t(Zi[n],Zi[n+1],Zi[n+2])},Oo=function(t){return"string"==typeof t},Io=function(t){return"function"==typeof t},Fo=function(t){return"number"==typeof t},zo=function(t){return"object"==typeof t},Bo=function(t,e,n){return t&&t.progress(e?0:1)&&n&&t.pause()},No=function(t,e){if(t.enabled){var n=t._ctx?t._ctx.add((function(){return e(t)})):e(t);n&&n.totalTime&&(t.callbackAnimation=n)}},Uo=Math.abs,jo="padding",Ho="px",Vo=function(t){return ki.getComputedStyle(t)},Go=function(t,e){for(var n in e)n in t||(t[n]=e[n]);return t},Wo=function(t,e){var n=e&&"matrix(1, 0, 0, 1, 0, 0)"!==Vo(t)[Wi]&&Pi.to(t,{x:0,y:0,xPercent:0,yPercent:0,rotation:0,rotationX:0,rotationY:0,scale:1,skewX:0,skewY:0}).progress(1),r=t.getBoundingClientRect();return n&&n.progress(0).kill(),r},qo=function(t,e){var n=e.d2;return t["offset"+n]||t["client"+n]||0},Xo=function(t){var e,n=[],r=t.labels,i=t.duration();for(e in r)n.push(r[e]/i);return n},Yo=function(t){var e=Pi.utils.snap(t),n=Array.isArray(t)&&t.slice(0).sort((function(t,e){return t-e}));return n?function(t,r,i){var o;if(void 0===i&&(i=.001),!r)return e(t);if(r>0){for(t-=i,o=0;o<n.length;o++)if(n[o]>=t)return n[o];return n[o-1]}for(o=n.length,t+=i;o--;)if(n[o]<=t)return n[o];return n[0]}:function(n,r,i){void 0===i&&(i=.001);var o=e(n);return!r||Math.abs(o-n)<i||o-n<0==r<0?o:e(r<0?n-t:n+t)}},Zo=function(t,e,n,r){return n.split(",").forEach((function(n){return t(e,n,r)}))},Jo=function(t,e,n,r,i){return t.addEventListener(e,n,{passive:!r,capture:!!i})},Qo=function(t,e,n,r){return t.removeEventListener(e,n,!!r)},Ko=function(t,e,n){(n=n&&n.wheelHandler)&&(t(e,"wheel",n),t(e,"touchmove",n))},$o={startColor:"green",endColor:"red",indent:0,fontSize:"16px",fontWeight:"normal"},ta={toggleActions:"play",anticipatePin:0},ea={top:0,left:0,center:.5,bottom:1,right:1},na=function(t,e){if(Oo(t)){var n=t.indexOf("="),r=~n?+(t.charAt(n-1)+1)*parseFloat(t.substr(n+1)):0;~n&&(t.indexOf("%")>n&&(r*=e/100),t=t.substr(0,n-1)),t=r+(t in ea?ea[t]*e:~t.indexOf("%")?parseFloat(t)*e/100:parseFloat(t)||0)}return t},ra=function(t,e,n,r,i,o,a,s){var u=i.startColor,c=i.endColor,l=i.fontSize,h=i.indent,f=i.fontWeight,d=Oi.createElement("div"),p=Do(n)||"fixed"===mi(n,"pinType"),m=-1!==t.indexOf("scroller"),g=p?Fi:n,v=-1!==t.indexOf("start"),y=v?u:c,b="border-color:"+y+";font-size:"+l+";color:"+y+";font-weight:"+f+";pointer-events:none;white-space:nowrap;font-family:sans-serif,Arial;z-index:1000;padding:4px 8px;border-width:0;border-style:solid;";return b+="position:"+((m||s)&&p?"fixed;":"absolute;"),(m||s||!p)&&(b+=(r===wi?"right":"bottom")+":"+(o+parseFloat(h))+"px;"),a&&(b+="box-sizing:border-box;text-align:left;width:"+a.offsetWidth+"px;"),d._isStart=v,d.setAttribute("class","gsap-marker-"+t+(e?" marker-"+e:"")),d.style.cssText=b,d.innerText=e||0===e?t+"-"+e:t,g.children[0]?g.insertBefore(d,g.children[0]):g.appendChild(d),d._offset=d["offset"+r.op.d2],ia(d,0,r,v),d},ia=function(t,e,n,r){var i={display:"block"},o=n[r?"os2":"p2"],a=n[r?"p2":"os2"];t._isFlipped=r,i[n.a+"Percent"]=r?-100:0,i[n.a]=r?"1px":0,i["border"+o+"Width"]=1,i["border"+a+"Width"]=0,i[n.p]=e+"px",Pi.set(t,i)},oa=[],aa={},sa=function(){return vo()-bo>34&&(ho||(ho=requestAnimationFrame(Ta)))},ua=function(){(!$i||!$i.isPressed||$i.startX>Fi.clientWidth)&&(hi.cache++,$i?ho||(ho=requestAnimationFrame(Ta)):Ta(),bo||pa("scrollStart"),bo=vo())},ca=function(){no=ki.innerWidth,eo=ki.innerHeight},la=function(){hi.cache++,!Vi&&!Ki&&!Oi.fullscreenElement&&!Oi.webkitFullscreenElement&&(!to||no!==ki.innerWidth||Math.abs(ki.innerHeight-eo)>.25*ki.innerHeight)&&Bi.restart(!0)},ha={},fa=[],da=function t(){return Qo(Na,"scrollEnd",t)||wa(!0)},pa=function(t){return ha[t]&&ha[t].map((function(t){return t()}))||fa},ma=[],ga=function(t){for(var e=0;e<ma.length;e+=5)(!t||ma[e+4]&&ma[e+4].query===t)&&(ma[e].style.cssText=ma[e+1],ma[e].getBBox&&ma[e].setAttribute("transform",ma[e+2]||""),ma[e+3].uncache=1)},va=function(t,e){var n;for(qi=0;qi<oa.length;qi++)!(n=oa[qi])||e&&n._ctx!==e||(t?n.kill(1):n.revert(!0,!0));uo=!0,e&&ga(e),e||pa("revert")},ya=function(t,e){hi.cache++,(e||!fo)&&hi.forEach((function(t){return Io(t)&&t.cacheID++&&(t.rec=0)})),Oo(t)&&(ki.history.scrollRestoration=oo=t)},ba=0,_a=function(){Fi.appendChild(ao),so=!$i&&ao.offsetHeight||ki.innerHeight,Fi.removeChild(ao)},xa=function(t){return Ni(".gsap-marker-start, .gsap-marker-end, .gsap-marker-scroller-start, .gsap-marker-scroller-end").forEach((function(e){return e.style.display=t?"none":"block"}))},wa=function(t,e){if(!bo||t||uo){_a(),fo=Na.isRefreshing=!0,hi.forEach((function(t){return Io(t)&&++t.cacheID&&(t.rec=t())}));var n=pa("refreshInit");Ji&&Na.sort(),e||va(),hi.forEach((function(t){Io(t)&&(t.smooth&&(t.target.style.scrollBehavior="auto"),t(0))})),oa.slice(0).forEach((function(t){return t.refresh()})),uo=!1,oa.forEach((function(t){if(t._subPinOffset&&t.pin){var e=t.vars.horizontal?"offsetWidth":"offsetHeight",n=t.pin[e];t.revert(!0,1),t.adjustPinSpacing(t.pin[e]-n),t.refresh()}})),co=1,xa(!0),oa.forEach((function(t){var e=Ro(t.scroller,t._dir),n="max"===t.vars.end||t._endClamp&&t.end>e,r=t._startClamp&&t.start>=e;(n||r)&&t.setPositions(r?e-1:t.start,n?Math.max(r?e:t.start+1,e):t.end,!0)})),xa(!1),co=0,n.forEach((function(t){return t&&t.render&&t.render(-1)})),hi.forEach((function(t){Io(t)&&(t.smooth&&requestAnimationFrame((function(){return t.target.style.scrollBehavior="smooth"})),t.rec&&t(t.rec))})),ya(oo,1),Bi.pause(),ba++,fo=2,Ta(2),oa.forEach((function(t){return Io(t.vars.onRefresh)&&t.vars.onRefresh(t)})),fo=Na.isRefreshing=!1,pa("refresh")}else Jo(Na,"scrollEnd",da)},Sa=0,Ea=1,Ta=function(t){if(2===t||!fo&&!uo){Na.isUpdating=!0,mo&&mo.update(0);var e=oa.length,n=vo(),r=n-yo>=50,i=e&&oa[0].scroll();if(Ea=Sa>i?-1:1,fo||(Sa=i),r&&(bo&&!Gi&&n-bo>200&&(bo=0,pa("scrollEnd")),ji=yo,yo=n),Ea<0){for(qi=e;qi-- >0;)oa[qi]&&oa[qi].update(0,r);Ea=1}else for(qi=0;qi<e;qi++)oa[qi]&&oa[qi].update(0,r);Na.isUpdating=!1}ho=0},Ma=["left","top","bottom","right","marginBottom","marginRight","marginTop","marginLeft","display","flexShrink","float","zIndex","gridColumnStart","gridColumnEnd","gridRowStart","gridRowEnd","gridArea","justifySelf","alignSelf","placeSelf","order"],Aa=Ma.concat(["width","height","boxSizing","maxWidth","maxHeight","position","margin",jo,jo+"Top",jo+"Right",jo+"Bottom",jo+"Left"]),La=function(t,e,n,r){if(!t._gsap.swappedIn){for(var i,o=Ma.length,a=e.style,s=t.style;o--;)a[i=Ma[o]]=n[i];a.position="absolute"===n.position?"absolute":"relative","inline"===n.display&&(a.display="inline-block"),s.bottom=s.right="auto",a.flexBasis=n.flexBasis||"auto",a.overflow="visible",a.boxSizing="border-box",a.width=qo(t,xi)+Ho,a.height=qo(t,wi)+Ho,a[jo]=s.margin=s.top=s.left="0",Ca(r),s.width=s.maxWidth=n.width,s.height=s.maxHeight=n.height,s[jo]=n[jo],t.parentNode!==e&&(t.parentNode.insertBefore(e,t),e.appendChild(t)),t._gsap.swappedIn=!0}},Da=/([A-Z])/g,Ca=function(t){if(t){var e,n,r=t.t.style,i=t.length,o=0;for((t.t._gsap||Pi.core.getCache(t.t)).uncache=1;o<i;o+=2)n=t[o+1],e=t[o],n?r[e]=n:r[e]&&r.removeProperty(e.replace(Da,"-$1").toLowerCase())}},Pa=function(t){for(var e=Aa.length,n=t.style,r=[],i=0;i<e;i++)r.push(Aa[i],n[Aa[i]]);return r.t=t,r},Ra={left:0,top:0},ka=function(t,e,n,r,i,o,a,s,u,c,l,h,f,d){Io(t)&&(t=t(s)),Oo(t)&&"max"===t.substr(0,3)&&(t=h+("="===t.charAt(4)?na("0"+t.substr(3),n):0));var p,m,g,v=f?f.time():0;if(f&&f.seek(0),isNaN(t)||(t=+t),Fo(t))f&&(t=Pi.utils.mapRange(f.scrollTrigger.start,f.scrollTrigger.end,0,h,t)),a&&ia(a,n,r,!0);else{Io(e)&&(e=e(s));var y,b,_,x,w=(t||"0").split(" ");g=Si(e,s)||Fi,(y=Wo(g)||{})&&(y.left||y.top)||"none"!==Vo(g).display||(x=g.style.display,g.style.display="block",y=Wo(g),x?g.style.display=x:g.style.removeProperty("display")),b=na(w[0],y[r.d]),_=na(w[1]||"0",n),t=y[r.p]-u[r.p]-c+b+i-_,a&&ia(a,_,r,n-_<20||a._isStart&&_>20),n-=n-_}if(d&&(s[d]=t||-.001,t<0&&(t=0)),o){var S=t+n,E=o._isStart;p="scroll"+r.d2,ia(o,S,r,E&&S>20||!E&&(l?Math.max(Fi[p],Ii[p]):o.parentNode[p])<=S+1),l&&(u=Wo(a),l&&(o.style[r.op.p]=u[r.op.p]-r.op.m-o._offset+Ho))}return f&&g&&(p=Wo(g),f.seek(h),m=Wo(g),f._caScrollDist=p[r.p]-m[r.p],t=t/f._caScrollDist*h),f&&f.seek(v),f?t:Math.round(t)},Oa=/(webkit|moz|length|cssText|inset)/i,Ia=function(t,e,n,r){if(t.parentNode!==e){var i,o,a=t.style;if(e===Fi){for(i in t._stOrig=a.cssText,o=Vo(t))+i||Oa.test(i)||!o[i]||"string"!=typeof a[i]||"0"===i||(a[i]=o[i]);a.top=n,a.left=r}else a.cssText=t._stOrig;Pi.core.getCache(t).uncache=1,e.appendChild(t)}},Fa=function(t,e,n){var r=e,i=r;return function(e){var o=Math.round(t());return o!==r&&o!==i&&Math.abs(o-r)>3&&Math.abs(o-i)>3&&(e=o,n&&n()),i=r,r=e,e}},za=function(t,e,n){var r={};r[e.p]="+="+n,Pi.set(t,r)},Ba=function(t,e){var n=Ei(t,e),r="_scroll"+e.p2,i=function e(i,o,a,s,u){var c=e.tween,l=o.onComplete,h={};a=a||n();var f=Fa(n,a,(function(){c.kill(),e.tween=0}));return u=s&&u||0,s=s||i-a,c&&c.kill(),o[r]=i,o.inherit=!1,o.modifiers=h,h[r]=function(){return f(a+s*c.ratio+u*c.ratio*c.ratio)},o.onUpdate=function(){hi.cache++,e.tween&&Ta()},o.onComplete=function(){e.tween=0,l&&l.call(c)},c=e.tween=Pi.to(t,o)};return t[r]=n,n.wheelHandler=function(){return i.tween&&i.tween.kill()&&(i.tween=0)},Jo(t,"wheel",n.wheelHandler),Na.isTouch&&Jo(t,"touchmove",n.wheelHandler),i},Na=function(){function t(e,n){Ri||t.register(Pi)||console.warn("Please gsap.registerPlugin(ScrollTrigger)"),io(this),this.init(e,n)}return t.prototype.init=function(e,n){if(this.progress=this.start=0,this.vars&&this.kill(!0,!0),_o){var r,i,o,a,s,u,c,l,h,f,d,p,m,g,v,y,b,_,x,w,S,E,T,M,A,L,D,C,P,R,k,O,I,F,z,B,N,U,j,H,V,G,W=e=Go(Oo(e)||Fo(e)||e.nodeType?{trigger:e}:e,ta),q=W.onUpdate,X=W.toggleClass,Y=W.id,Z=W.onToggle,J=W.onRefresh,Q=W.scrub,K=W.trigger,$=W.pin,tt=W.pinSpacing,et=W.invalidateOnRefresh,nt=W.anticipatePin,rt=W.onScrubComplete,it=W.onSnapComplete,ot=W.once,at=W.snap,st=W.pinReparent,ut=W.pinSpacer,ct=W.containerAnimation,lt=W.fastScrollEnd,ht=W.preventOverlaps,ft=e.horizontal||e.containerAnimation&&!1!==e.horizontal?xi:wi,dt=!Q&&0!==Q,pt=Si(e.scroller||ki),mt=Pi.core.getCache(pt),gt=Do(pt),vt="fixed"===("pinType"in e?e.pinType:mi(pt,"pinType")||gt&&"fixed"),yt=[e.onEnter,e.onLeave,e.onEnterBack,e.onLeaveBack],bt=dt&&e.toggleActions.split(" "),_t="markers"in e?e.markers:ta.markers,xt=gt?0:parseFloat(Vo(pt)["border"+ft.p2+"Width"])||0,wt=this,St=e.onRefreshInit&&function(){return e.onRefreshInit(wt)},Et=function(t,e,n){var r=n.d,i=n.d2,o=n.a;return(o=mi(t,"getBoundingClientRect"))?function(){return o()[r]}:function(){return(e?Co(i):t["client"+i])||0}}(pt,gt,ft),Tt=function(t,e){return!e||~fi.indexOf(t)?Po(t):function(){return Ra}}(pt,gt),Mt=0,At=0,Lt=0,Dt=Ei(pt,ft);if(wt._startClamp=wt._endClamp=!1,wt._dir=ft,nt*=45,wt.scroller=pt,wt.scroll=ct?ct.time.bind(ct):Dt,a=Dt(),wt.vars=e,n=n||e.animation,"refreshPriority"in e&&(Ji=1,-9999===e.refreshPriority&&(mo=wt)),mt.tweenScroll=mt.tweenScroll||{top:Ba(pt,wi),left:Ba(pt,xi)},wt.tweenTo=r=mt.tweenScroll[ft.p],wt.scrubDuration=function(t){(I=Fo(t)&&t)?O?O.duration(t):O=Pi.to(n,{ease:"expo",totalProgress:"+=0",inherit:!1,duration:I,paused:!0,onComplete:function(){return rt&&rt(wt)}}):(O&&O.progress(1).kill(),O=0)},n&&(n.vars.lazy=!1,n._initted&&!wt.isReverted||!1!==n.vars.immediateRender&&!1!==e.immediateRender&&n.duration()&&n.render(0,!0,!0),wt.animation=n.pause(),n.scrollTrigger=wt,wt.scrubDuration(Q),R=0,Y||(Y=n.vars.id)),at&&(zo(at)&&!at.push||(at={snapTo:at}),"scrollBehavior"in Fi.style&&Pi.set(gt?[Fi,Ii]:pt,{scrollBehavior:"auto"}),hi.forEach((function(t){return Io(t)&&t.target===(gt?Oi.scrollingElement||Ii:pt)&&(t.smooth=!1)})),o=Io(at.snapTo)?at.snapTo:"labels"===at.snapTo?function(t){return function(e){return Pi.utils.snap(Xo(t),e)}}(n):"labelsDirectional"===at.snapTo?(H=n,function(t,e){return Yo(Xo(H))(t,e.direction)}):!1!==at.directional?function(t,e){return Yo(at.snapTo)(t,vo()-At<500?0:e.direction)}:Pi.utils.snap(at.snapTo),F=at.duration||{min:.1,max:2},F=zo(F)?Ui(F.min,F.max):Ui(F,F),z=Pi.delayedCall(at.delay||I/2||.1,(function(){var t=Dt(),e=vo()-At<500,i=r.tween;if(!(e||Math.abs(wt.getVelocity())<10)||i||Gi||Mt===t)wt.isActive&&Mt!==t&&z.restart(!0);else{var a,s,l=(t-u)/g,h=n&&!dt?n.totalProgress():l,f=e?0:(h-k)/(vo()-ji)*1e3||0,d=Pi.utils.clamp(-l,1-l,Uo(f/2)*f/.185),p=l+(!1===at.inertia?0:d),m=at,v=m.onStart,y=m.onInterrupt,b=m.onComplete;if(a=o(p,wt),Fo(a)||(a=p),s=Math.round(u+a*g),t<=c&&t>=u&&s!==t){if(i&&!i._initted&&i.data<=Uo(s-t))return;!1===at.inertia&&(d=a-l),r(s,{duration:F(Uo(.185*Math.max(Uo(p-h),Uo(a-h))/f/.05||0)),ease:at.ease||"power3",data:Uo(s-t),onInterrupt:function(){return z.restart(!0)&&y&&y(wt)},onComplete:function(){wt.update(),Mt=Dt(),n&&(O?O.resetTo("totalProgress",a,n._tTime/n._tDur):n.progress(a)),R=k=n&&!dt?n.totalProgress():wt.progress,it&&it(wt),b&&b(wt)}},t,d*g,s-t-d*g),v&&v(wt,r.tween)}}})).pause()),Y&&(aa[Y]=wt),(j=(K=wt.trigger=Si(K||!0!==$&&$))&&K._gsap&&K._gsap.stRevert)&&(j=j(wt)),$=!0===$?K:Si($),Oo(X)&&(X={targets:K,className:X}),$&&(!1===tt||"margin"===tt||(tt=!(!tt&&$.parentNode&&$.parentNode.style&&"flex"===Vo($.parentNode).display)&&jo),wt.pin=$,(i=Pi.core.getCache($)).spacer?v=i.pinState:(ut&&((ut=Si(ut))&&!ut.nodeType&&(ut=ut.current||ut.nativeElement),i.spacerIsNative=!!ut,ut&&(i.spacerState=Pa(ut))),i.spacer=_=ut||Oi.createElement("div"),_.classList.add("pin-spacer"),Y&&_.classList.add("pin-spacer-"+Y),i.pinState=v=Pa($)),!1!==e.force3D&&Pi.set($,{force3D:!0}),wt.spacer=_=i.spacer,P=Vo($),M=P[tt+ft.os2],w=Pi.getProperty($),S=Pi.quickSetter($,ft.a,Ho),La($,_,P),b=Pa($)),_t){p=zo(_t)?Go(_t,$o):$o,f=ra("scroller-start",Y,pt,ft,p,0),d=ra("scroller-end",Y,pt,ft,p,0,f),x=f["offset"+ft.op.d2];var Ct=Si(mi(pt,"content")||pt);l=this.markerStart=ra("start",Y,Ct,ft,p,x,0,ct),h=this.markerEnd=ra("end",Y,Ct,ft,p,x,0,ct),ct&&(U=Pi.quickSetter([l,h],ft.a,Ho)),vt||fi.length&&!0===mi(pt,"fixedMarkers")||(G=Vo(V=gt?Fi:pt).position,V.style.position="absolute"===G||"fixed"===G?G:"relative",Pi.set([f,d],{force3D:!0}),L=Pi.quickSetter(f,ft.a,Ho),C=Pi.quickSetter(d,ft.a,Ho))}if(ct){var Pt=ct.vars.onUpdate,Rt=ct.vars.onUpdateParams;ct.eventCallback("onUpdate",(function(){wt.update(0,0,1),Pt&&Pt.apply(ct,Rt||[])}))}if(wt.previous=function(){return oa[oa.indexOf(wt)-1]},wt.next=function(){return oa[oa.indexOf(wt)+1]},wt.revert=function(t,e){if(!e)return wt.kill(!0);var r=!1!==t||!wt.enabled,i=Vi;r!==wt.isReverted&&(r&&(B=Math.max(Dt(),wt.scroll.rec||0),Lt=wt.progress,N=n&&n.progress()),l&&[l,h,f,d].forEach((function(t){return t.style.display=r?"none":"block"})),r&&(Vi=wt,wt.update(r)),!$||st&&wt.isActive||(r?function(t,e,n){Ca(n);var r=t._gsap;if(r.spacerIsNative)Ca(r.spacerState);else if(t._gsap.swappedIn){var i=e.parentNode;i&&(i.insertBefore(t,e),i.removeChild(e))}t._gsap.swappedIn=!1}($,_,v):La($,_,Vo($),A)),r||wt.update(r),Vi=i,wt.isReverted=r)},wt.refresh=function(i,o,p,x){if(!Vi&&wt.enabled||o)if($&&i&&bo)Jo(t,"scrollEnd",da);else{!fo&&St&&St(wt),Vi=wt,r.tween&&!p&&(r.tween.kill(),r.tween=0),O&&O.pause(),et&&n&&n.revert({kill:!1}).invalidate(),wt.isReverted||wt.revert(!0,!0),wt._subPinOffset=!1;var S,M,L,C,P,R,k,I,F,U,j,H,V,G=Et(),W=Tt(),q=ct?ct.duration():Ro(pt,ft),X=g<=.01,Y=0,Z=x||0,Q=zo(p)?p.end:e.end,nt=e.endTrigger||K,rt=zo(p)?p.start:e.start||(0!==e.start&&K?$?"0 0":"0 100%":0),it=wt.pinnedContainer=e.pinnedContainer&&Si(e.pinnedContainer,wt),ot=K&&Math.max(0,oa.indexOf(wt))||0,at=ot;for(_t&&zo(p)&&(H=Pi.getProperty(f,ft.p),V=Pi.getProperty(d,ft.p));at--;)(R=oa[at]).end||R.refresh(0,1)||(Vi=wt),!(k=R.pin)||k!==K&&k!==$&&k!==it||R.isReverted||(U||(U=[]),U.unshift(R),R.revert(!0,!0)),R!==oa[at]&&(ot--,at--);for(Io(rt)&&(rt=rt(wt)),rt=xo(rt,"start",wt),u=ka(rt,K,G,ft,Dt(),l,f,wt,W,xt,vt,q,ct,wt._startClamp&&"_startClamp")||($?-.001:0),Io(Q)&&(Q=Q(wt)),Oo(Q)&&!Q.indexOf("+=")&&(~Q.indexOf(" ")?Q=(Oo(rt)?rt.split(" ")[0]:"")+Q:(Y=na(Q.substr(2),G),Q=Oo(rt)?rt:(ct?Pi.utils.mapRange(0,ct.duration(),ct.scrollTrigger.start,ct.scrollTrigger.end,u):u)+Y,nt=K)),Q=xo(Q,"end",wt),c=Math.max(u,ka(Q||(nt?"100% 0":q),nt,G,ft,Dt()+Y,h,d,wt,W,xt,vt,q,ct,wt._endClamp&&"_endClamp"))||-.001,Y=0,at=ot;at--;)(k=(R=oa[at]).pin)&&R.start-R._pinPush<=u&&!ct&&R.end>0&&(S=R.end-(wt._startClamp?Math.max(0,R.start):R.start),(k===K&&R.start-R._pinPush<u||k===it)&&isNaN(rt)&&(Y+=S*(1-R.progress)),k===$&&(Z+=S));if(u+=Y,c+=Y,wt._startClamp&&(wt._startClamp+=Y),wt._endClamp&&!fo&&(wt._endClamp=c||-.001,c=Math.min(c,Ro(pt,ft))),g=c-u||(u-=.01)&&.001,X&&(Lt=Pi.utils.clamp(0,1,Pi.utils.normalize(u,c,B))),wt._pinPush=Z,l&&Y&&((S={})[ft.a]="+="+Y,it&&(S[ft.p]="-="+Dt()),Pi.set([l,h],S)),!$||co&&wt.end>=Ro(pt,ft)){if(K&&Dt()&&!ct)for(M=K.parentNode;M&&M!==Fi;)M._pinOffset&&(u-=M._pinOffset,c-=M._pinOffset),M=M.parentNode}else S=Vo($),C=ft===wi,L=Dt(),E=parseFloat(w(ft.a))+Z,!q&&c>1&&(j={style:j=(gt?Oi.scrollingElement||Ii:pt).style,value:j["overflow"+ft.a.toUpperCase()]},gt&&"scroll"!==Vo(Fi)["overflow"+ft.a.toUpperCase()]&&(j.style["overflow"+ft.a.toUpperCase()]="scroll")),La($,_,S),b=Pa($),M=Wo($,!0),I=vt&&Ei(pt,C?xi:wi)(),tt?((A=[tt+ft.os2,g+Z+Ho]).t=_,(at=tt===jo?qo($,ft)+g+Z:0)&&(A.push(ft.d,at+Ho),"auto"!==_.style.flexBasis&&(_.style.flexBasis=at+Ho)),Ca(A),it&&oa.forEach((function(t){t.pin===it&&!1!==t.vars.pinSpacing&&(t._subPinOffset=!0)})),vt&&Dt(B)):(at=qo($,ft))&&"auto"!==_.style.flexBasis&&(_.style.flexBasis=at+Ho),vt&&((P={top:M.top+(C?L-u:I)+Ho,left:M.left+(C?I:L-u)+Ho,boxSizing:"border-box",position:"fixed"}).width=P.maxWidth=Math.ceil(M.width)+Ho,P.height=P.maxHeight=Math.ceil(M.height)+Ho,P.margin=P.marginTop=P.marginRight=P.marginBottom=P.marginLeft="0",P[jo]=S[jo],P[jo+"Top"]=S[jo+"Top"],P[jo+"Right"]=S[jo+"Right"],P[jo+"Bottom"]=S[jo+"Bottom"],P[jo+"Left"]=S[jo+"Left"],y=function(t,e,n){for(var r,i=[],o=t.length,a=n?8:0;a<o;a+=2)r=t[a],i.push(r,r in e?e[r]:t[a+1]);return i.t=t.t,i}(v,P,st),fo&&Dt(0)),n?(F=n._initted,Qi(1),n.render(n.duration(),!0,!0),T=w(ft.a)-E+g+Z,D=Math.abs(g-T)>1,vt&&D&&y.splice(y.length-2,2),n.render(0,!0,!0),F||n.invalidate(!0),n.parent||n.totalTime(n.totalTime()),Qi(0)):T=g,j&&(j.value?j.style["overflow"+ft.a.toUpperCase()]=j.value:j.style.removeProperty("overflow-"+ft.a));U&&U.forEach((function(t){return t.revert(!1,!0)})),wt.start=u,wt.end=c,a=s=fo?B:Dt(),ct||fo||(a<B&&Dt(B),wt.scroll.rec=0),wt.revert(!1,!0),At=vo(),z&&(Mt=-1,z.restart(!0)),Vi=0,n&&dt&&(n._initted||N)&&n.progress()!==N&&n.progress(N||0,!0).render(n.time(),!0,!0),(X||Lt!==wt.progress||ct||et)&&(n&&!dt&&n.totalProgress(ct&&u<-.001&&!Lt?Pi.utils.normalize(u,c,0):Lt,!0),wt.progress=X||(a-u)/g===Lt?0:Lt),$&&tt&&(_._pinOffset=Math.round(wt.progress*T)),O&&O.invalidate(),isNaN(H)||(H-=Pi.getProperty(f,ft.p),V-=Pi.getProperty(d,ft.p),za(f,ft,H),za(l,ft,H-(x||0)),za(d,ft,V),za(h,ft,V-(x||0))),X&&!fo&&wt.update(),!J||fo||m||(m=!0,J(wt),m=!1)}},wt.getVelocity=function(){return(Dt()-s)/(vo()-ji)*1e3||0},wt.endAnimation=function(){Bo(wt.callbackAnimation),n&&(O?O.progress(1):n.paused()?dt||Bo(n,wt.direction<0,1):Bo(n,n.reversed()))},wt.labelToScroll=function(t){return n&&n.labels&&(u||wt.refresh()||u)+n.labels[t]/n.duration()*g||0},wt.getTrailing=function(t){var e=oa.indexOf(wt),n=wt.direction>0?oa.slice(0,e).reverse():oa.slice(e+1);return(Oo(t)?n.filter((function(e){return e.vars.preventOverlaps===t})):n).filter((function(t){return wt.direction>0?t.end<=u:t.start>=c}))},wt.update=function(t,e,i){if(!ct||i||t){var o,l,h,d,p,m,v,x=!0===fo?B:wt.scroll(),w=t?0:(x-u)/g,A=w<0?0:w>1?1:w||0,P=wt.progress;if(e&&(s=a,a=ct?Dt():x,at&&(k=R,R=n&&!dt?n.totalProgress():A)),nt&&$&&!Vi&&!go&&bo&&(!A&&u<x+(x-s)/(vo()-ji)*nt?A=1e-4:1===A&&c>x+(x-s)/(vo()-ji)*nt&&(A=.9999)),A!==P&&wt.enabled){if(d=(p=(o=wt.isActive=!!A&&A<1)!==(!!P&&P<1))||!!A!=!!P,wt.direction=A>P?1:-1,wt.progress=A,d&&!Vi&&(l=A&&!P?0:1===A?1:1===P?2:3,dt&&(h=!p&&"none"!==bt[l+1]&&bt[l+1]||bt[l],v=n&&("complete"===h||"reset"===h||h in n))),ht&&(p||v)&&(v||Q||!n)&&(Io(ht)?ht(wt):wt.getTrailing(ht).forEach((function(t){return t.endAnimation()}))),dt||(!O||Vi||go?n&&n.totalProgress(A,!(!Vi||!At&&!t)):(O._dp._time-O._start!==O._time&&O.render(O._dp._time-O._start),O.resetTo?O.resetTo("totalProgress",A,n._tTime/n._tDur):(O.vars.totalProgress=A,O.invalidate().restart()))),$)if(t&&tt&&(_.style[tt+ft.os2]=M),vt){if(d){if(m=!t&&A>P&&c+1>x&&x+1>=Ro(pt,ft),st)if(t||!o&&!m)Ia($,_);else{var I=Wo($,!0),F=x-u;Ia($,Fi,I.top+(ft===wi?F:0)+Ho,I.left+(ft===wi?0:F)+Ho)}Ca(o||m?y:b),D&&A<1&&o||S(E+(1!==A||m?0:T))}}else S(Mo(E+T*A));at&&!r.tween&&!Vi&&!go&&z.restart(!0),X&&(p||ot&&A&&(A<1||!lo))&&Ni(X.targets).forEach((function(t){return t.classList[o||ot?"add":"remove"](X.className)})),q&&!dt&&!t&&q(wt),d&&!Vi?(dt&&(v&&("complete"===h?n.pause().totalProgress(1):"reset"===h?n.restart(!0).pause():"restart"===h?n.restart(!0):n[h]()),q&&q(wt)),!p&&lo||(Z&&p&&No(wt,Z),yt[l]&&No(wt,yt[l]),ot&&(1===A?wt.kill(!1,1):yt[l]=0),p||yt[l=1===A?1:3]&&No(wt,yt[l])),lt&&!o&&Math.abs(wt.getVelocity())>(Fo(lt)?lt:2500)&&(Bo(wt.callbackAnimation),O?O.progress(1):Bo(n,"reverse"===h?1:!A,1))):dt&&q&&!Vi&&q(wt)}if(C){var N=ct?x/ct.duration()*(ct._caScrollDist||0):x;L(N+(f._isFlipped?1:0)),C(N)}U&&U(-x/ct.duration()*(ct._caScrollDist||0))}},wt.enable=function(e,n){wt.enabled||(wt.enabled=!0,Jo(pt,"resize",la),gt||Jo(pt,"scroll",ua),St&&Jo(t,"refreshInit",St),!1!==e&&(wt.progress=Lt=0,a=s=Mt=Dt()),!1!==n&&wt.refresh())},wt.getTween=function(t){return t&&r?r.tween:O},wt.setPositions=function(t,e,n,r){if(ct){var i=ct.scrollTrigger,o=ct.duration(),a=i.end-i.start;t=i.start+a*t/o,e=i.start+a*e/o}wt.refresh(!1,!1,{start:wo(t,n&&!!wt._startClamp),end:wo(e,n&&!!wt._endClamp)},r),wt.update()},wt.adjustPinSpacing=function(t){if(A&&t){var e=A.indexOf(ft.d)+1;A[e]=parseFloat(A[e])+t+Ho,A[1]=parseFloat(A[1])+t+Ho,Ca(A)}},wt.disable=function(e,n){if(wt.enabled&&(!1!==e&&wt.revert(!0,!0),wt.enabled=wt.isActive=!1,n||O&&O.pause(),B=0,i&&(i.uncache=1),St&&Qo(t,"refreshInit",St),z&&(z.pause(),r.tween&&r.tween.kill()&&(r.tween=0)),!gt)){for(var o=oa.length;o--;)if(oa[o].scroller===pt&&oa[o]!==wt)return;Qo(pt,"resize",la),gt||Qo(pt,"scroll",ua)}},wt.kill=function(t,r){wt.disable(t,r),O&&!r&&O.kill(),Y&&delete aa[Y];var o=oa.indexOf(wt);o>=0&&oa.splice(o,1),o===qi&&Ea>0&&qi--,o=0,oa.forEach((function(t){return t.scroller===wt.scroller&&(o=1)})),o||fo||(wt.scroll.rec=0),n&&(n.scrollTrigger=null,t&&n.revert({kill:!1}),r||n.kill()),l&&[l,h,f,d].forEach((function(t){return t.parentNode&&t.parentNode.removeChild(t)})),mo===wt&&(mo=0),$&&(i&&(i.uncache=1),o=0,oa.forEach((function(t){return t.pin===$&&o++})),o||(i.spacer=0)),e.onKill&&e.onKill(wt)},oa.push(wt),wt.enable(!1,!1),j&&j(wt),n&&n.add&&!g){var kt=wt.update;wt.update=function(){wt.update=kt,u||c||wt.refresh()},Pi.delayedCall(.01,wt.update),g=.01,u=c=0}else wt.refresh();$&&function(){if(po!==ba){var t=po=ba;requestAnimationFrame((function(){return t===ba&&wa(!0)}))}}()}else this.update=this.refresh=this.kill=To},t.register=function(e){return Ri||(Pi=e||Lo(),Ao()&&window.document&&t.enable(),Ri=_o),Ri},t.defaults=function(t){if(t)for(var e in t)ta[e]=t[e];return ta},t.disable=function(t,e){_o=0,oa.forEach((function(n){return n[e?"kill":"disable"](t)})),Qo(ki,"wheel",ua),Qo(Oi,"scroll",ua),clearInterval(Hi),Qo(Oi,"touchcancel",To),Qo(Fi,"touchstart",To),Zo(Qo,Oi,"pointerdown,touchstart,mousedown",So),Zo(Qo,Oi,"pointerup,touchend,mouseup",Eo),Bi.kill(),ko(Qo);for(var n=0;n<hi.length;n+=3)Ko(Qo,hi[n],hi[n+1]),Ko(Qo,hi[n],hi[n+2])},t.enable=function(){if(ki=window,Oi=document,Ii=Oi.documentElement,Fi=Oi.body,Pi&&(Ni=Pi.utils.toArray,Ui=Pi.utils.clamp,io=Pi.core.context||To,Qi=Pi.core.suppressOverwrites||To,oo=ki.history.scrollRestoration||"auto",Sa=ki.pageYOffset,Pi.core.globals("ScrollTrigger",t),Fi)){_o=1,(ao=document.createElement("div")).style.height="100vh",ao.style.position="absolute",_a(),function t(){return _o&&requestAnimationFrame(t)}(),Ci.register(Pi),t.isTouch=Ci.isTouch,ro=Ci.isTouch&&/(iPad|iPhone|iPod|Mac)/g.test(navigator.userAgent),to=1===Ci.isTouch,Jo(ki,"wheel",ua),zi=[ki,Oi,Ii,Fi],Pi.matchMedia?(t.matchMedia=function(t){var e,n=Pi.matchMedia();for(e in t)n.add(e,t[e]);return n},Pi.addEventListener("matchMediaInit",(function(){return va()})),Pi.addEventListener("matchMediaRevert",(function(){return ga()})),Pi.addEventListener("matchMedia",(function(){wa(0,1),pa("matchMedia")})),Pi.matchMedia("(orientation: portrait)",(function(){return ca(),ca}))):console.warn("Requires GSAP 3.11.0 or later"),ca(),Jo(Oi,"scroll",ua);var e,n,r=Fi.style,i=r.borderTopStyle,o=Pi.core.Animation.prototype;for(o.revert||Object.defineProperty(o,"revert",{value:function(){return this.time(-.01,!0)}}),r.borderTopStyle="solid",e=Wo(Fi),wi.m=Math.round(e.top+wi.sc())||0,xi.m=Math.round(e.left+xi.sc())||0,i?r.borderTopStyle=i:r.removeProperty("border-top-style"),Hi=setInterval(sa,250),Pi.delayedCall(.5,(function(){return go=0})),Jo(Oi,"touchcancel",To),Jo(Fi,"touchstart",To),Zo(Jo,Oi,"pointerdown,touchstart,mousedown",So),Zo(Jo,Oi,"pointerup,touchend,mouseup",Eo),Wi=Pi.utils.checkPrefix("transform"),Aa.push(Wi),Ri=vo(),Bi=Pi.delayedCall(.2,wa).pause(),Zi=[Oi,"visibilitychange",function(){var t=ki.innerWidth,e=ki.innerHeight;Oi.hidden?(Xi=t,Yi=e):Xi===t&&Yi===e||la()},Oi,"DOMContentLoaded",wa,ki,"load",wa,ki,"resize",la],ko(Jo),oa.forEach((function(t){return t.enable(0,1)})),n=0;n<hi.length;n+=3)Ko(Qo,hi[n],hi[n+1]),Ko(Qo,hi[n],hi[n+2])}},t.config=function(e){"limitCallbacks"in e&&(lo=!!e.limitCallbacks);var n=e.syncInterval;n&&clearInterval(Hi)||(Hi=n)&&setInterval(sa,n),"ignoreMobileResize"in e&&(to=1===t.isTouch&&e.ignoreMobileResize),"autoRefreshEvents"in e&&(ko(Qo)||ko(Jo,e.autoRefreshEvents||"none"),Ki=-1===(e.autoRefreshEvents+"").indexOf("resize"))},t.scrollerProxy=function(t,e){var n=Si(t),r=hi.indexOf(n),i=Do(n);~r&&hi.splice(r,i?6:2),e&&(i?fi.unshift(ki,e,Fi,e,Ii,e):fi.unshift(n,e))},t.clearMatchMedia=function(t){oa.forEach((function(e){return e._ctx&&e._ctx.query===t&&e._ctx.kill(!0,!0)}))},t.isInViewport=function(t,e,n){var r=(Oo(t)?Si(t):t).getBoundingClientRect(),i=r[n?"width":"height"]*e||0;return n?r.right-i>0&&r.left+i<ki.innerWidth:r.bottom-i>0&&r.top+i<ki.innerHeight},t.positionInViewport=function(t,e,n){Oo(t)&&(t=Si(t));var r=t.getBoundingClientRect(),i=r[n?"width":"height"],o=null==e?i/2:e in ea?ea[e]*i:~e.indexOf("%")?parseFloat(e)*i/100:parseFloat(e)||0;return n?(r.left+o)/ki.innerWidth:(r.top+o)/ki.innerHeight},t.killAll=function(t){if(oa.slice(0).forEach((function(t){return"ScrollSmoother"!==t.vars.id&&t.kill()})),!0!==t){var e=ha.killAll||[];ha={},e.forEach((function(t){return t()}))}},t}();Na.version="3.12.5",Na.saveStyles=function(t){return t?Ni(t).forEach((function(t){if(t&&t.style){var e=ma.indexOf(t);e>=0&&ma.splice(e,5),ma.push(t,t.style.cssText,t.getBBox&&t.getAttribute("transform"),Pi.core.getCache(t),io())}})):ma},Na.revert=function(t,e){return va(!t,e)},Na.create=function(t,e){return new Na(t,e)},Na.refresh=function(t){return t?la():(Ri||Na.register())&&wa(!0)},Na.update=function(t){return++hi.cache&&Ta(!0===t?2:0)},Na.clearScrollMemory=ya,Na.maxScroll=function(t,e){return Ro(t,e?xi:wi)},Na.getScrollFunc=function(t,e){return Ei(Si(t),e?xi:wi)},Na.getById=function(t){return aa[t]},Na.getAll=function(){return oa.filter((function(t){return"ScrollSmoother"!==t.vars.id}))},Na.isScrolling=function(){return!!bo},Na.snapDirectional=Yo,Na.addEventListener=function(t,e){var n=ha[t]||(ha[t]=[]);~n.indexOf(e)||n.push(e)},Na.removeEventListener=function(t,e){var n=ha[t],r=n&&n.indexOf(e);r>=0&&n.splice(r,1)},Na.batch=function(t,e){var n,r=[],i={},o=e.interval||.016,a=e.batchMax||1e9,s=function(t,e){var n=[],r=[],i=Pi.delayedCall(o,(function(){e(n,r),n=[],r=[]})).pause();return function(t){n.length||i.restart(!0),n.push(t.trigger),r.push(t),a<=n.length&&i.progress(1)}};for(n in e)i[n]="on"===n.substr(0,2)&&Io(e[n])&&"onRefreshInit"!==n?s(0,e[n]):e[n];return Io(a)&&(a=a(),Jo(Na,"refresh",(function(){return a=e.batchMax()}))),Ni(t).forEach((function(t){var e={};for(n in i)e[n]=i[n];e.trigger=t,r.push(Na.create(e))})),r};var Ua,ja=function(t,e,n,r){return e>r?t(r):e<0&&t(0),n>r?(r-e)/(n-e):n<0?e/(e-n):1},Ha=function t(e,n){!0===n?e.style.removeProperty("touch-action"):e.style.touchAction=!0===n?"auto":n?"pan-"+n+(Ci.isTouch?" pinch-zoom":""):"none",e===Ii&&t(Fi,n)},Va={auto:1,scroll:1},Ga=function(t){var e,n=t.event,r=t.target,i=t.axis,o=(n.changedTouches?n.changedTouches[0]:n).target,a=o._gsap||Pi.core.getCache(o),s=vo();if(!a._isScrollT||s-a._isScrollT>2e3){for(;o&&o!==Fi&&(o.scrollHeight<=o.clientHeight&&o.scrollWidth<=o.clientWidth||!Va[(e=Vo(o)).overflowY]&&!Va[e.overflowX]);)o=o.parentNode;a._isScroll=o&&o!==r&&!Do(o)&&(Va[(e=Vo(o)).overflowY]||Va[e.overflowX]),a._isScrollT=s}(a._isScroll||"x"===i)&&(n.stopPropagation(),n._gsapAllow=!0)},Wa=function(t,e,n,r){return Ci.create({target:t,capture:!0,debounce:!1,lockAxis:!0,type:e,onWheel:r=r&&Ga,onPress:r,onDrag:r,onScroll:r,onEnable:function(){return n&&Jo(Oi,Ci.eventTypes[0],Xa,!1,!0)},onDisable:function(){return Qo(Oi,Ci.eventTypes[0],Xa,!0)}})},qa=/(input|label|select|textarea)/i,Xa=function(t){var e=qa.test(t.target.tagName);(e||Ua)&&(t._gsapAllow=!0,Ua=e)},Ya=function(t){zo(t)||(t={}),t.preventDefault=t.isNormalizer=t.allowClicks=!0,t.type||(t.type="wheel,touch"),t.debounce=!!t.debounce,t.id=t.id||"normalizer";var e,n,r,i,o,a,s,u,c=t,l=c.normalizeScrollX,h=c.momentum,f=c.allowNestedScroll,d=c.onRelease,p=Si(t.target)||Ii,m=Pi.core.globals().ScrollSmoother,g=m&&m.get(),v=ro&&(t.content&&Si(t.content)||g&&!1!==t.content&&!g.smooth()&&g.content()),y=Ei(p,wi),b=Ei(p,xi),_=1,x=(Ci.isTouch&&ki.visualViewport?ki.visualViewport.scale*ki.visualViewport.width:ki.outerWidth)/ki.innerWidth,w=0,S=Io(h)?function(){return h(e)}:function(){return h||2.8},E=Wa(p,t.type,!0,f),T=function(){return i=!1},M=To,A=To,L=function(){n=Ro(p,wi),A=Ui(ro?1:0,n),l&&(M=Ui(0,Ro(p,xi))),r=ba},D=function(){v._gsap.y=Mo(parseFloat(v._gsap.y)+y.offset)+"px",v.style.transform="matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, "+parseFloat(v._gsap.y)+", 0, 1)",y.offset=y.cacheID=0},C=function(){L(),o.isActive()&&o.vars.scrollY>n&&(y()>n?o.progress(1)&&y(n):o.resetTo("scrollY",n))};return v&&Pi.set(v,{y:"+=0"}),t.ignoreCheck=function(t){return ro&&"touchmove"===t.type&&function(){if(i){requestAnimationFrame(T);var t=Mo(e.deltaY/2),n=A(y.v-t);if(v&&n!==y.v+y.offset){y.offset=n-y.v;var r=Mo((parseFloat(v&&v._gsap.y)||0)-y.offset);v.style.transform="matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, "+r+", 0, 1)",v._gsap.y=r+"px",y.cacheID=hi.cache,Ta()}return!0}y.offset&&D(),i=!0}()||_>1.05&&"touchstart"!==t.type||e.isGesturing||t.touches&&t.touches.length>1},t.onPress=function(){i=!1;var t=_;_=Mo((ki.visualViewport&&ki.visualViewport.scale||1)/x),o.pause(),t!==_&&Ha(p,_>1.01||!l&&"x"),a=b(),s=y(),L(),r=ba},t.onRelease=t.onGestureStart=function(t,e){if(y.offset&&D(),e){hi.cache++;var r,i,a=S();l&&(i=(r=b())+.05*a*-t.velocityX/.227,a*=ja(b,r,i,Ro(p,xi)),o.vars.scrollX=M(i)),i=(r=y())+.05*a*-t.velocityY/.227,a*=ja(y,r,i,Ro(p,wi)),o.vars.scrollY=A(i),o.invalidate().duration(a).play(.01),(ro&&o.vars.scrollY>=n||r>=n-1)&&Pi.to({},{onUpdate:C,duration:a})}else u.restart(!0);d&&d(t)},t.onWheel=function(){o._ts&&o.pause(),vo()-w>1e3&&(r=0,w=vo())},t.onChange=function(t,e,n,i,o){if(ba!==r&&L(),e&&l&&b(M(i[2]===e?a+(t.startX-t.x):b()+e-i[1])),n){y.offset&&D();var u=o[2]===n,c=u?s+t.startY-t.y:y()+n-o[1],h=A(c);u&&c!==h&&(s+=h-c),y(h)}(n||e)&&Ta()},t.onEnable=function(){Ha(p,!l&&"x"),Na.addEventListener("refresh",C),Jo(ki,"resize",C),y.smooth&&(y.target.style.scrollBehavior="auto",y.smooth=b.smooth=!1),E.enable()},t.onDisable=function(){Ha(p,!0),Qo(ki,"resize",C),Na.removeEventListener("refresh",C),E.kill()},t.lockAxis=!1!==t.lockAxis,(e=new Ci(t)).iOS=ro,ro&&!y()&&y(1),ro&&Pi.ticker.add(To),u=e._dc,o=Pi.to(e,{ease:"power4",paused:!0,inherit:!1,scrollX:l?"+=0.1":"+=0",scrollY:"+=0.1",modifiers:{scrollY:Fa(y,y(),(function(){return o.pause()}))},onUpdate:Ta,onComplete:u.vars.onComplete}),e};Na.sort=function(t){return oa.sort(t||function(t,e){return-1e6*(t.vars.refreshPriority||0)+t.start-(e.start+-1e6*(e.vars.refreshPriority||0))})},Na.observe=function(t){return new Ci(t)},Na.normalizeScroll=function(t){if(void 0===t)return $i;if(!0===t&&$i)return $i.enable();if(!1===t)return $i&&$i.kill(),void($i=t);var e=t instanceof Ci?t:Ya(t);return $i&&$i.target===e.target&&$i.kill(),Do(e.target)&&($i=e),e},Na.core={_getVelocityProp:Ti,_inputObserver:Wa,_scrollers:hi,_proxies:fi,bridge:{ss:function(){bo||pa("scrollStart"),bo=vo()},ref:function(){return Vi}}},Lo()&&Pi.registerPlugin(Na);var Za,Ja,Qa,Ka,$a,ts,es,ns,rs=function(){return"undefined"!=typeof window},is=function(){return Za||rs()&&(Za=window.gsap)&&Za.registerPlugin&&Za},os=function(t){return"string"==typeof t},as=function(t){return"function"==typeof t},ss=function(t,e){var n="x"===e?"Width":"Height",r="scroll"+n,i="client"+n;return t===Qa||t===Ka||t===$a?Math.max(Ka[r],$a[r])-(Qa["inner"+n]||Ka[i]||$a[i]):t[r]-t["offset"+n]},us=function(t,e){var n="scroll"+("x"===e?"Left":"Top");return t===Qa&&(null!=t.pageXOffset?n="page"+e.toUpperCase()+"Offset":t=null!=Ka[n]?Ka:$a),function(){return t[n]}},cs=function(t,e){if(!(t=ts(t)[0])||!t.getBoundingClientRect)return console.warn("scrollTo target doesn't exist. Using 0")||{x:0,y:0};var n=t.getBoundingClientRect(),r=!e||e===Qa||e===$a,i=r?{top:Ka.clientTop-(Qa.pageYOffset||Ka.scrollTop||$a.scrollTop||0),left:Ka.clientLeft-(Qa.pageXOffset||Ka.scrollLeft||$a.scrollLeft||0)}:e.getBoundingClientRect(),o={x:n.left-i.left,y:n.top-i.top};return!r&&e&&(o.x+=us(e,"x")(),o.y+=us(e,"y")()),o},ls=function(t,e,n,r,i){return isNaN(t)||"object"==typeof t?os(t)&&"="===t.charAt(1)?parseFloat(t.substr(2))*("-"===t.charAt(0)?-1:1)+r-i:"max"===t?ss(e,n)-i:Math.min(ss(e,n),cs(t,e)[n]-i):parseFloat(t)-i},hs=function(){Za=is(),rs()&&Za&&"undefined"!=typeof document&&document.body&&(Qa=window,$a=document.body,Ka=document.documentElement,ts=Za.utils.toArray,Za.config({autoKillThreshold:7}),es=Za.config(),Ja=1)},fs={version:"3.12.5",name:"scrollTo",rawVars:1,register:function(t){Za=t,hs()},init:function(t,e,n,r,i){Ja||hs();var o=Za.getProperty(t,"scrollSnapType");this.isWin=t===Qa,this.target=t,this.tween=n,e=function(t,e,n,r){if(as(t)&&(t=t(e,n,r)),"object"!=typeof t)return os(t)&&"max"!==t&&"="!==t.charAt(1)?{x:t,y:t}:{y:t};if(t.nodeType)return{y:t,x:t};var i,o={};for(i in t)o[i]="onAutoKill"!==i&&as(t[i])?t[i](e,n,r):t[i];return o}(e,r,t,i),this.vars=e,this.autoKill=!!e.autoKill,this.getX=us(t,"x"),this.getY=us(t,"y"),this.x=this.xPrev=this.getX(),this.y=this.yPrev=this.getY(),ns||(ns=Za.core.globals().ScrollTrigger),"smooth"===Za.getProperty(t,"scrollBehavior")&&Za.set(t,{scrollBehavior:"auto"}),o&&"none"!==o&&(this.snap=1,this.snapInline=t.style.scrollSnapType,t.style.scrollSnapType="none"),null!=e.x?(this.add(this,"x",this.x,ls(e.x,t,"x",this.x,e.offsetX||0),r,i),this._props.push("scrollTo_x")):this.skipX=1,null!=e.y?(this.add(this,"y",this.y,ls(e.y,t,"y",this.y,e.offsetY||0),r,i),this._props.push("scrollTo_y")):this.skipY=1},render:function(t,e){for(var n,r,i,o,a,s=e._pt,u=e.target,c=e.tween,l=e.autoKill,h=e.xPrev,f=e.yPrev,d=e.isWin,p=e.snap,m=e.snapInline;s;)s.r(t,s.d),s=s._next;n=d||!e.skipX?e.getX():h,i=(r=d||!e.skipY?e.getY():f)-f,o=n-h,a=es.autoKillThreshold,e.x<0&&(e.x=0),e.y<0&&(e.y=0),l&&(!e.skipX&&(o>a||o<-a)&&n<ss(u,"x")&&(e.skipX=1),!e.skipY&&(i>a||i<-a)&&r<ss(u,"y")&&(e.skipY=1),e.skipX&&e.skipY&&(c.kill(),e.vars.onAutoKill&&e.vars.onAutoKill.apply(c,e.vars.onAutoKillParams||[]))),d?Qa.scrollTo(e.skipX?n:e.x,e.skipY?r:e.y):(e.skipY||(u.scrollTop=e.y),e.skipX||(u.scrollLeft=e.x)),!p||1!==t&&0!==t||(r=u.scrollTop,n=u.scrollLeft,m?u.style.scrollSnapType=m:u.style.removeProperty("scroll-snap-type"),u.scrollTop=r+1,u.scrollLeft=n+1,u.scrollTop=r,u.scrollLeft=n),e.xPrev=e.x,e.yPrev=e.y,ns&&ns.update()},kill:function(t){var e="scrollTo"===t,n=this._props.indexOf(t);return(e||"scrollTo_x"===t)&&(this.skipX=1),(e||"scrollTo_y"===t)&&(this.skipY=1),n>-1&&this._props.splice(n,1),!this._props.length}};fs.max=ss,fs.getOffset=cs,fs.buildGetter=us,is()&&Za.registerPlugin(fs);var ds=/([\uD800-\uDBFF][\uDC00-\uDFFF](?:[\u200D\uFE0F][\uD800-\uDBFF][\uDC00-\uDFFF]){2,}|\uD83D\uDC69(?:\u200D(?:(?:\uD83D\uDC69\u200D)?\uD83D\uDC67|(?:\uD83D\uDC69\u200D)?\uD83D\uDC66)|\uD83C[\uDFFB-\uDFFF])|\uD83D\uDC69\u200D(?:\uD83D\uDC69\u200D)?\uD83D\uDC66\u200D\uD83D\uDC66|\uD83D\uDC69\u200D(?:\uD83D\uDC69\u200D)?\uD83D\uDC67\u200D(?:\uD83D[\uDC66\uDC67])|\uD83C\uDFF3\uFE0F\u200D\uD83C\uDF08|(?:\uD83C[\uDFC3\uDFC4\uDFCA]|\uD83D[\uDC6E\uDC71\uDC73\uDC77\uDC81\uDC82\uDC86\uDC87\uDE45-\uDE47\uDE4B\uDE4D\uDE4E\uDEA3\uDEB4-\uDEB6]|\uD83E[\uDD26\uDD37-\uDD39\uDD3D\uDD3E\uDDD6-\uDDDD])(?:\uD83C[\uDFFB-\uDFFF])\u200D[\u2640\u2642]\uFE0F|\uD83D\uDC69(?:\uD83C[\uDFFB-\uDFFF])\u200D(?:\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92])|(?:\uD83C[\uDFC3\uDFC4\uDFCA]|\uD83D[\uDC6E\uDC6F\uDC71\uDC73\uDC77\uDC81\uDC82\uDC86\uDC87\uDE45-\uDE47\uDE4B\uDE4D\uDE4E\uDEA3\uDEB4-\uDEB6]|\uD83E[\uDD26\uDD37-\uDD39\uDD3C-\uDD3E\uDDD6-\uDDDF])\u200D[\u2640\u2642]\uFE0F|\uD83C\uDDFD\uD83C\uDDF0|\uD83C\uDDF6\uD83C\uDDE6|\uD83C\uDDF4\uD83C\uDDF2|\uD83C\uDDE9(?:\uD83C[\uDDEA\uDDEC\uDDEF\uDDF0\uDDF2\uDDF4\uDDFF])|\uD83C\uDDF7(?:\uD83C[\uDDEA\uDDF4\uDDF8\uDDFA\uDDFC])|\uD83C\uDDE8(?:\uD83C[\uDDE6\uDDE8\uDDE9\uDDEB-\uDDEE\uDDF0-\uDDF5\uDDF7\uDDFA-\uDDFF])|(?:\u26F9|\uD83C[\uDFCB\uDFCC]|\uD83D\uDD75)(?:\uFE0F\u200D[\u2640\u2642]|(?:\uD83C[\uDFFB-\uDFFF])\u200D[\u2640\u2642])\uFE0F|(?:\uD83D\uDC41\uFE0F\u200D\uD83D\uDDE8|\uD83D\uDC69(?:\uD83C[\uDFFB-\uDFFF])\u200D[\u2695\u2696\u2708]|\uD83D\uDC69\u200D[\u2695\u2696\u2708]|\uD83D\uDC68(?:(?:\uD83C[\uDFFB-\uDFFF])\u200D[\u2695\u2696\u2708]|\u200D[\u2695\u2696\u2708]))\uFE0F|\uD83C\uDDF2(?:\uD83C[\uDDE6\uDDE8-\uDDED\uDDF0-\uDDFF])|\uD83D\uDC69\u200D(?:\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\u2764\uFE0F\u200D(?:\uD83D\uDC8B\u200D(?:\uD83D[\uDC68\uDC69])|\uD83D[\uDC68\uDC69]))|\uD83C\uDDF1(?:\uD83C[\uDDE6-\uDDE8\uDDEE\uDDF0\uDDF7-\uDDFB\uDDFE])|\uD83C\uDDEF(?:\uD83C[\uDDEA\uDDF2\uDDF4\uDDF5])|\uD83C\uDDED(?:\uD83C[\uDDF0\uDDF2\uDDF3\uDDF7\uDDF9\uDDFA])|\uD83C\uDDEB(?:\uD83C[\uDDEE-\uDDF0\uDDF2\uDDF4\uDDF7])|[#\*0-9]\uFE0F\u20E3|\uD83C\uDDE7(?:\uD83C[\uDDE6\uDDE7\uDDE9-\uDDEF\uDDF1-\uDDF4\uDDF6-\uDDF9\uDDFB\uDDFC\uDDFE\uDDFF])|\uD83C\uDDE6(?:\uD83C[\uDDE8-\uDDEC\uDDEE\uDDF1\uDDF2\uDDF4\uDDF6-\uDDFA\uDDFC\uDDFD\uDDFF])|\uD83C\uDDFF(?:\uD83C[\uDDE6\uDDF2\uDDFC])|\uD83C\uDDF5(?:\uD83C[\uDDE6\uDDEA-\uDDED\uDDF0-\uDDF3\uDDF7-\uDDF9\uDDFC\uDDFE])|\uD83C\uDDFB(?:\uD83C[\uDDE6\uDDE8\uDDEA\uDDEC\uDDEE\uDDF3\uDDFA])|\uD83C\uDDF3(?:\uD83C[\uDDE6\uDDE8\uDDEA-\uDDEC\uDDEE\uDDF1\uDDF4\uDDF5\uDDF7\uDDFA\uDDFF])|\uD83C\uDFF4\uDB40\uDC67\uDB40\uDC62(?:\uDB40\uDC77\uDB40\uDC6C\uDB40\uDC73|\uDB40\uDC73\uDB40\uDC63\uDB40\uDC74|\uDB40\uDC65\uDB40\uDC6E\uDB40\uDC67)\uDB40\uDC7F|\uD83D\uDC68(?:\u200D(?:\u2764\uFE0F\u200D(?:\uD83D\uDC8B\u200D)?\uD83D\uDC68|(?:(?:\uD83D[\uDC68\uDC69])\u200D)?\uD83D\uDC66\u200D\uD83D\uDC66|(?:(?:\uD83D[\uDC68\uDC69])\u200D)?\uD83D\uDC67\u200D(?:\uD83D[\uDC66\uDC67])|\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92])|(?:\uD83C[\uDFFB-\uDFFF])\u200D(?:\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]))|\uD83C\uDDF8(?:\uD83C[\uDDE6-\uDDEA\uDDEC-\uDDF4\uDDF7-\uDDF9\uDDFB\uDDFD-\uDDFF])|\uD83C\uDDF0(?:\uD83C[\uDDEA\uDDEC-\uDDEE\uDDF2\uDDF3\uDDF5\uDDF7\uDDFC\uDDFE\uDDFF])|\uD83C\uDDFE(?:\uD83C[\uDDEA\uDDF9])|\uD83C\uDDEE(?:\uD83C[\uDDE8-\uDDEA\uDDF1-\uDDF4\uDDF6-\uDDF9])|\uD83C\uDDF9(?:\uD83C[\uDDE6\uDDE8\uDDE9\uDDEB-\uDDED\uDDEF-\uDDF4\uDDF7\uDDF9\uDDFB\uDDFC\uDDFF])|\uD83C\uDDEC(?:\uD83C[\uDDE6\uDDE7\uDDE9-\uDDEE\uDDF1-\uDDF3\uDDF5-\uDDFA\uDDFC\uDDFE])|\uD83C\uDDFA(?:\uD83C[\uDDE6\uDDEC\uDDF2\uDDF3\uDDF8\uDDFE\uDDFF])|\uD83C\uDDEA(?:\uD83C[\uDDE6\uDDE8\uDDEA\uDDEC\uDDED\uDDF7-\uDDFA])|\uD83C\uDDFC(?:\uD83C[\uDDEB\uDDF8])|(?:\u26F9|\uD83C[\uDFCB\uDFCC]|\uD83D\uDD75)(?:\uD83C[\uDFFB-\uDFFF])|(?:\uD83C[\uDFC3\uDFC4\uDFCA]|\uD83D[\uDC6E\uDC71\uDC73\uDC77\uDC81\uDC82\uDC86\uDC87\uDE45-\uDE47\uDE4B\uDE4D\uDE4E\uDEA3\uDEB4-\uDEB6]|\uD83E[\uDD26\uDD37-\uDD39\uDD3D\uDD3E\uDDD6-\uDDDD])(?:\uD83C[\uDFFB-\uDFFF])|(?:[\u261D\u270A-\u270D]|\uD83C[\uDF85\uDFC2\uDFC7]|\uD83D[\uDC42\uDC43\uDC46-\uDC50\uDC66\uDC67\uDC70\uDC72\uDC74-\uDC76\uDC78\uDC7C\uDC83\uDC85\uDCAA\uDD74\uDD7A\uDD90\uDD95\uDD96\uDE4C\uDE4F\uDEC0\uDECC]|\uD83E[\uDD18-\uDD1C\uDD1E\uDD1F\uDD30-\uDD36\uDDD1-\uDDD5])(?:\uD83C[\uDFFB-\uDFFF])|\uD83D\uDC68(?:\u200D(?:(?:(?:\uD83D[\uDC68\uDC69])\u200D)?\uD83D\uDC67|(?:(?:\uD83D[\uDC68\uDC69])\u200D)?\uD83D\uDC66)|\uD83C[\uDFFB-\uDFFF])|(?:[\u261D\u26F9\u270A-\u270D]|\uD83C[\uDF85\uDFC2-\uDFC4\uDFC7\uDFCA-\uDFCC]|\uD83D[\uDC42\uDC43\uDC46-\uDC50\uDC66-\uDC69\uDC6E\uDC70-\uDC78\uDC7C\uDC81-\uDC83\uDC85-\uDC87\uDCAA\uDD74\uDD75\uDD7A\uDD90\uDD95\uDD96\uDE45-\uDE47\uDE4B-\uDE4F\uDEA3\uDEB4-\uDEB6\uDEC0\uDECC]|\uD83E[\uDD18-\uDD1C\uDD1E\uDD1F\uDD26\uDD30-\uDD39\uDD3D\uDD3E\uDDD1-\uDDDD])(?:\uD83C[\uDFFB-\uDFFF])?|(?:[\u231A\u231B\u23E9-\u23EC\u23F0\u23F3\u25FD\u25FE\u2614\u2615\u2648-\u2653\u267F\u2693\u26A1\u26AA\u26AB\u26BD\u26BE\u26C4\u26C5\u26CE\u26D4\u26EA\u26F2\u26F3\u26F5\u26FA\u26FD\u2705\u270A\u270B\u2728\u274C\u274E\u2753-\u2755\u2757\u2795-\u2797\u27B0\u27BF\u2B1B\u2B1C\u2B50\u2B55]|\uD83C[\uDC04\uDCCF\uDD8E\uDD91-\uDD9A\uDDE6-\uDDFF\uDE01\uDE1A\uDE2F\uDE32-\uDE36\uDE38-\uDE3A\uDE50\uDE51\uDF00-\uDF20\uDF2D-\uDF35\uDF37-\uDF7C\uDF7E-\uDF93\uDFA0-\uDFCA\uDFCF-\uDFD3\uDFE0-\uDFF0\uDFF4\uDFF8-\uDFFF]|\uD83D[\uDC00-\uDC3E\uDC40\uDC42-\uDCFC\uDCFF-\uDD3D\uDD4B-\uDD4E\uDD50-\uDD67\uDD7A\uDD95\uDD96\uDDA4\uDDFB-\uDE4F\uDE80-\uDEC5\uDECC\uDED0-\uDED2\uDEEB\uDEEC\uDEF4-\uDEF8]|\uD83E[\uDD10-\uDD3A\uDD3C-\uDD3E\uDD40-\uDD45\uDD47-\uDD4C\uDD50-\uDD6B\uDD80-\uDD97\uDDC0\uDDD0-\uDDE6])|(?:[#\*0-9\xA9\xAE\u203C\u2049\u2122\u2139\u2194-\u2199\u21A9\u21AA\u231A\u231B\u2328\u23CF\u23E9-\u23F3\u23F8-\u23FA\u24C2\u25AA\u25AB\u25B6\u25C0\u25FB-\u25FE\u2600-\u2604\u260E\u2611\u2614\u2615\u2618\u261D\u2620\u2622\u2623\u2626\u262A\u262E\u262F\u2638-\u263A\u2640\u2642\u2648-\u2653\u2660\u2663\u2665\u2666\u2668\u267B\u267F\u2692-\u2697\u2699\u269B\u269C\u26A0\u26A1\u26AA\u26AB\u26B0\u26B1\u26BD\u26BE\u26C4\u26C5\u26C8\u26CE\u26CF\u26D1\u26D3\u26D4\u26E9\u26EA\u26F0-\u26F5\u26F7-\u26FA\u26FD\u2702\u2705\u2708-\u270D\u270F\u2712\u2714\u2716\u271D\u2721\u2728\u2733\u2734\u2744\u2747\u274C\u274E\u2753-\u2755\u2757\u2763\u2764\u2795-\u2797\u27A1\u27B0\u27BF\u2934\u2935\u2B05-\u2B07\u2B1B\u2B1C\u2B50\u2B55\u3030\u303D\u3297\u3299]|\uD83C[\uDC04\uDCCF\uDD70\uDD71\uDD7E\uDD7F\uDD8E\uDD91-\uDD9A\uDDE6-\uDDFF\uDE01\uDE02\uDE1A\uDE2F\uDE32-\uDE3A\uDE50\uDE51\uDF00-\uDF21\uDF24-\uDF93\uDF96\uDF97\uDF99-\uDF9B\uDF9E-\uDFF0\uDFF3-\uDFF5\uDFF7-\uDFFF]|\uD83D[\uDC00-\uDCFD\uDCFF-\uDD3D\uDD49-\uDD4E\uDD50-\uDD67\uDD6F\uDD70\uDD73-\uDD7A\uDD87\uDD8A-\uDD8D\uDD90\uDD95\uDD96\uDDA4\uDDA5\uDDA8\uDDB1\uDDB2\uDDBC\uDDC2-\uDDC4\uDDD1-\uDDD3\uDDDC-\uDDDE\uDDE1\uDDE3\uDDE8\uDDEF\uDDF3\uDDFA-\uDE4F\uDE80-\uDEC5\uDECB-\uDED2\uDEE0-\uDEE5\uDEE9\uDEEB\uDEEC\uDEF0\uDEF3-\uDEF8]|\uD83E[\uDD10-\uDD3A\uDD3C-\uDD3E\uDD40-\uDD45\uDD47-\uDD4C\uDD50-\uDD6B\uDD80-\uDD97\uDDC0\uDDD0-\uDDE6])\uFE0F)/;var ps,ms,gs,vs,ys,bs,_s=/(?:\r|\n|\t\t)/g,xs=/(?:\s\s+)/g,ws=String.fromCharCode(160),Ss=function(t){ps=document,ms=window,(vs=vs||t||ms.gsap||console.warn("Please gsap.registerPlugin(SplitText)"))&&(bs=vs.utils.toArray,ys=vs.core.context||function(){},gs=1)},Es=function(t){return ms.getComputedStyle(t)},Ts=function(t){return"absolute"===t.position||!0===t.absolute},Ms=function(t,e){for(var n,r=e.length;--r>-1;)if(n=e[r],t.substr(0,n.length)===n)return n.length},As=function(t,e){void 0===t&&(t="");var n=~t.indexOf("++"),r=1;return n&&(t=t.split("++").join("")),function(){return"<"+e+" style='position:relative;display:inline-block;'"+(t?" class='"+t+(n?r++:"")+"'>":">")}},Ls=function t(e,n,r){var i=e.nodeType;if(1===i||9===i||11===i)for(e=e.firstChild;e;e=e.nextSibling)t(e,n,r);else 3!==i&&4!==i||(e.nodeValue=e.nodeValue.split(n).join(r))},Ds=function(t,e){for(var n=e.length;--n>-1;)t.push(e[n])},Cs=function(t,e,n){for(var r;t&&t!==e;){if(r=t._next||t.nextSibling)return r.textContent.charAt(0)===n;t=t.parentNode||t._parent}},Ps=function t(e){var n,r,i=bs(e.childNodes),o=i.length;for(n=0;n<o;n++)(r=i[n])._isSplit?t(r):n&&r.previousSibling&&3===r.previousSibling.nodeType?(r.previousSibling.nodeValue+=3===r.nodeType?r.nodeValue:r.firstChild.nodeValue,e.removeChild(r)):3!==r.nodeType&&(e.insertBefore(r.firstChild,r),e.removeChild(r))},Rs=function(t,e){return parseFloat(e[t])||0},ks=function(t,e,n,r,i,o,a){var s,u,c,l,h,f,d,p,m,g,v,y,b=Es(t),_=Rs("paddingLeft",b),x=-999,w=Rs("borderBottomWidth",b)+Rs("borderTopWidth",b),S=Rs("borderLeftWidth",b)+Rs("borderRightWidth",b),E=Rs("paddingTop",b)+Rs("paddingBottom",b),T=Rs("paddingLeft",b)+Rs("paddingRight",b),M=Rs("fontSize",b)*(e.lineThreshold||.2),A=b.textAlign,L=[],D=[],C=[],P=e.wordDelimiter||" ",R=e.tag?e.tag:e.span?"span":"div",k=e.type||e.split||"chars,words,lines",O=i&&~k.indexOf("lines")?[]:null,I=~k.indexOf("words"),F=~k.indexOf("chars"),z=Ts(e),B=e.linesClass,N=~(B||"").indexOf("++"),U=[],j="flex"===b.display,H=t.style.display;for(N&&(B=B.split("++").join("")),j&&(t.style.display="block"),c=(u=t.getElementsByTagName("*")).length,h=[],s=0;s<c;s++)h[s]=u[s];if(O||z)for(s=0;s<c;s++)((f=(l=h[s]).parentNode===t)||z||F&&!I)&&(y=l.offsetTop,O&&f&&Math.abs(y-x)>M&&("BR"!==l.nodeName||0===s)&&(d=[],O.push(d),x=y),z&&(l._x=l.offsetLeft,l._y=y,l._w=l.offsetWidth,l._h=l.offsetHeight),O&&((l._isSplit&&f||!F&&f||I&&f||!I&&l.parentNode.parentNode===t&&!l.parentNode._isSplit)&&(d.push(l),l._x-=_,Cs(l,t,P)&&(l._wordEnd=!0)),"BR"===l.nodeName&&(l.nextSibling&&"BR"===l.nextSibling.nodeName||0===s)&&O.push([])));for(s=0;s<c;s++)if(f=(l=h[s]).parentNode===t,"BR"!==l.nodeName)if(z&&(m=l.style,I||f||(l._x+=l.parentNode._x,l._y+=l.parentNode._y),m.left=l._x+"px",m.top=l._y+"px",m.position="absolute",m.display="block",m.width=l._w+1+"px",m.height=l._h+"px"),!I&&F)if(l._isSplit)for(l._next=u=l.nextSibling,l.parentNode.appendChild(l);u&&3===u.nodeType&&" "===u.textContent;)l._next=u.nextSibling,l.parentNode.appendChild(u),u=u.nextSibling;else l.parentNode._isSplit?(l._parent=l.parentNode,!l.previousSibling&&l.firstChild&&(l.firstChild._isFirst=!0),l.nextSibling&&" "===l.nextSibling.textContent&&!l.nextSibling.nextSibling&&U.push(l.nextSibling),l._next=l.nextSibling&&l.nextSibling._isFirst?null:l.nextSibling,l.parentNode.removeChild(l),h.splice(s--,1),c--):f||(y=!l.nextSibling&&Cs(l.parentNode,t,P),l.parentNode._parent&&l.parentNode._parent.appendChild(l),y&&l.parentNode.appendChild(ps.createTextNode(" ")),"span"===R&&(l.style.display="inline"),L.push(l));else l.parentNode._isSplit&&!l._isSplit&&""!==l.innerHTML?D.push(l):F&&!l._isSplit&&("span"===R&&(l.style.display="inline"),L.push(l));else O||z?(l.parentNode&&l.parentNode.removeChild(l),h.splice(s--,1),c--):I||t.appendChild(l);for(s=U.length;--s>-1;)U[s].parentNode.removeChild(U[s]);if(O){for(z&&(g=ps.createElement(R),t.appendChild(g),v=g.offsetWidth+"px",y=g.offsetParent===t?0:t.offsetLeft,t.removeChild(g)),m=t.style.cssText,t.style.cssText="display:none;";t.firstChild;)t.removeChild(t.firstChild);for(p=" "===P&&(!z||!I&&!F),s=0;s<O.length;s++){for(d=O[s],(g=ps.createElement(R)).style.cssText="display:block;text-align:"+A+";position:"+(z?"absolute;":"relative;"),B&&(g.className=B+(N?s+1:"")),C.push(g),c=d.length,u=0;u<c;u++)"BR"!==d[u].nodeName&&(l=d[u],g.appendChild(l),p&&l._wordEnd&&g.appendChild(ps.createTextNode(" ")),z&&(0===u&&(g.style.top=l._y+"px",g.style.left=_+y+"px"),l.style.top="0px",y&&(l.style.left=l._x-y+"px")));0===c?g.innerHTML="&nbsp;":I||F||(Ps(g),Ls(g,String.fromCharCode(160)," ")),z&&(g.style.width=v,g.style.height=l._h+"px"),t.appendChild(g)}t.style.cssText=m}z&&(a>t.clientHeight&&(t.style.height=a-E+"px",t.clientHeight<a&&(t.style.height=a+w+"px")),o>t.clientWidth&&(t.style.width=o-T+"px",t.clientWidth<o&&(t.style.width=o+S+"px"))),j&&(H?t.style.display=H:t.style.removeProperty("display")),Ds(n,L),I&&Ds(r,D),Ds(i,C)},Os=function(t,e,n,r){var i,o,a,s,u,c,l,h,f=e.tag?e.tag:e.span?"span":"div",d=~(e.type||e.split||"chars,words,lines").indexOf("chars"),p=Ts(e),m=e.wordDelimiter||" ",g=function(t){return t===m||t===ws&&" "===m},v=" "!==m?"":p?"&#173; ":" ",y="</"+f+">",b=1,_=e.specialChars?"function"==typeof e.specialChars?e.specialChars:Ms:null,x=ps.createElement("div"),w=t.parentNode;for(w.insertBefore(x,t),x.textContent=t.nodeValue,w.removeChild(t),l=-1!==(i=function t(e){var n=e.nodeType,r="";if(1===n||9===n||11===n){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)r+=t(e)}else if(3===n||4===n)return e.nodeValue;return r}(t=x)).indexOf("<"),!1!==e.reduceWhiteSpace&&(i=i.replace(xs," ").replace(_s,"")),l&&(i=i.split("<").join("{{LT}}")),u=i.length,o=(" "===i.charAt(0)?v:"")+n(),a=0;a<u;a++)if(c=i.charAt(a),_&&(h=_(i.substr(a),e.specialChars)))c=i.substr(a,h||1),o+=d&&" "!==c?r()+c+"</"+f+">":c,a+=h-1;else if(g(c)&&!g(i.charAt(a-1))&&a){for(o+=b?y:"",b=0;g(i.charAt(a+1));)o+=v,a++;a===u-1?o+=v:")"!==i.charAt(a+1)&&(o+=v+n(),b=1)}else"{"===c&&"{{LT}}"===i.substr(a,6)?(o+=d?r()+"{{LT}}</"+f+">":"{{LT}}",a+=5):c.charCodeAt(0)>=55296&&c.charCodeAt(0)<=56319||i.charCodeAt(a+1)>=65024&&i.charCodeAt(a+1)<=65039?(s=((i.substr(a,12).split(ds)||[])[1]||"").length||2,o+=d&&" "!==c?r()+i.substr(a,s)+"</"+f+">":i.substr(a,s),a+=s-1):o+=d&&" "!==c?r()+c+"</"+f+">":c;t.outerHTML=o+(b?y:""),l&&Ls(w,"{{LT}}","<")},Is=function t(e,n,r,i){var o,a,s=bs(e.childNodes),u=s.length,c=Ts(n);if(3!==e.nodeType||u>1){for(n.absolute=!1,o=0;o<u;o++)(a=s[o])._next=a._isFirst=a._parent=a._wordEnd=null,(3!==a.nodeType||/\S+/.test(a.nodeValue))&&(c&&3!==a.nodeType&&"inline"===Es(a).display&&(a.style.display="inline-block",a.style.position="relative"),a._isSplit=!0,t(a,n,r,i));return n.absolute=c,void(e._isSplit=!0)}Os(e,n,r,i)},Fs=function(){function t(t,e){gs||Ss(),this.elements=bs(t),this.chars=[],this.words=[],this.lines=[],this._originals=[],this.vars=e||{},ys(this),this.split(e)}var e=t.prototype;return e.split=function(t){this.isSplit&&this.revert(),this.vars=t=t||this.vars,this._originals.length=this.chars.length=this.words.length=this.lines.length=0;for(var e,n,r,i=this.elements.length,o=t.tag?t.tag:t.span?"span":"div",a=As(t.wordsClass,o),s=As(t.charsClass,o);--i>-1;)r=this.elements[i],this._originals[i]={html:r.innerHTML,style:r.getAttribute("style")},e=r.clientHeight,n=r.clientWidth,Is(r,t,a,s),ks(r,t,this.chars,this.words,this.lines,n,e);return this.chars.reverse(),this.words.reverse(),this.lines.reverse(),this.isSplit=!0,this},e.revert=function(){var t=this._originals;if(!t)throw"revert() call wasn't scoped properly.";return this.elements.forEach((function(e,n){e.innerHTML=t[n].html,e.setAttribute("style",t[n].style)})),this.chars=[],this.words=[],this.lines=[],this.isSplit=!1,this},t.create=function(e,n){return new t(e,n)},t}();Fs.version="3.12.5",Fs.register=Ss;n(401);var zs=n(12),Bs=n.n(zs);class Ns extends Bs.a{constructor(t){super(),this.bootstrap=t,this._dependencies=new Set,this._enabled=!1}get priority(){return 0}get enabled(){return this._enabled}set enabled(t){this._enabled!=t&&(this._enabled=t)}get dependencies(){return this._dependencies}get runnable(){return this.enabled&&Array.from(this.dependencies).every(t=>this.bootstrap.modules.has(t))}init(){}async before(){}async run(){}async after(){}}var Us=Ns,js=n(14);class Hs extends Us{constructor(t){super(t),this._previous={},this._state={}}get previous(){return this._previous}get state(){return this._state}set state(t){js.debug("state",t),this._previous=this._state,this._state=t||{},this.emit("change",this._state)}}var Vs=Hs,Gs=n(166),Ws=n.n(Gs),qs=n(119),Xs=n.n(qs);let Ys;function Zs(){if(Ys)return Ys;let t=(e=document.location.href).substring(0,e.lastIndexOf("/")+1).trim();var e;let n=document.querySelector("base");return Ys=n?n.getAttribute("href"):t,Ys=Ys||t,Ys}class Js{constructor(t){this._uri=Xs()(t),this._base=Xs()(Zs()),this._uri.normalize(),this._base.normalize()}get base(){return this._base}get relative(){return this._uri.toString().replace(this._base.toString(),"")}get external(){return this.hostname!=this._base.hostname()}get scheme(){return this._uri.scheme()||this._base.scheme()}set scheme(t){this._uri.scheme(t)}get hostname(){return this._uri.hostname()||this._base.hostname()}set hostname(t){this._uri.hostname(t)}get port(){return this._uri.port()}set port(t){this._uri.port(t)}get username(){return this._uri.username()}set username(t){this._uri.username(t)}get password(){return this._uri.password()}set password(t){this._uri.password(t)}get path(){return this._uri.path()}set path(t){this._uri.path(t)}get tld(){return this._uri.tld()}set tld(t){this._uri.tld(t)}get hash(){return this._uri.hash()}set hash(t){this._uri.hash(t)}get segment(){return this._uri.segment()}set segment(t){this._uri.segment(t)}get query(){return this._uri.query(!0)}set query(t){this._uri.query(t)}equals(t){return t instanceof Js?this._uri.equals(t._uri):this._uri.equals(t.toString())}toString(){return this._uri.toString()}}class Qs extends Bs.a{constructor(){super(),this._crossroads=Ws.a.create(),this._crossroads.ignoreState=!0,this._crossroads.shouldTypecast=!0,this._previous=void 0,this._current=new Js(window.location.href),this.routedHandler=null,this.exitHandlers=new WeakMap,document.querySelector("base")||console.warn(`No <base> tag defined, Router may not work properly [computed base: ${Zs()}].`)}get previous(){return this._previous}get current(){return this._current}add(t,e){const n=this._crossroads.addRoute(t);return"function"==typeof e&&(this.routedHandler&&n.matched.add(this.routedHandler,null,10),n.matched.add(e,null,0)),n}remove(t){this._crossroads.removeRoute(t),t.dispose()}catchAll(t){this._crossroads.bypassed.add(t)}removeCatchAll(t){this._crossroads.bypassed.remove(t)}routed(t,e=10){this.routedHandler=t,this._crossroads._routes.forEach(t=>t.matched.add(this.routedHandler,null,10))}removeRouted(t){this._crossroads._routes.forEach(t=>t.matched.remove(this.routedHandler,null,10)),this.routedHandler=null}set(t){t=new Js("string"==typeof t?t:""),this.current.equals(t)||(this._previous=this._current,this._current=t,this._crossroads.parse(this._current.relative),this.emit("change",this._current.toString()))}}var Ks=Qs;class $s extends Us{constructor(t){super(t),this.router=new Ks,this.catchAll=this.catchAll.bind(this),this.stateChanged=this.stateChanged.bind(this),this.routed=this.routed.bind(this),this.dependencies.add(Vs)}get enabled(){return this._enabled}set enabled(t){this._enabled!=t&&(this._enabled=t,t?(this.router.routed(this.routed),this.router.catchAll(this.catchAll),this.bootstrap.get(Vs).on("change",this.stateChanged)):(this.router.removeRouted(this.routed),this.router.removeCatchAll(this.catchAll),this.bootstrap.get(Vs).off("change",this.stateChanged)))}get current(){return this.router.current}get previous(){return this.router.previous}add(t,e){return this.router.add(t,e)}remove(t){this.router.remove(t)}set(t){this.router.set(t)}async before(){let t=this.bootstrap.get(Vs);t.state&&t.state.url||(t.state.url=this.router.current.toString())}routed(t){if(!this.router.previous.equals(this.router.current)){js.debug("routeChanged",t);let e=this.bootstrap.get(Vs),n=e.state;return n.url=this.router.current.toString(),e.state=n,!0}return!1}catchAll(t){this.routed(t)&&this.bootstrap.run()}stateChanged(t){js.debug("stateChanged",t),this.router.set(t&&t.url?t.url:"")}}var tu=$s;class eu extends Us{constructor(t){super(t),this.dependencies.add(tu),this.wrapper="#root",this.selector="> *:first-child",this._previous=null,this.autoRemove=!0}get priority(){return 1}get previous(){return this._previous}get current(){return this._current}set current(t){this._current!=t&&(this._previous=this._current,this._current=t,this.emit("page",t))}async init(){this.root=document.querySelector(this.wrapper)}async run(){this._current=document.querySelector(this.wrapper+" "+this.selector)}async after(){this.autoRemove&&this.removePrevious()}removePrevious(){this.previous&&this.removeElement(this.previous)}removeElement(t){t&&t.parentElement&&t.parentElement.removeChild(t)}}var nu=eu;class ru extends Us{constructor(t){super(t),this.historyChanged=this.historyChanged.bind(this),this.pageChanged=this.pageChanged.bind(this),this.dependencies.add(Vs),this.dependencies.add(nu),this._first=!0,window.history.state||window.history.replaceState({url:window.location.href},null)}get priority(){return 5}get enabled(){return this._enabled}set enabled(t){this._enabled!=t&&(this._enabled=t,t?(window.addEventListener("popstate",this.historyChanged),this.bootstrap.get(nu).on("page",this.pageChanged)):(window.removeEventListener("popstate",this.historyChanged),this.bootstrap.get(nu).off("page",this.pageChanged)))}historyChanged(t){js.debug("historyChanged",window.history.state);this.bootstrap.get(Vs);this.bootstrap.get(Vs).state=window.history.state}pageChanged(t){const e=this.bootstrap.get(Vs).state;window.history.pushState(e,e.title,e.url)}}function iu(t){var e=[];return function t(e,n){for(var r=0;r<e.length;r++){var i=e[r];Array.isArray(i)?t(i,n):n.push(i)}}(t,e),e}class ou extends Bs.a{constructor(){super(),this.parallel=!0,this.exceptions=!1,this.waiting=new Set,this.pending=new Set,this.progresses=new Map,this.loaded=new Map}get progress(){if(0!=this.progresses.size){let t=0;return this.progresses.forEach(e=>t+=e),t/this.progresses.size}return 1}get complete(){return 1==this.progress}get size(){return this.waiting.size+this.pending.size+this.loaded.size}get(t){return this.loaded.get(t)}has(t){return this.waiting.has(t)||this.pending.has(t)||this.loaded.has(t)}add(...t){return(t=iu(t)).forEach(t=>{!this.accepts(t)||this.waiting.has(t)||this.pending.has(t)||this.loaded.has(t)||(this.waiting.add(t),this.progresses.set(t,0))}),this}delete(...t){return(t=iu(t)).forEach(t=>{this.waiting.delete(t),this.pending.delete(t),this.loaded.delete(t),this.progresses.delete(t)}),this}reset(){this.lastProgress=null,this.waiting=new Set,this.pending=new Set,this.progresses=new Map,this.loaded=new Map}isWaiting(t){return this.waiting.has(t)}isPending(t){return this.pending.has(t)}isLoaded(t){return this.loaded.has(t)}accepts(t){return!0}async loadItem(t){return t}async allSettled(t){return new Promise((e,n)=>{let r=t.length,i=0;if(0==r)return e();t.forEach(t=>{t.then(()=>{i++}).catch(t=>{throw i++,t}).finally(()=>{i==r&&e()})})})}async sequentialLoad(){for(0==this.waiting.size&&this.triggerProgress();this.waiting.size>0;){let t=this.waiting.values().next().value;this.waiting.delete(t),this.pending.add(t);try{let e=await this.loadItem(t);this.pending.delete(t),this.loaded.set(t,e),this.progresses.set(t,1),this.triggerProgress()}catch(e){if(this.pending.delete(t),this.loaded.set(t,null),this.progresses.set(t,1),this.triggerProgress(),this.exceptions)throw e}}}async parallelLoad(){let t=[];for(0==this.waiting.size&&this.triggerProgress();this.waiting.size>0;){let e=this.waiting.values().next().value;this.waiting.delete(e),this.pending.add(e),t.push(this.loadItem(e).then(t=>{this.pending.delete(e),this.loaded.set(e,t),this.progresses.set(e,1),this.triggerProgress()}).catch(t=>{if(this.pending.delete(e),this.loaded.set(e,null),this.progresses.set(e,1),this.triggerProgress(),this.exceptions)throw t}))}return this.allSettled(t)}async load(...t){return this.add(...t),!this._loading&&(this._loading=!0,this.parallel?await this.parallelLoad():await this.sequentialLoad(),this._loading=!1,this.emit("complete",this.loaded),this.loaded.forEach(t=>this.progresses.delete(t)),this.loaded)}triggerProgress(){let t=this.progress;this.lastProgress!=t&&(this.lastProgress=t,this.emit("progress",t))}}class au extends ou{constructor({method:t="GET",params:e={},headers:n={},body:r=null,cache:i="no-cache",redirect:o="follow",callback:a=(async()=>{})}={}){super(),this.options={method:t,params:e,headers:n,body:r,cache:i,redirect:o},this.callback=a}accepts(t){return"string"==typeof t}async loadItem(t){return js.debug("loadItem",t),window.fetch(t,this.options).then(async t=>(await this.callback(t),this._value=await t.text(),this._value))}}var su=n(167),uu=n.n(su);function cu(t){return uu()(t)?(e=t,(n=document.createElement("div")).innerHTML=e.trim(),n.childNodes&&n.childNodes.length>1?n.childNodes:n.firstChild):t instanceof window.Node?t:lu(t)?(r=t,document.querySelector(r)):null;var e,n,r}const lu=t=>{try{e=t,document.createDocumentFragment().querySelector(e)}catch(t){return!1}var e;return!0};class hu extends au{constructor(t={}){t.headers=t.headers?t.headers:{"X-Requested-With":"XMLHttpRequest"},super(t)}accepts(t){return"string"==typeof t}async loadItem(t){return cu(await super.loadItem(t))}}function fu(t,e){return e=e||"\\s",t.replace(new RegExp("["+e+"]+$","g"),"")}class du extends Us{constructor(t){super(t),this.dependencies.add(eu),this.dependencies.add($s),this.loader=new hu,this.prepend=!0,this._current=null,this.transform=async t=>t}get priority(){return 1}get pageModule(){return this.bootstrap.get(eu)}async run(){let t=this.pageModule.current,e=this.bootstrap.get($s).router,n=e.current.toString();if(e.previous||(this._current=n),t&&e.previous&&fu(this._current,"/")!=fu(n,"/")){await this.loader.load(n);let t=this.loader.get(n);t&&(t=await this.transform(t),this.loader.delete(n),this.insertElement(t),this.pageModule.current=t,this._current=n)}}insertElement(t){t&&(this.prepend?t instanceof NodeList?t.forEach(t=>this.pageModule.root.insertBefore(t,this.pageModule.root.firstChild)):this.pageModule.root.insertBefore(t,this.pageModule.root.firstChild):t instanceof NodeList?t.forEach(t=>this.pageModule.root.appendChild(t)):this.pageModule.root.appendChild(t))}}var pu=class extends ou{constructor(){super()}accepts(t){return t instanceof ou}async loadItem(t){const e=e=>{this.progresses.set(t,e),this.triggerProgress()};t.on("progress",e),await t.load(),t.off("progress",e)}};class mu extends Us{constructor(t){super(t),this.loader=new pu}get priority(){return-1}async before(){this.loader.reset()}}var gu=class extends ou{constructor(){super(),this.ajax=!1}accepts(t){return"string"==typeof t}async loadItem(t){return this.ajax?await this.loadAjax(t):await this.loadSimple(t)}loadSimple(t){return new Promise((e,n)=>{let r=t,i=new window.Image;i.onload=()=>e(i),i.crossOrigin="Anonymous",i.onerror=()=>{n(new Error(`Could not load '${t}'`))},i.src=r})}loadAjax(t){return new Promise((e,n)=>{let r=t,i=new window.Image,o=new XMLHttpRequest;o.open("GET",r,!0),o.responseType="arraybuffer",o.onerror=t=>n(t),o.onload=function(t){var n=o.getAllResponseHeaders().match(/^Content-Type\:\s*(.*?)$/im)[1]||"image/png",r=new Blob([o.response],{type:n});i.src=window.URL.createObjectURL(r),e()},o.onprogress=t=>{t.lengthComputable&&(this.progresses.set(r,t.loaded/t.total),this.triggerProgress())},o.onloadend=()=>{this.progresses.set(r,1),this.triggerProgress()},o.send()})}},vu=n(168),yu=n.n(vu);function bu(t){var e=yu()(t);let n=null;return e.forEach(t=>{if(t.d>1){if(window.devicePixelRatio>1)return t.url}else n=t.url}),n}function _u(t,e=""){let n=t.querySelectorAll(":scope img"+e),r=new Set;return n.forEach(t=>{if(""!=t.srcset)return r.add(bu(t.src));r.add(t.src)}),r}var xu=function(t,e=""){return Array.from(_u(t,e)).concat(Array.from(function(t,e=""){let n=t.querySelectorAll(":scope picture"+e),r=new Set;return n.forEach(t=>{let e=!1;t.querySelectorAll(":scope source").forEach(t=>{let n=t.getAttribute("media");""!=n&&(window.matchMedia(n).matches&&(e=!0,r.add(bu(t.getAttribute("srcset")))))}),e||r.add(_u(t))}),r}(t,e))).concat(Array.from(function(t,e=""){let n=t.querySelectorAll(":scope div"+e),r=new Set;return n.forEach(t=>{let e=window.getComputedStyle(t).backgroundImage;-1==e.indexOf("linear-gradient")&&-1==e.indexOf("radial-gradient")&&(e=e.replace('url("',"").replace("url(","").replace('")',"").replace(")",""),"none"!=e&&e.length&&r.add(e))}),r}(t,e)))};class wu extends Us{constructor(t){super(t),this.dependencies.add(mu),this.loader=new gu,this.selector="",this.gather=()=>[]}get loaderModule(){return this.bootstrap.get(mu)}async before(){this.loader.reset(),this.loaderModule.loader.has(this.loader)||this.loaderModule.loader.add(this.loader)}async run(){this.loader.add(xu(document.body,this.selector)),this.loader.add(this.gather()),await this.loaderModule.loader.load()}}class Su extends Bs.a{constructor(t){super(),this.element=t}async init(){}async attach(){}async detach(){}async destroy(){}}var Eu=Su;const Tu=function(...t){return console&&console.error&&console.error.apply(console,t),null};var Mu=class{constructor({selector:t="html"}={}){this.selector=t,this.element=cu(this.selector),this.registry=new Map,this.elements=new Map,this.initFns=["init","attach"],this.destroyFns=["detach","destroy"],this.creator=(t,e)=>new t(e)}register(t){this.registry=new Map([...this.registry].concat(Object.entries(t)))}needSetup(t){return"component"in t.dataset&&this.registry.has(t.dataset.component)&&!this.elements.has(t)}get(t){return this.elements.has(t)?this.elements.get(t):null}async setup(){await this.clean();let t=[this.element].concat(...this.element.querySelectorAll("[data-component]")).filter(t=>this.needSetup(t)).map(t=>this.create(t));for(let e of t)await this.call(e,this.initFns);return t}create(t){let e=t.dataset.component;if(!this.registry.has(e))return Tu("Component not found: ",e);let n=this.registry.get(e),r=this.creator(n,t);return r?(this.elements.set(t,r),r):Tu("Component not created",e)}async call(t,e){if(t instanceof Eu)for(let n of e)"function"==typeof t[n]&&await t[n]()}async clean(){for await(let[t,e]of this.elements.entries())t.compareDocumentPosition(document.body)&Node.DOCUMENT_POSITION_CONTAINS||(await this.call(e,this.destroyFns),this.elements.delete(t))}};class Au extends Eu{constructor(t,e){super(t),this.__bootstrap=e}get bootstrap(){return this.__bootstrap}}var Lu=Au;class Du extends Us{constructor(t){super(t),this.selector="html"}get priority(){return-2}build(){this._components=new Mu(this.selector),this._components.creator=(t,e)=>t.prototype instanceof Lu?new t(e,this.bootstrap):new t(e)}get selector(){return this._selector}set selector(t){this._selector!=t&&(this._selector=t,this.build())}get components(){return this._components||this.build(),this._components}get(t){return this.components.get(t)}register(t){js.debug("register",t),this.components.register(t)}async run(){await this.components.setup()}}class Cu extends Bs.a{constructor({sizer:t=window,selector:e="html"}={}){super(),this.element=document.querySelector(e),this.sizer=t,this.width=1,this.height=1,this.minWidth=0,this.minHeight=0,this.viewportWidth=0,this.viewportHeight=0,this.widthOnly=!1,this.orientation=null,this._medias=new Map,this.medias={},this.onResize=this.onResize.bind(this),this.mediaDisabled=this.mediaDisabled.bind(this),this.mediaEnabled=this.mediaEnabled.bind(this),this.attach(),this.resize()}attach(){window.addEventListener("resize",this.onResize),window.addEventListener("orientationchange",this.onResize)}detach(){window.removeEventListener("resize",this.onResize),window.removeEventListener("orientationchange",this.onResize)}onResize(t){this.computeResize()}async resize(){await this.computeResize(!0)}async computeResize(t=!1){let e=this.width,n=this.height;this.sizer==window?(this.innerWidth=document.documentElement.clientWidth,this.outerWidth=window.innerWidth,this.innerHeight=document.documentElement.clientHeight,this.outerHeight=window.innerHeight):(this.innerWidth=this.outerWidth=this.sizer.offsetWidth,this.innerHeight=this.outerHeight=this.sizer.offsetHeight),this.viewportWidth=Math.min(this.innerWidth,this.outerWidth),this.viewportHeight=Math.min(this.innerHeight,this.outerHeight),this.width=this.viewportWidth<this.minWidth?this.minWidth:this.viewportWidth,this.height=this.viewportHeight<this.minHeight?this.minHeight:this.viewportHeight,this.orientation=this.width<this.height?"portrait":"landscape";var r=Array.from(this._medias.values()).filter(t=>t.update());(!this.widthOnly&&(e!=this.width||n!=this.height)||this.widthOnly&&e!=this.width||t)&&(this.computeResize(),await this.emitAsync("pre-resize"),await this.emitAsync("resize"),await this.emitAsync("post-resize"),this.computeResize()),r.length&&this.emit("media",r.map(t=>t.name),r)}add(t){t.viewport=this;let e=new Pu(t);return e.on("disable",this.mediaDisabled),e.on("enable",this.mediaEnabled),this._medias.set(e.name,e),this.medias[e.name]=!1,e.update(),e}remove(t){delete this.medias[t.name],this._medias.delete(t.name),t.off("disable",this.mediaDisabled),t.off("enable",this.mediaEnabled)}get(t){return this._medias.get(t)}mediaDisabled(t){this.medias[t.name]=!1,t.addClass&&this.element.classList.remove(t.classPrefix+t.name)}mediaEnabled(t){this.medias[t.name]=!0,t.addClass&&this.element.classList.add(t.classPrefix+t.name)}}class Pu extends Bs.a{constructor({viewport:t=new Cu,name:e="",minWidth:n=-1/0,minHeight:r=-1/0,maxWidth:i=1/0,maxHeight:o=1/0,addClass:a=!0,classPrefix:s="",condition:u=null,meta:c=null,media:l=null}={}){super(),this.viewport=t,this.name=e,this.minWidth=n,this.minHeight=r,this.maxWidth=i,this.maxHeight=o,this.addClass=a,this.classPrefix=s,this.condition=u,this.meta=c,this.media=l,this.active=!1}update(){var t=this.viewport.width>=this.minWidth&&this.viewport.width<this.maxWidth&&this.viewport.height>=this.minHeight&&this.viewport.height<this.maxHeight&&(!this.media||window.matchMedia(this.media).matches);return"function"==typeof this.condition&&(t=this.condition(t)),this.active&&!t?(this.active=!1,this.emit("disable",this),!0):!(this.active||!t)&&(this.active=!0,this.emit("enable",this),!0)}}var Ru=Cu;class ku extends Us{constructor(t){super(t),this.viewport=new Ru}async after(){await this.viewport.resize()}}var Ou=n(90);n(46),n(4);Bs.a;Bs.a;new class{constructor(){this.ua=navigator.userAgent.toLowerCase(),this.html=document.querySelector("html"),this.checkNavigator(),this.checkPlatform(),this.checkDevice(),this.checkVersion(),this.checkEvents(),this.checkCss(),this.addConsole()}checkDevice(){this.device={},this.device.iphone=null!=this.ua.match(/iPhone/i)||null!=this.ua.match(/iPod/i),this.device.mobile=null!=this.ua.match(/mobile/i),this.device.ipad=this.platform.ios&&!this.device.iphone,this.device.tablet=this.device.ipad&&!this.device.iphone||null!=this.ua.match(/android/i)&&!this.device.mobile,this.device.tablet&&(this.device.mobile=!1),this.device.desktop=!this.device.tablet&&!this.device.mobile,this.device.touch=!!("function"==typeof window.ontouchstart||navigator.maxTouchPoints>0||navigator.msMaxTouchPoints>0||this.device.mobile||this.device.ipad||this.device.iphone||this.device.tablet||this.platform.android||this.platform.windowsphone),this.device.retina=window.devicePixelRatio>1}checkNavigator(){this.browser={},this.browser.ioswebview=/(iPhone|iPod|iPad).*AppleWebKit(?!.*Safari)/i.test(this.ua),this.browser.firefox=this.ua.indexOf("firefox")>-1,this.browser.samsung=this.ua.indexOf("samsungbrowser")>-1,this.browser.ie=(this.ua.indexOf("msie")>-1||window.ActiveXObject||"ActiveXObject"in window)&&!this.browser.firefox,this.browser.edge=/Edge./i.test(this.ua),this.browser.chrome=this.ua.indexOf("chrome")>-1&&!this.browser.samsung,this.browser.safari=!!(this.ua.indexOf("safari")>-1&&!this.browser.chrome&&!this.browser.samsung||this.ua.match(/fbios/i)||this.ua.match(/micromessenger/i)),this.browser.opera=this.ua.indexOf("presto")>-1,this.browser.facebook=this.ua.indexOf("fban")>-1||this.ua.indexOf("fbav")>-1}checkPlatform(){this.platform={},this.platform.ios=/iPad|iPhone|iPod/.test(navigator.platform)||"MacIntel"===navigator.platform&&navigator.maxTouchPoints>1,this.platform.win=/win/i.test(navigator.platform.toLowerCase()),this.platform.mac=navigator.platform.toLowerCase().indexOf("mac")>=0,this.platform.android=this.ua.indexOf("android")>-1,this.platform.linux=this.ua.indexOf("linux")>-1,this.platform.windowsphone=this.ua.indexOf("windows phone")>-1||null!=this.ua.match(/mobile/i)&&this.browser.ie}checkVersion(){this.version={},this.version.full=this.getBrowserVersion(),this.version.main=parseInt(this.version.full),this.version.ie6=this.html.classList.contains("ie6"),this.version.ie7=this.html.classList.contains("ie7"),this.version.ie8=this.html.classList.contains("ie8"),this.version.ie9=this.html.classList.contains("ie9"),this.version.ie10=-1!==navigator.appVersion.indexOf("MSIE 10"),this.version.ie11=null!=this.ua.match(/Trident\/7\./i),this.version.edge=/Edge./i.test(this.ua),this.version.ios7=null!=this.ua.match(/Version\/7/i),this.version.ios9=null!=this.ua.match(/Version\/9/i)}checkEvents(){this.event={},this.device.touch?(this.event.click="touchstart",this.event.down="touchstart",this.event.up="touchend",this.event.move="touchmove",window.navigator.msPointerEnabled&&(this.event.click="MSPointerDown",this.event.down="MSPointerDown",this.event.up="MSPointerUp",this.event.move="MSPointerMove")):(this.event.click="click",this.event.down="mousedown",this.event.up="mouseup",this.event.move="mousemove")}checkCss(){this.css={},this.css.transform3d=this.checkCssProperty("transform","translate3d(1px,1px,1px)",!0)}checkCssProperty(t,e,n){var r=document.createElement("div");this.html.appendChild(r);var i=(n?this.browser.cssVendorPrefix:"")+t,o=(n?this.browser.jsVendorPrefix:"")+this.uppercaseFirstLetter(t),a=void 0;return void 0!==r.style[o]&&(r.style[o]=e,a=window.getComputedStyle(r).getPropertyValue(i)),this.html.removeChild(r),void 0!==a&&a.length>0&&"none"!==a}getBrowserVersion(){var t,e=navigator.appName,n=this.ua,r=n.match(/(opera|chrome|safari|firefox|msie)\/?\s*(\.?\d+(\.\d+)*)/i);return r&&null!=(t=n.match(/version\/([\.\d]+)/i))&&(r[2]=t[1]),(r=r?[r[1],r[2]]:[e,navigator.appVersion,"-?"])[1]}checkVendorPrefix(){var t={ioswebview:["-webkit-","webkit"],facebook:["-webkit-","webkit"],samsung:["-webkit-","webkit"],chrome:["-webkit-","webkit"],safari:["-webkit-","webkit"],firefox:["-moz-","Moz"],opera:["-o-","O"],ie:["-ms-","ms"]};for(var e in this.browser)if(this.browser[e])return this.browser.cssVendorPrefix=t[e][0],void(this.browser.jsVendorPrefix=t[e][1]);this.browser.cssVendorPrefix="",this.browser.jsVendorPrefix=""}checkVideoSupport(){var t={ioswebview:["mp4","video/mp4"],facebook:["mp4","video/mp4"],samsung:["mp4","video/mp4"],chrome:["mp4","video/mp4"],safari:["mp4","video/mp4"],firefox:["mp4","video/mp4"],opera:["webm","video/webm"],ie:["mp4","video/mp4"]};for(var e in this.browser)if(this.browser[e])return this.browser.videoExtension=t[e][0],void(this.browser.videoType=t[e][1]);this.browser.videoExtension="mp4",this.browser.videoType="video/mp4"}checkWebGL(){var t,e,n;try{n=(e=(t=document.createElement("canvas")).getContext("webgl")||t.getContext("experimental-webgl")).getSupportedExtensions()}catch(t){}if(void 0!==e&&(self.webgl=new Boolean(!0)),e)for(var r=-1,i=n.length;++r<i;)self.webgl[n[r]]=!0;t=void 0}uppercaseFirstLetter(t){return t.charAt(0).toUpperCase()+t.slice(1)}addConsole(){if(!window.console);}};Bs.a;const Iu=(t,e,n,r)=>{var i={x:0,y:0,width:e.width,height:e.height},o=((r=Object.assign({top:0,left:0,bottom:1,right:1},r)).right,r.left,e.width,r.bottom,r.top,e.height,e.width/e.height);if((n?o>=t:o<t)?(i.width=e.height*t,i.x=(e.width-i.width)/2|0):(i.height=e.width/t,i.y=(e.height-i.height)/2|0),!n){var a=r.right*i.width-r.left*i.width;a<e.width&&a>0&&(i.width*=e.width/a,i.height=i.width/t);var s=r.bottom*i.height-r.top*i.height;s<e.height&&s>0&&(i.height*=e.height/s,i.width=i.height*t),i.width=Math.ceil(i.width),i.height=Math.ceil(i.height),i.x=-r.left*i.width-((r.right-r.left)*i.width-e.width)/2|0,i.y=-r.top*i.height-((r.bottom-r.top)*i.height-e.height)/2|0}return i},Fu=(t,e)=>{"string"==typeof t&&(t=document.querySelectorAll(t)),t=t&&"function"==typeof t[Symbol.iterator]?Array.from(t):[t],e=Object.assign({inside:"boolean"==typeof e&&e,animate:!1,duration:1,ease:Fn.easeInOut,reference:null,ratio:null,useTransform:!1,sizeOnly:!1,heightOnly:!1,widthOnly:!1},e);var n=new He({paused:!0});return t.forEach(t=>{let r=e.reference?e.reference:t.parentElement,i=t.dataset;var o=e.ratio,a=0,s=0,u=t.tagName.toLowerCase();if(r.tagName&&"picture"==r.tagName.toLowerCase()){var c=r;r=r.parentElement,Array.from(c.querySelectorAll("source")).forEach(t=>{window.matchMedia(t.getAttribute("media")).matches&&(i=Object.assign({},i,t.dataset))})}if(!o)if(i.ratio)o=i.ratio;else if(i.width&&i.height)o=(a=i.width)/(s=i.height);else if("video"==u)o=(a=t.videoWidth)/(s=t.videoHeight);else if("picture"==u){let n=t.querySelector("img");if(n.style.width="100%",n.style.height="100%",!n.complete)return void n.addEventListener("load",()=>Fu(t,e));a=t.attr("width"),s=t.attr("height"),a||(a=t.naturalWidth),s||(s=t.naturalHeight),o=a/s}else{if(!t.complete)return void t.addEventListener("load",()=>Fu(t,e));a=t.getAttribute("width"),s=t.getAttribute("height"),a||(a=t.naturalWidth),s||(s=t.naturalHeight),o=a/s}var l=r.tagName?{x:0,y:0,width:r.offsetWidth,height:r.offsetHeight}:e.reference,h={top:0|i.maxTop,left:0|i.maxLeft,bottom:1|i.maxBottom,right:1|i.maxRight};e.hasOwnProperty("maxTop")&&(h.top=e.maxTop),e.hasOwnProperty("maxLeft")&&(h.left=e.maxLeft),e.hasOwnProperty("maxRight")&&(h.right=e.maxRight),e.hasOwnProperty("maxBottom")&&(h.bottom=e.maxBottom);var f=Iu(o,l,e.inside,h),d={};d=e.useTransform?((t,e,n)=>{var r={force3D:!0};return e.width&&!t.heightOnly&&(t.sizeOnly||t.widthOnly||(r.x=e.x),r.scaleX=e.width/n.offsetWidth),e.height&&!t.widthOnly&&(t.sizeOnly||t.heightOnly||(r.y=e.y),r.scaleY=e.height/n.offsetHeight),r})(e,f,t):((t,e)=>{var n={};return e.width&&!t.heightOnly&&(t.sizeOnly||t.widthOnly||(n.left=e.x),n.width=e.width),e.height&&!t.widthOnly&&(t.sizeOnly||t.heightOnly||(n.top=e.y),n.height=e.height),n})(e,f),e.animate?(d.ease=e.ease,n.to(t,e.duration,d,0)):Xr.set(t,d,0)}),n.play()};Fu.getBounds=Iu;n(408);Bs.a.defaultMaxListeners=100;class zu extends Bs.a{constructor(...t){super(),this.modules=new Map,this.run=this.run.bind(this),this._running=!1,this._ready=!1,document.body?this._ready=!0:document.addEventListener("DOMContentLoaded",()=>{this._ready=!0,this._runRequested&&this.run()}),this.add(...t)}sort(){this.modules.forEach(t=>{t.dependencies.forEach(t=>{this.modules.has(t)||this.modules.set(t,new t(this))})}),this.modules=new Map(this.toposort(Array.from(this.modules.values())).map(t=>[t.constructor,t])),this.modules.forEach(t=>t.enabled=!0)}toposort(t){let e=new Map;t.forEach(t=>e.set(t,Array.from(t.dependencies.keys()).map(t=>this.modules.get(t))));const n=Array.from(e.keys()).reduce((t,n)=>t.set(n,Array.from(e.keys()).filter(t=>e.get(t).includes(n))),new Map),r=Array.from(e.keys()).filter(t=>0==e.get(t).length).sort((t,e)=>t.priority-e.priority),i=[];for(;r.length;){const t=r.pop();i.push(t);var o=[];n.get(t).forEach(n=>{e.set(n,e.get(n).filter(e=>e!==t)),0==e.get(n).length&&o.push(n)}),o.sort((t,e)=>t.priority-e.priority).forEach(t=>r.push(t))}return i}add(...t){(t=iu(t)).forEach(t=>this.modules.set(t,new t(this))),this.sort()}override(t,e){if(this.modules.has(overridenModule)){this.modules.delete(overridenModule);let t=new e(this);this.modules.set(overridenModule,t),this.modules.set(e,t),this.sort()}}get(t){return this.modules.get(t)}async run(){if(!this._running){if(!this._ready)return void(this._runRequested=!0);js.debug("Bootstrap","run"),this._running=!0;for(let t of["init","before","run","after"])for(let[e,n]of Array.from(this.modules))js.debug("Bootstrap","module",n.constructor.name,t),n.runnable&&await n[t]();this._running=!1}}}class Bu extends Au{get components(){return this.bootstrap.components}get viewport(){return this.bootstrap.viewport}get animator(){return this.bootstrap.animator}}class Nu extends Bu{get router(){return this.bootstrap.router}}Bs.a,Symbol.iterator;n(120);Bs.a;Bs.a;Ou.EventEmitter;n(169);function Uu(t){return(Uu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ju(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Hu(t,e){return(Hu=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Vu(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=qu(t);if(e){var i=qu(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Gu(this,n)}}function Gu(t,e){return!e||"object"!==Uu(e)&&"function"!=typeof e?Wu(t):e}function Wu(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function qu(t){return(qu=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Xu=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Hu(t,e)}(o,t);var e,n,r,i=Vu(o);function o(t,e){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o),(n=i.call(this,t,e)).handleMove=n.handleMove.bind(Wu(n)),n.handleScroll=n.handleScroll.bind(Wu(n)),n.handleResize=n.handleResize.bind(Wu(n)),n.handleEnter=n.handleEnter.bind(Wu(n)),n.handleLeave=n.handleLeave.bind(Wu(n)),n.handleUp=n.handleUp.bind(Wu(n)),n.handleDown=n.handleDown.bind(Wu(n)),n.pointer=n.element.querySelector(".hold"),n.scrollY=0,n.mouse=[0,0],n.pointerBBox=n.pointer.getBoundingClientRect(),n}return e=o,(n=[{key:"open",value:function(){}},{key:"close",value:function(){}},{key:"attach",value:function(){this.handleResize(),this.element.addEventListener("mousemove",this.handleMove),this.element.addEventListener("mouseenter",this.handleEnter),this.element.addEventListener("mouseleave",this.handleLeave),this.element.addEventListener("mousedown",this.handleDown),window.addEventListener("mouseup",this.handleUp),window.addEventListener("scroll",this.handleScroll),this.viewport.on("resize",this.handleResize)}},{key:"detach",value:function(){this.element.removeEventListener("mousemove",this.handleMove),this.element.removeEventListener("mouseenter",this.handleEnter),this.element.removeEventListener("mouseleave",this.handleLeave),this.element.removeEventListener("mousedown",this.handleDown),window.removeEventListener("mouseup",this.handleUp),window.removeEventListener("scroll",this.handleScroll),this.viewport.off("resize",this.handleResize)}},{key:"handleResize",value:function(){this.pointerBBox=this.pointer.getBoundingClientRect()}},{key:"handleScroll",value:function(t){this.scrollY=window.scrollY||document.documentElement.scrollTop||0,this.scrollY<this.viewport.height&&this.transformCursor()}},{key:"handleMove",value:function(t){this.mouse=[t.clientX,t.clientY],this.transformCursor()}},{key:"handleEnter",value:function(){this.pointer.classList.add("hover")}},{key:"handleLeave",value:function(){this.pointer.classList.remove("hover")}},{key:"handleDown",value:function(){this.pointer.classList.add("click")}},{key:"handleUp",value:function(){this.pointer.classList.remove("click")}},{key:"transformCursor",value:function(){this.pointer.style.transform="translate3d("+(this.mouse[0]-.5*this.pointerBBox.width)+"px, "+(this.mouse[1]+this.scrollY-.5*this.pointerBBox.height)+"px, 0)"}}])&&ju(e.prototype,n),r&&ju(e,r),o}(Bu);function Yu(t){return(Yu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Zu(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Ju(t,e){return(Ju=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Qu(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=tc(t);if(e){var i=tc(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Ku(this,n)}}function Ku(t,e){return!e||"object"!==Yu(e)&&"function"!=typeof e?$u(t):e}function $u(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function tc(t){return(tc=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var ec=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Ju(t,e)}(o,t);var e,n,r,i=Qu(o);function o(t,e){var n,r,a,s;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o),n=i.call(this,t,e),r=$u(n),s=function(t){Math.abs(n.current-n.delta)>10&&t.stopPropagation()},(a="handleClick")in r?Object.defineProperty(r,a,{value:s,enumerable:!0,configurable:!0,writable:!0}):r[a]=s,n.handleMove=n.handleMove.bind($u(n)),n.handleResize=n.handleResize.bind($u(n)),n.handleUp=n.handleUp.bind($u(n)),n.handleDown=n.handleDown.bind($u(n)),n.gallery=n.element.querySelector(".gallery"),n.scrollbar=n.element.querySelector(".gallery-scrollbar .inner"),n.left=n.element.querySelector(".arrows .left"),n.right=n.element.querySelector(".arrows .right"),n.slides=Array.from(n.element.querySelectorAll(".item")).map((function(t){return{elem:t,img:t.querySelector(".image"),w:1}})),n.mouse=0,n.start=0,n.max=0,n.current=0,n.delta=0,n}return e=o,(n=[{key:"attach",value:function(){0!=this.slides.length&&(this.handleResize(),this.element.addEventListener("mousedown",this.handleDown),this.element.addEventListener("touchstart",this.handleDown,{passive:!0}),this.element.addEventListener("click",this.handleClick,{capture:!0}),this.left&&this.left.addEventListener("click",this.prev),this.right&&this.right.addEventListener("click",this.next),this.viewport.on("resize",this.handleResize))}},{key:"detach",value:function(){0!=this.slides.length&&(this.element.removeEventListener("mousedown",this.handleDown),this.element.removeEventListener("touchstart",this.handleDown,{passive:!0}),this.element.addEventListener("click",this.handleClick,{capture:!0}),this.left&&this.left.removeEventListener("click",this.prev),this.right&&this.right.removeEventListener("click",this.next),this.viewport.off("resize",this.handleResize))}},{key:"handleResize",value:function(){var t=this;this.max=0,this.slides.forEach((function(e){e.w=e.elem.getBoundingClientRect().width,t.max+=e.w+30})),this.max=this.max+60-this.viewport.width,this.handleMove()}},{key:"handleMove",value:function(t){this.mouse=this.getTouchX(t),this.moveTo(2*(this.mouse-this.start))}},{key:"moveTo",value:function(t){var e=this;this.current=Math.max(Math.min(t,0),-this.max),this.gallery.style.transform="translate3d("+this.current+"px, 0, 0)",this.slides.forEach((function(t){t.img.style.transform="translate3d("+(e.current/e.max*20+10)+"%, 0, 0)"})),this.scrollbar&&(this.scrollbar.style.transform="scaleX("+(-this.current/this.max*.8+.2)+")")}},{key:"handleDown",value:function(t){this.start=this.getTouchX(t)-this.current/2,this.delta=this.current,this.element.addEventListener("mousemove",this.handleMove),this.element.addEventListener("touchmove",this.handleMove,{passive:!0}),window.addEventListener("mouseup",this.handleUp),window.addEventListener("touchend",this.handleUp,{passive:!0})}},{key:"handleUp",value:function(t){this.element.removeEventListener("mousemove",this.handleMove),this.element.removeEventListener("touchmove",this.handleMove),window.removeEventListener("mouseup",this.handleUp),window.removeEventListener("touchend",this.handleUp),this.moveTo(Math.round(this.current/this.max*(this.slides.length-1))*this.max/(this.slides.length-1))}},{key:"getTouchX",value:function(t){return t?t.clientX?t.clientX:t.changedTouches&&t.changedTouches.length?t.changedTouches[0].clientX:0:0}}])&&Zu(e.prototype,n),r&&Zu(e,r),o}(Bu);function nc(t){return(nc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function rc(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function ic(t,e){return(ic=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function oc(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=sc(t);if(e){var i=sc(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return ac(this,n)}}function ac(t,e){return!e||"object"!==nc(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function sc(t){return(sc=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var uc=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&ic(t,e)}(o,t);var e,n,r,i=oc(o);function o(t,e){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o),(n=i.call(this,t,e)).container=n.element.querySelector(".video-container"),n.video=n.element.querySelector(".video"),n}return e=o,(n=[{key:"open",value:function(){}},{key:"close",value:function(){}},{key:"attach",value:function(){this.t=qr.timeline({scrollTrigger:{trigger:this.element,once:!0}}),this.t.fromTo(this.container,{scale:.5},{scale:1,duration:1,ease:"power2.out"},0),this.t.fromTo(this.video,{scale:2},{scale:1,duration:1,ease:"power2.out"},0)}},{key:"detach",value:function(){this.t.kill()}}])&&rc(e.prototype,n),r&&rc(e,r),o}(Bu);function cc(t){return(cc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function lc(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function hc(t,e){return(hc=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function fc(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=mc(t);if(e){var i=mc(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return dc(this,n)}}function dc(t,e){return!e||"object"!==cc(e)&&"function"!=typeof e?pc(t):e}function pc(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function mc(t){return(mc=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var gc=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&hc(t,e)}(o,t);var e,n,r,i=fc(o);function o(t,e){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o),(n=i.call(this,t,e)).next=n.next.bind(pc(n)),n.handleResize=n.handleResize.bind(pc(n)),n.gallery=n.element.querySelector(".gallery"),n.line=n.element.querySelector(".line"),n.infos=Array.from(n.element.querySelectorAll(".infos")),n.slides=Array.from(n.gallery.querySelectorAll(".item")).map((function(t,e){return{elem:t,img:t.querySelector("img"),n:e,infos:{elem:n.infos[e],logo:n.infos[e].querySelector(".logo>span"),adresse:n.infos[e].querySelector(".adresse>span")}}})),n.slides.forEach((function(t){qr.set(t.elem,{zIndex:1}),qr.set(t.infos.elem,{display:"none"},0)})),n.tl=null,n.running=!1,n.current=-1,n.length=n.slides.length,n.width=1,n}return e=o,(n=[{key:"open",value:function(){}},{key:"close",value:function(){}},{key:"attach",value:function(){var t=this;this.handleResize(),this.viewport.on("resize",this.handleResize),this.slides.forEach((function(e){qr.set(e.elem,{x:2*-t.width})})),this.run()}},{key:"detach",value:function(){this.viewport.off("resize",this.handleResize)}},{key:"handleResize",value:function(){var t=this;this.width=this.gallery.getBoundingClientRect().width,this.slides.forEach((function(e){qr.set(e.img,{x:-t.width},0)}))}},{key:"next",value:function(){var t=this;if(this.running){this.tl&&this.tl.clear(),this.tl=qr.timeline();var e=this.slides[this.current],n=(this.current+1)%this.length,r=this.slides[n];this.tl.set(r.elem,{zIndex:1,x:0}),this.tl.set(r.img,{x:0}),e&&this.tl.set(e.elem,{display:"block",zIndex:2}),this.tl.set(this.line,{scaleX:(n+.5)/(this.length-.5)},0);var i=this.viewport.medias.desktop?20:5;e&&this.tl.fromTo(e.infos.logo,{y:0},{y:-50,ease:"power2.in",duration:.5},0),e&&this.tl.fromTo(e.infos.adresse,{y:0},{y:-200,ease:"power2.in",duration:.5},0),e&&this.tl.set(e.infos.elem,{display:"none"},.5),this.tl.set(r.infos.elem,{display:""},.5),this.tl.fromTo(r.infos.logo,{y:50},{y:0,ease:"power2.out",duration:.5},.5),this.tl.fromTo(r.infos.adresse,{y:200},{y:0,ease:"power2.out",duration:.5},.5),e&&this.tl.fromTo(e.elem,{x:0,skewX:-i},{x:2*-this.width,skewX:0,duration:1,ease:"sine.inOut"},0),e&&this.tl.fromTo(e.img,{x:0,skewX:i},{x:.5*this.width,skewX:0,duration:1,ease:"sine.inOut"},0),this.current=n,this.tl.add((function(){t.running&&t.next()}),"+=4")}}},{key:"run",value:function(){this.running=!0,this.next()}},{key:"stop",value:function(){this.running=!1}}])&&lc(e.prototype,n),r&&lc(e,r),o}(Bu);class vc{addEventListener(t,e){void 0===this._listeners&&(this._listeners={});const n=this._listeners;void 0===n[t]&&(n[t]=[]),-1===n[t].indexOf(e)&&n[t].push(e)}hasEventListener(t,e){if(void 0===this._listeners)return!1;const n=this._listeners;return void 0!==n[t]&&-1!==n[t].indexOf(e)}removeEventListener(t,e){if(void 0===this._listeners)return;const n=this._listeners[t];if(void 0!==n){const t=n.indexOf(e);-1!==t&&n.splice(t,1)}}dispatchEvent(t){if(void 0===this._listeners)return;const e=this._listeners[t.type];if(void 0!==e){t.target=this;const n=e.slice(0);for(let e=0,r=n.length;e<r;e++)n[e].call(this,t);t.target=null}}}const yc=[];for(let t=0;t<256;t++)yc[t]=(t<16?"0":"")+t.toString(16);const bc=Math.PI/180,_c=180/Math.PI;function xc(){const t=4294967295*Math.random()|0,e=4294967295*Math.random()|0,n=4294967295*Math.random()|0,r=4294967295*Math.random()|0;return(yc[255&t]+yc[t>>8&255]+yc[t>>16&255]+yc[t>>24&255]+"-"+yc[255&e]+yc[e>>8&255]+"-"+yc[e>>16&15|64]+yc[e>>24&255]+"-"+yc[63&n|128]+yc[n>>8&255]+"-"+yc[n>>16&255]+yc[n>>24&255]+yc[255&r]+yc[r>>8&255]+yc[r>>16&255]+yc[r>>24&255]).toUpperCase()}function wc(t,e,n){return Math.max(e,Math.min(n,t))}function Sc(t,e){return(t%e+e)%e}function Ec(t,e,n){return(1-n)*t+n*e}function Tc(t){return 0==(t&t-1)&&0!==t}function Mc(t){return Math.pow(2,Math.ceil(Math.log(t)/Math.LN2))}function Ac(t){return Math.pow(2,Math.floor(Math.log(t)/Math.LN2))}class Lc{constructor(t=0,e=0){this.x=t,this.y=e}get width(){return this.x}set width(t){this.x=t}get height(){return this.y}set height(t){this.y=t}set(t,e){return this.x=t,this.y=e,this}setScalar(t){return this.x=t,this.y=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setComponent(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y)}copy(t){return this.x=t.x,this.y=t.y,this}add(t,e){return void 0!==e?(console.warn("THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(t,e)):(this.x+=t.x,this.y+=t.y,this)}addScalar(t){return this.x+=t,this.y+=t,this}addVectors(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this}addScaledVector(t,e){return this.x+=t.x*e,this.y+=t.y*e,this}sub(t,e){return void 0!==e?(console.warn("THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(t,e)):(this.x-=t.x,this.y-=t.y,this)}subScalar(t){return this.x-=t,this.y-=t,this}subVectors(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this}multiply(t){return this.x*=t.x,this.y*=t.y,this}multiplyScalar(t){return this.x*=t,this.y*=t,this}divide(t){return this.x/=t.x,this.y/=t.y,this}divideScalar(t){return this.multiplyScalar(1/t)}applyMatrix3(t){const e=this.x,n=this.y,r=t.elements;return this.x=r[0]*e+r[3]*n+r[6],this.y=r[1]*e+r[4]*n+r[7],this}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this}clamp(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this}clampScalar(t,e){return this.x=Math.max(t,Math.min(e,this.x)),this.y=Math.max(t,Math.min(e,this.y)),this}clampLength(t,e){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(t,Math.min(e,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(t){return this.x*t.x+this.y*t.y}cross(t){return this.x*t.y-this.y*t.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}distanceTo(t){return Math.sqrt(this.distanceToSquared(t))}distanceToSquared(t){const e=this.x-t.x,n=this.y-t.y;return e*e+n*n}manhattanDistanceTo(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this}lerpVectors(t,e,n){return this.x=t.x+(e.x-t.x)*n,this.y=t.y+(e.y-t.y)*n,this}equals(t){return t.x===this.x&&t.y===this.y}fromArray(t,e=0){return this.x=t[e],this.y=t[e+1],this}toArray(t=[],e=0){return t[e]=this.x,t[e+1]=this.y,t}fromBufferAttribute(t,e,n){return void 0!==n&&console.warn("THREE.Vector2: offset has been removed from .fromBufferAttribute()."),this.x=t.getX(e),this.y=t.getY(e),this}rotateAround(t,e){const n=Math.cos(e),r=Math.sin(e),i=this.x-t.x,o=this.y-t.y;return this.x=i*n-o*r+t.x,this.y=i*r+o*n+t.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}}Lc.prototype.isVector2=!0;class Dc{constructor(){this.elements=[1,0,0,0,1,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix3: the constructor no longer reads arguments. use .set() instead.")}set(t,e,n,r,i,o,a,s,u){const c=this.elements;return c[0]=t,c[1]=r,c[2]=a,c[3]=e,c[4]=i,c[5]=s,c[6]=n,c[7]=o,c[8]=u,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(t){const e=this.elements,n=t.elements;return e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=n[3],e[4]=n[4],e[5]=n[5],e[6]=n[6],e[7]=n[7],e[8]=n[8],this}extractBasis(t,e,n){return t.setFromMatrix3Column(this,0),e.setFromMatrix3Column(this,1),n.setFromMatrix3Column(this,2),this}setFromMatrix4(t){const e=t.elements;return this.set(e[0],e[4],e[8],e[1],e[5],e[9],e[2],e[6],e[10]),this}multiply(t){return this.multiplyMatrices(this,t)}premultiply(t){return this.multiplyMatrices(t,this)}multiplyMatrices(t,e){const n=t.elements,r=e.elements,i=this.elements,o=n[0],a=n[3],s=n[6],u=n[1],c=n[4],l=n[7],h=n[2],f=n[5],d=n[8],p=r[0],m=r[3],g=r[6],v=r[1],y=r[4],b=r[7],_=r[2],x=r[5],w=r[8];return i[0]=o*p+a*v+s*_,i[3]=o*m+a*y+s*x,i[6]=o*g+a*b+s*w,i[1]=u*p+c*v+l*_,i[4]=u*m+c*y+l*x,i[7]=u*g+c*b+l*w,i[2]=h*p+f*v+d*_,i[5]=h*m+f*y+d*x,i[8]=h*g+f*b+d*w,this}multiplyScalar(t){const e=this.elements;return e[0]*=t,e[3]*=t,e[6]*=t,e[1]*=t,e[4]*=t,e[7]*=t,e[2]*=t,e[5]*=t,e[8]*=t,this}determinant(){const t=this.elements,e=t[0],n=t[1],r=t[2],i=t[3],o=t[4],a=t[5],s=t[6],u=t[7],c=t[8];return e*o*c-e*a*u-n*i*c+n*a*s+r*i*u-r*o*s}invert(){const t=this.elements,e=t[0],n=t[1],r=t[2],i=t[3],o=t[4],a=t[5],s=t[6],u=t[7],c=t[8],l=c*o-a*u,h=a*s-c*i,f=u*i-o*s,d=e*l+n*h+r*f;if(0===d)return this.set(0,0,0,0,0,0,0,0,0);const p=1/d;return t[0]=l*p,t[1]=(r*u-c*n)*p,t[2]=(a*n-r*o)*p,t[3]=h*p,t[4]=(c*e-r*s)*p,t[5]=(r*i-a*e)*p,t[6]=f*p,t[7]=(n*s-u*e)*p,t[8]=(o*e-n*i)*p,this}transpose(){let t;const e=this.elements;return t=e[1],e[1]=e[3],e[3]=t,t=e[2],e[2]=e[6],e[6]=t,t=e[5],e[5]=e[7],e[7]=t,this}getNormalMatrix(t){return this.setFromMatrix4(t).invert().transpose()}transposeIntoArray(t){const e=this.elements;return t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8],this}setUvTransform(t,e,n,r,i,o,a){const s=Math.cos(i),u=Math.sin(i);return this.set(n*s,n*u,-n*(s*o+u*a)+o+t,-r*u,r*s,-r*(-u*o+s*a)+a+e,0,0,1),this}scale(t,e){const n=this.elements;return n[0]*=t,n[3]*=t,n[6]*=t,n[1]*=e,n[4]*=e,n[7]*=e,this}rotate(t){const e=Math.cos(t),n=Math.sin(t),r=this.elements,i=r[0],o=r[3],a=r[6],s=r[1],u=r[4],c=r[7];return r[0]=e*i+n*s,r[3]=e*o+n*u,r[6]=e*a+n*c,r[1]=-n*i+e*s,r[4]=-n*o+e*u,r[7]=-n*a+e*c,this}translate(t,e){const n=this.elements;return n[0]+=t*n[2],n[3]+=t*n[5],n[6]+=t*n[8],n[1]+=e*n[2],n[4]+=e*n[5],n[7]+=e*n[8],this}equals(t){const e=this.elements,n=t.elements;for(let t=0;t<9;t++)if(e[t]!==n[t])return!1;return!0}fromArray(t,e=0){for(let n=0;n<9;n++)this.elements[n]=t[n+e];return this}toArray(t=[],e=0){const n=this.elements;return t[e]=n[0],t[e+1]=n[1],t[e+2]=n[2],t[e+3]=n[3],t[e+4]=n[4],t[e+5]=n[5],t[e+6]=n[6],t[e+7]=n[7],t[e+8]=n[8],t}clone(){return(new this.constructor).fromArray(this.elements)}}let Cc;Dc.prototype.isMatrix3=!0;class Pc{static getDataURL(t){if(/^data:/i.test(t.src))return t.src;if("undefined"==typeof HTMLCanvasElement)return t.src;let e;if(t instanceof HTMLCanvasElement)e=t;else{void 0===Cc&&(Cc=document.createElementNS("http://www.w3.org/1999/xhtml","canvas")),Cc.width=t.width,Cc.height=t.height;const n=Cc.getContext("2d");t instanceof ImageData?n.putImageData(t,0,0):n.drawImage(t,0,0,t.width,t.height),e=Cc}return e.width>2048||e.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",t),e.toDataURL("image/jpeg",.6)):e.toDataURL("image/png")}}let Rc=0;class kc extends vc{constructor(t=kc.DEFAULT_IMAGE,e=kc.DEFAULT_MAPPING,n=1001,r=1001,i=1006,o=1008,a=1023,s=1009,u=1,c=3e3){super(),Object.defineProperty(this,"id",{value:Rc++}),this.uuid=xc(),this.name="",this.image=t,this.mipmaps=[],this.mapping=e,this.wrapS=n,this.wrapT=r,this.magFilter=i,this.minFilter=o,this.anisotropy=u,this.format=a,this.internalFormat=null,this.type=s,this.offset=new Lc(0,0),this.repeat=new Lc(1,1),this.center=new Lc(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new Dc,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=c,this.version=0,this.onUpdate=null}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return(new this.constructor).copy(this)}copy(t){return this.name=t.name,this.image=t.image,this.mipmaps=t.mipmaps.slice(0),this.mapping=t.mapping,this.wrapS=t.wrapS,this.wrapT=t.wrapT,this.magFilter=t.magFilter,this.minFilter=t.minFilter,this.anisotropy=t.anisotropy,this.format=t.format,this.internalFormat=t.internalFormat,this.type=t.type,this.offset.copy(t.offset),this.repeat.copy(t.repeat),this.center.copy(t.center),this.rotation=t.rotation,this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrix.copy(t.matrix),this.generateMipmaps=t.generateMipmaps,this.premultiplyAlpha=t.premultiplyAlpha,this.flipY=t.flipY,this.unpackAlignment=t.unpackAlignment,this.encoding=t.encoding,this}toJSON(t){const e=void 0===t||"string"==typeof t;if(!e&&void 0!==t.textures[this.uuid])return t.textures[this.uuid];const n={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,type:this.type,encoding:this.encoding,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};if(void 0!==this.image){const r=this.image;if(void 0===r.uuid&&(r.uuid=xc()),!e&&void 0===t.images[r.uuid]){let e;if(Array.isArray(r)){e=[];for(let t=0,n=r.length;t<n;t++)r[t].isDataTexture?e.push(Oc(r[t].image)):e.push(Oc(r[t]))}else e=Oc(r);t.images[r.uuid]={uuid:r.uuid,url:e}}n.image=r.uuid}return e||(t.textures[this.uuid]=n),n}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(t){if(300!==this.mapping)return t;if(t.applyMatrix3(this.matrix),t.x<0||t.x>1)switch(this.wrapS){case 1e3:t.x=t.x-Math.floor(t.x);break;case 1001:t.x=t.x<0?0:1;break;case 1002:1===Math.abs(Math.floor(t.x)%2)?t.x=Math.ceil(t.x)-t.x:t.x=t.x-Math.floor(t.x)}if(t.y<0||t.y>1)switch(this.wrapT){case 1e3:t.y=t.y-Math.floor(t.y);break;case 1001:t.y=t.y<0?0:1;break;case 1002:1===Math.abs(Math.floor(t.y)%2)?t.y=Math.ceil(t.y)-t.y:t.y=t.y-Math.floor(t.y)}return this.flipY&&(t.y=1-t.y),t}set needsUpdate(t){!0===t&&this.version++}}function Oc(t){return"undefined"!=typeof HTMLImageElement&&t instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&t instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&t instanceof ImageBitmap?Pc.getDataURL(t):t.data?{data:Array.prototype.slice.call(t.data),width:t.width,height:t.height,type:t.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}kc.DEFAULT_IMAGE=void 0,kc.DEFAULT_MAPPING=300,kc.prototype.isTexture=!0;class Ic{constructor(t=0,e=0,n=0,r=1){this.x=t,this.y=e,this.z=n,this.w=r}get width(){return this.z}set width(t){this.z=t}get height(){return this.w}set height(t){this.w=t}set(t,e,n,r){return this.x=t,this.y=e,this.z=n,this.w=r,this}setScalar(t){return this.x=t,this.y=t,this.z=t,this.w=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setZ(t){return this.z=t,this}setW(t){return this.w=t,this}setComponent(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;case 2:this.z=e;break;case 3:this.w=e;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(t){return this.x=t.x,this.y=t.y,this.z=t.z,this.w=void 0!==t.w?t.w:1,this}add(t,e){return void 0!==e?(console.warn("THREE.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(t,e)):(this.x+=t.x,this.y+=t.y,this.z+=t.z,this.w+=t.w,this)}addScalar(t){return this.x+=t,this.y+=t,this.z+=t,this.w+=t,this}addVectors(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this.z=t.z+e.z,this.w=t.w+e.w,this}addScaledVector(t,e){return this.x+=t.x*e,this.y+=t.y*e,this.z+=t.z*e,this.w+=t.w*e,this}sub(t,e){return void 0!==e?(console.warn("THREE.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(t,e)):(this.x-=t.x,this.y-=t.y,this.z-=t.z,this.w-=t.w,this)}subScalar(t){return this.x-=t,this.y-=t,this.z-=t,this.w-=t,this}subVectors(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this.z=t.z-e.z,this.w=t.w-e.w,this}multiply(t){return this.x*=t.x,this.y*=t.y,this.z*=t.z,this.w*=t.w,this}multiplyScalar(t){return this.x*=t,this.y*=t,this.z*=t,this.w*=t,this}applyMatrix4(t){const e=this.x,n=this.y,r=this.z,i=this.w,o=t.elements;return this.x=o[0]*e+o[4]*n+o[8]*r+o[12]*i,this.y=o[1]*e+o[5]*n+o[9]*r+o[13]*i,this.z=o[2]*e+o[6]*n+o[10]*r+o[14]*i,this.w=o[3]*e+o[7]*n+o[11]*r+o[15]*i,this}divideScalar(t){return this.multiplyScalar(1/t)}setAxisAngleFromQuaternion(t){this.w=2*Math.acos(t.w);const e=Math.sqrt(1-t.w*t.w);return e<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=t.x/e,this.y=t.y/e,this.z=t.z/e),this}setAxisAngleFromRotationMatrix(t){let e,n,r,i;const o=t.elements,a=o[0],s=o[4],u=o[8],c=o[1],l=o[5],h=o[9],f=o[2],d=o[6],p=o[10];if(Math.abs(s-c)<.01&&Math.abs(u-f)<.01&&Math.abs(h-d)<.01){if(Math.abs(s+c)<.1&&Math.abs(u+f)<.1&&Math.abs(h+d)<.1&&Math.abs(a+l+p-3)<.1)return this.set(1,0,0,0),this;e=Math.PI;const t=(a+1)/2,o=(l+1)/2,m=(p+1)/2,g=(s+c)/4,v=(u+f)/4,y=(h+d)/4;return t>o&&t>m?t<.01?(n=0,r=.707106781,i=.707106781):(n=Math.sqrt(t),r=g/n,i=v/n):o>m?o<.01?(n=.707106781,r=0,i=.707106781):(r=Math.sqrt(o),n=g/r,i=y/r):m<.01?(n=.707106781,r=.707106781,i=0):(i=Math.sqrt(m),n=v/i,r=y/i),this.set(n,r,i,e),this}let m=Math.sqrt((d-h)*(d-h)+(u-f)*(u-f)+(c-s)*(c-s));return Math.abs(m)<.001&&(m=1),this.x=(d-h)/m,this.y=(u-f)/m,this.z=(c-s)/m,this.w=Math.acos((a+l+p-1)/2),this}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this.w=Math.min(this.w,t.w),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this.w=Math.max(this.w,t.w),this}clamp(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this.z=Math.max(t.z,Math.min(e.z,this.z)),this.w=Math.max(t.w,Math.min(e.w,this.w)),this}clampScalar(t,e){return this.x=Math.max(t,Math.min(e,this.x)),this.y=Math.max(t,Math.min(e,this.y)),this.z=Math.max(t,Math.min(e,this.z)),this.w=Math.max(t,Math.min(e,this.w)),this}clampLength(t,e){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(t,Math.min(e,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(t){return this.x*t.x+this.y*t.y+this.z*t.z+this.w*t.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this.z+=(t.z-this.z)*e,this.w+=(t.w-this.w)*e,this}lerpVectors(t,e,n){return this.x=t.x+(e.x-t.x)*n,this.y=t.y+(e.y-t.y)*n,this.z=t.z+(e.z-t.z)*n,this.w=t.w+(e.w-t.w)*n,this}equals(t){return t.x===this.x&&t.y===this.y&&t.z===this.z&&t.w===this.w}fromArray(t,e=0){return this.x=t[e],this.y=t[e+1],this.z=t[e+2],this.w=t[e+3],this}toArray(t=[],e=0){return t[e]=this.x,t[e+1]=this.y,t[e+2]=this.z,t[e+3]=this.w,t}fromBufferAttribute(t,e,n){return void 0!==n&&console.warn("THREE.Vector4: offset has been removed from .fromBufferAttribute()."),this.x=t.getX(e),this.y=t.getY(e),this.z=t.getZ(e),this.w=t.getW(e),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}}Ic.prototype.isVector4=!0;class Fc extends vc{constructor(t,e,n){super(),this.width=t,this.height=e,this.depth=1,this.scissor=new Ic(0,0,t,e),this.scissorTest=!1,this.viewport=new Ic(0,0,t,e),n=n||{},this.texture=new kc(void 0,n.mapping,n.wrapS,n.wrapT,n.magFilter,n.minFilter,n.format,n.type,n.anisotropy,n.encoding),this.texture.image={},this.texture.image.width=t,this.texture.image.height=e,this.texture.image.depth=1,this.texture.generateMipmaps=void 0!==n.generateMipmaps&&n.generateMipmaps,this.texture.minFilter=void 0!==n.minFilter?n.minFilter:1006,this.depthBuffer=void 0===n.depthBuffer||n.depthBuffer,this.stencilBuffer=void 0!==n.stencilBuffer&&n.stencilBuffer,this.depthTexture=void 0!==n.depthTexture?n.depthTexture:null}setTexture(t){t.image={width:this.width,height:this.height,depth:this.depth},this.texture=t}setSize(t,e,n=1){this.width===t&&this.height===e&&this.depth===n||(this.width=t,this.height=e,this.depth=n,this.texture.image.width=t,this.texture.image.height=e,this.texture.image.depth=n,this.dispose()),this.viewport.set(0,0,t,e),this.scissor.set(0,0,t,e)}clone(){return(new this.constructor).copy(this)}copy(t){return this.width=t.width,this.height=t.height,this.depth=t.depth,this.viewport.copy(t.viewport),this.texture=t.texture.clone(),this.depthBuffer=t.depthBuffer,this.stencilBuffer=t.stencilBuffer,this.depthTexture=t.depthTexture,this}dispose(){this.dispatchEvent({type:"dispose"})}}Fc.prototype.isWebGLRenderTarget=!0;(class extends Fc{constructor(t,e,n){super(t,e,n),this.samples=4}copy(t){return super.copy.call(this,t),this.samples=t.samples,this}}).prototype.isWebGLMultisampleRenderTarget=!0;class zc{constructor(t=0,e=0,n=0,r=1){this._x=t,this._y=e,this._z=n,this._w=r}static slerp(t,e,n,r){return console.warn("THREE.Quaternion: Static .slerp() has been deprecated. Use qm.slerpQuaternions( qa, qb, t ) instead."),n.slerpQuaternions(t,e,r)}static slerpFlat(t,e,n,r,i,o,a){let s=n[r+0],u=n[r+1],c=n[r+2],l=n[r+3];const h=i[o+0],f=i[o+1],d=i[o+2],p=i[o+3];if(0===a)return t[e+0]=s,t[e+1]=u,t[e+2]=c,void(t[e+3]=l);if(1===a)return t[e+0]=h,t[e+1]=f,t[e+2]=d,void(t[e+3]=p);if(l!==p||s!==h||u!==f||c!==d){let t=1-a;const e=s*h+u*f+c*d+l*p,n=e>=0?1:-1,r=1-e*e;if(r>Number.EPSILON){const i=Math.sqrt(r),o=Math.atan2(i,e*n);t=Math.sin(t*o)/i,a=Math.sin(a*o)/i}const i=a*n;if(s=s*t+h*i,u=u*t+f*i,c=c*t+d*i,l=l*t+p*i,t===1-a){const t=1/Math.sqrt(s*s+u*u+c*c+l*l);s*=t,u*=t,c*=t,l*=t}}t[e]=s,t[e+1]=u,t[e+2]=c,t[e+3]=l}static multiplyQuaternionsFlat(t,e,n,r,i,o){const a=n[r],s=n[r+1],u=n[r+2],c=n[r+3],l=i[o],h=i[o+1],f=i[o+2],d=i[o+3];return t[e]=a*d+c*l+s*f-u*h,t[e+1]=s*d+c*h+u*l-a*f,t[e+2]=u*d+c*f+a*h-s*l,t[e+3]=c*d-a*l-s*h-u*f,t}get x(){return this._x}set x(t){this._x=t,this._onChangeCallback()}get y(){return this._y}set y(t){this._y=t,this._onChangeCallback()}get z(){return this._z}set z(t){this._z=t,this._onChangeCallback()}get w(){return this._w}set w(t){this._w=t,this._onChangeCallback()}set(t,e,n,r){return this._x=t,this._y=e,this._z=n,this._w=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(t){return this._x=t.x,this._y=t.y,this._z=t.z,this._w=t.w,this._onChangeCallback(),this}setFromEuler(t,e){if(!t||!t.isEuler)throw new Error("THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.");const n=t._x,r=t._y,i=t._z,o=t._order,a=Math.cos,s=Math.sin,u=a(n/2),c=a(r/2),l=a(i/2),h=s(n/2),f=s(r/2),d=s(i/2);switch(o){case"XYZ":this._x=h*c*l+u*f*d,this._y=u*f*l-h*c*d,this._z=u*c*d+h*f*l,this._w=u*c*l-h*f*d;break;case"YXZ":this._x=h*c*l+u*f*d,this._y=u*f*l-h*c*d,this._z=u*c*d-h*f*l,this._w=u*c*l+h*f*d;break;case"ZXY":this._x=h*c*l-u*f*d,this._y=u*f*l+h*c*d,this._z=u*c*d+h*f*l,this._w=u*c*l-h*f*d;break;case"ZYX":this._x=h*c*l-u*f*d,this._y=u*f*l+h*c*d,this._z=u*c*d-h*f*l,this._w=u*c*l+h*f*d;break;case"YZX":this._x=h*c*l+u*f*d,this._y=u*f*l+h*c*d,this._z=u*c*d-h*f*l,this._w=u*c*l-h*f*d;break;case"XZY":this._x=h*c*l-u*f*d,this._y=u*f*l-h*c*d,this._z=u*c*d+h*f*l,this._w=u*c*l+h*f*d;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+o)}return!1!==e&&this._onChangeCallback(),this}setFromAxisAngle(t,e){const n=e/2,r=Math.sin(n);return this._x=t.x*r,this._y=t.y*r,this._z=t.z*r,this._w=Math.cos(n),this._onChangeCallback(),this}setFromRotationMatrix(t){const e=t.elements,n=e[0],r=e[4],i=e[8],o=e[1],a=e[5],s=e[9],u=e[2],c=e[6],l=e[10],h=n+a+l;if(h>0){const t=.5/Math.sqrt(h+1);this._w=.25/t,this._x=(c-s)*t,this._y=(i-u)*t,this._z=(o-r)*t}else if(n>a&&n>l){const t=2*Math.sqrt(1+n-a-l);this._w=(c-s)/t,this._x=.25*t,this._y=(r+o)/t,this._z=(i+u)/t}else if(a>l){const t=2*Math.sqrt(1+a-n-l);this._w=(i-u)/t,this._x=(r+o)/t,this._y=.25*t,this._z=(s+c)/t}else{const t=2*Math.sqrt(1+l-n-a);this._w=(o-r)/t,this._x=(i+u)/t,this._y=(s+c)/t,this._z=.25*t}return this._onChangeCallback(),this}setFromUnitVectors(t,e){let n=t.dot(e)+1;return n<Number.EPSILON?(n=0,Math.abs(t.x)>Math.abs(t.z)?(this._x=-t.y,this._y=t.x,this._z=0,this._w=n):(this._x=0,this._y=-t.z,this._z=t.y,this._w=n)):(this._x=t.y*e.z-t.z*e.y,this._y=t.z*e.x-t.x*e.z,this._z=t.x*e.y-t.y*e.x,this._w=n),this.normalize()}angleTo(t){return 2*Math.acos(Math.abs(wc(this.dot(t),-1,1)))}rotateTowards(t,e){const n=this.angleTo(t);if(0===n)return this;const r=Math.min(1,e/n);return this.slerp(t,r),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(t){return this._x*t._x+this._y*t._y+this._z*t._z+this._w*t._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let t=this.length();return 0===t?(this._x=0,this._y=0,this._z=0,this._w=1):(t=1/t,this._x=this._x*t,this._y=this._y*t,this._z=this._z*t,this._w=this._w*t),this._onChangeCallback(),this}multiply(t,e){return void 0!==e?(console.warn("THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."),this.multiplyQuaternions(t,e)):this.multiplyQuaternions(this,t)}premultiply(t){return this.multiplyQuaternions(t,this)}multiplyQuaternions(t,e){const n=t._x,r=t._y,i=t._z,o=t._w,a=e._x,s=e._y,u=e._z,c=e._w;return this._x=n*c+o*a+r*u-i*s,this._y=r*c+o*s+i*a-n*u,this._z=i*c+o*u+n*s-r*a,this._w=o*c-n*a-r*s-i*u,this._onChangeCallback(),this}slerp(t,e){if(0===e)return this;if(1===e)return this.copy(t);const n=this._x,r=this._y,i=this._z,o=this._w;let a=o*t._w+n*t._x+r*t._y+i*t._z;if(a<0?(this._w=-t._w,this._x=-t._x,this._y=-t._y,this._z=-t._z,a=-a):this.copy(t),a>=1)return this._w=o,this._x=n,this._y=r,this._z=i,this;const s=1-a*a;if(s<=Number.EPSILON){const t=1-e;return this._w=t*o+e*this._w,this._x=t*n+e*this._x,this._y=t*r+e*this._y,this._z=t*i+e*this._z,this.normalize(),this._onChangeCallback(),this}const u=Math.sqrt(s),c=Math.atan2(u,a),l=Math.sin((1-e)*c)/u,h=Math.sin(e*c)/u;return this._w=o*l+this._w*h,this._x=n*l+this._x*h,this._y=r*l+this._y*h,this._z=i*l+this._z*h,this._onChangeCallback(),this}slerpQuaternions(t,e,n){this.copy(t).slerp(e,n)}equals(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._w===this._w}fromArray(t,e=0){return this._x=t[e],this._y=t[e+1],this._z=t[e+2],this._w=t[e+3],this._onChangeCallback(),this}toArray(t=[],e=0){return t[e]=this._x,t[e+1]=this._y,t[e+2]=this._z,t[e+3]=this._w,t}fromBufferAttribute(t,e){return this._x=t.getX(e),this._y=t.getY(e),this._z=t.getZ(e),this._w=t.getW(e),this}_onChange(t){return this._onChangeCallback=t,this}_onChangeCallback(){}}zc.prototype.isQuaternion=!0;class Bc{constructor(t=0,e=0,n=0){this.x=t,this.y=e,this.z=n}set(t,e,n){return void 0===n&&(n=this.z),this.x=t,this.y=e,this.z=n,this}setScalar(t){return this.x=t,this.y=t,this.z=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setZ(t){return this.z=t,this}setComponent(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;case 2:this.z=e;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(t){return this.x=t.x,this.y=t.y,this.z=t.z,this}add(t,e){return void 0!==e?(console.warn("THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(t,e)):(this.x+=t.x,this.y+=t.y,this.z+=t.z,this)}addScalar(t){return this.x+=t,this.y+=t,this.z+=t,this}addVectors(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this.z=t.z+e.z,this}addScaledVector(t,e){return this.x+=t.x*e,this.y+=t.y*e,this.z+=t.z*e,this}sub(t,e){return void 0!==e?(console.warn("THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(t,e)):(this.x-=t.x,this.y-=t.y,this.z-=t.z,this)}subScalar(t){return this.x-=t,this.y-=t,this.z-=t,this}subVectors(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this.z=t.z-e.z,this}multiply(t,e){return void 0!==e?(console.warn("THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."),this.multiplyVectors(t,e)):(this.x*=t.x,this.y*=t.y,this.z*=t.z,this)}multiplyScalar(t){return this.x*=t,this.y*=t,this.z*=t,this}multiplyVectors(t,e){return this.x=t.x*e.x,this.y=t.y*e.y,this.z=t.z*e.z,this}applyEuler(t){return t&&t.isEuler||console.error("THREE.Vector3: .applyEuler() now expects an Euler rotation rather than a Vector3 and order."),this.applyQuaternion(Uc.setFromEuler(t))}applyAxisAngle(t,e){return this.applyQuaternion(Uc.setFromAxisAngle(t,e))}applyMatrix3(t){const e=this.x,n=this.y,r=this.z,i=t.elements;return this.x=i[0]*e+i[3]*n+i[6]*r,this.y=i[1]*e+i[4]*n+i[7]*r,this.z=i[2]*e+i[5]*n+i[8]*r,this}applyNormalMatrix(t){return this.applyMatrix3(t).normalize()}applyMatrix4(t){const e=this.x,n=this.y,r=this.z,i=t.elements,o=1/(i[3]*e+i[7]*n+i[11]*r+i[15]);return this.x=(i[0]*e+i[4]*n+i[8]*r+i[12])*o,this.y=(i[1]*e+i[5]*n+i[9]*r+i[13])*o,this.z=(i[2]*e+i[6]*n+i[10]*r+i[14])*o,this}applyQuaternion(t){const e=this.x,n=this.y,r=this.z,i=t.x,o=t.y,a=t.z,s=t.w,u=s*e+o*r-a*n,c=s*n+a*e-i*r,l=s*r+i*n-o*e,h=-i*e-o*n-a*r;return this.x=u*s+h*-i+c*-a-l*-o,this.y=c*s+h*-o+l*-i-u*-a,this.z=l*s+h*-a+u*-o-c*-i,this}project(t){return this.applyMatrix4(t.matrixWorldInverse).applyMatrix4(t.projectionMatrix)}unproject(t){return this.applyMatrix4(t.projectionMatrixInverse).applyMatrix4(t.matrixWorld)}transformDirection(t){const e=this.x,n=this.y,r=this.z,i=t.elements;return this.x=i[0]*e+i[4]*n+i[8]*r,this.y=i[1]*e+i[5]*n+i[9]*r,this.z=i[2]*e+i[6]*n+i[10]*r,this.normalize()}divide(t){return this.x/=t.x,this.y/=t.y,this.z/=t.z,this}divideScalar(t){return this.multiplyScalar(1/t)}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this}clamp(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this.z=Math.max(t.z,Math.min(e.z,this.z)),this}clampScalar(t,e){return this.x=Math.max(t,Math.min(e,this.x)),this.y=Math.max(t,Math.min(e,this.y)),this.z=Math.max(t,Math.min(e,this.z)),this}clampLength(t,e){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(t,Math.min(e,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(t){return this.x*t.x+this.y*t.y+this.z*t.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this.z+=(t.z-this.z)*e,this}lerpVectors(t,e,n){return this.x=t.x+(e.x-t.x)*n,this.y=t.y+(e.y-t.y)*n,this.z=t.z+(e.z-t.z)*n,this}cross(t,e){return void 0!==e?(console.warn("THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."),this.crossVectors(t,e)):this.crossVectors(this,t)}crossVectors(t,e){const n=t.x,r=t.y,i=t.z,o=e.x,a=e.y,s=e.z;return this.x=r*s-i*a,this.y=i*o-n*s,this.z=n*a-r*o,this}projectOnVector(t){const e=t.lengthSq();if(0===e)return this.set(0,0,0);const n=t.dot(this)/e;return this.copy(t).multiplyScalar(n)}projectOnPlane(t){return Nc.copy(this).projectOnVector(t),this.sub(Nc)}reflect(t){return this.sub(Nc.copy(t).multiplyScalar(2*this.dot(t)))}angleTo(t){const e=Math.sqrt(this.lengthSq()*t.lengthSq());if(0===e)return Math.PI/2;const n=this.dot(t)/e;return Math.acos(wc(n,-1,1))}distanceTo(t){return Math.sqrt(this.distanceToSquared(t))}distanceToSquared(t){const e=this.x-t.x,n=this.y-t.y,r=this.z-t.z;return e*e+n*n+r*r}manhattanDistanceTo(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)+Math.abs(this.z-t.z)}setFromSpherical(t){return this.setFromSphericalCoords(t.radius,t.phi,t.theta)}setFromSphericalCoords(t,e,n){const r=Math.sin(e)*t;return this.x=r*Math.sin(n),this.y=Math.cos(e)*t,this.z=r*Math.cos(n),this}setFromCylindrical(t){return this.setFromCylindricalCoords(t.radius,t.theta,t.y)}setFromCylindricalCoords(t,e,n){return this.x=t*Math.sin(e),this.y=n,this.z=t*Math.cos(e),this}setFromMatrixPosition(t){const e=t.elements;return this.x=e[12],this.y=e[13],this.z=e[14],this}setFromMatrixScale(t){const e=this.setFromMatrixColumn(t,0).length(),n=this.setFromMatrixColumn(t,1).length(),r=this.setFromMatrixColumn(t,2).length();return this.x=e,this.y=n,this.z=r,this}setFromMatrixColumn(t,e){return this.fromArray(t.elements,4*e)}setFromMatrix3Column(t,e){return this.fromArray(t.elements,3*e)}equals(t){return t.x===this.x&&t.y===this.y&&t.z===this.z}fromArray(t,e=0){return this.x=t[e],this.y=t[e+1],this.z=t[e+2],this}toArray(t=[],e=0){return t[e]=this.x,t[e+1]=this.y,t[e+2]=this.z,t}fromBufferAttribute(t,e,n){return void 0!==n&&console.warn("THREE.Vector3: offset has been removed from .fromBufferAttribute()."),this.x=t.getX(e),this.y=t.getY(e),this.z=t.getZ(e),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}}Bc.prototype.isVector3=!0;const Nc=new Bc,Uc=new zc;class jc{constructor(t=new Bc(1/0,1/0,1/0),e=new Bc(-1/0,-1/0,-1/0)){this.min=t,this.max=e}set(t,e){return this.min.copy(t),this.max.copy(e),this}setFromArray(t){let e=1/0,n=1/0,r=1/0,i=-1/0,o=-1/0,a=-1/0;for(let s=0,u=t.length;s<u;s+=3){const u=t[s],c=t[s+1],l=t[s+2];u<e&&(e=u),c<n&&(n=c),l<r&&(r=l),u>i&&(i=u),c>o&&(o=c),l>a&&(a=l)}return this.min.set(e,n,r),this.max.set(i,o,a),this}setFromBufferAttribute(t){let e=1/0,n=1/0,r=1/0,i=-1/0,o=-1/0,a=-1/0;for(let s=0,u=t.count;s<u;s++){const u=t.getX(s),c=t.getY(s),l=t.getZ(s);u<e&&(e=u),c<n&&(n=c),l<r&&(r=l),u>i&&(i=u),c>o&&(o=c),l>a&&(a=l)}return this.min.set(e,n,r),this.max.set(i,o,a),this}setFromPoints(t){this.makeEmpty();for(let e=0,n=t.length;e<n;e++)this.expandByPoint(t[e]);return this}setFromCenterAndSize(t,e){const n=Vc.copy(e).multiplyScalar(.5);return this.min.copy(t).sub(n),this.max.copy(t).add(n),this}setFromObject(t){return this.makeEmpty(),this.expandByObject(t)}clone(){return(new this.constructor).copy(this)}copy(t){return this.min.copy(t.min),this.max.copy(t.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(t){return void 0===t&&(console.warn("THREE.Box3: .getCenter() target is now required"),t=new Bc),this.isEmpty()?t.set(0,0,0):t.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(t){return void 0===t&&(console.warn("THREE.Box3: .getSize() target is now required"),t=new Bc),this.isEmpty()?t.set(0,0,0):t.subVectors(this.max,this.min)}expandByPoint(t){return this.min.min(t),this.max.max(t),this}expandByVector(t){return this.min.sub(t),this.max.add(t),this}expandByScalar(t){return this.min.addScalar(-t),this.max.addScalar(t),this}expandByObject(t){t.updateWorldMatrix(!1,!1);const e=t.geometry;void 0!==e&&(null===e.boundingBox&&e.computeBoundingBox(),Gc.copy(e.boundingBox),Gc.applyMatrix4(t.matrixWorld),this.union(Gc));const n=t.children;for(let t=0,e=n.length;t<e;t++)this.expandByObject(n[t]);return this}containsPoint(t){return!(t.x<this.min.x||t.x>this.max.x||t.y<this.min.y||t.y>this.max.y||t.z<this.min.z||t.z>this.max.z)}containsBox(t){return this.min.x<=t.min.x&&t.max.x<=this.max.x&&this.min.y<=t.min.y&&t.max.y<=this.max.y&&this.min.z<=t.min.z&&t.max.z<=this.max.z}getParameter(t,e){return void 0===e&&(console.warn("THREE.Box3: .getParameter() target is now required"),e=new Bc),e.set((t.x-this.min.x)/(this.max.x-this.min.x),(t.y-this.min.y)/(this.max.y-this.min.y),(t.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(t){return!(t.max.x<this.min.x||t.min.x>this.max.x||t.max.y<this.min.y||t.min.y>this.max.y||t.max.z<this.min.z||t.min.z>this.max.z)}intersectsSphere(t){return this.clampPoint(t.center,Vc),Vc.distanceToSquared(t.center)<=t.radius*t.radius}intersectsPlane(t){let e,n;return t.normal.x>0?(e=t.normal.x*this.min.x,n=t.normal.x*this.max.x):(e=t.normal.x*this.max.x,n=t.normal.x*this.min.x),t.normal.y>0?(e+=t.normal.y*this.min.y,n+=t.normal.y*this.max.y):(e+=t.normal.y*this.max.y,n+=t.normal.y*this.min.y),t.normal.z>0?(e+=t.normal.z*this.min.z,n+=t.normal.z*this.max.z):(e+=t.normal.z*this.max.z,n+=t.normal.z*this.min.z),e<=-t.constant&&n>=-t.constant}intersectsTriangle(t){if(this.isEmpty())return!1;this.getCenter(Qc),Kc.subVectors(this.max,Qc),Wc.subVectors(t.a,Qc),qc.subVectors(t.b,Qc),Xc.subVectors(t.c,Qc),Yc.subVectors(qc,Wc),Zc.subVectors(Xc,qc),Jc.subVectors(Wc,Xc);let e=[0,-Yc.z,Yc.y,0,-Zc.z,Zc.y,0,-Jc.z,Jc.y,Yc.z,0,-Yc.x,Zc.z,0,-Zc.x,Jc.z,0,-Jc.x,-Yc.y,Yc.x,0,-Zc.y,Zc.x,0,-Jc.y,Jc.x,0];return!!el(e,Wc,qc,Xc,Kc)&&(e=[1,0,0,0,1,0,0,0,1],!!el(e,Wc,qc,Xc,Kc)&&($c.crossVectors(Yc,Zc),e=[$c.x,$c.y,$c.z],el(e,Wc,qc,Xc,Kc)))}clampPoint(t,e){return void 0===e&&(console.warn("THREE.Box3: .clampPoint() target is now required"),e=new Bc),e.copy(t).clamp(this.min,this.max)}distanceToPoint(t){return Vc.copy(t).clamp(this.min,this.max).sub(t).length()}getBoundingSphere(t){return void 0===t&&console.error("THREE.Box3: .getBoundingSphere() target is now required"),this.getCenter(t.center),t.radius=.5*this.getSize(Vc).length(),t}intersect(t){return this.min.max(t.min),this.max.min(t.max),this.isEmpty()&&this.makeEmpty(),this}union(t){return this.min.min(t.min),this.max.max(t.max),this}applyMatrix4(t){return this.isEmpty()||(Hc[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(t),Hc[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(t),Hc[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(t),Hc[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(t),Hc[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(t),Hc[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(t),Hc[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(t),Hc[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(t),this.setFromPoints(Hc)),this}translate(t){return this.min.add(t),this.max.add(t),this}equals(t){return t.min.equals(this.min)&&t.max.equals(this.max)}}jc.prototype.isBox3=!0;const Hc=[new Bc,new Bc,new Bc,new Bc,new Bc,new Bc,new Bc,new Bc],Vc=new Bc,Gc=new jc,Wc=new Bc,qc=new Bc,Xc=new Bc,Yc=new Bc,Zc=new Bc,Jc=new Bc,Qc=new Bc,Kc=new Bc,$c=new Bc,tl=new Bc;function el(t,e,n,r,i){for(let o=0,a=t.length-3;o<=a;o+=3){tl.fromArray(t,o);const a=i.x*Math.abs(tl.x)+i.y*Math.abs(tl.y)+i.z*Math.abs(tl.z),s=e.dot(tl),u=n.dot(tl),c=r.dot(tl);if(Math.max(-Math.max(s,u,c),Math.min(s,u,c))>a)return!1}return!0}const nl=new jc,rl=new Bc,il=new Bc,ol=new Bc;class al{constructor(t=new Bc,e=-1){this.center=t,this.radius=e}set(t,e){return this.center.copy(t),this.radius=e,this}setFromPoints(t,e){const n=this.center;void 0!==e?n.copy(e):nl.setFromPoints(t).getCenter(n);let r=0;for(let e=0,i=t.length;e<i;e++)r=Math.max(r,n.distanceToSquared(t[e]));return this.radius=Math.sqrt(r),this}copy(t){return this.center.copy(t.center),this.radius=t.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(t){return t.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(t){return t.distanceTo(this.center)-this.radius}intersectsSphere(t){const e=this.radius+t.radius;return t.center.distanceToSquared(this.center)<=e*e}intersectsBox(t){return t.intersectsSphere(this)}intersectsPlane(t){return Math.abs(t.distanceToPoint(this.center))<=this.radius}clampPoint(t,e){const n=this.center.distanceToSquared(t);return void 0===e&&(console.warn("THREE.Sphere: .clampPoint() target is now required"),e=new Bc),e.copy(t),n>this.radius*this.radius&&(e.sub(this.center).normalize(),e.multiplyScalar(this.radius).add(this.center)),e}getBoundingBox(t){return void 0===t&&(console.warn("THREE.Sphere: .getBoundingBox() target is now required"),t=new jc),this.isEmpty()?(t.makeEmpty(),t):(t.set(this.center,this.center),t.expandByScalar(this.radius),t)}applyMatrix4(t){return this.center.applyMatrix4(t),this.radius=this.radius*t.getMaxScaleOnAxis(),this}translate(t){return this.center.add(t),this}expandByPoint(t){ol.subVectors(t,this.center);const e=ol.lengthSq();if(e>this.radius*this.radius){const t=Math.sqrt(e),n=.5*(t-this.radius);this.center.add(ol.multiplyScalar(n/t)),this.radius+=n}return this}union(t){return il.subVectors(t.center,this.center).normalize().multiplyScalar(t.radius),this.expandByPoint(rl.copy(t.center).add(il)),this.expandByPoint(rl.copy(t.center).sub(il)),this}equals(t){return t.center.equals(this.center)&&t.radius===this.radius}clone(){return(new this.constructor).copy(this)}}const sl=new Bc,ul=new Bc,cl=new Bc,ll=new Bc,hl=new Bc,fl=new Bc,dl=new Bc;class pl{constructor(t=new Bc,e=new Bc(0,0,-1)){this.origin=t,this.direction=e}set(t,e){return this.origin.copy(t),this.direction.copy(e),this}copy(t){return this.origin.copy(t.origin),this.direction.copy(t.direction),this}at(t,e){return void 0===e&&(console.warn("THREE.Ray: .at() target is now required"),e=new Bc),e.copy(this.direction).multiplyScalar(t).add(this.origin)}lookAt(t){return this.direction.copy(t).sub(this.origin).normalize(),this}recast(t){return this.origin.copy(this.at(t,sl)),this}closestPointToPoint(t,e){void 0===e&&(console.warn("THREE.Ray: .closestPointToPoint() target is now required"),e=new Bc),e.subVectors(t,this.origin);const n=e.dot(this.direction);return n<0?e.copy(this.origin):e.copy(this.direction).multiplyScalar(n).add(this.origin)}distanceToPoint(t){return Math.sqrt(this.distanceSqToPoint(t))}distanceSqToPoint(t){const e=sl.subVectors(t,this.origin).dot(this.direction);return e<0?this.origin.distanceToSquared(t):(sl.copy(this.direction).multiplyScalar(e).add(this.origin),sl.distanceToSquared(t))}distanceSqToSegment(t,e,n,r){ul.copy(t).add(e).multiplyScalar(.5),cl.copy(e).sub(t).normalize(),ll.copy(this.origin).sub(ul);const i=.5*t.distanceTo(e),o=-this.direction.dot(cl),a=ll.dot(this.direction),s=-ll.dot(cl),u=ll.lengthSq(),c=Math.abs(1-o*o);let l,h,f,d;if(c>0)if(l=o*s-a,h=o*a-s,d=i*c,l>=0)if(h>=-d)if(h<=d){const t=1/c;l*=t,h*=t,f=l*(l+o*h+2*a)+h*(o*l+h+2*s)+u}else h=i,l=Math.max(0,-(o*h+a)),f=-l*l+h*(h+2*s)+u;else h=-i,l=Math.max(0,-(o*h+a)),f=-l*l+h*(h+2*s)+u;else h<=-d?(l=Math.max(0,-(-o*i+a)),h=l>0?-i:Math.min(Math.max(-i,-s),i),f=-l*l+h*(h+2*s)+u):h<=d?(l=0,h=Math.min(Math.max(-i,-s),i),f=h*(h+2*s)+u):(l=Math.max(0,-(o*i+a)),h=l>0?i:Math.min(Math.max(-i,-s),i),f=-l*l+h*(h+2*s)+u);else h=o>0?-i:i,l=Math.max(0,-(o*h+a)),f=-l*l+h*(h+2*s)+u;return n&&n.copy(this.direction).multiplyScalar(l).add(this.origin),r&&r.copy(cl).multiplyScalar(h).add(ul),f}intersectSphere(t,e){sl.subVectors(t.center,this.origin);const n=sl.dot(this.direction),r=sl.dot(sl)-n*n,i=t.radius*t.radius;if(r>i)return null;const o=Math.sqrt(i-r),a=n-o,s=n+o;return a<0&&s<0?null:a<0?this.at(s,e):this.at(a,e)}intersectsSphere(t){return this.distanceSqToPoint(t.center)<=t.radius*t.radius}distanceToPlane(t){const e=t.normal.dot(this.direction);if(0===e)return 0===t.distanceToPoint(this.origin)?0:null;const n=-(this.origin.dot(t.normal)+t.constant)/e;return n>=0?n:null}intersectPlane(t,e){const n=this.distanceToPlane(t);return null===n?null:this.at(n,e)}intersectsPlane(t){const e=t.distanceToPoint(this.origin);if(0===e)return!0;return t.normal.dot(this.direction)*e<0}intersectBox(t,e){let n,r,i,o,a,s;const u=1/this.direction.x,c=1/this.direction.y,l=1/this.direction.z,h=this.origin;return u>=0?(n=(t.min.x-h.x)*u,r=(t.max.x-h.x)*u):(n=(t.max.x-h.x)*u,r=(t.min.x-h.x)*u),c>=0?(i=(t.min.y-h.y)*c,o=(t.max.y-h.y)*c):(i=(t.max.y-h.y)*c,o=(t.min.y-h.y)*c),n>o||i>r?null:((i>n||n!=n)&&(n=i),(o<r||r!=r)&&(r=o),l>=0?(a=(t.min.z-h.z)*l,s=(t.max.z-h.z)*l):(a=(t.max.z-h.z)*l,s=(t.min.z-h.z)*l),n>s||a>r?null:((a>n||n!=n)&&(n=a),(s<r||r!=r)&&(r=s),r<0?null:this.at(n>=0?n:r,e)))}intersectsBox(t){return null!==this.intersectBox(t,sl)}intersectTriangle(t,e,n,r,i){hl.subVectors(e,t),fl.subVectors(n,t),dl.crossVectors(hl,fl);let o,a=this.direction.dot(dl);if(a>0){if(r)return null;o=1}else{if(!(a<0))return null;o=-1,a=-a}ll.subVectors(this.origin,t);const s=o*this.direction.dot(fl.crossVectors(ll,fl));if(s<0)return null;const u=o*this.direction.dot(hl.cross(ll));if(u<0)return null;if(s+u>a)return null;const c=-o*ll.dot(dl);return c<0?null:this.at(c/a,i)}applyMatrix4(t){return this.origin.applyMatrix4(t),this.direction.transformDirection(t),this}equals(t){return t.origin.equals(this.origin)&&t.direction.equals(this.direction)}clone(){return(new this.constructor).copy(this)}}class ml{constructor(){this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.")}set(t,e,n,r,i,o,a,s,u,c,l,h,f,d,p,m){const g=this.elements;return g[0]=t,g[4]=e,g[8]=n,g[12]=r,g[1]=i,g[5]=o,g[9]=a,g[13]=s,g[2]=u,g[6]=c,g[10]=l,g[14]=h,g[3]=f,g[7]=d,g[11]=p,g[15]=m,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return(new ml).fromArray(this.elements)}copy(t){const e=this.elements,n=t.elements;return e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=n[3],e[4]=n[4],e[5]=n[5],e[6]=n[6],e[7]=n[7],e[8]=n[8],e[9]=n[9],e[10]=n[10],e[11]=n[11],e[12]=n[12],e[13]=n[13],e[14]=n[14],e[15]=n[15],this}copyPosition(t){const e=this.elements,n=t.elements;return e[12]=n[12],e[13]=n[13],e[14]=n[14],this}setFromMatrix3(t){const e=t.elements;return this.set(e[0],e[3],e[6],0,e[1],e[4],e[7],0,e[2],e[5],e[8],0,0,0,0,1),this}extractBasis(t,e,n){return t.setFromMatrixColumn(this,0),e.setFromMatrixColumn(this,1),n.setFromMatrixColumn(this,2),this}makeBasis(t,e,n){return this.set(t.x,e.x,n.x,0,t.y,e.y,n.y,0,t.z,e.z,n.z,0,0,0,0,1),this}extractRotation(t){const e=this.elements,n=t.elements,r=1/gl.setFromMatrixColumn(t,0).length(),i=1/gl.setFromMatrixColumn(t,1).length(),o=1/gl.setFromMatrixColumn(t,2).length();return e[0]=n[0]*r,e[1]=n[1]*r,e[2]=n[2]*r,e[3]=0,e[4]=n[4]*i,e[5]=n[5]*i,e[6]=n[6]*i,e[7]=0,e[8]=n[8]*o,e[9]=n[9]*o,e[10]=n[10]*o,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,this}makeRotationFromEuler(t){t&&t.isEuler||console.error("THREE.Matrix4: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.");const e=this.elements,n=t.x,r=t.y,i=t.z,o=Math.cos(n),a=Math.sin(n),s=Math.cos(r),u=Math.sin(r),c=Math.cos(i),l=Math.sin(i);if("XYZ"===t.order){const t=o*c,n=o*l,r=a*c,i=a*l;e[0]=s*c,e[4]=-s*l,e[8]=u,e[1]=n+r*u,e[5]=t-i*u,e[9]=-a*s,e[2]=i-t*u,e[6]=r+n*u,e[10]=o*s}else if("YXZ"===t.order){const t=s*c,n=s*l,r=u*c,i=u*l;e[0]=t+i*a,e[4]=r*a-n,e[8]=o*u,e[1]=o*l,e[5]=o*c,e[9]=-a,e[2]=n*a-r,e[6]=i+t*a,e[10]=o*s}else if("ZXY"===t.order){const t=s*c,n=s*l,r=u*c,i=u*l;e[0]=t-i*a,e[4]=-o*l,e[8]=r+n*a,e[1]=n+r*a,e[5]=o*c,e[9]=i-t*a,e[2]=-o*u,e[6]=a,e[10]=o*s}else if("ZYX"===t.order){const t=o*c,n=o*l,r=a*c,i=a*l;e[0]=s*c,e[4]=r*u-n,e[8]=t*u+i,e[1]=s*l,e[5]=i*u+t,e[9]=n*u-r,e[2]=-u,e[6]=a*s,e[10]=o*s}else if("YZX"===t.order){const t=o*s,n=o*u,r=a*s,i=a*u;e[0]=s*c,e[4]=i-t*l,e[8]=r*l+n,e[1]=l,e[5]=o*c,e[9]=-a*c,e[2]=-u*c,e[6]=n*l+r,e[10]=t-i*l}else if("XZY"===t.order){const t=o*s,n=o*u,r=a*s,i=a*u;e[0]=s*c,e[4]=-l,e[8]=u*c,e[1]=t*l+i,e[5]=o*c,e[9]=n*l-r,e[2]=r*l-n,e[6]=a*c,e[10]=i*l+t}return e[3]=0,e[7]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,this}makeRotationFromQuaternion(t){return this.compose(yl,t,bl)}lookAt(t,e,n){const r=this.elements;return wl.subVectors(t,e),0===wl.lengthSq()&&(wl.z=1),wl.normalize(),_l.crossVectors(n,wl),0===_l.lengthSq()&&(1===Math.abs(n.z)?wl.x+=1e-4:wl.z+=1e-4,wl.normalize(),_l.crossVectors(n,wl)),_l.normalize(),xl.crossVectors(wl,_l),r[0]=_l.x,r[4]=xl.x,r[8]=wl.x,r[1]=_l.y,r[5]=xl.y,r[9]=wl.y,r[2]=_l.z,r[6]=xl.z,r[10]=wl.z,this}multiply(t,e){return void 0!==e?(console.warn("THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead."),this.multiplyMatrices(t,e)):this.multiplyMatrices(this,t)}premultiply(t){return this.multiplyMatrices(t,this)}multiplyMatrices(t,e){const n=t.elements,r=e.elements,i=this.elements,o=n[0],a=n[4],s=n[8],u=n[12],c=n[1],l=n[5],h=n[9],f=n[13],d=n[2],p=n[6],m=n[10],g=n[14],v=n[3],y=n[7],b=n[11],_=n[15],x=r[0],w=r[4],S=r[8],E=r[12],T=r[1],M=r[5],A=r[9],L=r[13],D=r[2],C=r[6],P=r[10],R=r[14],k=r[3],O=r[7],I=r[11],F=r[15];return i[0]=o*x+a*T+s*D+u*k,i[4]=o*w+a*M+s*C+u*O,i[8]=o*S+a*A+s*P+u*I,i[12]=o*E+a*L+s*R+u*F,i[1]=c*x+l*T+h*D+f*k,i[5]=c*w+l*M+h*C+f*O,i[9]=c*S+l*A+h*P+f*I,i[13]=c*E+l*L+h*R+f*F,i[2]=d*x+p*T+m*D+g*k,i[6]=d*w+p*M+m*C+g*O,i[10]=d*S+p*A+m*P+g*I,i[14]=d*E+p*L+m*R+g*F,i[3]=v*x+y*T+b*D+_*k,i[7]=v*w+y*M+b*C+_*O,i[11]=v*S+y*A+b*P+_*I,i[15]=v*E+y*L+b*R+_*F,this}multiplyScalar(t){const e=this.elements;return e[0]*=t,e[4]*=t,e[8]*=t,e[12]*=t,e[1]*=t,e[5]*=t,e[9]*=t,e[13]*=t,e[2]*=t,e[6]*=t,e[10]*=t,e[14]*=t,e[3]*=t,e[7]*=t,e[11]*=t,e[15]*=t,this}determinant(){const t=this.elements,e=t[0],n=t[4],r=t[8],i=t[12],o=t[1],a=t[5],s=t[9],u=t[13],c=t[2],l=t[6],h=t[10],f=t[14];return t[3]*(+i*s*l-r*u*l-i*a*h+n*u*h+r*a*f-n*s*f)+t[7]*(+e*s*f-e*u*h+i*o*h-r*o*f+r*u*c-i*s*c)+t[11]*(+e*u*l-e*a*f-i*o*l+n*o*f+i*a*c-n*u*c)+t[15]*(-r*a*c-e*s*l+e*a*h+r*o*l-n*o*h+n*s*c)}transpose(){const t=this.elements;let e;return e=t[1],t[1]=t[4],t[4]=e,e=t[2],t[2]=t[8],t[8]=e,e=t[6],t[6]=t[9],t[9]=e,e=t[3],t[3]=t[12],t[12]=e,e=t[7],t[7]=t[13],t[13]=e,e=t[11],t[11]=t[14],t[14]=e,this}setPosition(t,e,n){const r=this.elements;return t.isVector3?(r[12]=t.x,r[13]=t.y,r[14]=t.z):(r[12]=t,r[13]=e,r[14]=n),this}invert(){const t=this.elements,e=t[0],n=t[1],r=t[2],i=t[3],o=t[4],a=t[5],s=t[6],u=t[7],c=t[8],l=t[9],h=t[10],f=t[11],d=t[12],p=t[13],m=t[14],g=t[15],v=l*m*u-p*h*u+p*s*f-a*m*f-l*s*g+a*h*g,y=d*h*u-c*m*u-d*s*f+o*m*f+c*s*g-o*h*g,b=c*p*u-d*l*u+d*a*f-o*p*f-c*a*g+o*l*g,_=d*l*s-c*p*s-d*a*h+o*p*h+c*a*m-o*l*m,x=e*v+n*y+r*b+i*_;if(0===x)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const w=1/x;return t[0]=v*w,t[1]=(p*h*i-l*m*i-p*r*f+n*m*f+l*r*g-n*h*g)*w,t[2]=(a*m*i-p*s*i+p*r*u-n*m*u-a*r*g+n*s*g)*w,t[3]=(l*s*i-a*h*i-l*r*u+n*h*u+a*r*f-n*s*f)*w,t[4]=y*w,t[5]=(c*m*i-d*h*i+d*r*f-e*m*f-c*r*g+e*h*g)*w,t[6]=(d*s*i-o*m*i-d*r*u+e*m*u+o*r*g-e*s*g)*w,t[7]=(o*h*i-c*s*i+c*r*u-e*h*u-o*r*f+e*s*f)*w,t[8]=b*w,t[9]=(d*l*i-c*p*i-d*n*f+e*p*f+c*n*g-e*l*g)*w,t[10]=(o*p*i-d*a*i+d*n*u-e*p*u-o*n*g+e*a*g)*w,t[11]=(c*a*i-o*l*i-c*n*u+e*l*u+o*n*f-e*a*f)*w,t[12]=_*w,t[13]=(c*p*r-d*l*r+d*n*h-e*p*h-c*n*m+e*l*m)*w,t[14]=(d*a*r-o*p*r-d*n*s+e*p*s+o*n*m-e*a*m)*w,t[15]=(o*l*r-c*a*r+c*n*s-e*l*s-o*n*h+e*a*h)*w,this}scale(t){const e=this.elements,n=t.x,r=t.y,i=t.z;return e[0]*=n,e[4]*=r,e[8]*=i,e[1]*=n,e[5]*=r,e[9]*=i,e[2]*=n,e[6]*=r,e[10]*=i,e[3]*=n,e[7]*=r,e[11]*=i,this}getMaxScaleOnAxis(){const t=this.elements,e=t[0]*t[0]+t[1]*t[1]+t[2]*t[2],n=t[4]*t[4]+t[5]*t[5]+t[6]*t[6],r=t[8]*t[8]+t[9]*t[9]+t[10]*t[10];return Math.sqrt(Math.max(e,n,r))}makeTranslation(t,e,n){return this.set(1,0,0,t,0,1,0,e,0,0,1,n,0,0,0,1),this}makeRotationX(t){const e=Math.cos(t),n=Math.sin(t);return this.set(1,0,0,0,0,e,-n,0,0,n,e,0,0,0,0,1),this}makeRotationY(t){const e=Math.cos(t),n=Math.sin(t);return this.set(e,0,n,0,0,1,0,0,-n,0,e,0,0,0,0,1),this}makeRotationZ(t){const e=Math.cos(t),n=Math.sin(t);return this.set(e,-n,0,0,n,e,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(t,e){const n=Math.cos(e),r=Math.sin(e),i=1-n,o=t.x,a=t.y,s=t.z,u=i*o,c=i*a;return this.set(u*o+n,u*a-r*s,u*s+r*a,0,u*a+r*s,c*a+n,c*s-r*o,0,u*s-r*a,c*s+r*o,i*s*s+n,0,0,0,0,1),this}makeScale(t,e,n){return this.set(t,0,0,0,0,e,0,0,0,0,n,0,0,0,0,1),this}makeShear(t,e,n){return this.set(1,e,n,0,t,1,n,0,t,e,1,0,0,0,0,1),this}compose(t,e,n){const r=this.elements,i=e._x,o=e._y,a=e._z,s=e._w,u=i+i,c=o+o,l=a+a,h=i*u,f=i*c,d=i*l,p=o*c,m=o*l,g=a*l,v=s*u,y=s*c,b=s*l,_=n.x,x=n.y,w=n.z;return r[0]=(1-(p+g))*_,r[1]=(f+b)*_,r[2]=(d-y)*_,r[3]=0,r[4]=(f-b)*x,r[5]=(1-(h+g))*x,r[6]=(m+v)*x,r[7]=0,r[8]=(d+y)*w,r[9]=(m-v)*w,r[10]=(1-(h+p))*w,r[11]=0,r[12]=t.x,r[13]=t.y,r[14]=t.z,r[15]=1,this}decompose(t,e,n){const r=this.elements;let i=gl.set(r[0],r[1],r[2]).length();const o=gl.set(r[4],r[5],r[6]).length(),a=gl.set(r[8],r[9],r[10]).length();this.determinant()<0&&(i=-i),t.x=r[12],t.y=r[13],t.z=r[14],vl.copy(this);const s=1/i,u=1/o,c=1/a;return vl.elements[0]*=s,vl.elements[1]*=s,vl.elements[2]*=s,vl.elements[4]*=u,vl.elements[5]*=u,vl.elements[6]*=u,vl.elements[8]*=c,vl.elements[9]*=c,vl.elements[10]*=c,e.setFromRotationMatrix(vl),n.x=i,n.y=o,n.z=a,this}makePerspective(t,e,n,r,i,o){void 0===o&&console.warn("THREE.Matrix4: .makePerspective() has been redefined and has a new signature. Please check the docs.");const a=this.elements,s=2*i/(e-t),u=2*i/(n-r),c=(e+t)/(e-t),l=(n+r)/(n-r),h=-(o+i)/(o-i),f=-2*o*i/(o-i);return a[0]=s,a[4]=0,a[8]=c,a[12]=0,a[1]=0,a[5]=u,a[9]=l,a[13]=0,a[2]=0,a[6]=0,a[10]=h,a[14]=f,a[3]=0,a[7]=0,a[11]=-1,a[15]=0,this}makeOrthographic(t,e,n,r,i,o){const a=this.elements,s=1/(e-t),u=1/(n-r),c=1/(o-i),l=(e+t)*s,h=(n+r)*u,f=(o+i)*c;return a[0]=2*s,a[4]=0,a[8]=0,a[12]=-l,a[1]=0,a[5]=2*u,a[9]=0,a[13]=-h,a[2]=0,a[6]=0,a[10]=-2*c,a[14]=-f,a[3]=0,a[7]=0,a[11]=0,a[15]=1,this}equals(t){const e=this.elements,n=t.elements;for(let t=0;t<16;t++)if(e[t]!==n[t])return!1;return!0}fromArray(t,e=0){for(let n=0;n<16;n++)this.elements[n]=t[n+e];return this}toArray(t=[],e=0){const n=this.elements;return t[e]=n[0],t[e+1]=n[1],t[e+2]=n[2],t[e+3]=n[3],t[e+4]=n[4],t[e+5]=n[5],t[e+6]=n[6],t[e+7]=n[7],t[e+8]=n[8],t[e+9]=n[9],t[e+10]=n[10],t[e+11]=n[11],t[e+12]=n[12],t[e+13]=n[13],t[e+14]=n[14],t[e+15]=n[15],t}}ml.prototype.isMatrix4=!0;const gl=new Bc,vl=new ml,yl=new Bc(0,0,0),bl=new Bc(1,1,1),_l=new Bc,xl=new Bc,wl=new Bc,Sl=new ml,El=new zc;class Tl{constructor(t=0,e=0,n=0,r=Tl.DefaultOrder){this._x=t,this._y=e,this._z=n,this._order=r}get x(){return this._x}set x(t){this._x=t,this._onChangeCallback()}get y(){return this._y}set y(t){this._y=t,this._onChangeCallback()}get z(){return this._z}set z(t){this._z=t,this._onChangeCallback()}get order(){return this._order}set order(t){this._order=t,this._onChangeCallback()}set(t,e,n,r){return this._x=t,this._y=e,this._z=n,this._order=r||this._order,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(t){return this._x=t._x,this._y=t._y,this._z=t._z,this._order=t._order,this._onChangeCallback(),this}setFromRotationMatrix(t,e,n){const r=t.elements,i=r[0],o=r[4],a=r[8],s=r[1],u=r[5],c=r[9],l=r[2],h=r[6],f=r[10];switch(e=e||this._order){case"XYZ":this._y=Math.asin(wc(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(-c,f),this._z=Math.atan2(-o,i)):(this._x=Math.atan2(h,u),this._z=0);break;case"YXZ":this._x=Math.asin(-wc(c,-1,1)),Math.abs(c)<.9999999?(this._y=Math.atan2(a,f),this._z=Math.atan2(s,u)):(this._y=Math.atan2(-l,i),this._z=0);break;case"ZXY":this._x=Math.asin(wc(h,-1,1)),Math.abs(h)<.9999999?(this._y=Math.atan2(-l,f),this._z=Math.atan2(-o,u)):(this._y=0,this._z=Math.atan2(s,i));break;case"ZYX":this._y=Math.asin(-wc(l,-1,1)),Math.abs(l)<.9999999?(this._x=Math.atan2(h,f),this._z=Math.atan2(s,i)):(this._x=0,this._z=Math.atan2(-o,u));break;case"YZX":this._z=Math.asin(wc(s,-1,1)),Math.abs(s)<.9999999?(this._x=Math.atan2(-c,u),this._y=Math.atan2(-l,i)):(this._x=0,this._y=Math.atan2(a,f));break;case"XZY":this._z=Math.asin(-wc(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(h,u),this._y=Math.atan2(a,i)):(this._x=Math.atan2(-c,f),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+e)}return this._order=e,!1!==n&&this._onChangeCallback(),this}setFromQuaternion(t,e,n){return Sl.makeRotationFromQuaternion(t),this.setFromRotationMatrix(Sl,e,n)}setFromVector3(t,e){return this.set(t.x,t.y,t.z,e||this._order)}reorder(t){return El.setFromEuler(this),this.setFromQuaternion(El,t)}equals(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._order===this._order}fromArray(t){return this._x=t[0],this._y=t[1],this._z=t[2],void 0!==t[3]&&(this._order=t[3]),this._onChangeCallback(),this}toArray(t=[],e=0){return t[e]=this._x,t[e+1]=this._y,t[e+2]=this._z,t[e+3]=this._order,t}toVector3(t){return t?t.set(this._x,this._y,this._z):new Bc(this._x,this._y,this._z)}_onChange(t){return this._onChangeCallback=t,this}_onChangeCallback(){}}Tl.prototype.isEuler=!0,Tl.DefaultOrder="XYZ",Tl.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"];class Ml{constructor(){this.mask=1}set(t){this.mask=1<<t|0}enable(t){this.mask|=1<<t|0}enableAll(){this.mask=-1}toggle(t){this.mask^=1<<t|0}disable(t){this.mask&=~(1<<t|0)}disableAll(){this.mask=0}test(t){return 0!=(this.mask&t.mask)}}let Al=0;const Ll=new Bc,Dl=new zc,Cl=new ml,Pl=new Bc,Rl=new Bc,kl=new Bc,Ol=new zc,Il=new Bc(1,0,0),Fl=new Bc(0,1,0),zl=new Bc(0,0,1),Bl={type:"added"},Nl={type:"removed"};class Ul extends vc{constructor(){super(),Object.defineProperty(this,"id",{value:Al++}),this.uuid=xc(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=Ul.DefaultUp.clone();const t=new Bc,e=new Tl,n=new zc,r=new Bc(1,1,1);e._onChange((function(){n.setFromEuler(e,!1)})),n._onChange((function(){e.setFromQuaternion(n,void 0,!1)})),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:t},rotation:{configurable:!0,enumerable:!0,value:e},quaternion:{configurable:!0,enumerable:!0,value:n},scale:{configurable:!0,enumerable:!0,value:r},modelViewMatrix:{value:new ml},normalMatrix:{value:new Dc}}),this.matrix=new ml,this.matrixWorld=new ml,this.matrixAutoUpdate=Ul.DefaultMatrixAutoUpdate,this.matrixWorldNeedsUpdate=!1,this.layers=new Ml,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeRender(){}onAfterRender(){}applyMatrix4(t){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(t),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(t){return this.quaternion.premultiply(t),this}setRotationFromAxisAngle(t,e){this.quaternion.setFromAxisAngle(t,e)}setRotationFromEuler(t){this.quaternion.setFromEuler(t,!0)}setRotationFromMatrix(t){this.quaternion.setFromRotationMatrix(t)}setRotationFromQuaternion(t){this.quaternion.copy(t)}rotateOnAxis(t,e){return Dl.setFromAxisAngle(t,e),this.quaternion.multiply(Dl),this}rotateOnWorldAxis(t,e){return Dl.setFromAxisAngle(t,e),this.quaternion.premultiply(Dl),this}rotateX(t){return this.rotateOnAxis(Il,t)}rotateY(t){return this.rotateOnAxis(Fl,t)}rotateZ(t){return this.rotateOnAxis(zl,t)}translateOnAxis(t,e){return Ll.copy(t).applyQuaternion(this.quaternion),this.position.add(Ll.multiplyScalar(e)),this}translateX(t){return this.translateOnAxis(Il,t)}translateY(t){return this.translateOnAxis(Fl,t)}translateZ(t){return this.translateOnAxis(zl,t)}localToWorld(t){return t.applyMatrix4(this.matrixWorld)}worldToLocal(t){return t.applyMatrix4(Cl.copy(this.matrixWorld).invert())}lookAt(t,e,n){t.isVector3?Pl.copy(t):Pl.set(t,e,n);const r=this.parent;this.updateWorldMatrix(!0,!1),Rl.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?Cl.lookAt(Rl,Pl,this.up):Cl.lookAt(Pl,Rl,this.up),this.quaternion.setFromRotationMatrix(Cl),r&&(Cl.extractRotation(r.matrixWorld),Dl.setFromRotationMatrix(Cl),this.quaternion.premultiply(Dl.invert()))}add(t){if(arguments.length>1){for(let t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return t===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",t),this):(t&&t.isObject3D?(null!==t.parent&&t.parent.remove(t),t.parent=this,this.children.push(t),t.dispatchEvent(Bl)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",t),this)}remove(t){if(arguments.length>1){for(let t=0;t<arguments.length;t++)this.remove(arguments[t]);return this}const e=this.children.indexOf(t);return-1!==e&&(t.parent=null,this.children.splice(e,1),t.dispatchEvent(Nl)),this}clear(){for(let t=0;t<this.children.length;t++){const e=this.children[t];e.parent=null,e.dispatchEvent(Nl)}return this.children.length=0,this}attach(t){return this.updateWorldMatrix(!0,!1),Cl.copy(this.matrixWorld).invert(),null!==t.parent&&(t.parent.updateWorldMatrix(!0,!1),Cl.multiply(t.parent.matrixWorld)),t.applyMatrix4(Cl),this.add(t),t.updateWorldMatrix(!1,!0),this}getObjectById(t){return this.getObjectByProperty("id",t)}getObjectByName(t){return this.getObjectByProperty("name",t)}getObjectByProperty(t,e){if(this[t]===e)return this;for(let n=0,r=this.children.length;n<r;n++){const r=this.children[n].getObjectByProperty(t,e);if(void 0!==r)return r}}getWorldPosition(t){return void 0===t&&(console.warn("THREE.Object3D: .getWorldPosition() target is now required"),t=new Bc),this.updateWorldMatrix(!0,!1),t.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(t){return void 0===t&&(console.warn("THREE.Object3D: .getWorldQuaternion() target is now required"),t=new zc),this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Rl,t,kl),t}getWorldScale(t){return void 0===t&&(console.warn("THREE.Object3D: .getWorldScale() target is now required"),t=new Bc),this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Rl,Ol,t),t}getWorldDirection(t){void 0===t&&(console.warn("THREE.Object3D: .getWorldDirection() target is now required"),t=new Bc),this.updateWorldMatrix(!0,!1);const e=this.matrixWorld.elements;return t.set(e[8],e[9],e[10]).normalize()}raycast(){}traverse(t){t(this);const e=this.children;for(let n=0,r=e.length;n<r;n++)e[n].traverse(t)}traverseVisible(t){if(!1===this.visible)return;t(this);const e=this.children;for(let n=0,r=e.length;n<r;n++)e[n].traverseVisible(t)}traverseAncestors(t){const e=this.parent;null!==e&&(t(e),e.traverseAncestors(t))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(t){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||t)&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,t=!0);const e=this.children;for(let n=0,r=e.length;n<r;n++)e[n].updateMatrixWorld(t)}updateWorldMatrix(t,e){const n=this.parent;if(!0===t&&null!==n&&n.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),!0===e){const t=this.children;for(let e=0,n=t.length;e<n;e++)t[e].updateWorldMatrix(!1,!0)}}toJSON(t){const e=void 0===t||"string"==typeof t,n={};e&&(t={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{}},n.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});const r={};function i(e,n){return void 0===e[n.uuid]&&(e[n.uuid]=n.toJSON(t)),n.uuid}if(r.uuid=this.uuid,r.type=this.type,""!==this.name&&(r.name=this.name),!0===this.castShadow&&(r.castShadow=!0),!0===this.receiveShadow&&(r.receiveShadow=!0),!1===this.visible&&(r.visible=!1),!1===this.frustumCulled&&(r.frustumCulled=!1),0!==this.renderOrder&&(r.renderOrder=this.renderOrder),"{}"!==JSON.stringify(this.userData)&&(r.userData=this.userData),r.layers=this.layers.mask,r.matrix=this.matrix.toArray(),!1===this.matrixAutoUpdate&&(r.matrixAutoUpdate=!1),this.isInstancedMesh&&(r.type="InstancedMesh",r.count=this.count,r.instanceMatrix=this.instanceMatrix.toJSON(),null!==this.instanceColor&&(r.instanceColor=this.instanceColor.toJSON())),this.isMesh||this.isLine||this.isPoints){r.geometry=i(t.geometries,this.geometry);const e=this.geometry.parameters;if(void 0!==e&&void 0!==e.shapes){const n=e.shapes;if(Array.isArray(n))for(let e=0,r=n.length;e<r;e++){const r=n[e];i(t.shapes,r)}else i(t.shapes,n)}}if(this.isSkinnedMesh&&(r.bindMode=this.bindMode,r.bindMatrix=this.bindMatrix.toArray(),void 0!==this.skeleton&&(i(t.skeletons,this.skeleton),r.skeleton=this.skeleton.uuid)),void 0!==this.material)if(Array.isArray(this.material)){const e=[];for(let n=0,r=this.material.length;n<r;n++)e.push(i(t.materials,this.material[n]));r.material=e}else r.material=i(t.materials,this.material);if(this.children.length>0){r.children=[];for(let e=0;e<this.children.length;e++)r.children.push(this.children[e].toJSON(t).object)}if(this.animations.length>0){r.animations=[];for(let e=0;e<this.animations.length;e++){const n=this.animations[e];r.animations.push(i(t.animations,n))}}if(e){const e=o(t.geometries),r=o(t.materials),i=o(t.textures),a=o(t.images),s=o(t.shapes),u=o(t.skeletons),c=o(t.animations);e.length>0&&(n.geometries=e),r.length>0&&(n.materials=r),i.length>0&&(n.textures=i),a.length>0&&(n.images=a),s.length>0&&(n.shapes=s),u.length>0&&(n.skeletons=u),c.length>0&&(n.animations=c)}return n.object=r,n;function o(t){const e=[];for(const n in t){const r=t[n];delete r.metadata,e.push(r)}return e}}clone(t){return(new this.constructor).copy(this,t)}copy(t,e=!0){if(this.name=t.name,this.up.copy(t.up),this.position.copy(t.position),this.rotation.order=t.rotation.order,this.quaternion.copy(t.quaternion),this.scale.copy(t.scale),this.matrix.copy(t.matrix),this.matrixWorld.copy(t.matrixWorld),this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrixWorldNeedsUpdate=t.matrixWorldNeedsUpdate,this.layers.mask=t.layers.mask,this.visible=t.visible,this.castShadow=t.castShadow,this.receiveShadow=t.receiveShadow,this.frustumCulled=t.frustumCulled,this.renderOrder=t.renderOrder,this.userData=JSON.parse(JSON.stringify(t.userData)),!0===e)for(let e=0;e<t.children.length;e++){const n=t.children[e];this.add(n.clone())}return this}}Ul.DefaultUp=new Bc(0,1,0),Ul.DefaultMatrixAutoUpdate=!0,Ul.prototype.isObject3D=!0;const jl=new Bc,Hl=new Bc,Vl=new Dc;class Gl{constructor(t=new Bc(1,0,0),e=0){this.normal=t,this.constant=e}set(t,e){return this.normal.copy(t),this.constant=e,this}setComponents(t,e,n,r){return this.normal.set(t,e,n),this.constant=r,this}setFromNormalAndCoplanarPoint(t,e){return this.normal.copy(t),this.constant=-e.dot(this.normal),this}setFromCoplanarPoints(t,e,n){const r=jl.subVectors(n,e).cross(Hl.subVectors(t,e)).normalize();return this.setFromNormalAndCoplanarPoint(r,t),this}copy(t){return this.normal.copy(t.normal),this.constant=t.constant,this}normalize(){const t=1/this.normal.length();return this.normal.multiplyScalar(t),this.constant*=t,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(t){return this.normal.dot(t)+this.constant}distanceToSphere(t){return this.distanceToPoint(t.center)-t.radius}projectPoint(t,e){return void 0===e&&(console.warn("THREE.Plane: .projectPoint() target is now required"),e=new Bc),e.copy(this.normal).multiplyScalar(-this.distanceToPoint(t)).add(t)}intersectLine(t,e){void 0===e&&(console.warn("THREE.Plane: .intersectLine() target is now required"),e=new Bc);const n=t.delta(jl),r=this.normal.dot(n);if(0===r)return 0===this.distanceToPoint(t.start)?e.copy(t.start):null;const i=-(t.start.dot(this.normal)+this.constant)/r;return i<0||i>1?null:e.copy(n).multiplyScalar(i).add(t.start)}intersectsLine(t){const e=this.distanceToPoint(t.start),n=this.distanceToPoint(t.end);return e<0&&n>0||n<0&&e>0}intersectsBox(t){return t.intersectsPlane(this)}intersectsSphere(t){return t.intersectsPlane(this)}coplanarPoint(t){return void 0===t&&(console.warn("THREE.Plane: .coplanarPoint() target is now required"),t=new Bc),t.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(t,e){const n=e||Vl.getNormalMatrix(t),r=this.coplanarPoint(jl).applyMatrix4(t),i=this.normal.applyMatrix3(n).normalize();return this.constant=-r.dot(i),this}translate(t){return this.constant-=t.dot(this.normal),this}equals(t){return t.normal.equals(this.normal)&&t.constant===this.constant}clone(){return(new this.constructor).copy(this)}}Gl.prototype.isPlane=!0;const Wl=new Bc,ql=new Bc,Xl=new Bc,Yl=new Bc,Zl=new Bc,Jl=new Bc,Ql=new Bc,Kl=new Bc,$l=new Bc,th=new Bc;class eh{constructor(t=new Bc,e=new Bc,n=new Bc){this.a=t,this.b=e,this.c=n}static getNormal(t,e,n,r){void 0===r&&(console.warn("THREE.Triangle: .getNormal() target is now required"),r=new Bc),r.subVectors(n,e),Wl.subVectors(t,e),r.cross(Wl);const i=r.lengthSq();return i>0?r.multiplyScalar(1/Math.sqrt(i)):r.set(0,0,0)}static getBarycoord(t,e,n,r,i){Wl.subVectors(r,e),ql.subVectors(n,e),Xl.subVectors(t,e);const o=Wl.dot(Wl),a=Wl.dot(ql),s=Wl.dot(Xl),u=ql.dot(ql),c=ql.dot(Xl),l=o*u-a*a;if(void 0===i&&(console.warn("THREE.Triangle: .getBarycoord() target is now required"),i=new Bc),0===l)return i.set(-2,-1,-1);const h=1/l,f=(u*s-a*c)*h,d=(o*c-a*s)*h;return i.set(1-f-d,d,f)}static containsPoint(t,e,n,r){return this.getBarycoord(t,e,n,r,Yl),Yl.x>=0&&Yl.y>=0&&Yl.x+Yl.y<=1}static getUV(t,e,n,r,i,o,a,s){return this.getBarycoord(t,e,n,r,Yl),s.set(0,0),s.addScaledVector(i,Yl.x),s.addScaledVector(o,Yl.y),s.addScaledVector(a,Yl.z),s}static isFrontFacing(t,e,n,r){return Wl.subVectors(n,e),ql.subVectors(t,e),Wl.cross(ql).dot(r)<0}set(t,e,n){return this.a.copy(t),this.b.copy(e),this.c.copy(n),this}setFromPointsAndIndices(t,e,n,r){return this.a.copy(t[e]),this.b.copy(t[n]),this.c.copy(t[r]),this}clone(){return(new this.constructor).copy(this)}copy(t){return this.a.copy(t.a),this.b.copy(t.b),this.c.copy(t.c),this}getArea(){return Wl.subVectors(this.c,this.b),ql.subVectors(this.a,this.b),.5*Wl.cross(ql).length()}getMidpoint(t){return void 0===t&&(console.warn("THREE.Triangle: .getMidpoint() target is now required"),t=new Bc),t.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(t){return eh.getNormal(this.a,this.b,this.c,t)}getPlane(t){return void 0===t&&(console.warn("THREE.Triangle: .getPlane() target is now required"),t=new Gl),t.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(t,e){return eh.getBarycoord(t,this.a,this.b,this.c,e)}getUV(t,e,n,r,i){return eh.getUV(t,this.a,this.b,this.c,e,n,r,i)}containsPoint(t){return eh.containsPoint(t,this.a,this.b,this.c)}isFrontFacing(t){return eh.isFrontFacing(this.a,this.b,this.c,t)}intersectsBox(t){return t.intersectsTriangle(this)}closestPointToPoint(t,e){void 0===e&&(console.warn("THREE.Triangle: .closestPointToPoint() target is now required"),e=new Bc);const n=this.a,r=this.b,i=this.c;let o,a;Zl.subVectors(r,n),Jl.subVectors(i,n),Kl.subVectors(t,n);const s=Zl.dot(Kl),u=Jl.dot(Kl);if(s<=0&&u<=0)return e.copy(n);$l.subVectors(t,r);const c=Zl.dot($l),l=Jl.dot($l);if(c>=0&&l<=c)return e.copy(r);const h=s*l-c*u;if(h<=0&&s>=0&&c<=0)return o=s/(s-c),e.copy(n).addScaledVector(Zl,o);th.subVectors(t,i);const f=Zl.dot(th),d=Jl.dot(th);if(d>=0&&f<=d)return e.copy(i);const p=f*u-s*d;if(p<=0&&u>=0&&d<=0)return a=u/(u-d),e.copy(n).addScaledVector(Jl,a);const m=c*d-f*l;if(m<=0&&l-c>=0&&f-d>=0)return Ql.subVectors(i,r),a=(l-c)/(l-c+(f-d)),e.copy(r).addScaledVector(Ql,a);const g=1/(m+p+h);return o=p*g,a=h*g,e.copy(n).addScaledVector(Zl,o).addScaledVector(Jl,a)}equals(t){return t.a.equals(this.a)&&t.b.equals(this.b)&&t.c.equals(this.c)}}let nh=0;function rh(){Object.defineProperty(this,"id",{value:nh++}),this.uuid=xc(),this.name="",this.type="Material",this.fog=!0,this.blending=1,this.side=0,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.blendSrc=204,this.blendDst=205,this.blendEquation=100,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=3,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=519,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=7680,this.stencilZFail=7680,this.stencilZPass=7680,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaTest=0,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0}rh.prototype=Object.assign(Object.create(vc.prototype),{constructor:rh,isMaterial:!0,onBuild:function(){},onBeforeCompile:function(){},customProgramCacheKey:function(){return this.onBeforeCompile.toString()},setValues:function(t){if(void 0!==t)for(const e in t){const n=t[e];if(void 0===n){console.warn("THREE.Material: '"+e+"' parameter is undefined.");continue}if("shading"===e){console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=1===n;continue}const r=this[e];void 0!==r?r&&r.isColor?r.set(n):r&&r.isVector3&&n&&n.isVector3?r.copy(n):this[e]=n:console.warn("THREE."+this.type+": '"+e+"' is not a property of this material.")}},toJSON:function(t){const e=void 0===t||"string"==typeof t;e&&(t={textures:{},images:{}});const n={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};function r(t){const e=[];for(const n in t){const r=t[n];delete r.metadata,e.push(r)}return e}if(n.uuid=this.uuid,n.type=this.type,""!==this.name&&(n.name=this.name),this.color&&this.color.isColor&&(n.color=this.color.getHex()),void 0!==this.roughness&&(n.roughness=this.roughness),void 0!==this.metalness&&(n.metalness=this.metalness),this.sheen&&this.sheen.isColor&&(n.sheen=this.sheen.getHex()),this.emissive&&this.emissive.isColor&&(n.emissive=this.emissive.getHex()),this.emissiveIntensity&&1!==this.emissiveIntensity&&(n.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(n.specular=this.specular.getHex()),void 0!==this.shininess&&(n.shininess=this.shininess),void 0!==this.clearcoat&&(n.clearcoat=this.clearcoat),void 0!==this.clearcoatRoughness&&(n.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(n.clearcoatMap=this.clearcoatMap.toJSON(t).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(n.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(t).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(n.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(t).uuid,n.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.map&&this.map.isTexture&&(n.map=this.map.toJSON(t).uuid),this.matcap&&this.matcap.isTexture&&(n.matcap=this.matcap.toJSON(t).uuid),this.alphaMap&&this.alphaMap.isTexture&&(n.alphaMap=this.alphaMap.toJSON(t).uuid),this.lightMap&&this.lightMap.isTexture&&(n.lightMap=this.lightMap.toJSON(t).uuid,n.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(n.aoMap=this.aoMap.toJSON(t).uuid,n.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(n.bumpMap=this.bumpMap.toJSON(t).uuid,n.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(n.normalMap=this.normalMap.toJSON(t).uuid,n.normalMapType=this.normalMapType,n.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(n.displacementMap=this.displacementMap.toJSON(t).uuid,n.displacementScale=this.displacementScale,n.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(n.roughnessMap=this.roughnessMap.toJSON(t).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(n.metalnessMap=this.metalnessMap.toJSON(t).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(n.emissiveMap=this.emissiveMap.toJSON(t).uuid),this.specularMap&&this.specularMap.isTexture&&(n.specularMap=this.specularMap.toJSON(t).uuid),this.envMap&&this.envMap.isTexture&&(n.envMap=this.envMap.toJSON(t).uuid,void 0!==this.combine&&(n.combine=this.combine)),void 0!==this.envMapIntensity&&(n.envMapIntensity=this.envMapIntensity),void 0!==this.reflectivity&&(n.reflectivity=this.reflectivity),void 0!==this.refractionRatio&&(n.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(n.gradientMap=this.gradientMap.toJSON(t).uuid),void 0!==this.size&&(n.size=this.size),null!==this.shadowSide&&(n.shadowSide=this.shadowSide),void 0!==this.sizeAttenuation&&(n.sizeAttenuation=this.sizeAttenuation),1!==this.blending&&(n.blending=this.blending),0!==this.side&&(n.side=this.side),this.vertexColors&&(n.vertexColors=!0),this.opacity<1&&(n.opacity=this.opacity),!0===this.transparent&&(n.transparent=this.transparent),n.depthFunc=this.depthFunc,n.depthTest=this.depthTest,n.depthWrite=this.depthWrite,n.colorWrite=this.colorWrite,n.stencilWrite=this.stencilWrite,n.stencilWriteMask=this.stencilWriteMask,n.stencilFunc=this.stencilFunc,n.stencilRef=this.stencilRef,n.stencilFuncMask=this.stencilFuncMask,n.stencilFail=this.stencilFail,n.stencilZFail=this.stencilZFail,n.stencilZPass=this.stencilZPass,this.rotation&&0!==this.rotation&&(n.rotation=this.rotation),!0===this.polygonOffset&&(n.polygonOffset=!0),0!==this.polygonOffsetFactor&&(n.polygonOffsetFactor=this.polygonOffsetFactor),0!==this.polygonOffsetUnits&&(n.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth&&1!==this.linewidth&&(n.linewidth=this.linewidth),void 0!==this.dashSize&&(n.dashSize=this.dashSize),void 0!==this.gapSize&&(n.gapSize=this.gapSize),void 0!==this.scale&&(n.scale=this.scale),!0===this.dithering&&(n.dithering=!0),this.alphaTest>0&&(n.alphaTest=this.alphaTest),!0===this.alphaToCoverage&&(n.alphaToCoverage=this.alphaToCoverage),!0===this.premultipliedAlpha&&(n.premultipliedAlpha=this.premultipliedAlpha),!0===this.wireframe&&(n.wireframe=this.wireframe),this.wireframeLinewidth>1&&(n.wireframeLinewidth=this.wireframeLinewidth),"round"!==this.wireframeLinecap&&(n.wireframeLinecap=this.wireframeLinecap),"round"!==this.wireframeLinejoin&&(n.wireframeLinejoin=this.wireframeLinejoin),!0===this.morphTargets&&(n.morphTargets=!0),!0===this.morphNormals&&(n.morphNormals=!0),!0===this.skinning&&(n.skinning=!0),!0===this.flatShading&&(n.flatShading=this.flatShading),!1===this.visible&&(n.visible=!1),!1===this.toneMapped&&(n.toneMapped=!1),"{}"!==JSON.stringify(this.userData)&&(n.userData=this.userData),e){const e=r(t.textures),i=r(t.images);e.length>0&&(n.textures=e),i.length>0&&(n.images=i)}return n},clone:function(){return(new this.constructor).copy(this)},copy:function(t){this.name=t.name,this.fog=t.fog,this.blending=t.blending,this.side=t.side,this.vertexColors=t.vertexColors,this.opacity=t.opacity,this.transparent=t.transparent,this.blendSrc=t.blendSrc,this.blendDst=t.blendDst,this.blendEquation=t.blendEquation,this.blendSrcAlpha=t.blendSrcAlpha,this.blendDstAlpha=t.blendDstAlpha,this.blendEquationAlpha=t.blendEquationAlpha,this.depthFunc=t.depthFunc,this.depthTest=t.depthTest,this.depthWrite=t.depthWrite,this.stencilWriteMask=t.stencilWriteMask,this.stencilFunc=t.stencilFunc,this.stencilRef=t.stencilRef,this.stencilFuncMask=t.stencilFuncMask,this.stencilFail=t.stencilFail,this.stencilZFail=t.stencilZFail,this.stencilZPass=t.stencilZPass,this.stencilWrite=t.stencilWrite;const e=t.clippingPlanes;let n=null;if(null!==e){const t=e.length;n=new Array(t);for(let r=0;r!==t;++r)n[r]=e[r].clone()}return this.clippingPlanes=n,this.clipIntersection=t.clipIntersection,this.clipShadows=t.clipShadows,this.shadowSide=t.shadowSide,this.colorWrite=t.colorWrite,this.precision=t.precision,this.polygonOffset=t.polygonOffset,this.polygonOffsetFactor=t.polygonOffsetFactor,this.polygonOffsetUnits=t.polygonOffsetUnits,this.dithering=t.dithering,this.alphaTest=t.alphaTest,this.alphaToCoverage=t.alphaToCoverage,this.premultipliedAlpha=t.premultipliedAlpha,this.visible=t.visible,this.toneMapped=t.toneMapped,this.userData=JSON.parse(JSON.stringify(t.userData)),this},dispose:function(){this.dispatchEvent({type:"dispose"})}}),Object.defineProperty(rh.prototype,"needsUpdate",{set:function(t){!0===t&&this.version++}});const ih={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},oh={h:0,s:0,l:0},ah={h:0,s:0,l:0};function sh(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+6*(e-t)*n:n<.5?e:n<2/3?t+6*(e-t)*(2/3-n):t}function uh(t){return t<.04045?.0773993808*t:Math.pow(.9478672986*t+.0521327014,2.4)}function ch(t){return t<.0031308?12.92*t:1.055*Math.pow(t,.41666)-.055}class lh{constructor(t,e,n){return void 0===e&&void 0===n?this.set(t):this.setRGB(t,e,n)}set(t){return t&&t.isColor?this.copy(t):"number"==typeof t?this.setHex(t):"string"==typeof t&&this.setStyle(t),this}setScalar(t){return this.r=t,this.g=t,this.b=t,this}setHex(t){return t=Math.floor(t),this.r=(t>>16&255)/255,this.g=(t>>8&255)/255,this.b=(255&t)/255,this}setRGB(t,e,n){return this.r=t,this.g=e,this.b=n,this}setHSL(t,e,n){if(t=Sc(t,1),e=wc(e,0,1),n=wc(n,0,1),0===e)this.r=this.g=this.b=n;else{const r=n<=.5?n*(1+e):n+e-n*e,i=2*n-r;this.r=sh(i,r,t+1/3),this.g=sh(i,r,t),this.b=sh(i,r,t-1/3)}return this}setStyle(t){function e(e){void 0!==e&&parseFloat(e)<1&&console.warn("THREE.Color: Alpha component of "+t+" will be ignored.")}let n;if(n=/^((?:rgb|hsl)a?)\(([^\)]*)\)/.exec(t)){let t;const r=n[1],i=n[2];switch(r){case"rgb":case"rgba":if(t=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(i))return this.r=Math.min(255,parseInt(t[1],10))/255,this.g=Math.min(255,parseInt(t[2],10))/255,this.b=Math.min(255,parseInt(t[3],10))/255,e(t[4]),this;if(t=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(i))return this.r=Math.min(100,parseInt(t[1],10))/100,this.g=Math.min(100,parseInt(t[2],10))/100,this.b=Math.min(100,parseInt(t[3],10))/100,e(t[4]),this;break;case"hsl":case"hsla":if(t=/^\s*(\d*\.?\d+)\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(i)){const n=parseFloat(t[1])/360,r=parseInt(t[2],10)/100,i=parseInt(t[3],10)/100;return e(t[4]),this.setHSL(n,r,i)}}}else if(n=/^\#([A-Fa-f\d]+)$/.exec(t)){const t=n[1],e=t.length;if(3===e)return this.r=parseInt(t.charAt(0)+t.charAt(0),16)/255,this.g=parseInt(t.charAt(1)+t.charAt(1),16)/255,this.b=parseInt(t.charAt(2)+t.charAt(2),16)/255,this;if(6===e)return this.r=parseInt(t.charAt(0)+t.charAt(1),16)/255,this.g=parseInt(t.charAt(2)+t.charAt(3),16)/255,this.b=parseInt(t.charAt(4)+t.charAt(5),16)/255,this}return t&&t.length>0?this.setColorName(t):this}setColorName(t){const e=ih[t.toLowerCase()];return void 0!==e?this.setHex(e):console.warn("THREE.Color: Unknown color "+t),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(t){return this.r=t.r,this.g=t.g,this.b=t.b,this}copyGammaToLinear(t,e=2){return this.r=Math.pow(t.r,e),this.g=Math.pow(t.g,e),this.b=Math.pow(t.b,e),this}copyLinearToGamma(t,e=2){const n=e>0?1/e:1;return this.r=Math.pow(t.r,n),this.g=Math.pow(t.g,n),this.b=Math.pow(t.b,n),this}convertGammaToLinear(t){return this.copyGammaToLinear(this,t),this}convertLinearToGamma(t){return this.copyLinearToGamma(this,t),this}copySRGBToLinear(t){return this.r=uh(t.r),this.g=uh(t.g),this.b=uh(t.b),this}copyLinearToSRGB(t){return this.r=ch(t.r),this.g=ch(t.g),this.b=ch(t.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(){return 255*this.r<<16^255*this.g<<8^255*this.b<<0}getHexString(){return("000000"+this.getHex().toString(16)).slice(-6)}getHSL(t){void 0===t&&(console.warn("THREE.Color: .getHSL() target is now required"),t={h:0,s:0,l:0});const e=this.r,n=this.g,r=this.b,i=Math.max(e,n,r),o=Math.min(e,n,r);let a,s;const u=(o+i)/2;if(o===i)a=0,s=0;else{const t=i-o;switch(s=u<=.5?t/(i+o):t/(2-i-o),i){case e:a=(n-r)/t+(n<r?6:0);break;case n:a=(r-e)/t+2;break;case r:a=(e-n)/t+4}a/=6}return t.h=a,t.s=s,t.l=u,t}getStyle(){return"rgb("+(255*this.r|0)+","+(255*this.g|0)+","+(255*this.b|0)+")"}offsetHSL(t,e,n){return this.getHSL(oh),oh.h+=t,oh.s+=e,oh.l+=n,this.setHSL(oh.h,oh.s,oh.l),this}add(t){return this.r+=t.r,this.g+=t.g,this.b+=t.b,this}addColors(t,e){return this.r=t.r+e.r,this.g=t.g+e.g,this.b=t.b+e.b,this}addScalar(t){return this.r+=t,this.g+=t,this.b+=t,this}sub(t){return this.r=Math.max(0,this.r-t.r),this.g=Math.max(0,this.g-t.g),this.b=Math.max(0,this.b-t.b),this}multiply(t){return this.r*=t.r,this.g*=t.g,this.b*=t.b,this}multiplyScalar(t){return this.r*=t,this.g*=t,this.b*=t,this}lerp(t,e){return this.r+=(t.r-this.r)*e,this.g+=(t.g-this.g)*e,this.b+=(t.b-this.b)*e,this}lerpColors(t,e,n){return this.r=t.r+(e.r-t.r)*n,this.g=t.g+(e.g-t.g)*n,this.b=t.b+(e.b-t.b)*n,this}lerpHSL(t,e){this.getHSL(oh),t.getHSL(ah);const n=Ec(oh.h,ah.h,e),r=Ec(oh.s,ah.s,e),i=Ec(oh.l,ah.l,e);return this.setHSL(n,r,i),this}equals(t){return t.r===this.r&&t.g===this.g&&t.b===this.b}fromArray(t,e=0){return this.r=t[e],this.g=t[e+1],this.b=t[e+2],this}toArray(t=[],e=0){return t[e]=this.r,t[e+1]=this.g,t[e+2]=this.b,t}fromBufferAttribute(t,e){return this.r=t.getX(e),this.g=t.getY(e),this.b=t.getZ(e),!0===t.normalized&&(this.r/=255,this.g/=255,this.b/=255),this}toJSON(){return this.getHex()}}lh.NAMES=ih,lh.prototype.isColor=!0,lh.prototype.r=1,lh.prototype.g=1,lh.prototype.b=1;class hh extends rh{constructor(t){super(),this.type="MeshBasicMaterial",this.color=new lh(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=0,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this}}hh.prototype.isMeshBasicMaterial=!0;const fh=new Bc,dh=new Lc;class ph{constructor(t,e,n){if(Array.isArray(t))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.name="",this.array=t,this.itemSize=e,this.count=void 0!==t?t.length/e:0,this.normalized=!0===n,this.usage=35044,this.updateRange={offset:0,count:-1},this.version=0,this.onUploadCallback=function(){}}set needsUpdate(t){!0===t&&this.version++}setUsage(t){return this.usage=t,this}copy(t){return this.name=t.name,this.array=new t.array.constructor(t.array),this.itemSize=t.itemSize,this.count=t.count,this.normalized=t.normalized,this.usage=t.usage,this}copyAt(t,e,n){t*=this.itemSize,n*=e.itemSize;for(let r=0,i=this.itemSize;r<i;r++)this.array[t+r]=e.array[n+r];return this}copyArray(t){return this.array.set(t),this}copyColorsArray(t){const e=this.array;let n=0;for(let r=0,i=t.length;r<i;r++){let i=t[r];void 0===i&&(console.warn("THREE.BufferAttribute.copyColorsArray(): color is undefined",r),i=new lh),e[n++]=i.r,e[n++]=i.g,e[n++]=i.b}return this}copyVector2sArray(t){const e=this.array;let n=0;for(let r=0,i=t.length;r<i;r++){let i=t[r];void 0===i&&(console.warn("THREE.BufferAttribute.copyVector2sArray(): vector is undefined",r),i=new Lc),e[n++]=i.x,e[n++]=i.y}return this}copyVector3sArray(t){const e=this.array;let n=0;for(let r=0,i=t.length;r<i;r++){let i=t[r];void 0===i&&(console.warn("THREE.BufferAttribute.copyVector3sArray(): vector is undefined",r),i=new Bc),e[n++]=i.x,e[n++]=i.y,e[n++]=i.z}return this}copyVector4sArray(t){const e=this.array;let n=0;for(let r=0,i=t.length;r<i;r++){let i=t[r];void 0===i&&(console.warn("THREE.BufferAttribute.copyVector4sArray(): vector is undefined",r),i=new Ic),e[n++]=i.x,e[n++]=i.y,e[n++]=i.z,e[n++]=i.w}return this}applyMatrix3(t){if(2===this.itemSize)for(let e=0,n=this.count;e<n;e++)dh.fromBufferAttribute(this,e),dh.applyMatrix3(t),this.setXY(e,dh.x,dh.y);else if(3===this.itemSize)for(let e=0,n=this.count;e<n;e++)fh.fromBufferAttribute(this,e),fh.applyMatrix3(t),this.setXYZ(e,fh.x,fh.y,fh.z);return this}applyMatrix4(t){for(let e=0,n=this.count;e<n;e++)fh.x=this.getX(e),fh.y=this.getY(e),fh.z=this.getZ(e),fh.applyMatrix4(t),this.setXYZ(e,fh.x,fh.y,fh.z);return this}applyNormalMatrix(t){for(let e=0,n=this.count;e<n;e++)fh.x=this.getX(e),fh.y=this.getY(e),fh.z=this.getZ(e),fh.applyNormalMatrix(t),this.setXYZ(e,fh.x,fh.y,fh.z);return this}transformDirection(t){for(let e=0,n=this.count;e<n;e++)fh.x=this.getX(e),fh.y=this.getY(e),fh.z=this.getZ(e),fh.transformDirection(t),this.setXYZ(e,fh.x,fh.y,fh.z);return this}set(t,e=0){return this.array.set(t,e),this}getX(t){return this.array[t*this.itemSize]}setX(t,e){return this.array[t*this.itemSize]=e,this}getY(t){return this.array[t*this.itemSize+1]}setY(t,e){return this.array[t*this.itemSize+1]=e,this}getZ(t){return this.array[t*this.itemSize+2]}setZ(t,e){return this.array[t*this.itemSize+2]=e,this}getW(t){return this.array[t*this.itemSize+3]}setW(t,e){return this.array[t*this.itemSize+3]=e,this}setXY(t,e,n){return t*=this.itemSize,this.array[t+0]=e,this.array[t+1]=n,this}setXYZ(t,e,n,r){return t*=this.itemSize,this.array[t+0]=e,this.array[t+1]=n,this.array[t+2]=r,this}setXYZW(t,e,n,r,i){return t*=this.itemSize,this.array[t+0]=e,this.array[t+1]=n,this.array[t+2]=r,this.array[t+3]=i,this}onUpload(t){return this.onUploadCallback=t,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const t={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.prototype.slice.call(this.array),normalized:this.normalized};return""!==this.name&&(t.name=this.name),35044!==this.usage&&(t.usage=this.usage),0===this.updateRange.offset&&-1===this.updateRange.count||(t.updateRange=this.updateRange),t}}ph.prototype.isBufferAttribute=!0;class mh extends ph{constructor(t,e,n){super(new Uint16Array(t),e,n)}}class gh extends ph{constructor(t,e,n){super(new Uint32Array(t),e,n)}}(class extends ph{constructor(t,e,n){super(new Uint16Array(t),e,n)}}).prototype.isFloat16BufferAttribute=!0;class vh extends ph{constructor(t,e,n){super(new Float32Array(t),e,n)}}function yh(t){if(0===t.length)return-1/0;let e=t[0];for(let n=1,r=t.length;n<r;++n)t[n]>e&&(e=t[n]);return e}Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array;let bh=0;const _h=new ml,xh=new Ul,wh=new Bc,Sh=new jc,Eh=new jc,Th=new Bc;class Mh extends vc{constructor(){super(),Object.defineProperty(this,"id",{value:bh++}),this.uuid=xc(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(t){return Array.isArray(t)?this.index=new(yh(t)>65535?gh:mh)(t,1):this.index=t,this}getAttribute(t){return this.attributes[t]}setAttribute(t,e){return this.attributes[t]=e,this}deleteAttribute(t){return delete this.attributes[t],this}hasAttribute(t){return void 0!==this.attributes[t]}addGroup(t,e,n=0){this.groups.push({start:t,count:e,materialIndex:n})}clearGroups(){this.groups=[]}setDrawRange(t,e){this.drawRange.start=t,this.drawRange.count=e}applyMatrix4(t){const e=this.attributes.position;void 0!==e&&(e.applyMatrix4(t),e.needsUpdate=!0);const n=this.attributes.normal;if(void 0!==n){const e=(new Dc).getNormalMatrix(t);n.applyNormalMatrix(e),n.needsUpdate=!0}const r=this.attributes.tangent;return void 0!==r&&(r.transformDirection(t),r.needsUpdate=!0),null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this}rotateX(t){return _h.makeRotationX(t),this.applyMatrix4(_h),this}rotateY(t){return _h.makeRotationY(t),this.applyMatrix4(_h),this}rotateZ(t){return _h.makeRotationZ(t),this.applyMatrix4(_h),this}translate(t,e,n){return _h.makeTranslation(t,e,n),this.applyMatrix4(_h),this}scale(t,e,n){return _h.makeScale(t,e,n),this.applyMatrix4(_h),this}lookAt(t){return xh.lookAt(t),xh.updateMatrix(),this.applyMatrix4(xh.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(wh).negate(),this.translate(wh.x,wh.y,wh.z),this}setFromPoints(t){const e=[];for(let n=0,r=t.length;n<r;n++){const r=t[n];e.push(r.x,r.y,r.z||0)}return this.setAttribute("position",new vh(e,3)),this}computeBoundingBox(){null===this.boundingBox&&(this.boundingBox=new jc);const t=this.attributes.position,e=this.morphAttributes.position;if(t&&t.isGLBufferAttribute)return console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),void this.boundingBox.set(new Bc(-1/0,-1/0,-1/0),new Bc(1/0,1/0,1/0));if(void 0!==t){if(this.boundingBox.setFromBufferAttribute(t),e)for(let t=0,n=e.length;t<n;t++){const n=e[t];Sh.setFromBufferAttribute(n),this.morphTargetsRelative?(Th.addVectors(this.boundingBox.min,Sh.min),this.boundingBox.expandByPoint(Th),Th.addVectors(this.boundingBox.max,Sh.max),this.boundingBox.expandByPoint(Th)):(this.boundingBox.expandByPoint(Sh.min),this.boundingBox.expandByPoint(Sh.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){null===this.boundingSphere&&(this.boundingSphere=new al);const t=this.attributes.position,e=this.morphAttributes.position;if(t&&t.isGLBufferAttribute)return console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),void this.boundingSphere.set(new Bc,1/0);if(t){const n=this.boundingSphere.center;if(Sh.setFromBufferAttribute(t),e)for(let t=0,n=e.length;t<n;t++){const n=e[t];Eh.setFromBufferAttribute(n),this.morphTargetsRelative?(Th.addVectors(Sh.min,Eh.min),Sh.expandByPoint(Th),Th.addVectors(Sh.max,Eh.max),Sh.expandByPoint(Th)):(Sh.expandByPoint(Eh.min),Sh.expandByPoint(Eh.max))}Sh.getCenter(n);let r=0;for(let e=0,i=t.count;e<i;e++)Th.fromBufferAttribute(t,e),r=Math.max(r,n.distanceToSquared(Th));if(e)for(let i=0,o=e.length;i<o;i++){const o=e[i],a=this.morphTargetsRelative;for(let e=0,i=o.count;e<i;e++)Th.fromBufferAttribute(o,e),a&&(wh.fromBufferAttribute(t,e),Th.add(wh)),r=Math.max(r,n.distanceToSquared(Th))}this.boundingSphere.radius=Math.sqrt(r),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeFaceNormals(){}computeTangents(){const t=this.index,e=this.attributes;if(null===t||void 0===e.position||void 0===e.normal||void 0===e.uv)return void console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");const n=t.array,r=e.position.array,i=e.normal.array,o=e.uv.array,a=r.length/3;void 0===e.tangent&&this.setAttribute("tangent",new ph(new Float32Array(4*a),4));const s=e.tangent.array,u=[],c=[];for(let t=0;t<a;t++)u[t]=new Bc,c[t]=new Bc;const l=new Bc,h=new Bc,f=new Bc,d=new Lc,p=new Lc,m=new Lc,g=new Bc,v=new Bc;function y(t,e,n){l.fromArray(r,3*t),h.fromArray(r,3*e),f.fromArray(r,3*n),d.fromArray(o,2*t),p.fromArray(o,2*e),m.fromArray(o,2*n),h.sub(l),f.sub(l),p.sub(d),m.sub(d);const i=1/(p.x*m.y-m.x*p.y);isFinite(i)&&(g.copy(h).multiplyScalar(m.y).addScaledVector(f,-p.y).multiplyScalar(i),v.copy(f).multiplyScalar(p.x).addScaledVector(h,-m.x).multiplyScalar(i),u[t].add(g),u[e].add(g),u[n].add(g),c[t].add(v),c[e].add(v),c[n].add(v))}let b=this.groups;0===b.length&&(b=[{start:0,count:n.length}]);for(let t=0,e=b.length;t<e;++t){const e=b[t],r=e.start;for(let t=r,i=r+e.count;t<i;t+=3)y(n[t+0],n[t+1],n[t+2])}const _=new Bc,x=new Bc,w=new Bc,S=new Bc;function E(t){w.fromArray(i,3*t),S.copy(w);const e=u[t];_.copy(e),_.sub(w.multiplyScalar(w.dot(e))).normalize(),x.crossVectors(S,e);const n=x.dot(c[t])<0?-1:1;s[4*t]=_.x,s[4*t+1]=_.y,s[4*t+2]=_.z,s[4*t+3]=n}for(let t=0,e=b.length;t<e;++t){const e=b[t],r=e.start;for(let t=r,i=r+e.count;t<i;t+=3)E(n[t+0]),E(n[t+1]),E(n[t+2])}}computeVertexNormals(){const t=this.index,e=this.getAttribute("position");if(void 0!==e){let n=this.getAttribute("normal");if(void 0===n)n=new ph(new Float32Array(3*e.count),3),this.setAttribute("normal",n);else for(let t=0,e=n.count;t<e;t++)n.setXYZ(t,0,0,0);const r=new Bc,i=new Bc,o=new Bc,a=new Bc,s=new Bc,u=new Bc,c=new Bc,l=new Bc;if(t)for(let h=0,f=t.count;h<f;h+=3){const f=t.getX(h+0),d=t.getX(h+1),p=t.getX(h+2);r.fromBufferAttribute(e,f),i.fromBufferAttribute(e,d),o.fromBufferAttribute(e,p),c.subVectors(o,i),l.subVectors(r,i),c.cross(l),a.fromBufferAttribute(n,f),s.fromBufferAttribute(n,d),u.fromBufferAttribute(n,p),a.add(c),s.add(c),u.add(c),n.setXYZ(f,a.x,a.y,a.z),n.setXYZ(d,s.x,s.y,s.z),n.setXYZ(p,u.x,u.y,u.z)}else for(let t=0,a=e.count;t<a;t+=3)r.fromBufferAttribute(e,t+0),i.fromBufferAttribute(e,t+1),o.fromBufferAttribute(e,t+2),c.subVectors(o,i),l.subVectors(r,i),c.cross(l),n.setXYZ(t+0,c.x,c.y,c.z),n.setXYZ(t+1,c.x,c.y,c.z),n.setXYZ(t+2,c.x,c.y,c.z);this.normalizeNormals(),n.needsUpdate=!0}}merge(t,e){if(!t||!t.isBufferGeometry)return void console.error("THREE.BufferGeometry.merge(): geometry not an instance of THREE.BufferGeometry.",t);void 0===e&&(e=0,console.warn("THREE.BufferGeometry.merge(): Overwriting original geometry, starting at offset=0. Use BufferGeometryUtils.mergeBufferGeometries() for lossless merge."));const n=this.attributes;for(const r in n){if(void 0===t.attributes[r])continue;const i=n[r].array,o=t.attributes[r],a=o.array,s=o.itemSize*e,u=Math.min(a.length,i.length-s);for(let t=0,e=s;t<u;t++,e++)i[e]=a[t]}return this}normalizeNormals(){const t=this.attributes.normal;for(let e=0,n=t.count;e<n;e++)Th.fromBufferAttribute(t,e),Th.normalize(),t.setXYZ(e,Th.x,Th.y,Th.z)}toNonIndexed(){function t(t,e){const n=t.array,r=t.itemSize,i=t.normalized,o=new n.constructor(e.length*r);let a=0,s=0;for(let t=0,i=e.length;t<i;t++){a=e[t]*r;for(let t=0;t<r;t++)o[s++]=n[a++]}return new ph(o,r,i)}if(null===this.index)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const e=new Mh,n=this.index.array,r=this.attributes;for(const i in r){const o=t(r[i],n);e.setAttribute(i,o)}const i=this.morphAttributes;for(const r in i){const o=[],a=i[r];for(let e=0,r=a.length;e<r;e++){const r=t(a[e],n);o.push(r)}e.morphAttributes[r]=o}e.morphTargetsRelative=this.morphTargetsRelative;const o=this.groups;for(let t=0,n=o.length;t<n;t++){const n=o[t];e.addGroup(n.start,n.count,n.materialIndex)}return e}toJSON(){const t={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(t.uuid=this.uuid,t.type=this.type,""!==this.name&&(t.name=this.name),Object.keys(this.userData).length>0&&(t.userData=this.userData),void 0!==this.parameters){const e=this.parameters;for(const n in e)void 0!==e[n]&&(t[n]=e[n]);return t}t.data={attributes:{}};const e=this.index;null!==e&&(t.data.index={type:e.array.constructor.name,array:Array.prototype.slice.call(e.array)});const n=this.attributes;for(const e in n){const r=n[e];t.data.attributes[e]=r.toJSON(t.data)}const r={};let i=!1;for(const e in this.morphAttributes){const n=this.morphAttributes[e],o=[];for(let e=0,r=n.length;e<r;e++){const r=n[e];o.push(r.toJSON(t.data))}o.length>0&&(r[e]=o,i=!0)}i&&(t.data.morphAttributes=r,t.data.morphTargetsRelative=this.morphTargetsRelative);const o=this.groups;o.length>0&&(t.data.groups=JSON.parse(JSON.stringify(o)));const a=this.boundingSphere;return null!==a&&(t.data.boundingSphere={center:a.center.toArray(),radius:a.radius}),t}clone(){return(new Mh).copy(this)}copy(t){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const e={};this.name=t.name;const n=t.index;null!==n&&this.setIndex(n.clone(e));const r=t.attributes;for(const t in r){const n=r[t];this.setAttribute(t,n.clone(e))}const i=t.morphAttributes;for(const t in i){const n=[],r=i[t];for(let t=0,i=r.length;t<i;t++)n.push(r[t].clone(e));this.morphAttributes[t]=n}this.morphTargetsRelative=t.morphTargetsRelative;const o=t.groups;for(let t=0,e=o.length;t<e;t++){const e=o[t];this.addGroup(e.start,e.count,e.materialIndex)}const a=t.boundingBox;null!==a&&(this.boundingBox=a.clone());const s=t.boundingSphere;return null!==s&&(this.boundingSphere=s.clone()),this.drawRange.start=t.drawRange.start,this.drawRange.count=t.drawRange.count,this.userData=t.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}Mh.prototype.isBufferGeometry=!0;const Ah=new ml,Lh=new pl,Dh=new al,Ch=new Bc,Ph=new Bc,Rh=new Bc,kh=new Bc,Oh=new Bc,Ih=new Bc,Fh=new Bc,zh=new Bc,Bh=new Bc,Nh=new Lc,Uh=new Lc,jh=new Lc,Hh=new Bc,Vh=new Bc;class Gh extends Ul{constructor(t=new Mh,e=new hh){super(),this.type="Mesh",this.geometry=t,this.material=e,this.updateMorphTargets()}copy(t){return super.copy(t),void 0!==t.morphTargetInfluences&&(this.morphTargetInfluences=t.morphTargetInfluences.slice()),void 0!==t.morphTargetDictionary&&(this.morphTargetDictionary=Object.assign({},t.morphTargetDictionary)),this.material=t.material,this.geometry=t.geometry,this}updateMorphTargets(){const t=this.geometry;if(t.isBufferGeometry){const e=t.morphAttributes,n=Object.keys(e);if(n.length>0){const t=e[n[0]];if(void 0!==t){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let e=0,n=t.length;e<n;e++){const n=t[e].name||String(e);this.morphTargetInfluences.push(0),this.morphTargetDictionary[n]=e}}}}else{const e=t.morphTargets;void 0!==e&&e.length>0&&console.error("THREE.Mesh.updateMorphTargets() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}}raycast(t,e){const n=this.geometry,r=this.material,i=this.matrixWorld;if(void 0===r)return;if(null===n.boundingSphere&&n.computeBoundingSphere(),Dh.copy(n.boundingSphere),Dh.applyMatrix4(i),!1===t.ray.intersectsSphere(Dh))return;if(Ah.copy(i).invert(),Lh.copy(t.ray).applyMatrix4(Ah),null!==n.boundingBox&&!1===Lh.intersectsBox(n.boundingBox))return;let o;if(n.isBufferGeometry){const i=n.index,a=n.attributes.position,s=n.morphAttributes.position,u=n.morphTargetsRelative,c=n.attributes.uv,l=n.attributes.uv2,h=n.groups,f=n.drawRange;if(null!==i)if(Array.isArray(r))for(let n=0,d=h.length;n<d;n++){const d=h[n],p=r[d.materialIndex];for(let n=Math.max(d.start,f.start),r=Math.min(d.start+d.count,f.start+f.count);n<r;n+=3){const r=i.getX(n),h=i.getX(n+1),f=i.getX(n+2);o=Wh(this,p,t,Lh,a,s,u,c,l,r,h,f),o&&(o.faceIndex=Math.floor(n/3),o.face.materialIndex=d.materialIndex,e.push(o))}}else{for(let n=Math.max(0,f.start),h=Math.min(i.count,f.start+f.count);n<h;n+=3){const h=i.getX(n),f=i.getX(n+1),d=i.getX(n+2);o=Wh(this,r,t,Lh,a,s,u,c,l,h,f,d),o&&(o.faceIndex=Math.floor(n/3),e.push(o))}}else if(void 0!==a)if(Array.isArray(r))for(let n=0,i=h.length;n<i;n++){const i=h[n],d=r[i.materialIndex];for(let n=Math.max(i.start,f.start),r=Math.min(i.start+i.count,f.start+f.count);n<r;n+=3){o=Wh(this,d,t,Lh,a,s,u,c,l,n,n+1,n+2),o&&(o.faceIndex=Math.floor(n/3),o.face.materialIndex=i.materialIndex,e.push(o))}}else{for(let n=Math.max(0,f.start),i=Math.min(a.count,f.start+f.count);n<i;n+=3){o=Wh(this,r,t,Lh,a,s,u,c,l,n,n+1,n+2),o&&(o.faceIndex=Math.floor(n/3),e.push(o))}}}else n.isGeometry&&console.error("THREE.Mesh.raycast() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}}function Wh(t,e,n,r,i,o,a,s,u,c,l,h){Ch.fromBufferAttribute(i,c),Ph.fromBufferAttribute(i,l),Rh.fromBufferAttribute(i,h);const f=t.morphTargetInfluences;if(e.morphTargets&&o&&f){Fh.set(0,0,0),zh.set(0,0,0),Bh.set(0,0,0);for(let t=0,e=o.length;t<e;t++){const e=f[t],n=o[t];0!==e&&(kh.fromBufferAttribute(n,c),Oh.fromBufferAttribute(n,l),Ih.fromBufferAttribute(n,h),a?(Fh.addScaledVector(kh,e),zh.addScaledVector(Oh,e),Bh.addScaledVector(Ih,e)):(Fh.addScaledVector(kh.sub(Ch),e),zh.addScaledVector(Oh.sub(Ph),e),Bh.addScaledVector(Ih.sub(Rh),e)))}Ch.add(Fh),Ph.add(zh),Rh.add(Bh)}t.isSkinnedMesh&&e.skinning&&(t.boneTransform(c,Ch),t.boneTransform(l,Ph),t.boneTransform(h,Rh));const d=function(t,e,n,r,i,o,a,s){let u;if(u=1===e.side?r.intersectTriangle(a,o,i,!0,s):r.intersectTriangle(i,o,a,2!==e.side,s),null===u)return null;Vh.copy(s),Vh.applyMatrix4(t.matrixWorld);const c=n.ray.origin.distanceTo(Vh);return c<n.near||c>n.far?null:{distance:c,point:Vh.clone(),object:t}}(t,e,n,r,Ch,Ph,Rh,Hh);if(d){s&&(Nh.fromBufferAttribute(s,c),Uh.fromBufferAttribute(s,l),jh.fromBufferAttribute(s,h),d.uv=eh.getUV(Hh,Ch,Ph,Rh,Nh,Uh,jh,new Lc)),u&&(Nh.fromBufferAttribute(u,c),Uh.fromBufferAttribute(u,l),jh.fromBufferAttribute(u,h),d.uv2=eh.getUV(Hh,Ch,Ph,Rh,Nh,Uh,jh,new Lc));const t={a:c,b:l,c:h,normal:new Bc,materialIndex:0};eh.getNormal(Ch,Ph,Rh,t.normal),d.face=t}return d}Gh.prototype.isMesh=!0;class qh extends Mh{constructor(t=1,e=1,n=1,r=1,i=1,o=1){super(),this.type="BoxGeometry",this.parameters={width:t,height:e,depth:n,widthSegments:r,heightSegments:i,depthSegments:o};const a=this;r=Math.floor(r),i=Math.floor(i),o=Math.floor(o);const s=[],u=[],c=[],l=[];let h=0,f=0;function d(t,e,n,r,i,o,d,p,m,g,v){const y=o/m,b=d/g,_=o/2,x=d/2,w=p/2,S=m+1,E=g+1;let T=0,M=0;const A=new Bc;for(let o=0;o<E;o++){const a=o*b-x;for(let s=0;s<S;s++){const h=s*y-_;A[t]=h*r,A[e]=a*i,A[n]=w,u.push(A.x,A.y,A.z),A[t]=0,A[e]=0,A[n]=p>0?1:-1,c.push(A.x,A.y,A.z),l.push(s/m),l.push(1-o/g),T+=1}}for(let t=0;t<g;t++)for(let e=0;e<m;e++){const n=h+e+S*t,r=h+e+S*(t+1),i=h+(e+1)+S*(t+1),o=h+(e+1)+S*t;s.push(n,r,o),s.push(r,i,o),M+=6}a.addGroup(f,M,v),f+=M,h+=T}d("z","y","x",-1,-1,n,e,t,o,i,0),d("z","y","x",1,-1,n,e,-t,o,i,1),d("x","z","y",1,1,t,n,e,r,o,2),d("x","z","y",1,-1,t,n,-e,r,o,3),d("x","y","z",1,-1,t,e,n,r,i,4),d("x","y","z",-1,-1,t,e,-n,r,i,5),this.setIndex(s),this.setAttribute("position",new vh(u,3)),this.setAttribute("normal",new vh(c,3)),this.setAttribute("uv",new vh(l,2))}}function Xh(t){const e={};for(const n in t){e[n]={};for(const r in t[n]){const i=t[n][r];i&&(i.isColor||i.isMatrix3||i.isMatrix4||i.isVector2||i.isVector3||i.isVector4||i.isTexture||i.isQuaternion)?e[n][r]=i.clone():Array.isArray(i)?e[n][r]=i.slice():e[n][r]=i}}return e}function Yh(t){const e={};for(let n=0;n<t.length;n++){const r=Xh(t[n]);for(const t in r)e[t]=r[t]}return e}const Zh={clone:Xh,merge:Yh};class Jh extends rh{constructor(t){super(),this.type="ShaderMaterial",this.defines={},this.uniforms={},this.vertexShader="void main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",this.fragmentShader="void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}",this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,void 0!==t&&(void 0!==t.attributes&&console.error("THREE.ShaderMaterial: attributes should now be defined in THREE.BufferGeometry instead."),this.setValues(t))}copy(t){return super.copy(t),this.fragmentShader=t.fragmentShader,this.vertexShader=t.vertexShader,this.uniforms=Xh(t.uniforms),this.defines=Object.assign({},t.defines),this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.lights=t.lights,this.clipping=t.clipping,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.morphNormals=t.morphNormals,this.extensions=Object.assign({},t.extensions),this.glslVersion=t.glslVersion,this}toJSON(t){const e=super.toJSON(t);e.glslVersion=this.glslVersion,e.uniforms={};for(const n in this.uniforms){const r=this.uniforms[n].value;r&&r.isTexture?e.uniforms[n]={type:"t",value:r.toJSON(t).uuid}:r&&r.isColor?e.uniforms[n]={type:"c",value:r.getHex()}:r&&r.isVector2?e.uniforms[n]={type:"v2",value:r.toArray()}:r&&r.isVector3?e.uniforms[n]={type:"v3",value:r.toArray()}:r&&r.isVector4?e.uniforms[n]={type:"v4",value:r.toArray()}:r&&r.isMatrix3?e.uniforms[n]={type:"m3",value:r.toArray()}:r&&r.isMatrix4?e.uniforms[n]={type:"m4",value:r.toArray()}:e.uniforms[n]={value:r}}Object.keys(this.defines).length>0&&(e.defines=this.defines),e.vertexShader=this.vertexShader,e.fragmentShader=this.fragmentShader;const n={};for(const t in this.extensions)!0===this.extensions[t]&&(n[t]=!0);return Object.keys(n).length>0&&(e.extensions=n),e}}Jh.prototype.isShaderMaterial=!0;class Qh extends Ul{constructor(){super(),this.type="Camera",this.matrixWorldInverse=new ml,this.projectionMatrix=new ml,this.projectionMatrixInverse=new ml}copy(t,e){return super.copy(t,e),this.matrixWorldInverse.copy(t.matrixWorldInverse),this.projectionMatrix.copy(t.projectionMatrix),this.projectionMatrixInverse.copy(t.projectionMatrixInverse),this}getWorldDirection(t){void 0===t&&(console.warn("THREE.Camera: .getWorldDirection() target is now required"),t=new Bc),this.updateWorldMatrix(!0,!1);const e=this.matrixWorld.elements;return t.set(-e[8],-e[9],-e[10]).normalize()}updateMatrixWorld(t){super.updateMatrixWorld(t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(t,e){super.updateWorldMatrix(t,e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return(new this.constructor).copy(this)}}Qh.prototype.isCamera=!0;class Kh extends Qh{constructor(t=50,e=1,n=.1,r=2e3){super(),this.type="PerspectiveCamera",this.fov=t,this.zoom=1,this.near=n,this.far=r,this.focus=10,this.aspect=e,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(t,e){return super.copy(t,e),this.fov=t.fov,this.zoom=t.zoom,this.near=t.near,this.far=t.far,this.focus=t.focus,this.aspect=t.aspect,this.view=null===t.view?null:Object.assign({},t.view),this.filmGauge=t.filmGauge,this.filmOffset=t.filmOffset,this}setFocalLength(t){const e=.5*this.getFilmHeight()/t;this.fov=2*_c*Math.atan(e),this.updateProjectionMatrix()}getFocalLength(){const t=Math.tan(.5*bc*this.fov);return.5*this.getFilmHeight()/t}getEffectiveFOV(){return 2*_c*Math.atan(Math.tan(.5*bc*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}setViewOffset(t,e,n,r,i,o){this.aspect=t/e,null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=t,this.view.fullHeight=e,this.view.offsetX=n,this.view.offsetY=r,this.view.width=i,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const t=this.near;let e=t*Math.tan(.5*bc*this.fov)/this.zoom,n=2*e,r=this.aspect*n,i=-.5*r;const o=this.view;if(null!==this.view&&this.view.enabled){const t=o.fullWidth,a=o.fullHeight;i+=o.offsetX*r/t,e-=o.offsetY*n/a,r*=o.width/t,n*=o.height/a}const a=this.filmOffset;0!==a&&(i+=t*a/this.getFilmWidth()),this.projectionMatrix.makePerspective(i,i+r,e,e-n,t,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(t){const e=super.toJSON(t);return e.object.fov=this.fov,e.object.zoom=this.zoom,e.object.near=this.near,e.object.far=this.far,e.object.focus=this.focus,e.object.aspect=this.aspect,null!==this.view&&(e.object.view=Object.assign({},this.view)),e.object.filmGauge=this.filmGauge,e.object.filmOffset=this.filmOffset,e}}Kh.prototype.isPerspectiveCamera=!0;class $h extends Ul{constructor(t,e,n){if(super(),this.type="CubeCamera",!0!==n.isWebGLCubeRenderTarget)return void console.error("THREE.CubeCamera: The constructor now expects an instance of WebGLCubeRenderTarget as third parameter.");this.renderTarget=n;const r=new Kh(90,1,t,e);r.layers=this.layers,r.up.set(0,-1,0),r.lookAt(new Bc(1,0,0)),this.add(r);const i=new Kh(90,1,t,e);i.layers=this.layers,i.up.set(0,-1,0),i.lookAt(new Bc(-1,0,0)),this.add(i);const o=new Kh(90,1,t,e);o.layers=this.layers,o.up.set(0,0,1),o.lookAt(new Bc(0,1,0)),this.add(o);const a=new Kh(90,1,t,e);a.layers=this.layers,a.up.set(0,0,-1),a.lookAt(new Bc(0,-1,0)),this.add(a);const s=new Kh(90,1,t,e);s.layers=this.layers,s.up.set(0,-1,0),s.lookAt(new Bc(0,0,1)),this.add(s);const u=new Kh(90,1,t,e);u.layers=this.layers,u.up.set(0,-1,0),u.lookAt(new Bc(0,0,-1)),this.add(u)}update(t,e){null===this.parent&&this.updateMatrixWorld();const n=this.renderTarget,[r,i,o,a,s,u]=this.children,c=t.xr.enabled,l=t.getRenderTarget();t.xr.enabled=!1;const h=n.texture.generateMipmaps;n.texture.generateMipmaps=!1,t.setRenderTarget(n,0),t.render(e,r),t.setRenderTarget(n,1),t.render(e,i),t.setRenderTarget(n,2),t.render(e,o),t.setRenderTarget(n,3),t.render(e,a),t.setRenderTarget(n,4),t.render(e,s),n.texture.generateMipmaps=h,t.setRenderTarget(n,5),t.render(e,u),t.setRenderTarget(l),t.xr.enabled=c}}class tf extends kc{constructor(t,e,n,r,i,o,a,s,u,c){super(t=void 0!==t?t:[],e=void 0!==e?e:301,n,r,i,o,a=void 0!==a?a:1022,s,u,c),this._needsFlipEnvMap=!0,this.flipY=!1}get images(){return this.image}set images(t){this.image=t}}tf.prototype.isCubeTexture=!0;class ef extends Fc{constructor(t,e,n){Number.isInteger(e)&&(console.warn("THREE.WebGLCubeRenderTarget: constructor signature is now WebGLCubeRenderTarget( size, options )"),e=n),super(t,t,e),e=e||{},this.texture=new tf(void 0,e.mapping,e.wrapS,e.wrapT,e.magFilter,e.minFilter,e.format,e.type,e.anisotropy,e.encoding),this.texture.generateMipmaps=void 0!==e.generateMipmaps&&e.generateMipmaps,this.texture.minFilter=void 0!==e.minFilter?e.minFilter:1006,this.texture._needsFlipEnvMap=!1}fromEquirectangularTexture(t,e){this.texture.type=e.type,this.texture.format=1023,this.texture.encoding=e.encoding,this.texture.generateMipmaps=e.generateMipmaps,this.texture.minFilter=e.minFilter,this.texture.magFilter=e.magFilter;const n={uniforms:{tEquirect:{value:null}},vertexShader:"\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\tvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\n\t\t\t\t\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n\n\t\t\t\t}\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvWorldDirection = transformDirection( position, modelMatrix );\n\n\t\t\t\t\t#include <begin_vertex>\n\t\t\t\t\t#include <project_vertex>\n\n\t\t\t\t}\n\t\t\t",fragmentShader:"\n\n\t\t\t\tuniform sampler2D tEquirect;\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\t#include <common>\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvec3 direction = normalize( vWorldDirection );\n\n\t\t\t\t\tvec2 sampleUV = equirectUv( direction );\n\n\t\t\t\t\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\n\t\t\t\t}\n\t\t\t"},r=new qh(5,5,5),i=new Jh({name:"CubemapFromEquirect",uniforms:Xh(n.uniforms),vertexShader:n.vertexShader,fragmentShader:n.fragmentShader,side:1,blending:0});i.uniforms.tEquirect.value=e;const o=new Gh(r,i),a=e.minFilter;1008===e.minFilter&&(e.minFilter=1006);return new $h(1,10,this).update(t,o),e.minFilter=a,o.geometry.dispose(),o.material.dispose(),this}clear(t,e,n,r){const i=t.getRenderTarget();for(let i=0;i<6;i++)t.setRenderTarget(this,i),t.clear(e,n,r);t.setRenderTarget(i)}}ef.prototype.isWebGLCubeRenderTarget=!0;class nf extends kc{constructor(t,e,n,r,i,o,a,s,u,c,l,h){super(null,o,a,s,u,c,r,i,l,h),this.image={data:t||null,width:e||1,height:n||1},this.magFilter=void 0!==u?u:1003,this.minFilter=void 0!==c?c:1003,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.needsUpdate=!0}}nf.prototype.isDataTexture=!0;const rf=new al,of=new Bc;class af{constructor(t=new Gl,e=new Gl,n=new Gl,r=new Gl,i=new Gl,o=new Gl){this.planes=[t,e,n,r,i,o]}set(t,e,n,r,i,o){const a=this.planes;return a[0].copy(t),a[1].copy(e),a[2].copy(n),a[3].copy(r),a[4].copy(i),a[5].copy(o),this}copy(t){const e=this.planes;for(let n=0;n<6;n++)e[n].copy(t.planes[n]);return this}setFromProjectionMatrix(t){const e=this.planes,n=t.elements,r=n[0],i=n[1],o=n[2],a=n[3],s=n[4],u=n[5],c=n[6],l=n[7],h=n[8],f=n[9],d=n[10],p=n[11],m=n[12],g=n[13],v=n[14],y=n[15];return e[0].setComponents(a-r,l-s,p-h,y-m).normalize(),e[1].setComponents(a+r,l+s,p+h,y+m).normalize(),e[2].setComponents(a+i,l+u,p+f,y+g).normalize(),e[3].setComponents(a-i,l-u,p-f,y-g).normalize(),e[4].setComponents(a-o,l-c,p-d,y-v).normalize(),e[5].setComponents(a+o,l+c,p+d,y+v).normalize(),this}intersectsObject(t){const e=t.geometry;return null===e.boundingSphere&&e.computeBoundingSphere(),rf.copy(e.boundingSphere).applyMatrix4(t.matrixWorld),this.intersectsSphere(rf)}intersectsSprite(t){return rf.center.set(0,0,0),rf.radius=.7071067811865476,rf.applyMatrix4(t.matrixWorld),this.intersectsSphere(rf)}intersectsSphere(t){const e=this.planes,n=t.center,r=-t.radius;for(let t=0;t<6;t++){if(e[t].distanceToPoint(n)<r)return!1}return!0}intersectsBox(t){const e=this.planes;for(let n=0;n<6;n++){const r=e[n];if(of.x=r.normal.x>0?t.max.x:t.min.x,of.y=r.normal.y>0?t.max.y:t.min.y,of.z=r.normal.z>0?t.max.z:t.min.z,r.distanceToPoint(of)<0)return!1}return!0}containsPoint(t){const e=this.planes;for(let n=0;n<6;n++)if(e[n].distanceToPoint(t)<0)return!1;return!0}clone(){return(new this.constructor).copy(this)}}function sf(){let t=null,e=!1,n=null,r=null;function i(e,o){n(e,o),r=t.requestAnimationFrame(i)}return{start:function(){!0!==e&&null!==n&&(r=t.requestAnimationFrame(i),e=!0)},stop:function(){t.cancelAnimationFrame(r),e=!1},setAnimationLoop:function(t){n=t},setContext:function(e){t=e}}}function uf(t,e){const n=e.isWebGL2,r=new WeakMap;return{get:function(t){return t.isInterleavedBufferAttribute&&(t=t.data),r.get(t)},remove:function(e){e.isInterleavedBufferAttribute&&(e=e.data);const n=r.get(e);n&&(t.deleteBuffer(n.buffer),r.delete(e))},update:function(e,i){if(e.isGLBufferAttribute){const t=r.get(e);return void((!t||t.version<e.version)&&r.set(e,{buffer:e.buffer,type:e.type,bytesPerElement:e.elementSize,version:e.version}))}e.isInterleavedBufferAttribute&&(e=e.data);const o=r.get(e);void 0===o?r.set(e,function(e,r){const i=e.array,o=e.usage,a=t.createBuffer();t.bindBuffer(r,a),t.bufferData(r,i,o),e.onUploadCallback();let s=5126;return i instanceof Float32Array?s=5126:i instanceof Float64Array?console.warn("THREE.WebGLAttributes: Unsupported data buffer format: Float64Array."):i instanceof Uint16Array?e.isFloat16BufferAttribute?n?s=5131:console.warn("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2."):s=5123:i instanceof Int16Array?s=5122:i instanceof Uint32Array?s=5125:i instanceof Int32Array?s=5124:i instanceof Int8Array?s=5120:i instanceof Uint8Array&&(s=5121),{buffer:a,type:s,bytesPerElement:i.BYTES_PER_ELEMENT,version:e.version}}(e,i)):o.version<e.version&&(!function(e,r,i){const o=r.array,a=r.updateRange;t.bindBuffer(i,e),-1===a.count?t.bufferSubData(i,0,o):(n?t.bufferSubData(i,a.offset*o.BYTES_PER_ELEMENT,o,a.offset,a.count):t.bufferSubData(i,a.offset*o.BYTES_PER_ELEMENT,o.subarray(a.offset,a.offset+a.count)),a.count=-1)}(o.buffer,e,i),o.version=e.version)}}}class cf extends Mh{constructor(t=1,e=1,n=1,r=1){super(),this.type="PlaneGeometry",this.parameters={width:t,height:e,widthSegments:n,heightSegments:r};const i=t/2,o=e/2,a=Math.floor(n),s=Math.floor(r),u=a+1,c=s+1,l=t/a,h=e/s,f=[],d=[],p=[],m=[];for(let t=0;t<c;t++){const e=t*h-o;for(let n=0;n<u;n++){const r=n*l-i;d.push(r,-e,0),p.push(0,0,1),m.push(n/a),m.push(1-t/s)}}for(let t=0;t<s;t++)for(let e=0;e<a;e++){const n=e+u*t,r=e+u*(t+1),i=e+1+u*(t+1),o=e+1+u*t;f.push(n,r,o),f.push(r,i,o)}this.setIndex(f),this.setAttribute("position",new vh(d,3)),this.setAttribute("normal",new vh(p,3)),this.setAttribute("uv",new vh(m,2))}}const lf={alphamap_fragment:"#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, vUv ).g;\n#endif",alphamap_pars_fragment:"#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",alphatest_fragment:"#ifdef ALPHATEST\n\tif ( diffuseColor.a < ALPHATEST ) discard;\n#endif",aomap_fragment:"#ifdef USE_AOMAP\n\tfloat ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;\n\treflectedLight.indirectDiffuse *= ambientOcclusion;\n\t#if defined( USE_ENVMAP ) && defined( STANDARD )\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.specularRoughness );\n\t#endif\n#endif",aomap_pars_fragment:"#ifdef USE_AOMAP\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n#endif",begin_vertex:"vec3 transformed = vec3( position );",beginnormal_vertex:"vec3 objectNormal = vec3( normal );\n#ifdef USE_TANGENT\n\tvec3 objectTangent = vec3( tangent.xyz );\n#endif",bsdfs:"vec2 integrateSpecularBRDF( const in float dotNV, const in float roughness ) {\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\tvec4 r = roughness * c0 + c1;\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\treturn vec2( -1.04, 1.04 ) * a004 + r.zw;\n}\nfloat punctualLightIntensityToIrradianceFactor( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n#if defined ( PHYSICALLY_CORRECT_LIGHTS )\n\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\tif( cutoffDistance > 0.0 ) {\n\t\tdistanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\t}\n\treturn distanceFalloff;\n#else\n\tif( cutoffDistance > 0.0 && decayExponent > 0.0 ) {\n\t\treturn pow( saturate( -lightDistance / cutoffDistance + 1.0 ), decayExponent );\n\t}\n\treturn 1.0;\n#endif\n}\nvec3 BRDF_Diffuse_Lambert( const in vec3 diffuseColor ) {\n\treturn RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 specularColor, const in float dotLH ) {\n\tfloat fresnel = exp2( ( -5.55473 * dotLH - 6.98316 ) * dotLH );\n\treturn ( 1.0 - specularColor ) * fresnel + specularColor;\n}\nvec3 F_Schlick_RoughnessDependent( const in vec3 F0, const in float dotNV, const in float roughness ) {\n\tfloat fresnel = exp2( ( -5.55473 * dotNV - 6.98316 ) * dotNV );\n\tvec3 Fr = max( vec3( 1.0 - roughness ), F0 ) - F0;\n\treturn Fr * fresnel + F0;\n}\nfloat G_GGX_Smith( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gl = dotNL + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\tfloat gv = dotNV + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\treturn 1.0 / ( gl * gv );\n}\nfloat G_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\treturn 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\tfloat a2 = pow2( alpha );\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n}\nvec3 BRDF_Specular_GGX( const in IncidentLight incidentLight, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float roughness ) {\n\tfloat alpha = pow2( roughness );\n\tvec3 halfDir = normalize( incidentLight.direction + viewDir );\n\tfloat dotNL = saturate( dot( normal, incidentLight.direction ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, dotLH );\n\tfloat G = G_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\tfloat D = D_GGX( alpha, dotNH );\n\treturn F * ( G * D );\n}\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\n\tconst float LUT_SIZE = 64.0;\n\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n\tconst float LUT_BIAS = 0.5 / LUT_SIZE;\n\tfloat dotNV = saturate( dot( N, V ) );\n\tvec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );\n\tuv = uv * LUT_SCALE + LUT_BIAS;\n\treturn uv;\n}\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\n\tfloat l = length( f );\n\treturn max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\n}\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\n\tfloat x = dot( v1, v2 );\n\tfloat y = abs( x );\n\tfloat a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;\n\tfloat b = 3.4175940 + ( 4.1616724 + y ) * y;\n\tfloat v = a / b;\n\tfloat theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;\n\treturn cross( v1, v2 ) * theta_sintheta;\n}\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\n\tvec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\n\tvec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\n\tvec3 lightNormal = cross( v1, v2 );\n\tif( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\n\tvec3 T1, T2;\n\tT1 = normalize( V - N * dot( V, N ) );\n\tT2 = - cross( N, T1 );\n\tmat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );\n\tvec3 coords[ 4 ];\n\tcoords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\n\tcoords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\n\tcoords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\n\tcoords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\n\tcoords[ 0 ] = normalize( coords[ 0 ] );\n\tcoords[ 1 ] = normalize( coords[ 1 ] );\n\tcoords[ 2 ] = normalize( coords[ 2 ] );\n\tcoords[ 3 ] = normalize( coords[ 3 ] );\n\tvec3 vectorFormFactor = vec3( 0.0 );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\n\tfloat result = LTC_ClippedSphereFormFactor( vectorFormFactor );\n\treturn vec3( result );\n}\nvec3 BRDF_Specular_GGX_Environment( const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tvec2 brdf = integrateSpecularBRDF( dotNV, roughness );\n\treturn specularColor * brdf.x + brdf.y;\n}\nvoid BRDF_Specular_Multiscattering_Environment( const in GeometricContext geometry, const in vec3 specularColor, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\tvec3 F = F_Schlick_RoughnessDependent( specularColor, dotNV, roughness );\n\tvec2 brdf = integrateSpecularBRDF( dotNV, roughness );\n\tvec3 FssEss = F * brdf.x + brdf.y;\n\tfloat Ess = brdf.x + brdf.y;\n\tfloat Ems = 1.0 - Ess;\n\tvec3 Favg = specularColor + ( 1.0 - specularColor ) * 0.047619;\tvec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );\n\tsingleScatter += FssEss;\n\tmultiScatter += Fms * Ems;\n}\nfloat G_BlinnPhong_Implicit( ) {\n\treturn 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_Specular_BlinnPhong( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float shininess ) {\n\tvec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );\n\tfloat dotNH = saturate( dot( geometry.normal, halfDir ) );\n\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, dotLH );\n\tfloat G = G_BlinnPhong_Implicit( );\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\treturn F * ( G * D );\n}\nfloat GGXRoughnessToBlinnExponent( const in float ggxRoughness ) {\n\treturn ( 2.0 / pow2( ggxRoughness + 0.0001 ) - 2.0 );\n}\nfloat BlinnExponentToGGXRoughness( const in float blinnExponent ) {\n\treturn sqrt( 2.0 / ( blinnExponent + 2.0 ) );\n}\n#if defined( USE_SHEEN )\nfloat D_Charlie(float roughness, float NoH) {\n\tfloat invAlpha = 1.0 / roughness;\n\tfloat cos2h = NoH * NoH;\n\tfloat sin2h = max(1.0 - cos2h, 0.0078125);\treturn (2.0 + invAlpha) * pow(sin2h, invAlpha * 0.5) / (2.0 * PI);\n}\nfloat V_Neubelt(float NoV, float NoL) {\n\treturn saturate(1.0 / (4.0 * (NoL + NoV - NoL * NoV)));\n}\nvec3 BRDF_Specular_Sheen( const in float roughness, const in vec3 L, const in GeometricContext geometry, vec3 specularColor ) {\n\tvec3 N = geometry.normal;\n\tvec3 V = geometry.viewDir;\n\tvec3 H = normalize( V + L );\n\tfloat dotNH = saturate( dot( N, H ) );\n\treturn specularColor * D_Charlie( roughness, dotNH ) * V_Neubelt( dot(N, V), dot(N, L) );\n}\n#endif",bumpmap_pars_fragment:"#ifdef USE_BUMPMAP\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\tvec2 dHdxy_fwd() {\n\t\tvec2 dSTdx = dFdx( vUv );\n\t\tvec2 dSTdy = dFdy( vUv );\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;\n\t\treturn vec2( dBx, dBy );\n\t}\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {\n\t\tvec3 vSigmaX = vec3( dFdx( surf_pos.x ), dFdx( surf_pos.y ), dFdx( surf_pos.z ) );\n\t\tvec3 vSigmaY = vec3( dFdy( surf_pos.x ), dFdy( surf_pos.y ), dFdy( surf_pos.z ) );\n\t\tvec3 vN = surf_norm;\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\t\tfloat fDet = dot( vSigmaX, R1 ) * faceDirection;\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\t}\n#endif",clipping_planes_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvec4 plane;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\t\tplane = clippingPlanes[ i ];\n\t\tif ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;\n\t}\n\t#pragma unroll_loop_end\n\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\tbool clipped = true;\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tclipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t\tif ( clipped ) discard;\n\t#endif\n#endif",clipping_planes_pars_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif",clipping_planes_pars_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n#endif",clipping_planes_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvClipPosition = - mvPosition.xyz;\n#endif",color_fragment:"#if defined( USE_COLOR_ALPHA )\n\tdiffuseColor *= vColor;\n#elif defined( USE_COLOR )\n\tdiffuseColor.rgb *= vColor;\n#endif",color_pars_fragment:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR )\n\tvarying vec3 vColor;\n#endif",color_pars_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvarying vec3 vColor;\n#endif",color_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvColor = vec4( 1.0 );\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvColor = vec3( 1.0 );\n#endif\n#ifdef USE_COLOR\n\tvColor *= color;\n#endif\n#ifdef USE_INSTANCING_COLOR\n\tvColor.xyz *= instanceColor.xyz;\n#endif",common:"#define PI 3.141592653589793\n#define PI2 6.283185307179586\n#define PI_HALF 1.5707963267948966\n#define RECIPROCAL_PI 0.3183098861837907\n#define RECIPROCAL_PI2 0.15915494309189535\n#define EPSILON 1e-6\n#ifndef saturate\n#define saturate(a) clamp( a, 0.0, 1.0 )\n#endif\n#define whiteComplement(a) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat average( const in vec3 color ) { return dot( color, vec3( 0.3333 ) ); }\nhighp float rand( const in vec2 uv ) {\n\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\n\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n\treturn fract(sin(sn) * c);\n}\n#ifdef HIGH_PRECISION\n\tfloat precisionSafeLength( vec3 v ) { return length( v ); }\n#else\n\tfloat max3( vec3 v ) { return max( max( v.x, v.y ), v.z ); }\n\tfloat precisionSafeLength( vec3 v ) {\n\t\tfloat maxComponent = max3( abs( v ) );\n\t\treturn length( v / maxComponent ) * maxComponent;\n\t}\n#endif\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\nstruct GeometricContext {\n\tvec3 position;\n\tvec3 normal;\n\tvec3 viewDir;\n#ifdef CLEARCOAT\n\tvec3 clearcoatNormal;\n#endif\n};\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nvec3 projectOnPlane(in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\tfloat distance = dot( planeNormal, point - pointOnPlane );\n\treturn - distance * planeNormal + point;\n}\nfloat sideOfPlane( in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\treturn sign( dot( point - pointOnPlane, planeNormal ) );\n}\nvec3 linePlaneIntersect( in vec3 pointOnLine, in vec3 lineDirection, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\treturn lineDirection * ( dot( planeNormal, pointOnPlane - pointOnLine ) / dot( planeNormal, lineDirection ) ) + pointOnLine;\n}\nmat3 transposeMat3( const in mat3 m ) {\n\tmat3 tmp;\n\ttmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );\n\ttmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );\n\ttmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );\n\treturn tmp;\n}\nfloat linearToRelativeLuminance( const in vec3 color ) {\n\tvec3 weights = vec3( 0.2126, 0.7152, 0.0722 );\n\treturn dot( weights, color.rgb );\n}\nbool isPerspectiveMatrix( mat4 m ) {\n\treturn m[ 2 ][ 3 ] == - 1.0;\n}\nvec2 equirectUv( in vec3 dir ) {\n\tfloat u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;\n\tfloat v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\treturn vec2( u, v );\n}",cube_uv_reflection_fragment:"#ifdef ENVMAP_TYPE_CUBE_UV\n\t#define cubeUV_maxMipLevel 8.0\n\t#define cubeUV_minMipLevel 4.0\n\t#define cubeUV_maxTileSize 256.0\n\t#define cubeUV_minTileSize 16.0\n\tfloat getFace( vec3 direction ) {\n\t\tvec3 absDirection = abs( direction );\n\t\tfloat face = - 1.0;\n\t\tif ( absDirection.x > absDirection.z ) {\n\t\t\tif ( absDirection.x > absDirection.y )\n\t\t\t\tface = direction.x > 0.0 ? 0.0 : 3.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t} else {\n\t\t\tif ( absDirection.z > absDirection.y )\n\t\t\t\tface = direction.z > 0.0 ? 2.0 : 5.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t}\n\t\treturn face;\n\t}\n\tvec2 getUV( vec3 direction, float face ) {\n\t\tvec2 uv;\n\t\tif ( face == 0.0 ) {\n\t\t\tuv = vec2( direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 1.0 ) {\n\t\t\tuv = vec2( - direction.x, - direction.z ) / abs( direction.y );\n\t\t} else if ( face == 2.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.y ) / abs( direction.z );\n\t\t} else if ( face == 3.0 ) {\n\t\t\tuv = vec2( - direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 4.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.z ) / abs( direction.y );\n\t\t} else {\n\t\t\tuv = vec2( direction.x, direction.y ) / abs( direction.z );\n\t\t}\n\t\treturn 0.5 * ( uv + 1.0 );\n\t}\n\tvec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {\n\t\tfloat face = getFace( direction );\n\t\tfloat filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );\n\t\tmipInt = max( mipInt, cubeUV_minMipLevel );\n\t\tfloat faceSize = exp2( mipInt );\n\t\tfloat texelSize = 1.0 / ( 3.0 * cubeUV_maxTileSize );\n\t\tvec2 uv = getUV( direction, face ) * ( faceSize - 1.0 );\n\t\tvec2 f = fract( uv );\n\t\tuv += 0.5 - f;\n\t\tif ( face > 2.0 ) {\n\t\t\tuv.y += faceSize;\n\t\t\tface -= 3.0;\n\t\t}\n\t\tuv.x += face * faceSize;\n\t\tif ( mipInt < cubeUV_maxMipLevel ) {\n\t\t\tuv.y += 2.0 * cubeUV_maxTileSize;\n\t\t}\n\t\tuv.y += filterInt * 2.0 * cubeUV_minTileSize;\n\t\tuv.x += 3.0 * max( 0.0, cubeUV_maxTileSize - 2.0 * faceSize );\n\t\tuv *= texelSize;\n\t\tvec3 tl = envMapTexelToLinear( texture2D( envMap, uv ) ).rgb;\n\t\tuv.x += texelSize;\n\t\tvec3 tr = envMapTexelToLinear( texture2D( envMap, uv ) ).rgb;\n\t\tuv.y += texelSize;\n\t\tvec3 br = envMapTexelToLinear( texture2D( envMap, uv ) ).rgb;\n\t\tuv.x -= texelSize;\n\t\tvec3 bl = envMapTexelToLinear( texture2D( envMap, uv ) ).rgb;\n\t\tvec3 tm = mix( tl, tr, f.x );\n\t\tvec3 bm = mix( bl, br, f.x );\n\t\treturn mix( tm, bm, f.y );\n\t}\n\t#define r0 1.0\n\t#define v0 0.339\n\t#define m0 - 2.0\n\t#define r1 0.8\n\t#define v1 0.276\n\t#define m1 - 1.0\n\t#define r4 0.4\n\t#define v4 0.046\n\t#define m4 2.0\n\t#define r5 0.305\n\t#define v5 0.016\n\t#define m5 3.0\n\t#define r6 0.21\n\t#define v6 0.0038\n\t#define m6 4.0\n\tfloat roughnessToMip( float roughness ) {\n\t\tfloat mip = 0.0;\n\t\tif ( roughness >= r1 ) {\n\t\t\tmip = ( r0 - roughness ) * ( m1 - m0 ) / ( r0 - r1 ) + m0;\n\t\t} else if ( roughness >= r4 ) {\n\t\t\tmip = ( r1 - roughness ) * ( m4 - m1 ) / ( r1 - r4 ) + m1;\n\t\t} else if ( roughness >= r5 ) {\n\t\t\tmip = ( r4 - roughness ) * ( m5 - m4 ) / ( r4 - r5 ) + m4;\n\t\t} else if ( roughness >= r6 ) {\n\t\t\tmip = ( r5 - roughness ) * ( m6 - m5 ) / ( r5 - r6 ) + m5;\n\t\t} else {\n\t\t\tmip = - 2.0 * log2( 1.16 * roughness );\t\t}\n\t\treturn mip;\n\t}\n\tvec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {\n\t\tfloat mip = clamp( roughnessToMip( roughness ), m0, cubeUV_maxMipLevel );\n\t\tfloat mipF = fract( mip );\n\t\tfloat mipInt = floor( mip );\n\t\tvec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );\n\t\tif ( mipF == 0.0 ) {\n\t\t\treturn vec4( color0, 1.0 );\n\t\t} else {\n\t\t\tvec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );\n\t\t\treturn vec4( mix( color0, color1, mipF ), 1.0 );\n\t\t}\n\t}\n#endif",defaultnormal_vertex:"vec3 transformedNormal = objectNormal;\n#ifdef USE_INSTANCING\n\tmat3 m = mat3( instanceMatrix );\n\ttransformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );\n\ttransformedNormal = m * transformedNormal;\n#endif\ntransformedNormal = normalMatrix * transformedNormal;\n#ifdef FLIP_SIDED\n\ttransformedNormal = - transformedNormal;\n#endif\n#ifdef USE_TANGENT\n\tvec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#ifdef FLIP_SIDED\n\t\ttransformedTangent = - transformedTangent;\n\t#endif\n#endif",displacementmap_pars_vertex:"#ifdef USE_DISPLACEMENTMAP\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n#endif",displacementmap_vertex:"#ifdef USE_DISPLACEMENTMAP\n\ttransformed += normalize( objectNormal ) * ( texture2D( displacementMap, vUv ).x * displacementScale + displacementBias );\n#endif",emissivemap_fragment:"#ifdef USE_EMISSIVEMAP\n\tvec4 emissiveColor = texture2D( emissiveMap, vUv );\n\temissiveColor.rgb = emissiveMapTexelToLinear( emissiveColor ).rgb;\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\n#endif",emissivemap_pars_fragment:"#ifdef USE_EMISSIVEMAP\n\tuniform sampler2D emissiveMap;\n#endif",encodings_fragment:"gl_FragColor = linearToOutputTexel( gl_FragColor );",encodings_pars_fragment:"\nvec4 LinearToLinear( in vec4 value ) {\n\treturn value;\n}\nvec4 GammaToLinear( in vec4 value, in float gammaFactor ) {\n\treturn vec4( pow( value.rgb, vec3( gammaFactor ) ), value.a );\n}\nvec4 LinearToGamma( in vec4 value, in float gammaFactor ) {\n\treturn vec4( pow( value.rgb, vec3( 1.0 / gammaFactor ) ), value.a );\n}\nvec4 sRGBToLinear( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );\n}\nvec4 LinearTosRGB( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );\n}\nvec4 RGBEToLinear( in vec4 value ) {\n\treturn vec4( value.rgb * exp2( value.a * 255.0 - 128.0 ), 1.0 );\n}\nvec4 LinearToRGBE( in vec4 value ) {\n\tfloat maxComponent = max( max( value.r, value.g ), value.b );\n\tfloat fExp = clamp( ceil( log2( maxComponent ) ), -128.0, 127.0 );\n\treturn vec4( value.rgb / exp2( fExp ), ( fExp + 128.0 ) / 255.0 );\n}\nvec4 RGBMToLinear( in vec4 value, in float maxRange ) {\n\treturn vec4( value.rgb * value.a * maxRange, 1.0 );\n}\nvec4 LinearToRGBM( in vec4 value, in float maxRange ) {\n\tfloat maxRGB = max( value.r, max( value.g, value.b ) );\n\tfloat M = clamp( maxRGB / maxRange, 0.0, 1.0 );\n\tM = ceil( M * 255.0 ) / 255.0;\n\treturn vec4( value.rgb / ( M * maxRange ), M );\n}\nvec4 RGBDToLinear( in vec4 value, in float maxRange ) {\n\treturn vec4( value.rgb * ( ( maxRange / 255.0 ) / value.a ), 1.0 );\n}\nvec4 LinearToRGBD( in vec4 value, in float maxRange ) {\n\tfloat maxRGB = max( value.r, max( value.g, value.b ) );\n\tfloat D = max( maxRange / maxRGB, 1.0 );\n\tD = clamp( floor( D ) / 255.0, 0.0, 1.0 );\n\treturn vec4( value.rgb * ( D * ( 255.0 / maxRange ) ), D );\n}\nconst mat3 cLogLuvM = mat3( 0.2209, 0.3390, 0.4184, 0.1138, 0.6780, 0.7319, 0.0102, 0.1130, 0.2969 );\nvec4 LinearToLogLuv( in vec4 value ) {\n\tvec3 Xp_Y_XYZp = cLogLuvM * value.rgb;\n\tXp_Y_XYZp = max( Xp_Y_XYZp, vec3( 1e-6, 1e-6, 1e-6 ) );\n\tvec4 vResult;\n\tvResult.xy = Xp_Y_XYZp.xy / Xp_Y_XYZp.z;\n\tfloat Le = 2.0 * log2(Xp_Y_XYZp.y) + 127.0;\n\tvResult.w = fract( Le );\n\tvResult.z = ( Le - ( floor( vResult.w * 255.0 ) ) / 255.0 ) / 255.0;\n\treturn vResult;\n}\nconst mat3 cLogLuvInverseM = mat3( 6.0014, -2.7008, -1.7996, -1.3320, 3.1029, -5.7721, 0.3008, -1.0882, 5.6268 );\nvec4 LogLuvToLinear( in vec4 value ) {\n\tfloat Le = value.z * 255.0 + value.w;\n\tvec3 Xp_Y_XYZp;\n\tXp_Y_XYZp.y = exp2( ( Le - 127.0 ) / 2.0 );\n\tXp_Y_XYZp.z = Xp_Y_XYZp.y / value.y;\n\tXp_Y_XYZp.x = value.x * Xp_Y_XYZp.z;\n\tvec3 vRGB = cLogLuvInverseM * Xp_Y_XYZp.rgb;\n\treturn vec4( max( vRGB, 0.0 ), 1.0 );\n}",envmap_fragment:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvec3 cameraToFrag;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToFrag = normalize( vWorldPosition - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( cameraToFrag, worldNormal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );\n\t\t#endif\n\t#else\n\t\tvec3 reflectVec = vReflect;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\tvec4 envColor = textureCubeUV( envMap, reflectVec, 0.0 );\n\t#else\n\t\tvec4 envColor = vec4( 0.0 );\n\t#endif\n\t#ifndef ENVMAP_TYPE_CUBE_UV\n\t\tenvColor = envMapTexelToLinear( envColor );\n\t#endif\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\t#endif\n#endif",envmap_common_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float envMapIntensity;\n\tuniform float flipEnvMap;\n\tuniform int maxMipLevel;\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\t\n#endif",envmap_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float reflectivity;\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\tvarying vec3 vWorldPosition;\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n#endif",envmap_pars_vertex:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) ||defined( PHONG )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\t\n\t\tvarying vec3 vWorldPosition;\n\t#else\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\t#endif\n#endif",envmap_physical_pars_fragment:"#if defined( USE_ENVMAP )\n\t#ifdef ENVMAP_MODE_REFRACTION\n\t\tuniform float refractionRatio;\n\t#endif\n\tvec3 getLightProbeIndirectIrradiance( const in GeometricContext geometry, const in int maxMIPLevel ) {\n\t\tvec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );\n\t\t#ifdef ENVMAP_TYPE_CUBE\n\t\t\tvec3 queryVec = vec3( flipEnvMap * worldNormal.x, worldNormal.yz );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = textureCubeLodEXT( envMap, queryVec, float( maxMIPLevel ) );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = textureCube( envMap, queryVec, float( maxMIPLevel ) );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );\n\t\t#else\n\t\t\tvec4 envMapColor = vec4( 0.0 );\n\t\t#endif\n\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\t}\n\tfloat getSpecularMIPLevel( const in float roughness, const in int maxMIPLevel ) {\n\t\tfloat maxMIPLevelScalar = float( maxMIPLevel );\n\t\tfloat sigma = PI * roughness * roughness / ( 1.0 + roughness );\n\t\tfloat desiredMIPLevel = maxMIPLevelScalar + log2( sigma );\n\t\treturn clamp( desiredMIPLevel, 0.0, maxMIPLevelScalar );\n\t}\n\tvec3 getLightProbeIndirectRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in int maxMIPLevel ) {\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( -viewDir, normal );\n\t\t\treflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( -viewDir, normal, refractionRatio );\n\t\t#endif\n\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\t\tfloat specularMIPLevel = getSpecularMIPLevel( roughness, maxMIPLevel );\n\t\t#ifdef ENVMAP_TYPE_CUBE\n\t\t\tvec3 queryReflectVec = vec3( flipEnvMap * reflectVec.x, reflectVec.yz );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = textureCubeLodEXT( envMap, queryReflectVec, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = textureCube( envMap, queryReflectVec, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );\n\t\t#endif\n\t\treturn envMapColor.rgb * envMapIntensity;\n\t}\n#endif",envmap_vertex:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvWorldPosition = worldPosition.xyz;\n\t#else\n\t\tvec3 cameraToVertex;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#endif\n#endif",fog_vertex:"#ifdef USE_FOG\n\tfogDepth = - mvPosition.z;\n#endif",fog_pars_vertex:"#ifdef USE_FOG\n\tvarying float fogDepth;\n#endif",fog_fragment:"#ifdef USE_FOG\n\t#ifdef FOG_EXP2\n\t\tfloat fogFactor = 1.0 - exp( - fogDensity * fogDensity * fogDepth * fogDepth );\n\t#else\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, fogDepth );\n\t#endif\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif",fog_pars_fragment:"#ifdef USE_FOG\n\tuniform vec3 fogColor;\n\tvarying float fogDepth;\n\t#ifdef FOG_EXP2\n\t\tuniform float fogDensity;\n\t#else\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n#endif",gradientmap_pars_fragment:"#ifdef USE_GRADIENTMAP\n\tuniform sampler2D gradientMap;\n#endif\nvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n\tfloat dotNL = dot( normal, lightDirection );\n\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n\t#ifdef USE_GRADIENTMAP\n\t\treturn texture2D( gradientMap, coord ).rgb;\n\t#else\n\t\treturn ( coord.x < 0.7 ) ? vec3( 0.7 ) : vec3( 1.0 );\n\t#endif\n}",lightmap_fragment:"#ifdef USE_LIGHTMAP\n\tvec4 lightMapTexel= texture2D( lightMap, vUv2 );\n\treflectedLight.indirectDiffuse += PI * lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;\n#endif",lightmap_pars_fragment:"#ifdef USE_LIGHTMAP\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n#endif",lights_lambert_vertex:"vec3 diffuse = vec3( 1.0 );\nGeometricContext geometry;\ngeometry.position = mvPosition.xyz;\ngeometry.normal = normalize( transformedNormal );\ngeometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( -mvPosition.xyz );\nGeometricContext backGeometry;\nbackGeometry.position = geometry.position;\nbackGeometry.normal = -geometry.normal;\nbackGeometry.viewDir = geometry.viewDir;\nvLightFront = vec3( 0.0 );\nvIndirectFront = vec3( 0.0 );\n#ifdef DOUBLE_SIDED\n\tvLightBack = vec3( 0.0 );\n\tvIndirectBack = vec3( 0.0 );\n#endif\nIncidentLight directLight;\nfloat dotNL;\nvec3 directLightColor_Diffuse;\nvIndirectFront += getAmbientLightIrradiance( ambientLightColor );\nvIndirectFront += getLightProbeIrradiance( lightProbe, geometry );\n#ifdef DOUBLE_SIDED\n\tvIndirectBack += getAmbientLightIrradiance( ambientLightColor );\n\tvIndirectBack += getLightProbeIrradiance( lightProbe, backGeometry );\n#endif\n#if NUM_POINT_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tgetPointDirectLightIrradiance( pointLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tgetSpotDirectLightIrradiance( spotLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if NUM_DIR_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tgetDirectionalDirectLightIrradiance( directionalLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\tvIndirectFront += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvIndirectBack += getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry );\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif",lights_pars_begin:"uniform bool receiveShadow;\nuniform vec3 ambientLightColor;\nuniform vec3 lightProbe[ 9 ];\nvec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {\n\tfloat x = normal.x, y = normal.y, z = normal.z;\n\tvec3 result = shCoefficients[ 0 ] * 0.886227;\n\tresult += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;\n\tresult += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;\n\tresult += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;\n\tresult += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;\n\tresult += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;\n\tresult += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );\n\tresult += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;\n\tresult += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );\n\treturn result;\n}\nvec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in GeometricContext geometry ) {\n\tvec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );\n\tvec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );\n\treturn irradiance;\n}\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\tvec3 irradiance = ambientLightColor;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treturn irradiance;\n}\n#if NUM_DIR_LIGHTS > 0\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\t};\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\tvoid getDirectionalDirectLightIrradiance( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\t\tdirectLight.color = directionalLight.color;\n\t\tdirectLight.direction = directionalLight.direction;\n\t\tdirectLight.visible = true;\n\t}\n#endif\n#if NUM_POINT_LIGHTS > 0\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t};\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\tvoid getPointDirectLightIrradiance( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\t\tvec3 lVector = pointLight.position - geometry.position;\n\t\tdirectLight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tdirectLight.color = pointLight.color;\n\t\tdirectLight.color *= punctualLightIntensityToIrradianceFactor( lightDistance, pointLight.distance, pointLight.decay );\n\t\tdirectLight.visible = ( directLight.color != vec3( 0.0 ) );\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\t};\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\tvoid getSpotDirectLightIrradiance( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\t\tvec3 lVector = spotLight.position - geometry.position;\n\t\tdirectLight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tfloat angleCos = dot( directLight.direction, spotLight.direction );\n\t\tif ( angleCos > spotLight.coneCos ) {\n\t\t\tfloat spotEffect = smoothstep( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\t\t\tdirectLight.color = spotLight.color;\n\t\t\tdirectLight.color *= spotEffect * punctualLightIntensityToIrradianceFactor( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tdirectLight.visible = true;\n\t\t} else {\n\t\t\tdirectLight.color = vec3( 0.0 );\n\t\t\tdirectLight.visible = false;\n\t\t}\n\t}\n#endif\n#if NUM_RECT_AREA_LIGHTS > 0\n\tstruct RectAreaLight {\n\t\tvec3 color;\n\t\tvec3 position;\n\t\tvec3 halfWidth;\n\t\tvec3 halfHeight;\n\t};\n\tuniform sampler2D ltc_1;\tuniform sampler2D ltc_2;\n\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in GeometricContext geometry ) {\n\t\tfloat dotNL = dot( geometry.normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tirradiance *= PI;\n\t\t#endif\n\t\treturn irradiance;\n\t}\n#endif",lights_toon_fragment:"ToonMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;",lights_toon_pars_fragment:"varying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\nstruct ToonMaterial {\n\tvec3 diffuseColor;\n};\nvoid RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\tvec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treflectedLight.directDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Toon\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Toon\n#define Material_LightProbeLOD( material )\t(0)",lights_phong_fragment:"BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;",lights_phong_pars_fragment:"varying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\nstruct BlinnPhongMaterial {\n\tvec3 diffuseColor;\n\tvec3 specularColor;\n\tfloat specularShininess;\n\tfloat specularStrength;\n};\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treflectedLight.directDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular += irradiance * BRDF_Specular_BlinnPhong( directLight, geometry, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong\n#define Material_LightProbeLOD( material )\t(0)",lights_physical_fragment:"PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nvec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );\nfloat geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );\nmaterial.specularRoughness = max( roughnessFactor, 0.0525 );material.specularRoughness += geometryRoughness;\nmaterial.specularRoughness = min( material.specularRoughness, 1.0 );\n#ifdef REFLECTIVITY\n\tmaterial.specularColor = mix( vec3( MAXIMUM_SPECULAR_COEFFICIENT * pow2( reflectivity ) ), diffuseColor.rgb, metalnessFactor );\n#else\n\tmaterial.specularColor = mix( vec3( DEFAULT_SPECULAR_COEFFICIENT ), diffuseColor.rgb, metalnessFactor );\n#endif\n#ifdef CLEARCOAT\n\tmaterial.clearcoat = clearcoat;\n\tmaterial.clearcoatRoughness = clearcoatRoughness;\n\t#ifdef USE_CLEARCOATMAP\n\t\tmaterial.clearcoat *= texture2D( clearcoatMap, vUv ).x;\n\t#endif\n\t#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\t\tmaterial.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vUv ).y;\n\t#endif\n\tmaterial.clearcoat = saturate( material.clearcoat );\tmaterial.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );\n\tmaterial.clearcoatRoughness += geometryRoughness;\n\tmaterial.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );\n#endif\n#ifdef USE_SHEEN\n\tmaterial.sheenColor = sheen;\n#endif",lights_physical_pars_fragment:"struct PhysicalMaterial {\n\tvec3 diffuseColor;\n\tfloat specularRoughness;\n\tvec3 specularColor;\n#ifdef CLEARCOAT\n\tfloat clearcoat;\n\tfloat clearcoatRoughness;\n#endif\n#ifdef USE_SHEEN\n\tvec3 sheenColor;\n#endif\n};\n#define MAXIMUM_SPECULAR_COEFFICIENT 0.16\n#define DEFAULT_SPECULAR_COEFFICIENT 0.04\nfloat clearcoatDHRApprox( const in float roughness, const in float dotNL ) {\n\treturn DEFAULT_SPECULAR_COEFFICIENT + ( 1.0 - DEFAULT_SPECULAR_COEFFICIENT ) * ( pow( 1.0 - dotNL, 5.0 ) * pow( 1.0 - roughness, 2.0 ) );\n}\n#if NUM_RECT_AREA_LIGHTS > 0\n\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t\tvec3 normal = geometry.normal;\n\t\tvec3 viewDir = geometry.viewDir;\n\t\tvec3 position = geometry.position;\n\t\tvec3 lightPos = rectAreaLight.position;\n\t\tvec3 halfWidth = rectAreaLight.halfWidth;\n\t\tvec3 halfHeight = rectAreaLight.halfHeight;\n\t\tvec3 lightColor = rectAreaLight.color;\n\t\tfloat roughness = material.specularRoughness;\n\t\tvec3 rectCoords[ 4 ];\n\t\trectCoords[ 0 ] = lightPos + halfWidth - halfHeight;\t\trectCoords[ 1 ] = lightPos - halfWidth - halfHeight;\n\t\trectCoords[ 2 ] = lightPos - halfWidth + halfHeight;\n\t\trectCoords[ 3 ] = lightPos + halfWidth + halfHeight;\n\t\tvec2 uv = LTC_Uv( normal, viewDir, roughness );\n\t\tvec4 t1 = texture2D( ltc_1, uv );\n\t\tvec4 t2 = texture2D( ltc_2, uv );\n\t\tmat3 mInv = mat3(\n\t\t\tvec3( t1.x, 0, t1.y ),\n\t\t\tvec3(    0, 1,    0 ),\n\t\t\tvec3( t1.z, 0, t1.w )\n\t\t);\n\t\tvec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );\n\t\treflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\n\t\treflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );\n\t}\n#endif\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\t#ifdef CLEARCOAT\n\t\tfloat ccDotNL = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );\n\t\tvec3 ccIrradiance = ccDotNL * directLight.color;\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tccIrradiance *= PI;\n\t\t#endif\n\t\tfloat clearcoatDHR = material.clearcoat * clearcoatDHRApprox( material.clearcoatRoughness, ccDotNL );\n\t\treflectedLight.directSpecular += ccIrradiance * material.clearcoat * BRDF_Specular_GGX( directLight, geometry.viewDir, geometry.clearcoatNormal, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearcoatRoughness );\n\t#else\n\t\tfloat clearcoatDHR = 0.0;\n\t#endif\n\t#ifdef USE_SHEEN\n\t\treflectedLight.directSpecular += ( 1.0 - clearcoatDHR ) * irradiance * BRDF_Specular_Sheen(\n\t\t\tmaterial.specularRoughness,\n\t\t\tdirectLight.direction,\n\t\t\tgeometry,\n\t\t\tmaterial.sheenColor\n\t\t);\n\t#else\n\t\treflectedLight.directSpecular += ( 1.0 - clearcoatDHR ) * irradiance * BRDF_Specular_GGX( directLight, geometry.viewDir, geometry.normal, material.specularColor, material.specularRoughness);\n\t#endif\n\treflectedLight.directDiffuse += ( 1.0 - clearcoatDHR ) * irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {\n\t#ifdef CLEARCOAT\n\t\tfloat ccDotNV = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );\n\t\treflectedLight.indirectSpecular += clearcoatRadiance * material.clearcoat * BRDF_Specular_GGX_Environment( geometry.viewDir, geometry.clearcoatNormal, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearcoatRoughness );\n\t\tfloat ccDotNL = ccDotNV;\n\t\tfloat clearcoatDHR = material.clearcoat * clearcoatDHRApprox( material.clearcoatRoughness, ccDotNL );\n\t#else\n\t\tfloat clearcoatDHR = 0.0;\n\t#endif\n\tfloat clearcoatInv = 1.0 - clearcoatDHR;\n\tvec3 singleScattering = vec3( 0.0 );\n\tvec3 multiScattering = vec3( 0.0 );\n\tvec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;\n\tBRDF_Specular_Multiscattering_Environment( geometry, material.specularColor, material.specularRoughness, singleScattering, multiScattering );\n\tvec3 diffuse = material.diffuseColor * ( 1.0 - ( singleScattering + multiScattering ) );\n\treflectedLight.indirectSpecular += clearcoatInv * radiance * singleScattering;\n\treflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;\n\treflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;\n}\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}",lights_fragment_begin:"\nGeometricContext geometry;\ngeometry.position = - vViewPosition;\ngeometry.normal = normal;\ngeometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );\n#ifdef CLEARCOAT\n\tgeometry.clearcoatNormal = clearcoatNormal;\n#endif\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\tPointLight pointLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tgetPointDirectLightIrradiance( pointLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )\n\t\tpointLightShadow = pointLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n\tSpotLight spotLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tgetSpotDirectLightIrradiance( spotLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\tspotLightShadow = spotLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n\tDirectionalLight directionalLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tgetDirectionalDirectLightIrradiance( directionalLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )\n\t\tdirectionalLightShadow = directionalLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n\tRectAreaLight rectAreaLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\t\trectAreaLight = rectAreaLights[ i ];\n\t\tRE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if defined( RE_IndirectDiffuse )\n\tvec3 iblIrradiance = vec3( 0.0 );\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n\tirradiance += getLightProbeIrradiance( lightProbe, geometry );\n\t#if ( NUM_HEMI_LIGHTS > 0 )\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n#endif\n#if defined( RE_IndirectSpecular )\n\tvec3 radiance = vec3( 0.0 );\n\tvec3 clearcoatRadiance = vec3( 0.0 );\n#endif",lights_fragment_maps:"#if defined( RE_IndirectDiffuse )\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel= texture2D( lightMap, vUv2 );\n\t\tvec3 lightMapIrradiance = lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tlightMapIrradiance *= PI;\n\t\t#endif\n\t\tirradiance += lightMapIrradiance;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )\n\t\tiblIrradiance += getLightProbeIndirectIrradiance( geometry, maxMipLevel );\n\t#endif\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n\tradiance += getLightProbeIndirectRadiance( geometry.viewDir, geometry.normal, material.specularRoughness, maxMipLevel );\n\t#ifdef CLEARCOAT\n\t\tclearcoatRadiance += getLightProbeIndirectRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness, maxMipLevel );\n\t#endif\n#endif",lights_fragment_end:"#if defined( RE_IndirectDiffuse )\n\tRE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );\n#endif\n#if defined( RE_IndirectSpecular )\n\tRE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );\n#endif",logdepthbuf_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tgl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;\n#endif",logdepthbuf_pars_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tuniform float logDepthBufFC;\n\tvarying float vFragDepth;\n\tvarying float vIsPerspective;\n#endif",logdepthbuf_pars_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t\tvarying float vIsPerspective;\n\t#else\n\t\tuniform float logDepthBufFC;\n\t#endif\n#endif",logdepthbuf_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvFragDepth = 1.0 + gl_Position.w;\n\t\tvIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );\n\t#else\n\t\tif ( isPerspectiveMatrix( projectionMatrix ) ) {\n\t\t\tgl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;\n\t\t\tgl_Position.z *= gl_Position.w;\n\t\t}\n\t#endif\n#endif",map_fragment:"#ifdef USE_MAP\n\tvec4 texelColor = texture2D( map, vUv );\n\ttexelColor = mapTexelToLinear( texelColor );\n\tdiffuseColor *= texelColor;\n#endif",map_pars_fragment:"#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif",map_particle_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\tvec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\n#endif\n#ifdef USE_MAP\n\tvec4 mapTexel = texture2D( map, uv );\n\tdiffuseColor *= mapTexelToLinear( mapTexel );\n#endif\n#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, uv ).g;\n#endif",map_particle_pars_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\tuniform mat3 uvTransform;\n#endif\n#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif\n#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",metalnessmap_fragment:"float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n\tvec4 texelMetalness = texture2D( metalnessMap, vUv );\n\tmetalnessFactor *= texelMetalness.b;\n#endif",metalnessmap_pars_fragment:"#ifdef USE_METALNESSMAP\n\tuniform sampler2D metalnessMap;\n#endif",morphnormal_vertex:"#ifdef USE_MORPHNORMALS\n\tobjectNormal *= morphTargetBaseInfluence;\n\tobjectNormal += morphNormal0 * morphTargetInfluences[ 0 ];\n\tobjectNormal += morphNormal1 * morphTargetInfluences[ 1 ];\n\tobjectNormal += morphNormal2 * morphTargetInfluences[ 2 ];\n\tobjectNormal += morphNormal3 * morphTargetInfluences[ 3 ];\n#endif",morphtarget_pars_vertex:"#ifdef USE_MORPHTARGETS\n\tuniform float morphTargetBaseInfluence;\n\t#ifndef USE_MORPHNORMALS\n\t\tuniform float morphTargetInfluences[ 8 ];\n\t#else\n\t\tuniform float morphTargetInfluences[ 4 ];\n\t#endif\n#endif",morphtarget_vertex:"#ifdef USE_MORPHTARGETS\n\ttransformed *= morphTargetBaseInfluence;\n\ttransformed += morphTarget0 * morphTargetInfluences[ 0 ];\n\ttransformed += morphTarget1 * morphTargetInfluences[ 1 ];\n\ttransformed += morphTarget2 * morphTargetInfluences[ 2 ];\n\ttransformed += morphTarget3 * morphTargetInfluences[ 3 ];\n\t#ifndef USE_MORPHNORMALS\n\t\ttransformed += morphTarget4 * morphTargetInfluences[ 4 ];\n\t\ttransformed += morphTarget5 * morphTargetInfluences[ 5 ];\n\t\ttransformed += morphTarget6 * morphTargetInfluences[ 6 ];\n\t\ttransformed += morphTarget7 * morphTargetInfluences[ 7 ];\n\t#endif\n#endif",normal_fragment_begin:"float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;\n#ifdef FLAT_SHADED\n\tvec3 fdx = vec3( dFdx( vViewPosition.x ), dFdx( vViewPosition.y ), dFdx( vViewPosition.z ) );\n\tvec3 fdy = vec3( dFdy( vViewPosition.x ), dFdy( vViewPosition.y ), dFdy( vViewPosition.z ) );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n#else\n\tvec3 normal = normalize( vNormal );\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * faceDirection;\n\t#endif\n\t#ifdef USE_TANGENT\n\t\tvec3 tangent = normalize( vTangent );\n\t\tvec3 bitangent = normalize( vBitangent );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\ttangent = tangent * faceDirection;\n\t\t\tbitangent = bitangent * faceDirection;\n\t\t#endif\n\t\t#if defined( TANGENTSPACE_NORMALMAP ) || defined( USE_CLEARCOAT_NORMALMAP )\n\t\t\tmat3 vTBN = mat3( tangent, bitangent, normal );\n\t\t#endif\n\t#endif\n#endif\nvec3 geometryNormal = normal;",normal_fragment_maps:"#ifdef OBJECTSPACE_NORMALMAP\n\tnormal = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\t#ifdef FLIP_SIDED\n\t\tnormal = - normal;\n\t#endif\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * faceDirection;\n\t#endif\n\tnormal = normalize( normalMatrix * normal );\n#elif defined( TANGENTSPACE_NORMALMAP )\n\tvec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\tmapN.xy *= normalScale;\n\t#ifdef USE_TANGENT\n\t\tnormal = normalize( vTBN * mapN );\n\t#else\n\t\tnormal = perturbNormal2Arb( -vViewPosition, normal, mapN, faceDirection );\n\t#endif\n#elif defined( USE_BUMPMAP )\n\tnormal = perturbNormalArb( -vViewPosition, normal, dHdxy_fwd(), faceDirection );\n#endif",normalmap_pars_fragment:"#ifdef USE_NORMALMAP\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n#endif\n#ifdef OBJECTSPACE_NORMALMAP\n\tuniform mat3 normalMatrix;\n#endif\n#if ! defined ( USE_TANGENT ) && ( defined ( TANGENTSPACE_NORMALMAP ) || defined ( USE_CLEARCOAT_NORMALMAP ) )\n\tvec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm, vec3 mapN, float faceDirection ) {\n\t\tvec3 q0 = vec3( dFdx( eye_pos.x ), dFdx( eye_pos.y ), dFdx( eye_pos.z ) );\n\t\tvec3 q1 = vec3( dFdy( eye_pos.x ), dFdy( eye_pos.y ), dFdy( eye_pos.z ) );\n\t\tvec2 st0 = dFdx( vUv.st );\n\t\tvec2 st1 = dFdy( vUv.st );\n\t\tvec3 N = surf_norm;\n\t\tvec3 q1perp = cross( q1, N );\n\t\tvec3 q0perp = cross( N, q0 );\n\t\tvec3 T = q1perp * st0.x + q0perp * st1.x;\n\t\tvec3 B = q1perp * st0.y + q0perp * st1.y;\n\t\tfloat det = max( dot( T, T ), dot( B, B ) );\n\t\tfloat scale = ( det == 0.0 ) ? 0.0 : faceDirection * inversesqrt( det );\n\t\treturn normalize( T * ( mapN.x * scale ) + B * ( mapN.y * scale ) + N * mapN.z );\n\t}\n#endif",clearcoat_normal_fragment_begin:"#ifdef CLEARCOAT\n\tvec3 clearcoatNormal = geometryNormal;\n#endif",clearcoat_normal_fragment_maps:"#ifdef USE_CLEARCOAT_NORMALMAP\n\tvec3 clearcoatMapN = texture2D( clearcoatNormalMap, vUv ).xyz * 2.0 - 1.0;\n\tclearcoatMapN.xy *= clearcoatNormalScale;\n\t#ifdef USE_TANGENT\n\t\tclearcoatNormal = normalize( vTBN * clearcoatMapN );\n\t#else\n\t\tclearcoatNormal = perturbNormal2Arb( - vViewPosition, clearcoatNormal, clearcoatMapN, faceDirection );\n\t#endif\n#endif",clearcoat_pars_fragment:"#ifdef USE_CLEARCOATMAP\n\tuniform sampler2D clearcoatMap;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tuniform sampler2D clearcoatRoughnessMap;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tuniform sampler2D clearcoatNormalMap;\n\tuniform vec2 clearcoatNormalScale;\n#endif",packing:"vec3 packNormalToRGB( const in vec3 normal ) {\n\treturn normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n\treturn 2.0 * rgb.xyz - 1.0;\n}\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;\nconst vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );\nconst vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );\nconst float ShiftRight8 = 1. / 256.;\nvec4 packDepthToRGBA( const in float v ) {\n\tvec4 r = vec4( fract( v * PackFactors ), v );\n\tr.yzw -= r.xyz * ShiftRight8;\treturn r * PackUpscale;\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n\treturn dot( v, UnpackFactors );\n}\nvec4 pack2HalfToRGBA( vec2 v ) {\n\tvec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ));\n\treturn vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w);\n}\nvec2 unpackRGBATo2Half( vec4 v ) {\n\treturn vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {\n\treturn linearClipZ * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn (( near + viewZ ) * far ) / (( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {\n\treturn ( near * far ) / ( ( far - near ) * invClipZ - far );\n}",premultiplied_alpha_fragment:"#ifdef PREMULTIPLIED_ALPHA\n\tgl_FragColor.rgb *= gl_FragColor.a;\n#endif",project_vertex:"vec4 mvPosition = vec4( transformed, 1.0 );\n#ifdef USE_INSTANCING\n\tmvPosition = instanceMatrix * mvPosition;\n#endif\nmvPosition = modelViewMatrix * mvPosition;\ngl_Position = projectionMatrix * mvPosition;",dithering_fragment:"#ifdef DITHERING\n\tgl_FragColor.rgb = dithering( gl_FragColor.rgb );\n#endif",dithering_pars_fragment:"#ifdef DITHERING\n\tvec3 dithering( vec3 color ) {\n\t\tfloat grid_position = rand( gl_FragCoord.xy );\n\t\tvec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\n\t\tdither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\n\t\treturn color + dither_shift_RGB;\n\t}\n#endif",roughnessmap_fragment:"float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n\tvec4 texelRoughness = texture2D( roughnessMap, vUv );\n\troughnessFactor *= texelRoughness.g;\n#endif",roughnessmap_pars_fragment:"#ifdef USE_ROUGHNESSMAP\n\tuniform sampler2D roughnessMap;\n#endif",shadowmap_pars_fragment:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\t\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n\t}\n\tvec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {\n\t\treturn unpackRGBATo2Half( texture2D( shadow, uv ) );\n\t}\n\tfloat VSMShadow (sampler2D shadow, vec2 uv, float compare ){\n\t\tfloat occlusion = 1.0;\n\t\tvec2 distribution = texture2DDistribution( shadow, uv );\n\t\tfloat hard_shadow = step( compare , distribution.x );\n\t\tif (hard_shadow != 1.0 ) {\n\t\t\tfloat distance = compare - distribution.x ;\n\t\t\tfloat variance = max( 0.00000, distribution.y * distribution.y );\n\t\t\tfloat softness_probability = variance / (variance + distance * distance );\t\t\tsoftness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );\t\t\tocclusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );\n\t\t}\n\t\treturn occlusion;\n\t}\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tfloat shadow = 1.0;\n\t\tshadowCoord.xyz /= shadowCoord.w;\n\t\tshadowCoord.z += shadowBias;\n\t\tbvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );\n\t\tbool inFrustum = all( inFrustumVec );\n\t\tbvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );\n\t\tbool frustumTest = all( frustumTestVec );\n\t\tif ( frustumTest ) {\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tfloat dx2 = dx0 / 2.0;\n\t\t\tfloat dy2 = dy0 / 2.0;\n\t\t\tfloat dx3 = dx1 / 2.0;\n\t\t\tfloat dy3 = dy1 / 2.0;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 17.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx = texelSize.x;\n\t\t\tfloat dy = texelSize.y;\n\t\t\tvec2 uv = shadowCoord.xy;\n\t\t\tvec2 f = fract( uv * shadowMapSize + 0.5 );\n\t\t\tuv -= f * texelSize;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, uv, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ), \n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ), \n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t f.y )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_VSM )\n\t\t\tshadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#else\n\t\t\tshadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#endif\n\t\t}\n\t\treturn shadow;\n\t}\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\t\tvec3 absV = abs( v );\n\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\tabsV *= scaleToCube;\n\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\t\tvec2 planar = v.xy;\n\t\tfloat almostATexel = 1.5 * texelSizeY;\n\t\tfloat almostOne = 1.0 - almostATexel;\n\t\tif ( absV.z >= almostOne ) {\n\t\t\tif ( v.z > 0.0 )\n\t\t\t\tplanar.x = 4.0 - v.x;\n\t\t} else if ( absV.x >= almostOne ) {\n\t\t\tfloat signX = sign( v.x );\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\n\t\t} else if ( absV.y >= almostOne ) {\n\t\t\tfloat signY = sign( v.y );\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y = v.z * signY - 2.0;\n\t\t}\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\t}\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\n\t\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\t\tvec3 lightToPosition = shadowCoord.xyz;\n\t\tfloat dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );\t\tdp += shadowBias;\n\t\tvec3 bd3D = normalize( lightToPosition );\n\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )\n\t\t\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\t\t\treturn (\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\treturn texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\t\t#endif\n\t}\n#endif",shadowmap_pars_vertex:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 spotShadowMatrix[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n#endif",shadowmap_vertex:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0 || NUM_SPOT_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0\n\t\tvec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\tvec4 shadowWorldPosition;\n\t#endif\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvSpotShadowCoord[ i ] = spotShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n#endif",shadowmask_pars_fragment:"float getShadowMask() {\n\tfloat shadow = 1.0;\n\t#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tdirectionalLight = directionalLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tspotLight = spotLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tpointLight = pointLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#endif\n\treturn shadow;\n}",skinbase_vertex:"#ifdef USE_SKINNING\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif",skinning_pars_vertex:"#ifdef USE_SKINNING\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\t#ifdef BONE_TEXTURE\n\t\tuniform highp sampler2D boneTexture;\n\t\tuniform int boneTextureSize;\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tfloat j = i * 4.0;\n\t\t\tfloat x = mod( j, float( boneTextureSize ) );\n\t\t\tfloat y = floor( j / float( boneTextureSize ) );\n\t\t\tfloat dx = 1.0 / float( boneTextureSize );\n\t\t\tfloat dy = 1.0 / float( boneTextureSize );\n\t\t\ty = dy * ( y + 0.5 );\n\t\t\tvec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\n\t\t\tvec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\n\t\t\tvec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\n\t\t\tvec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\n\t\t\tmat4 bone = mat4( v1, v2, v3, v4 );\n\t\t\treturn bone;\n\t\t}\n\t#else\n\t\tuniform mat4 boneMatrices[ MAX_BONES ];\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tmat4 bone = boneMatrices[ int(i) ];\n\t\t\treturn bone;\n\t\t}\n\t#endif\n#endif",skinning_vertex:"#ifdef USE_SKINNING\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\ttransformed = ( bindMatrixInverse * skinned ).xyz;\n#endif",skinnormal_vertex:"#ifdef USE_SKINNING\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n\t#ifdef USE_TANGENT\n\t\tobjectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#endif\n#endif",specularmap_fragment:"float specularStrength;\n#ifdef USE_SPECULARMAP\n\tvec4 texelSpecular = texture2D( specularMap, vUv );\n\tspecularStrength = texelSpecular.r;\n#else\n\tspecularStrength = 1.0;\n#endif",specularmap_pars_fragment:"#ifdef USE_SPECULARMAP\n\tuniform sampler2D specularMap;\n#endif",tonemapping_fragment:"#if defined( TONE_MAPPING )\n\tgl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n#endif",tonemapping_pars_fragment:"#ifndef saturate\n#define saturate(a) clamp( a, 0.0, 1.0 )\n#endif\nuniform float toneMappingExposure;\nvec3 LinearToneMapping( vec3 color ) {\n\treturn toneMappingExposure * color;\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( color / ( vec3( 1.0 ) + color ) );\n}\nvec3 OptimizedCineonToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\tcolor = max( vec3( 0.0 ), color - 0.004 );\n\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\nvec3 RRTAndODTFit( vec3 v ) {\n\tvec3 a = v * ( v + 0.0245786 ) - 0.000090537;\n\tvec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;\n\treturn a / b;\n}\nvec3 ACESFilmicToneMapping( vec3 color ) {\n\tconst mat3 ACESInputMat = mat3(\n\t\tvec3( 0.59719, 0.07600, 0.02840 ),\t\tvec3( 0.35458, 0.90834, 0.13383 ),\n\t\tvec3( 0.04823, 0.01566, 0.83777 )\n\t);\n\tconst mat3 ACESOutputMat = mat3(\n\t\tvec3(  1.60475, -0.10208, -0.00327 ),\t\tvec3( -0.53108,  1.10813, -0.07276 ),\n\t\tvec3( -0.07367, -0.00605,  1.07602 )\n\t);\n\tcolor *= toneMappingExposure / 0.6;\n\tcolor = ACESInputMat * color;\n\tcolor = RRTAndODTFit( color );\n\tcolor = ACESOutputMat * color;\n\treturn saturate( color );\n}\nvec3 CustomToneMapping( vec3 color ) { return color; }",transmissionmap_fragment:"#ifdef USE_TRANSMISSIONMAP\n\ttotalTransmission *= texture2D( transmissionMap, vUv ).r;\n#endif",transmissionmap_pars_fragment:"#ifdef USE_TRANSMISSIONMAP\n\tuniform sampler2D transmissionMap;\n#endif",uv_pars_fragment:"#if ( defined( USE_UV ) && ! defined( UVS_VERTEX_ONLY ) )\n\tvarying vec2 vUv;\n#endif",uv_pars_vertex:"#ifdef USE_UV\n\t#ifdef UVS_VERTEX_ONLY\n\t\tvec2 vUv;\n\t#else\n\t\tvarying vec2 vUv;\n\t#endif\n\tuniform mat3 uvTransform;\n#endif",uv_vertex:"#ifdef USE_UV\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n#endif",uv2_pars_fragment:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvarying vec2 vUv2;\n#endif",uv2_pars_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tattribute vec2 uv2;\n\tvarying vec2 vUv2;\n\tuniform mat3 uv2Transform;\n#endif",uv2_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvUv2 = ( uv2Transform * vec3( uv2, 1 ) ).xy;\n#endif",worldpos_vertex:"#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP )\n\tvec4 worldPosition = vec4( transformed, 1.0 );\n\t#ifdef USE_INSTANCING\n\t\tworldPosition = instanceMatrix * worldPosition;\n\t#endif\n\tworldPosition = modelMatrix * worldPosition;\n#endif",background_frag:"uniform sampler2D t2D;\nvarying vec2 vUv;\nvoid main() {\n\tvec4 texColor = texture2D( t2D, vUv );\n\tgl_FragColor = mapTexelToLinear( texColor );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",background_vert:"varying vec2 vUv;\nuniform mat3 uvTransform;\nvoid main() {\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\tgl_Position = vec4( position.xy, 1.0, 1.0 );\n}",cube_frag:"#include <envmap_common_pars_fragment>\nuniform float opacity;\nvarying vec3 vWorldDirection;\n#include <cube_uv_reflection_fragment>\nvoid main() {\n\tvec3 vReflect = vWorldDirection;\n\t#include <envmap_fragment>\n\tgl_FragColor = envColor;\n\tgl_FragColor.a *= opacity;\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",cube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",depth_frag:"#if DEPTH_PACKING == 3200\n\tuniform float opacity;\n#endif\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#if DEPTH_PACKING == 3200\n\t\tdiffuseColor.a = opacity;\n\t#endif\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <logdepthbuf_fragment>\n\tfloat fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;\n\t#if DEPTH_PACKING == 3200\n\t\tgl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );\n\t#elif DEPTH_PACKING == 3201\n\t\tgl_FragColor = packDepthToRGBA( fragCoordZ );\n\t#endif\n}",depth_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvHighPrecisionZW = gl_Position.zw;\n}",distanceRGBA_frag:"#define DISTANCE\nuniform vec3 referencePosition;\nuniform float nearDistance;\nuniform float farDistance;\nvarying vec3 vWorldPosition;\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main () {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\tfloat dist = length( vWorldPosition - referencePosition );\n\tdist = ( dist - nearDistance ) / ( farDistance - nearDistance );\n\tdist = saturate( dist );\n\tgl_FragColor = packDepthToRGBA( dist );\n}",distanceRGBA_vert:"#define DISTANCE\nvarying vec3 vWorldPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\tvWorldPosition = worldPosition.xyz;\n}",equirect_frag:"uniform sampler2D tEquirect;\nvarying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvec3 direction = normalize( vWorldDirection );\n\tvec2 sampleUV = equirectUv( direction );\n\tvec4 texColor = texture2D( tEquirect, sampleUV );\n\tgl_FragColor = mapTexelToLinear( texColor );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",equirect_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}",linedashed_frag:"uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\t\tdiscard;\n\t}\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <color_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",linedashed_vert:"uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\tvLineDistance = scale * lineDistance;\n\t#include <color_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",meshbasic_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\t#ifdef USE_LIGHTMAP\n\t\n\t\tvec4 lightMapTexel= texture2D( lightMap, vUv2 );\n\t\treflectedLight.indirectDiffuse += lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;\n\t#else\n\t\treflectedLight.indirectDiffuse += vec3( 1.0 );\n\t#endif\n\t#include <aomap_fragment>\n\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshbasic_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_ENVMAP\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <envmap_vertex>\n\t#include <fog_vertex>\n}",meshlambert_frag:"uniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\nvarying vec3 vLightFront;\nvarying vec3 vIndirectFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n\tvarying vec3 vIndirectBack;\n#endif\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <fog_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <emissivemap_fragment>\n\t#ifdef DOUBLE_SIDED\n\t\treflectedLight.indirectDiffuse += ( gl_FrontFacing ) ? vIndirectFront : vIndirectBack;\n\t#else\n\t\treflectedLight.indirectDiffuse += vIndirectFront;\n\t#endif\n\t#include <lightmap_fragment>\n\treflectedLight.indirectDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb );\n\t#ifdef DOUBLE_SIDED\n\t\treflectedLight.directDiffuse = ( gl_FrontFacing ) ? vLightFront : vLightBack;\n\t#else\n\t\treflectedLight.directDiffuse = vLightFront;\n\t#endif\n\treflectedLight.directDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb ) * getShadowMask();\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshlambert_vert:"#define LAMBERT\nvarying vec3 vLightFront;\nvarying vec3 vIndirectFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n\tvarying vec3 vIndirectBack;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <lights_lambert_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshmatcap_frag:"#define MATCAP\nuniform vec3 diffuse;\nuniform float opacity;\nuniform sampler2D matcap;\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tvec3 viewDir = normalize( vViewPosition );\n\tvec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );\n\tvec3 y = cross( viewDir, x );\n\tvec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;\n\t#ifdef USE_MATCAP\n\t\tvec4 matcapColor = texture2D( matcap, uv );\n\t\tmatcapColor = matcapTexelToLinear( matcapColor );\n\t#else\n\t\tvec4 matcapColor = vec4( 1.0 );\n\t#endif\n\tvec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshmatcap_vert:"#define MATCAP\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#ifndef FLAT_SHADED\n\t\tvNormal = normalize( transformedNormal );\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n\tvViewPosition = - mvPosition.xyz;\n}",meshtoon_frag:"#define TOON\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <lights_toon_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_toon_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshtoon_vert:"#define TOON\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshphong_frag:"#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_phong_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshphong_vert:"#define PHONG\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshphysical_frag:"#define STANDARD\n#ifdef PHYSICAL\n\t#define REFLECTIVITY\n\t#define CLEARCOAT\n\t#define TRANSMISSION\n#endif\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifdef TRANSMISSION\n\tuniform float transmission;\n#endif\n#ifdef REFLECTIVITY\n\tuniform float reflectivity;\n#endif\n#ifdef CLEARCOAT\n\tuniform float clearcoat;\n\tuniform float clearcoatRoughness;\n#endif\n#ifdef USE_SHEEN\n\tuniform vec3 sheen;\n#endif\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <transmissionmap_pars_fragment>\n#include <bsdfs>\n#include <cube_uv_reflection_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_physical_pars_fragment>\n#include <fog_pars_fragment>\n#include <lights_pars_begin>\n#include <lights_physical_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <clearcoat_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#ifdef TRANSMISSION\n\t\tfloat totalTransmission = transmission;\n\t#endif\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <clearcoat_normal_fragment_begin>\n\t#include <clearcoat_normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <transmissionmap_fragment>\n\t#include <lights_physical_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#ifdef TRANSMISSION\n\t\tdiffuseColor.a *= mix( saturate( 1. - totalTransmission + linearToRelativeLuminance( reflectedLight.directSpecular + reflectedLight.indirectSpecular ) ), 1.0, metalness );\n\t#endif\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshphysical_vert:"#define STANDARD\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n\t#ifdef USE_TANGENT\n\t\tvTangent = normalize( transformedTangent );\n\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\t#endif\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",normal_frag:"#define NORMAL\nuniform float opacity;\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif\n#include <packing>\n#include <uv_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tgl_FragColor = vec4( packNormalToRGB( normal ), opacity );\n}",normal_vert:"#define NORMAL\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n\t#ifdef USE_TANGENT\n\t\tvTangent = normalize( transformedTangent );\n\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\t#endif\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n}",points_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_particle_fragment>\n\t#include <color_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",points_vert:"uniform float size;\nuniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <color_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\tgl_PointSize = size;\n\t#ifdef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );\n\t#endif\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <fog_vertex>\n}",shadow_frag:"uniform vec3 color;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\nvoid main() {\n\tgl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}",shadow_vert:"#include <common>\n#include <fog_pars_vertex>\n#include <shadowmap_pars_vertex>\nvoid main() {\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",sprite_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}",sprite_vert:"uniform float rotation;\nuniform vec2 center;\n#include <common>\n#include <uv_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\tvec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );\n\tvec2 scale;\n\tscale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );\n\tscale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );\n\t#ifndef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) scale *= - mvPosition.z;\n\t#endif\n\tvec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;\n\tvec2 rotatedPosition;\n\trotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\n\trotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\n\tmvPosition.xy += rotatedPosition;\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}"},hf={common:{diffuse:{value:new lh(15658734)},opacity:{value:1},map:{value:null},uvTransform:{value:new Dc},uv2Transform:{value:new Dc},alphaMap:{value:null}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},refractionRatio:{value:.98},maxMipLevel:{value:0}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new Lc(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new lh(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotShadowMap:{value:[]},spotShadowMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new lh(15658734)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},uvTransform:{value:new Dc}},sprite:{diffuse:{value:new lh(15658734)},opacity:{value:1},center:{value:new Lc(.5,.5)},rotation:{value:0},map:{value:null},alphaMap:{value:null},uvTransform:{value:new Dc}}},ff={basic:{uniforms:Yh([hf.common,hf.specularmap,hf.envmap,hf.aomap,hf.lightmap,hf.fog]),vertexShader:lf.meshbasic_vert,fragmentShader:lf.meshbasic_frag},lambert:{uniforms:Yh([hf.common,hf.specularmap,hf.envmap,hf.aomap,hf.lightmap,hf.emissivemap,hf.fog,hf.lights,{emissive:{value:new lh(0)}}]),vertexShader:lf.meshlambert_vert,fragmentShader:lf.meshlambert_frag},phong:{uniforms:Yh([hf.common,hf.specularmap,hf.envmap,hf.aomap,hf.lightmap,hf.emissivemap,hf.bumpmap,hf.normalmap,hf.displacementmap,hf.fog,hf.lights,{emissive:{value:new lh(0)},specular:{value:new lh(1118481)},shininess:{value:30}}]),vertexShader:lf.meshphong_vert,fragmentShader:lf.meshphong_frag},standard:{uniforms:Yh([hf.common,hf.envmap,hf.aomap,hf.lightmap,hf.emissivemap,hf.bumpmap,hf.normalmap,hf.displacementmap,hf.roughnessmap,hf.metalnessmap,hf.fog,hf.lights,{emissive:{value:new lh(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:lf.meshphysical_vert,fragmentShader:lf.meshphysical_frag},toon:{uniforms:Yh([hf.common,hf.aomap,hf.lightmap,hf.emissivemap,hf.bumpmap,hf.normalmap,hf.displacementmap,hf.gradientmap,hf.fog,hf.lights,{emissive:{value:new lh(0)}}]),vertexShader:lf.meshtoon_vert,fragmentShader:lf.meshtoon_frag},matcap:{uniforms:Yh([hf.common,hf.bumpmap,hf.normalmap,hf.displacementmap,hf.fog,{matcap:{value:null}}]),vertexShader:lf.meshmatcap_vert,fragmentShader:lf.meshmatcap_frag},points:{uniforms:Yh([hf.points,hf.fog]),vertexShader:lf.points_vert,fragmentShader:lf.points_frag},dashed:{uniforms:Yh([hf.common,hf.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:lf.linedashed_vert,fragmentShader:lf.linedashed_frag},depth:{uniforms:Yh([hf.common,hf.displacementmap]),vertexShader:lf.depth_vert,fragmentShader:lf.depth_frag},normal:{uniforms:Yh([hf.common,hf.bumpmap,hf.normalmap,hf.displacementmap,{opacity:{value:1}}]),vertexShader:lf.normal_vert,fragmentShader:lf.normal_frag},sprite:{uniforms:Yh([hf.sprite,hf.fog]),vertexShader:lf.sprite_vert,fragmentShader:lf.sprite_frag},background:{uniforms:{uvTransform:{value:new Dc},t2D:{value:null}},vertexShader:lf.background_vert,fragmentShader:lf.background_frag},cube:{uniforms:Yh([hf.envmap,{opacity:{value:1}}]),vertexShader:lf.cube_vert,fragmentShader:lf.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:lf.equirect_vert,fragmentShader:lf.equirect_frag},distanceRGBA:{uniforms:Yh([hf.common,hf.displacementmap,{referencePosition:{value:new Bc},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:lf.distanceRGBA_vert,fragmentShader:lf.distanceRGBA_frag},shadow:{uniforms:Yh([hf.lights,hf.fog,{color:{value:new lh(0)},opacity:{value:1}}]),vertexShader:lf.shadow_vert,fragmentShader:lf.shadow_frag}};function df(t,e,n,r,i){const o=new lh(0);let a,s,u=0,c=null,l=0,h=null;function f(t,e){n.buffers.color.setClear(t.r,t.g,t.b,e,i)}return{getClearColor:function(){return o},setClearColor:function(t,e=1){o.set(t),u=e,f(o,u)},getClearAlpha:function(){return u},setClearAlpha:function(t){u=t,f(o,u)},render:function(n,i,d,p){let m=!0===i.isScene?i.background:null;m&&m.isTexture&&(m=e.get(m));const g=t.xr,v=g.getSession&&g.getSession();v&&"additive"===v.environmentBlendMode&&(m=null),null===m?f(o,u):m&&m.isColor&&(f(m,1),p=!0),(t.autoClear||p)&&t.clear(t.autoClearColor,t.autoClearDepth,t.autoClearStencil),m&&(m.isCubeTexture||306===m.mapping)?(void 0===s&&(s=new Gh(new qh(1,1,1),new Jh({name:"BackgroundCubeMaterial",uniforms:Xh(ff.cube.uniforms),vertexShader:ff.cube.vertexShader,fragmentShader:ff.cube.fragmentShader,side:1,depthTest:!1,depthWrite:!1,fog:!1})),s.geometry.deleteAttribute("normal"),s.geometry.deleteAttribute("uv"),s.onBeforeRender=function(t,e,n){this.matrixWorld.copyPosition(n.matrixWorld)},Object.defineProperty(s.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),r.update(s)),s.material.uniforms.envMap.value=m,s.material.uniforms.flipEnvMap.value=m.isCubeTexture&&m._needsFlipEnvMap?-1:1,c===m&&l===m.version&&h===t.toneMapping||(s.material.needsUpdate=!0,c=m,l=m.version,h=t.toneMapping),n.unshift(s,s.geometry,s.material,0,0,null)):m&&m.isTexture&&(void 0===a&&(a=new Gh(new cf(2,2),new Jh({name:"BackgroundMaterial",uniforms:Xh(ff.background.uniforms),vertexShader:ff.background.vertexShader,fragmentShader:ff.background.fragmentShader,side:0,depthTest:!1,depthWrite:!1,fog:!1})),a.geometry.deleteAttribute("normal"),Object.defineProperty(a.material,"map",{get:function(){return this.uniforms.t2D.value}}),r.update(a)),a.material.uniforms.t2D.value=m,!0===m.matrixAutoUpdate&&m.updateMatrix(),a.material.uniforms.uvTransform.value.copy(m.matrix),c===m&&l===m.version&&h===t.toneMapping||(a.material.needsUpdate=!0,c=m,l=m.version,h=t.toneMapping),n.unshift(a,a.geometry,a.material,0,0,null))}}}function pf(t,e,n,r){const i=t.getParameter(34921),o=r.isWebGL2?null:e.get("OES_vertex_array_object"),a=r.isWebGL2||null!==o,s={},u=f(null);let c=u;function l(e){return r.isWebGL2?t.bindVertexArray(e):o.bindVertexArrayOES(e)}function h(e){return r.isWebGL2?t.deleteVertexArray(e):o.deleteVertexArrayOES(e)}function f(t){const e=[],n=[],r=[];for(let t=0;t<i;t++)e[t]=0,n[t]=0,r[t]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:e,enabledAttributes:n,attributeDivisors:r,object:t,attributes:{},index:null}}function d(){const t=c.newAttributes;for(let e=0,n=t.length;e<n;e++)t[e]=0}function p(t){m(t,0)}function m(n,i){const o=c.newAttributes,a=c.enabledAttributes,s=c.attributeDivisors;if(o[n]=1,0===a[n]&&(t.enableVertexAttribArray(n),a[n]=1),s[n]!==i){(r.isWebGL2?t:e.get("ANGLE_instanced_arrays"))[r.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](n,i),s[n]=i}}function g(){const e=c.newAttributes,n=c.enabledAttributes;for(let r=0,i=n.length;r<i;r++)n[r]!==e[r]&&(t.disableVertexAttribArray(r),n[r]=0)}function v(e,n,i,o,a,s){!0!==r.isWebGL2||5124!==i&&5125!==i?t.vertexAttribPointer(e,n,i,o,a,s):t.vertexAttribIPointer(e,n,i,a,s)}function y(){b(),c!==u&&(c=u,l(c.object))}function b(){u.geometry=null,u.program=null,u.wireframe=!1}return{setup:function(i,u,h,y,b){let _=!1;if(a){const e=function(e,n,i){const a=!0===i.wireframe;let u=s[e.id];void 0===u&&(u={},s[e.id]=u);let c=u[n.id];void 0===c&&(c={},u[n.id]=c);let l=c[a];void 0===l&&(l=f(r.isWebGL2?t.createVertexArray():o.createVertexArrayOES()),c[a]=l);return l}(y,h,u);c!==e&&(c=e,l(c.object)),_=function(t,e){const n=c.attributes,r=t.attributes;let i=0;for(const t in r){const e=n[t],o=r[t];if(void 0===e)return!0;if(e.attribute!==o)return!0;if(e.data!==o.data)return!0;i++}return c.attributesNum!==i||c.index!==e}(y,b),_&&function(t,e){const n={},r=t.attributes;let i=0;for(const t in r){const e=r[t],o={};o.attribute=e,e.data&&(o.data=e.data),n[t]=o,i++}c.attributes=n,c.attributesNum=i,c.index=e}(y,b)}else{const t=!0===u.wireframe;c.geometry===y.id&&c.program===h.id&&c.wireframe===t||(c.geometry=y.id,c.program=h.id,c.wireframe=t,_=!0)}!0===i.isInstancedMesh&&(_=!0),null!==b&&n.update(b,34963),_&&(!function(i,o,a,s){if(!1===r.isWebGL2&&(i.isInstancedMesh||s.isInstancedBufferGeometry)&&null===e.get("ANGLE_instanced_arrays"))return;d();const u=s.attributes,c=a.getAttributes(),l=o.defaultAttributeValues;for(const e in c){const r=c[e];if(r>=0){const o=u[e];if(void 0!==o){const e=o.normalized,i=o.itemSize,a=n.get(o);if(void 0===a)continue;const u=a.buffer,c=a.type,l=a.bytesPerElement;if(o.isInterleavedBufferAttribute){const n=o.data,a=n.stride,h=o.offset;n&&n.isInstancedInterleavedBuffer?(m(r,n.meshPerAttribute),void 0===s._maxInstanceCount&&(s._maxInstanceCount=n.meshPerAttribute*n.count)):p(r),t.bindBuffer(34962,u),v(r,i,c,e,a*l,h*l)}else o.isInstancedBufferAttribute?(m(r,o.meshPerAttribute),void 0===s._maxInstanceCount&&(s._maxInstanceCount=o.meshPerAttribute*o.count)):p(r),t.bindBuffer(34962,u),v(r,i,c,e,0,0)}else if("instanceMatrix"===e){const e=n.get(i.instanceMatrix);if(void 0===e)continue;const o=e.buffer,a=e.type;m(r+0,1),m(r+1,1),m(r+2,1),m(r+3,1),t.bindBuffer(34962,o),t.vertexAttribPointer(r+0,4,a,!1,64,0),t.vertexAttribPointer(r+1,4,a,!1,64,16),t.vertexAttribPointer(r+2,4,a,!1,64,32),t.vertexAttribPointer(r+3,4,a,!1,64,48)}else if("instanceColor"===e){const e=n.get(i.instanceColor);if(void 0===e)continue;const o=e.buffer,a=e.type;m(r,1),t.bindBuffer(34962,o),t.vertexAttribPointer(r,3,a,!1,12,0)}else if(void 0!==l){const n=l[e];if(void 0!==n)switch(n.length){case 2:t.vertexAttrib2fv(r,n);break;case 3:t.vertexAttrib3fv(r,n);break;case 4:t.vertexAttrib4fv(r,n);break;default:t.vertexAttrib1fv(r,n)}}}}g()}(i,u,h,y),null!==b&&t.bindBuffer(34963,n.get(b).buffer))},reset:y,resetDefaultState:b,dispose:function(){y();for(const t in s){const e=s[t];for(const t in e){const n=e[t];for(const t in n)h(n[t].object),delete n[t];delete e[t]}delete s[t]}},releaseStatesOfGeometry:function(t){if(void 0===s[t.id])return;const e=s[t.id];for(const t in e){const n=e[t];for(const t in n)h(n[t].object),delete n[t];delete e[t]}delete s[t.id]},releaseStatesOfProgram:function(t){for(const e in s){const n=s[e];if(void 0===n[t.id])continue;const r=n[t.id];for(const t in r)h(r[t].object),delete r[t];delete n[t.id]}},initAttributes:d,enableAttribute:p,disableUnusedAttributes:g}}function mf(t,e,n,r){const i=r.isWebGL2;let o;this.setMode=function(t){o=t},this.render=function(e,r){t.drawArrays(o,e,r),n.update(r,o,1)},this.renderInstances=function(r,a,s){if(0===s)return;let u,c;if(i)u=t,c="drawArraysInstanced";else if(u=e.get("ANGLE_instanced_arrays"),c="drawArraysInstancedANGLE",null===u)return void console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");u[c](o,r,a,s),n.update(a,o,s)}}function gf(t,e,n){let r;function i(e){if("highp"===e){if(t.getShaderPrecisionFormat(35633,36338).precision>0&&t.getShaderPrecisionFormat(35632,36338).precision>0)return"highp";e="mediump"}return"mediump"===e&&t.getShaderPrecisionFormat(35633,36337).precision>0&&t.getShaderPrecisionFormat(35632,36337).precision>0?"mediump":"lowp"}const o="undefined"!=typeof WebGL2RenderingContext&&t instanceof WebGL2RenderingContext||"undefined"!=typeof WebGL2ComputeRenderingContext&&t instanceof WebGL2ComputeRenderingContext;let a=void 0!==n.precision?n.precision:"highp";const s=i(a);s!==a&&(console.warn("THREE.WebGLRenderer:",a,"not supported, using",s,"instead."),a=s);const u=!0===n.logarithmicDepthBuffer,c=t.getParameter(34930),l=t.getParameter(35660),h=t.getParameter(3379),f=t.getParameter(34076),d=t.getParameter(34921),p=t.getParameter(36347),m=t.getParameter(36348),g=t.getParameter(36349),v=l>0,y=o||e.has("OES_texture_float");return{isWebGL2:o,getMaxAnisotropy:function(){if(void 0!==r)return r;if(!0===e.has("EXT_texture_filter_anisotropic")){const n=e.get("EXT_texture_filter_anisotropic");r=t.getParameter(n.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else r=0;return r},getMaxPrecision:i,precision:a,logarithmicDepthBuffer:u,maxTextures:c,maxVertexTextures:l,maxTextureSize:h,maxCubemapSize:f,maxAttributes:d,maxVertexUniforms:p,maxVaryings:m,maxFragmentUniforms:g,vertexTextures:v,floatFragmentTextures:y,floatVertexTextures:v&&y,maxSamples:o?t.getParameter(36183):0}}function vf(t){const e=this;let n=null,r=0,i=!1,o=!1;const a=new Gl,s=new Dc,u={value:null,needsUpdate:!1};function c(){u.value!==n&&(u.value=n,u.needsUpdate=r>0),e.numPlanes=r,e.numIntersection=0}function l(t,n,r,i){const o=null!==t?t.length:0;let c=null;if(0!==o){if(c=u.value,!0!==i||null===c){const e=r+4*o,i=n.matrixWorldInverse;s.getNormalMatrix(i),(null===c||c.length<e)&&(c=new Float32Array(e));for(let e=0,n=r;e!==o;++e,n+=4)a.copy(t[e]).applyMatrix4(i,s),a.normal.toArray(c,n),c[n+3]=a.constant}u.value=c,u.needsUpdate=!0}return e.numPlanes=o,e.numIntersection=0,c}this.uniform=u,this.numPlanes=0,this.numIntersection=0,this.init=function(t,e,o){const a=0!==t.length||e||0!==r||i;return i=e,n=l(t,o,0),r=t.length,a},this.beginShadows=function(){o=!0,l(null)},this.endShadows=function(){o=!1,c()},this.setState=function(e,a,s){const h=e.clippingPlanes,f=e.clipIntersection,d=e.clipShadows,p=t.get(e);if(!i||null===h||0===h.length||o&&!d)o?l(null):c();else{const t=o?0:r,e=4*t;let i=p.clippingState||null;u.value=i,i=l(h,a,e,s);for(let t=0;t!==e;++t)i[t]=n[t];p.clippingState=i,this.numIntersection=f?this.numPlanes:0,this.numPlanes+=t}}}function yf(t){let e=new WeakMap;function n(t,e){return 303===e?t.mapping=301:304===e&&(t.mapping=302),t}function r(t){const n=t.target;n.removeEventListener("dispose",r);const i=e.get(n);void 0!==i&&(e.delete(n),i.dispose())}return{get:function(i){if(i&&i.isTexture){const o=i.mapping;if(303===o||304===o){if(e.has(i)){return n(e.get(i).texture,i.mapping)}{const o=i.image;if(o&&o.height>0){const a=t.getRenderTarget(),s=new ef(o.height/2);return s.fromEquirectangularTexture(t,i),e.set(i,s),t.setRenderTarget(a),i.addEventListener("dispose",r),n(s.texture,i.mapping)}return null}}}return i},dispose:function(){e=new WeakMap}}}function bf(t){const e={};function n(n){if(void 0!==e[n])return e[n];let r;switch(n){case"WEBGL_depth_texture":r=t.getExtension("WEBGL_depth_texture")||t.getExtension("MOZ_WEBGL_depth_texture")||t.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":r=t.getExtension("EXT_texture_filter_anisotropic")||t.getExtension("MOZ_EXT_texture_filter_anisotropic")||t.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":r=t.getExtension("WEBGL_compressed_texture_s3tc")||t.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":r=t.getExtension("WEBGL_compressed_texture_pvrtc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:r=t.getExtension(n)}return e[n]=r,r}return{has:function(t){return null!==n(t)},init:function(t){t.isWebGL2?n("EXT_color_buffer_float"):(n("WEBGL_depth_texture"),n("OES_texture_float"),n("OES_texture_half_float"),n("OES_texture_half_float_linear"),n("OES_standard_derivatives"),n("OES_element_index_uint"),n("OES_vertex_array_object"),n("ANGLE_instanced_arrays")),n("OES_texture_float_linear"),n("EXT_color_buffer_half_float")},get:function(t){const e=n(t);return null===e&&console.warn("THREE.WebGLRenderer: "+t+" extension not supported."),e}}}function _f(t,e,n,r){const i={},o=new WeakMap;function a(t){const s=t.target;null!==s.index&&e.remove(s.index);for(const t in s.attributes)e.remove(s.attributes[t]);s.removeEventListener("dispose",a),delete i[s.id];const u=o.get(s);u&&(e.remove(u),o.delete(s)),r.releaseStatesOfGeometry(s),!0===s.isInstancedBufferGeometry&&delete s._maxInstanceCount,n.memory.geometries--}function s(t){const n=[],r=t.index,i=t.attributes.position;let a=0;if(null!==r){const t=r.array;a=r.version;for(let e=0,r=t.length;e<r;e+=3){const r=t[e+0],i=t[e+1],o=t[e+2];n.push(r,i,i,o,o,r)}}else{const t=i.array;a=i.version;for(let e=0,r=t.length/3-1;e<r;e+=3){const t=e+0,r=e+1,i=e+2;n.push(t,r,r,i,i,t)}}const s=new(yh(n)>65535?gh:mh)(n,1);s.version=a;const u=o.get(t);u&&e.remove(u),o.set(t,s)}return{get:function(t,e){return!0===i[e.id]||(e.addEventListener("dispose",a),i[e.id]=!0,n.memory.geometries++),e},update:function(t){const n=t.attributes;for(const t in n)e.update(n[t],34962);const r=t.morphAttributes;for(const t in r){const n=r[t];for(let t=0,r=n.length;t<r;t++)e.update(n[t],34962)}},getWireframeAttribute:function(t){const e=o.get(t);if(e){const n=t.index;null!==n&&e.version<n.version&&s(t)}else s(t);return o.get(t)}}}function xf(t,e,n,r){const i=r.isWebGL2;let o,a,s;this.setMode=function(t){o=t},this.setIndex=function(t){a=t.type,s=t.bytesPerElement},this.render=function(e,r){t.drawElements(o,r,a,e*s),n.update(r,o,1)},this.renderInstances=function(r,u,c){if(0===c)return;let l,h;if(i)l=t,h="drawElementsInstanced";else if(l=e.get("ANGLE_instanced_arrays"),h="drawElementsInstancedANGLE",null===l)return void console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");l[h](o,u,a,r*s,c),n.update(u,o,c)}}function wf(t){const e={frame:0,calls:0,triangles:0,points:0,lines:0};return{memory:{geometries:0,textures:0},render:e,programs:null,autoReset:!0,reset:function(){e.frame++,e.calls=0,e.triangles=0,e.points=0,e.lines=0},update:function(t,n,r){switch(e.calls++,n){case 4:e.triangles+=r*(t/3);break;case 1:e.lines+=r*(t/2);break;case 3:e.lines+=r*(t-1);break;case 2:e.lines+=r*t;break;case 0:e.points+=r*t;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",n)}}}}function Sf(t,e){return t[0]-e[0]}function Ef(t,e){return Math.abs(e[1])-Math.abs(t[1])}function Tf(t){const e={},n=new Float32Array(8),r=[];for(let t=0;t<8;t++)r[t]=[t,0];return{update:function(i,o,a,s){const u=i.morphTargetInfluences,c=void 0===u?0:u.length;let l=e[o.id];if(void 0===l){l=[];for(let t=0;t<c;t++)l[t]=[t,0];e[o.id]=l}for(let t=0;t<c;t++){const e=l[t];e[0]=t,e[1]=u[t]}l.sort(Ef);for(let t=0;t<8;t++)t<c&&l[t][1]?(r[t][0]=l[t][0],r[t][1]=l[t][1]):(r[t][0]=Number.MAX_SAFE_INTEGER,r[t][1]=0);r.sort(Sf);const h=a.morphTargets&&o.morphAttributes.position,f=a.morphNormals&&o.morphAttributes.normal;let d=0;for(let t=0;t<8;t++){const e=r[t],i=e[0],a=e[1];i!==Number.MAX_SAFE_INTEGER&&a?(h&&o.getAttribute("morphTarget"+t)!==h[i]&&o.setAttribute("morphTarget"+t,h[i]),f&&o.getAttribute("morphNormal"+t)!==f[i]&&o.setAttribute("morphNormal"+t,f[i]),n[t]=a,d+=a):(h&&!0===o.hasAttribute("morphTarget"+t)&&o.deleteAttribute("morphTarget"+t),f&&!0===o.hasAttribute("morphNormal"+t)&&o.deleteAttribute("morphNormal"+t),n[t]=0)}const p=o.morphTargetsRelative?1:1-d;s.getUniforms().setValue(t,"morphTargetBaseInfluence",p),s.getUniforms().setValue(t,"morphTargetInfluences",n)}}}function Mf(t,e,n,r){let i=new WeakMap;function o(t){const e=t.target;e.removeEventListener("dispose",o),n.remove(e.instanceMatrix),null!==e.instanceColor&&n.remove(e.instanceColor)}return{update:function(t){const a=r.render.frame,s=t.geometry,u=e.get(t,s);return i.get(u)!==a&&(e.update(u),i.set(u,a)),t.isInstancedMesh&&(!1===t.hasEventListener("dispose",o)&&t.addEventListener("dispose",o),n.update(t.instanceMatrix,34962),null!==t.instanceColor&&n.update(t.instanceColor,34962)),u},dispose:function(){i=new WeakMap}}}ff.physical={uniforms:Yh([ff.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatNormalScale:{value:new Lc(1,1)},clearcoatNormalMap:{value:null},sheen:{value:new lh(0)},transmission:{value:0},transmissionMap:{value:null}}]),vertexShader:lf.meshphysical_vert,fragmentShader:lf.meshphysical_frag};class Af extends kc{constructor(t=null,e=1,n=1,r=1){super(null),this.image={data:t,width:e,height:n,depth:r},this.magFilter=1003,this.minFilter=1003,this.wrapR=1001,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.needsUpdate=!0}}Af.prototype.isDataTexture2DArray=!0;class Lf extends kc{constructor(t=null,e=1,n=1,r=1){super(null),this.image={data:t,width:e,height:n,depth:r},this.magFilter=1003,this.minFilter=1003,this.wrapR=1001,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.needsUpdate=!0}}Lf.prototype.isDataTexture3D=!0;const Df=new kc,Cf=new Af,Pf=new Lf,Rf=new tf,kf=[],Of=[],If=new Float32Array(16),Ff=new Float32Array(9),zf=new Float32Array(4);function Bf(t,e,n){const r=t[0];if(r<=0||r>0)return t;const i=e*n;let o=kf[i];if(void 0===o&&(o=new Float32Array(i),kf[i]=o),0!==e){r.toArray(o,0);for(let r=1,i=0;r!==e;++r)i+=n,t[r].toArray(o,i)}return o}function Nf(t,e){if(t.length!==e.length)return!1;for(let n=0,r=t.length;n<r;n++)if(t[n]!==e[n])return!1;return!0}function Uf(t,e){for(let n=0,r=e.length;n<r;n++)t[n]=e[n]}function jf(t,e){let n=Of[e];void 0===n&&(n=new Int32Array(e),Of[e]=n);for(let r=0;r!==e;++r)n[r]=t.allocateTextureUnit();return n}function Hf(t,e){const n=this.cache;n[0]!==e&&(t.uniform1f(this.addr,e),n[0]=e)}function Vf(t,e){const n=this.cache;if(void 0!==e.x)n[0]===e.x&&n[1]===e.y||(t.uniform2f(this.addr,e.x,e.y),n[0]=e.x,n[1]=e.y);else{if(Nf(n,e))return;t.uniform2fv(this.addr,e),Uf(n,e)}}function Gf(t,e){const n=this.cache;if(void 0!==e.x)n[0]===e.x&&n[1]===e.y&&n[2]===e.z||(t.uniform3f(this.addr,e.x,e.y,e.z),n[0]=e.x,n[1]=e.y,n[2]=e.z);else if(void 0!==e.r)n[0]===e.r&&n[1]===e.g&&n[2]===e.b||(t.uniform3f(this.addr,e.r,e.g,e.b),n[0]=e.r,n[1]=e.g,n[2]=e.b);else{if(Nf(n,e))return;t.uniform3fv(this.addr,e),Uf(n,e)}}function Wf(t,e){const n=this.cache;if(void 0!==e.x)n[0]===e.x&&n[1]===e.y&&n[2]===e.z&&n[3]===e.w||(t.uniform4f(this.addr,e.x,e.y,e.z,e.w),n[0]=e.x,n[1]=e.y,n[2]=e.z,n[3]=e.w);else{if(Nf(n,e))return;t.uniform4fv(this.addr,e),Uf(n,e)}}function qf(t,e){const n=this.cache,r=e.elements;if(void 0===r){if(Nf(n,e))return;t.uniformMatrix2fv(this.addr,!1,e),Uf(n,e)}else{if(Nf(n,r))return;zf.set(r),t.uniformMatrix2fv(this.addr,!1,zf),Uf(n,r)}}function Xf(t,e){const n=this.cache,r=e.elements;if(void 0===r){if(Nf(n,e))return;t.uniformMatrix3fv(this.addr,!1,e),Uf(n,e)}else{if(Nf(n,r))return;Ff.set(r),t.uniformMatrix3fv(this.addr,!1,Ff),Uf(n,r)}}function Yf(t,e){const n=this.cache,r=e.elements;if(void 0===r){if(Nf(n,e))return;t.uniformMatrix4fv(this.addr,!1,e),Uf(n,e)}else{if(Nf(n,r))return;If.set(r),t.uniformMatrix4fv(this.addr,!1,If),Uf(n,r)}}function Zf(t,e){const n=this.cache;n[0]!==e&&(t.uniform1i(this.addr,e),n[0]=e)}function Jf(t,e){const n=this.cache;Nf(n,e)||(t.uniform2iv(this.addr,e),Uf(n,e))}function Qf(t,e){const n=this.cache;Nf(n,e)||(t.uniform3iv(this.addr,e),Uf(n,e))}function Kf(t,e){const n=this.cache;Nf(n,e)||(t.uniform4iv(this.addr,e),Uf(n,e))}function $f(t,e){const n=this.cache;n[0]!==e&&(t.uniform1ui(this.addr,e),n[0]=e)}function td(t,e){const n=this.cache;Nf(n,e)||(t.uniform2uiv(this.addr,e),Uf(n,e))}function ed(t,e){const n=this.cache;Nf(n,e)||(t.uniform3uiv(this.addr,e),Uf(n,e))}function nd(t,e){const n=this.cache;Nf(n,e)||(t.uniform4uiv(this.addr,e),Uf(n,e))}function rd(t,e,n){const r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(t.uniform1i(this.addr,i),r[0]=i),n.safeSetTexture2D(e||Df,i)}function id(t,e,n){const r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(t.uniform1i(this.addr,i),r[0]=i),n.setTexture3D(e||Pf,i)}function od(t,e,n){const r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(t.uniform1i(this.addr,i),r[0]=i),n.safeSetTextureCube(e||Rf,i)}function ad(t,e,n){const r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(t.uniform1i(this.addr,i),r[0]=i),n.setTexture2DArray(e||Cf,i)}function sd(t,e){t.uniform1fv(this.addr,e)}function ud(t,e){const n=Bf(e,this.size,2);t.uniform2fv(this.addr,n)}function cd(t,e){const n=Bf(e,this.size,3);t.uniform3fv(this.addr,n)}function ld(t,e){const n=Bf(e,this.size,4);t.uniform4fv(this.addr,n)}function hd(t,e){const n=Bf(e,this.size,4);t.uniformMatrix2fv(this.addr,!1,n)}function fd(t,e){const n=Bf(e,this.size,9);t.uniformMatrix3fv(this.addr,!1,n)}function dd(t,e){const n=Bf(e,this.size,16);t.uniformMatrix4fv(this.addr,!1,n)}function pd(t,e){t.uniform1iv(this.addr,e)}function md(t,e){t.uniform2iv(this.addr,e)}function gd(t,e){t.uniform3iv(this.addr,e)}function vd(t,e){t.uniform4iv(this.addr,e)}function yd(t,e){t.uniform1uiv(this.addr,e)}function bd(t,e){t.uniform2uiv(this.addr,e)}function _d(t,e){t.uniform3uiv(this.addr,e)}function xd(t,e){t.uniform4uiv(this.addr,e)}function wd(t,e,n){const r=e.length,i=jf(n,r);t.uniform1iv(this.addr,i);for(let t=0;t!==r;++t)n.safeSetTexture2D(e[t]||Df,i[t])}function Sd(t,e,n){const r=e.length,i=jf(n,r);t.uniform1iv(this.addr,i);for(let t=0;t!==r;++t)n.safeSetTextureCube(e[t]||Rf,i[t])}function Ed(t,e,n){this.id=t,this.addr=n,this.cache=[],this.setValue=function(t){switch(t){case 5126:return Hf;case 35664:return Vf;case 35665:return Gf;case 35666:return Wf;case 35674:return qf;case 35675:return Xf;case 35676:return Yf;case 5124:case 35670:return Zf;case 35667:case 35671:return Jf;case 35668:case 35672:return Qf;case 35669:case 35673:return Kf;case 5125:return $f;case 36294:return td;case 36295:return ed;case 36296:return nd;case 35678:case 36198:case 36298:case 36306:case 35682:return rd;case 35679:case 36299:case 36307:return id;case 35680:case 36300:case 36308:case 36293:return od;case 36289:case 36303:case 36311:case 36292:return ad}}(e.type)}function Td(t,e,n){this.id=t,this.addr=n,this.cache=[],this.size=e.size,this.setValue=function(t){switch(t){case 5126:return sd;case 35664:return ud;case 35665:return cd;case 35666:return ld;case 35674:return hd;case 35675:return fd;case 35676:return dd;case 5124:case 35670:return pd;case 35667:case 35671:return md;case 35668:case 35672:return gd;case 35669:case 35673:return vd;case 5125:return yd;case 36294:return bd;case 36295:return _d;case 36296:return xd;case 35678:case 36198:case 36298:case 36306:case 35682:return wd;case 35680:case 36300:case 36308:case 36293:return Sd}}(e.type)}function Md(t){this.id=t,this.seq=[],this.map={}}Td.prototype.updateCache=function(t){const e=this.cache;t instanceof Float32Array&&e.length!==t.length&&(this.cache=new Float32Array(t.length)),Uf(e,t)},Md.prototype.setValue=function(t,e,n){const r=this.seq;for(let i=0,o=r.length;i!==o;++i){const o=r[i];o.setValue(t,e[o.id],n)}};const Ad=/(\w+)(\])?(\[|\.)?/g;function Ld(t,e){t.seq.push(e),t.map[e.id]=e}function Dd(t,e,n){const r=t.name,i=r.length;for(Ad.lastIndex=0;;){const o=Ad.exec(r),a=Ad.lastIndex;let s=o[1];const u="]"===o[2],c=o[3];if(u&&(s|=0),void 0===c||"["===c&&a+2===i){Ld(n,void 0===c?new Ed(s,t,e):new Td(s,t,e));break}{let t=n.map[s];void 0===t&&(t=new Md(s),Ld(n,t)),n=t}}}function Cd(t,e){this.seq=[],this.map={};const n=t.getProgramParameter(e,35718);for(let r=0;r<n;++r){const n=t.getActiveUniform(e,r);Dd(n,t.getUniformLocation(e,n.name),this)}}function Pd(t,e,n){const r=t.createShader(e);return t.shaderSource(r,n),t.compileShader(r),r}Cd.prototype.setValue=function(t,e,n,r){const i=this.map[e];void 0!==i&&i.setValue(t,n,r)},Cd.prototype.setOptional=function(t,e,n){const r=e[n];void 0!==r&&this.setValue(t,n,r)},Cd.upload=function(t,e,n,r){for(let i=0,o=e.length;i!==o;++i){const o=e[i],a=n[o.id];!1!==a.needsUpdate&&o.setValue(t,a.value,r)}},Cd.seqWithValue=function(t,e){const n=[];for(let r=0,i=t.length;r!==i;++r){const i=t[r];i.id in e&&n.push(i)}return n};let Rd=0;function kd(t){switch(t){case 3e3:return["Linear","( value )"];case 3001:return["sRGB","( value )"];case 3002:return["RGBE","( value )"];case 3004:return["RGBM","( value, 7.0 )"];case 3005:return["RGBM","( value, 16.0 )"];case 3006:return["RGBD","( value, 256.0 )"];case 3007:return["Gamma","( value, float( GAMMA_FACTOR ) )"];case 3003:return["LogLuv","( value )"];default:return console.warn("THREE.WebGLProgram: Unsupported encoding:",t),["Linear","( value )"]}}function Od(t,e,n){const r=t.getShaderParameter(e,35713),i=t.getShaderInfoLog(e).trim();if(r&&""===i)return"";return"THREE.WebGLShader: gl.getShaderInfoLog() "+n+"\n"+i+function(t){const e=t.split("\n");for(let t=0;t<e.length;t++)e[t]=t+1+": "+e[t];return e.join("\n")}(t.getShaderSource(e))}function Id(t,e){const n=kd(e);return"vec4 "+t+"( vec4 value ) { return "+n[0]+"ToLinear"+n[1]+"; }"}function Fd(t,e){const n=kd(e);return"vec4 "+t+"( vec4 value ) { return LinearTo"+n[0]+n[1]+"; }"}function zd(t,e){let n;switch(e){case 1:n="Linear";break;case 2:n="Reinhard";break;case 3:n="OptimizedCineon";break;case 4:n="ACESFilmic";break;case 5:n="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",e),n="Linear"}return"vec3 "+t+"( vec3 color ) { return "+n+"ToneMapping( color ); }"}function Bd(t){return""!==t}function Nd(t,e){return t.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function Ud(t,e){return t.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const jd=/^[ \t]*#include +<([\w\d./]+)>/gm;function Hd(t){return t.replace(jd,Vd)}function Vd(t,e){const n=lf[e];if(void 0===n)throw new Error("Can not resolve #include <"+e+">");return Hd(n)}const Gd=/#pragma unroll_loop[\s]+?for \( int i \= (\d+)\; i < (\d+)\; i \+\+ \) \{([\s\S]+?)(?=\})\}/g,Wd=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function qd(t){return t.replace(Wd,Yd).replace(Gd,Xd)}function Xd(t,e,n,r){return console.warn("WebGLProgram: #pragma unroll_loop shader syntax is deprecated. Please use #pragma unroll_loop_start syntax instead."),Yd(t,e,n,r)}function Yd(t,e,n,r){let i="";for(let t=parseInt(e);t<parseInt(n);t++)i+=r.replace(/\[\s*i\s*\]/g,"[ "+t+" ]").replace(/UNROLLED_LOOP_INDEX/g,t);return i}function Zd(t){let e="precision "+t.precision+" float;\nprecision "+t.precision+" int;";return"highp"===t.precision?e+="\n#define HIGH_PRECISION":"mediump"===t.precision?e+="\n#define MEDIUM_PRECISION":"lowp"===t.precision&&(e+="\n#define LOW_PRECISION"),e}function Jd(t,e,n,r){const i=t.getContext(),o=n.defines;let a=n.vertexShader,s=n.fragmentShader;const u=function(t){let e="SHADOWMAP_TYPE_BASIC";return 1===t.shadowMapType?e="SHADOWMAP_TYPE_PCF":2===t.shadowMapType?e="SHADOWMAP_TYPE_PCF_SOFT":3===t.shadowMapType&&(e="SHADOWMAP_TYPE_VSM"),e}(n),c=function(t){let e="ENVMAP_TYPE_CUBE";if(t.envMap)switch(t.envMapMode){case 301:case 302:e="ENVMAP_TYPE_CUBE";break;case 306:case 307:e="ENVMAP_TYPE_CUBE_UV"}return e}(n),l=function(t){let e="ENVMAP_MODE_REFLECTION";if(t.envMap)switch(t.envMapMode){case 302:case 307:e="ENVMAP_MODE_REFRACTION"}return e}(n),h=function(t){let e="ENVMAP_BLENDING_NONE";if(t.envMap)switch(t.combine){case 0:e="ENVMAP_BLENDING_MULTIPLY";break;case 1:e="ENVMAP_BLENDING_MIX";break;case 2:e="ENVMAP_BLENDING_ADD"}return e}(n),f=t.gammaFactor>0?t.gammaFactor:1,d=n.isWebGL2?"":function(t){return[t.extensionDerivatives||t.envMapCubeUV||t.bumpMap||t.tangentSpaceNormalMap||t.clearcoatNormalMap||t.flatShading||"physical"===t.shaderID?"#extension GL_OES_standard_derivatives : enable":"",(t.extensionFragDepth||t.logarithmicDepthBuffer)&&t.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",t.extensionDrawBuffers&&t.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(t.extensionShaderTextureLOD||t.envMap)&&t.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(Bd).join("\n")}(n),p=function(t){const e=[];for(const n in t){const r=t[n];!1!==r&&e.push("#define "+n+" "+r)}return e.join("\n")}(o),m=i.createProgram();let g,v,y=n.glslVersion?"#version "+n.glslVersion+"\n":"";n.isRawShaderMaterial?(g=[p].filter(Bd).join("\n"),g.length>0&&(g+="\n"),v=[d,p].filter(Bd).join("\n"),v.length>0&&(v+="\n")):(g=[Zd(n),"#define SHADER_NAME "+n.shaderName,p,n.instancing?"#define USE_INSTANCING":"",n.instancingColor?"#define USE_INSTANCING_COLOR":"",n.supportsVertexTextures?"#define VERTEX_TEXTURES":"","#define GAMMA_FACTOR "+f,"#define MAX_BONES "+n.maxBones,n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+l:"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMap&&n.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",n.normalMap&&n.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.displacementMap&&n.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.vertexTangents?"#define USE_TANGENT":"",n.vertexColors?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUvs?"#define USE_UV":"",n.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",n.flatShading?"#define FLAT_SHADED":"",n.skinning?"#define USE_SKINNING":"",n.useVertexTexture?"#define BONE_TEXTURE":"",n.morphTargets?"#define USE_MORPHTARGETS":"",n.morphNormals&&!1===n.flatShading?"#define USE_MORPHNORMALS":"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+u:"",n.sizeAttenuation?"#define USE_SIZEATTENUATION":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.logarithmicDepthBuffer&&n.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","\tattribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","\tattribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_TANGENT","\tattribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","\tattribute vec4 color;","#elif defined( USE_COLOR )","\tattribute vec3 color;","#endif","#ifdef USE_MORPHTARGETS","\tattribute vec3 morphTarget0;","\tattribute vec3 morphTarget1;","\tattribute vec3 morphTarget2;","\tattribute vec3 morphTarget3;","\t#ifdef USE_MORPHNORMALS","\t\tattribute vec3 morphNormal0;","\t\tattribute vec3 morphNormal1;","\t\tattribute vec3 morphNormal2;","\t\tattribute vec3 morphNormal3;","\t#else","\t\tattribute vec3 morphTarget4;","\t\tattribute vec3 morphTarget5;","\t\tattribute vec3 morphTarget6;","\t\tattribute vec3 morphTarget7;","\t#endif","#endif","#ifdef USE_SKINNING","\tattribute vec4 skinIndex;","\tattribute vec4 skinWeight;","#endif","\n"].filter(Bd).join("\n"),v=[d,Zd(n),"#define SHADER_NAME "+n.shaderName,p,n.alphaTest?"#define ALPHATEST "+n.alphaTest+(n.alphaTest%1?"":".0"):"","#define GAMMA_FACTOR "+f,n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.matcap?"#define USE_MATCAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+c:"",n.envMap?"#define "+l:"",n.envMap?"#define "+h:"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMap&&n.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",n.normalMap&&n.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.sheen?"#define USE_SHEEN":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.vertexTangents?"#define USE_TANGENT":"",n.vertexColors||n.instancingColor?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUvs?"#define USE_UV":"",n.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",n.gradientMap?"#define USE_GRADIENTMAP":"",n.flatShading?"#define FLAT_SHADED":"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+u:"",n.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",n.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.logarithmicDepthBuffer&&n.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"",(n.extensionShaderTextureLOD||n.envMap)&&n.rendererExtensionShaderTextureLod?"#define TEXTURE_LOD_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",0!==n.toneMapping?"#define TONE_MAPPING":"",0!==n.toneMapping?lf.tonemapping_pars_fragment:"",0!==n.toneMapping?zd("toneMapping",n.toneMapping):"",n.dithering?"#define DITHERING":"",lf.encodings_pars_fragment,n.map?Id("mapTexelToLinear",n.mapEncoding):"",n.matcap?Id("matcapTexelToLinear",n.matcapEncoding):"",n.envMap?Id("envMapTexelToLinear",n.envMapEncoding):"",n.emissiveMap?Id("emissiveMapTexelToLinear",n.emissiveMapEncoding):"",n.lightMap?Id("lightMapTexelToLinear",n.lightMapEncoding):"",Fd("linearToOutputTexel",n.outputEncoding),n.depthPacking?"#define DEPTH_PACKING "+n.depthPacking:"","\n"].filter(Bd).join("\n")),a=Hd(a),a=Nd(a,n),a=Ud(a,n),s=Hd(s),s=Nd(s,n),s=Ud(s,n),a=qd(a),s=qd(s),n.isWebGL2&&!0!==n.isRawShaderMaterial&&(y="#version 300 es\n",g=["#define attribute in","#define varying out","#define texture2D texture"].join("\n")+"\n"+g,v=["#define varying in","300 es"===n.glslVersion?"":"out highp vec4 pc_fragColor;","300 es"===n.glslVersion?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join("\n")+"\n"+v);const b=y+v+s,_=Pd(i,35633,y+g+a),x=Pd(i,35632,b);if(i.attachShader(m,_),i.attachShader(m,x),void 0!==n.index0AttributeName?i.bindAttribLocation(m,0,n.index0AttributeName):!0===n.morphTargets&&i.bindAttribLocation(m,0,"position"),i.linkProgram(m),t.debug.checkShaderErrors){const t=i.getProgramInfoLog(m).trim(),e=i.getShaderInfoLog(_).trim(),n=i.getShaderInfoLog(x).trim();let r=!0,o=!0;if(!1===i.getProgramParameter(m,35714)){r=!1;const e=Od(i,_,"vertex"),n=Od(i,x,"fragment");console.error("THREE.WebGLProgram: shader error: ",i.getError(),"35715",i.getProgramParameter(m,35715),"gl.getProgramInfoLog",t,e,n)}else""!==t?console.warn("THREE.WebGLProgram: gl.getProgramInfoLog()",t):""!==e&&""!==n||(o=!1);o&&(this.diagnostics={runnable:r,programLog:t,vertexShader:{log:e,prefix:g},fragmentShader:{log:n,prefix:v}})}let w,S;return i.deleteShader(_),i.deleteShader(x),this.getUniforms=function(){return void 0===w&&(w=new Cd(i,m)),w},this.getAttributes=function(){return void 0===S&&(S=function(t,e){const n={},r=t.getProgramParameter(e,35721);for(let i=0;i<r;i++){const r=t.getActiveAttrib(e,i).name;n[r]=t.getAttribLocation(e,r)}return n}(i,m)),S},this.destroy=function(){r.releaseStatesOfProgram(this),i.deleteProgram(m),this.program=void 0},this.name=n.shaderName,this.id=Rd++,this.cacheKey=e,this.usedTimes=1,this.program=m,this.vertexShader=_,this.fragmentShader=x,this}function Qd(t,e,n,r,i,o){const a=[],s=r.isWebGL2,u=r.logarithmicDepthBuffer,c=r.floatVertexTextures,l=r.maxVertexUniforms,h=r.vertexTextures;let f=r.precision;const d={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"},p=["precision","isWebGL2","supportsVertexTextures","outputEncoding","instancing","instancingColor","map","mapEncoding","matcap","matcapEncoding","envMap","envMapMode","envMapEncoding","envMapCubeUV","lightMap","lightMapEncoding","aoMap","emissiveMap","emissiveMapEncoding","bumpMap","normalMap","objectSpaceNormalMap","tangentSpaceNormalMap","clearcoatMap","clearcoatRoughnessMap","clearcoatNormalMap","displacementMap","specularMap","roughnessMap","metalnessMap","gradientMap","alphaMap","combine","vertexColors","vertexAlphas","vertexTangents","vertexUvs","uvsVertexOnly","fog","useFog","fogExp2","flatShading","sizeAttenuation","logarithmicDepthBuffer","skinning","maxBones","useVertexTexture","morphTargets","morphNormals","premultipliedAlpha","numDirLights","numPointLights","numSpotLights","numHemiLights","numRectAreaLights","numDirLightShadows","numPointLightShadows","numSpotLightShadows","shadowMapEnabled","shadowMapType","toneMapping","physicallyCorrectLights","alphaTest","doubleSided","flipSided","numClippingPlanes","numClipIntersection","depthPacking","dithering","sheen","transmissionMap"];function m(t){let e;return t&&t.isTexture?e=t.encoding:t&&t.isWebGLRenderTarget?(console.warn("THREE.WebGLPrograms.getTextureEncodingFromMap: don't use render targets as textures. Use their .texture property instead."),e=t.texture.encoding):e=3e3,e}return{getParameters:function(i,a,p,g,v){const y=g.fog,b=i.isMeshStandardMaterial?g.environment:null,_=e.get(i.envMap||b),x=d[i.type],w=v.isSkinnedMesh?function(t){const e=t.skeleton.bones;if(c)return 1024;{const t=l,n=Math.floor((t-20)/4),r=Math.min(n,e.length);return r<e.length?(console.warn("THREE.WebGLRenderer: Skeleton has "+e.length+" bones. This GPU supports "+r+"."),0):r}}(v):0;let S,E;if(null!==i.precision&&(f=r.getMaxPrecision(i.precision),f!==i.precision&&console.warn("THREE.WebGLProgram.getParameters:",i.precision,"not supported, using",f,"instead.")),x){const t=ff[x];S=t.vertexShader,E=t.fragmentShader}else S=i.vertexShader,E=i.fragmentShader;const T=t.getRenderTarget();return{isWebGL2:s,shaderID:x,shaderName:i.type,vertexShader:S,fragmentShader:E,defines:i.defines,isRawShaderMaterial:!0===i.isRawShaderMaterial,glslVersion:i.glslVersion,precision:f,instancing:!0===v.isInstancedMesh,instancingColor:!0===v.isInstancedMesh&&null!==v.instanceColor,supportsVertexTextures:h,outputEncoding:null!==T?m(T.texture):t.outputEncoding,map:!!i.map,mapEncoding:m(i.map),matcap:!!i.matcap,matcapEncoding:m(i.matcap),envMap:!!_,envMapMode:_&&_.mapping,envMapEncoding:m(_),envMapCubeUV:!!_&&(306===_.mapping||307===_.mapping),lightMap:!!i.lightMap,lightMapEncoding:m(i.lightMap),aoMap:!!i.aoMap,emissiveMap:!!i.emissiveMap,emissiveMapEncoding:m(i.emissiveMap),bumpMap:!!i.bumpMap,normalMap:!!i.normalMap,objectSpaceNormalMap:1===i.normalMapType,tangentSpaceNormalMap:0===i.normalMapType,clearcoatMap:!!i.clearcoatMap,clearcoatRoughnessMap:!!i.clearcoatRoughnessMap,clearcoatNormalMap:!!i.clearcoatNormalMap,displacementMap:!!i.displacementMap,roughnessMap:!!i.roughnessMap,metalnessMap:!!i.metalnessMap,specularMap:!!i.specularMap,alphaMap:!!i.alphaMap,gradientMap:!!i.gradientMap,sheen:!!i.sheen,transmissionMap:!!i.transmissionMap,combine:i.combine,vertexTangents:i.normalMap&&i.vertexTangents,vertexColors:i.vertexColors,vertexAlphas:!0===i.vertexColors&&v.geometry&&v.geometry.attributes.color&&4===v.geometry.attributes.color.itemSize,vertexUvs:!!(i.map||i.bumpMap||i.normalMap||i.specularMap||i.alphaMap||i.emissiveMap||i.roughnessMap||i.metalnessMap||i.clearcoatMap||i.clearcoatRoughnessMap||i.clearcoatNormalMap||i.displacementMap||i.transmissionMap),uvsVertexOnly:!(i.map||i.bumpMap||i.normalMap||i.specularMap||i.alphaMap||i.emissiveMap||i.roughnessMap||i.metalnessMap||i.clearcoatNormalMap||i.transmissionMap||!i.displacementMap),fog:!!y,useFog:i.fog,fogExp2:y&&y.isFogExp2,flatShading:!!i.flatShading,sizeAttenuation:i.sizeAttenuation,logarithmicDepthBuffer:u,skinning:i.skinning&&w>0,maxBones:w,useVertexTexture:c,morphTargets:i.morphTargets,morphNormals:i.morphNormals,numDirLights:a.directional.length,numPointLights:a.point.length,numSpotLights:a.spot.length,numRectAreaLights:a.rectArea.length,numHemiLights:a.hemi.length,numDirLightShadows:a.directionalShadowMap.length,numPointLightShadows:a.pointShadowMap.length,numSpotLightShadows:a.spotShadowMap.length,numClippingPlanes:o.numPlanes,numClipIntersection:o.numIntersection,dithering:i.dithering,shadowMapEnabled:t.shadowMap.enabled&&p.length>0,shadowMapType:t.shadowMap.type,toneMapping:i.toneMapped?t.toneMapping:0,physicallyCorrectLights:t.physicallyCorrectLights,premultipliedAlpha:i.premultipliedAlpha,alphaTest:i.alphaTest,doubleSided:2===i.side,flipSided:1===i.side,depthPacking:void 0!==i.depthPacking&&i.depthPacking,index0AttributeName:i.index0AttributeName,extensionDerivatives:i.extensions&&i.extensions.derivatives,extensionFragDepth:i.extensions&&i.extensions.fragDepth,extensionDrawBuffers:i.extensions&&i.extensions.drawBuffers,extensionShaderTextureLOD:i.extensions&&i.extensions.shaderTextureLOD,rendererExtensionFragDepth:s||n.has("EXT_frag_depth"),rendererExtensionDrawBuffers:s||n.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:s||n.has("EXT_shader_texture_lod"),customProgramCacheKey:i.customProgramCacheKey()}},getProgramCacheKey:function(e){const n=[];if(e.shaderID?n.push(e.shaderID):(n.push(e.fragmentShader),n.push(e.vertexShader)),void 0!==e.defines)for(const t in e.defines)n.push(t),n.push(e.defines[t]);if(!1===e.isRawShaderMaterial){for(let t=0;t<p.length;t++)n.push(e[p[t]]);n.push(t.outputEncoding),n.push(t.gammaFactor)}return n.push(e.customProgramCacheKey),n.join()},getUniforms:function(t){const e=d[t.type];let n;if(e){const t=ff[e];n=Zh.clone(t.uniforms)}else n=t.uniforms;return n},acquireProgram:function(e,n){let r;for(let t=0,e=a.length;t<e;t++){const e=a[t];if(e.cacheKey===n){r=e,++r.usedTimes;break}}return void 0===r&&(r=new Jd(t,n,e,i),a.push(r)),r},releaseProgram:function(t){if(0==--t.usedTimes){const e=a.indexOf(t);a[e]=a[a.length-1],a.pop(),t.destroy()}},programs:a}}function Kd(){let t=new WeakMap;return{get:function(e){let n=t.get(e);return void 0===n&&(n={},t.set(e,n)),n},remove:function(e){t.delete(e)},update:function(e,n,r){t.get(e)[n]=r},dispose:function(){t=new WeakMap}}}function $d(t,e){return t.groupOrder!==e.groupOrder?t.groupOrder-e.groupOrder:t.renderOrder!==e.renderOrder?t.renderOrder-e.renderOrder:t.program!==e.program?t.program.id-e.program.id:t.material.id!==e.material.id?t.material.id-e.material.id:t.z!==e.z?t.z-e.z:t.id-e.id}function tp(t,e){return t.groupOrder!==e.groupOrder?t.groupOrder-e.groupOrder:t.renderOrder!==e.renderOrder?t.renderOrder-e.renderOrder:t.z!==e.z?e.z-t.z:t.id-e.id}function ep(t){const e=[];let n=0;const r=[],i=[],o={id:-1};function a(r,i,a,s,u,c){let l=e[n];const h=t.get(a);return void 0===l?(l={id:r.id,object:r,geometry:i,material:a,program:h.program||o,groupOrder:s,renderOrder:r.renderOrder,z:u,group:c},e[n]=l):(l.id=r.id,l.object=r,l.geometry=i,l.material=a,l.program=h.program||o,l.groupOrder=s,l.renderOrder=r.renderOrder,l.z=u,l.group=c),n++,l}return{opaque:r,transparent:i,init:function(){n=0,r.length=0,i.length=0},push:function(t,e,n,o,s,u){const c=a(t,e,n,o,s,u);(!0===n.transparent?i:r).push(c)},unshift:function(t,e,n,o,s,u){const c=a(t,e,n,o,s,u);(!0===n.transparent?i:r).unshift(c)},finish:function(){for(let t=n,r=e.length;t<r;t++){const n=e[t];if(null===n.id)break;n.id=null,n.object=null,n.geometry=null,n.material=null,n.program=null,n.group=null}},sort:function(t,e){r.length>1&&r.sort(t||$d),i.length>1&&i.sort(e||tp)}}}function np(t){let e=new WeakMap;return{get:function(n,r){let i;return!1===e.has(n)?(i=new ep(t),e.set(n,[i])):r>=e.get(n).length?(i=new ep(t),e.get(n).push(i)):i=e.get(n)[r],i},dispose:function(){e=new WeakMap}}}function rp(){const t={};return{get:function(e){if(void 0!==t[e.id])return t[e.id];let n;switch(e.type){case"DirectionalLight":n={direction:new Bc,color:new lh};break;case"SpotLight":n={position:new Bc,direction:new Bc,color:new lh,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":n={position:new Bc,color:new lh,distance:0,decay:0};break;case"HemisphereLight":n={direction:new Bc,skyColor:new lh,groundColor:new lh};break;case"RectAreaLight":n={color:new lh,position:new Bc,halfWidth:new Bc,halfHeight:new Bc}}return t[e.id]=n,n}}}let ip=0;function op(t,e){return(e.castShadow?1:0)-(t.castShadow?1:0)}function ap(t,e){const n=new rp,r=function(){const t={};return{get:function(e){if(void 0!==t[e.id])return t[e.id];let n;switch(e.type){case"DirectionalLight":case"SpotLight":n={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Lc};break;case"PointLight":n={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Lc,shadowCameraNear:1,shadowCameraFar:1e3}}return t[e.id]=n,n}}}(),i={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotShadow:[],spotShadowMap:[],spotShadowMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[]};for(let t=0;t<9;t++)i.probe.push(new Bc);const o=new Bc,a=new ml,s=new ml;return{setup:function(o){let a=0,s=0,u=0;for(let t=0;t<9;t++)i.probe[t].set(0,0,0);let c=0,l=0,h=0,f=0,d=0,p=0,m=0,g=0;o.sort(op);for(let t=0,e=o.length;t<e;t++){const e=o[t],v=e.color,y=e.intensity,b=e.distance,_=e.shadow&&e.shadow.map?e.shadow.map.texture:null;if(e.isAmbientLight)a+=v.r*y,s+=v.g*y,u+=v.b*y;else if(e.isLightProbe)for(let t=0;t<9;t++)i.probe[t].addScaledVector(e.sh.coefficients[t],y);else if(e.isDirectionalLight){const t=n.get(e);if(t.color.copy(e.color).multiplyScalar(e.intensity),e.castShadow){const t=e.shadow,n=r.get(e);n.shadowBias=t.bias,n.shadowNormalBias=t.normalBias,n.shadowRadius=t.radius,n.shadowMapSize=t.mapSize,i.directionalShadow[c]=n,i.directionalShadowMap[c]=_,i.directionalShadowMatrix[c]=e.shadow.matrix,p++}i.directional[c]=t,c++}else if(e.isSpotLight){const t=n.get(e);if(t.position.setFromMatrixPosition(e.matrixWorld),t.color.copy(v).multiplyScalar(y),t.distance=b,t.coneCos=Math.cos(e.angle),t.penumbraCos=Math.cos(e.angle*(1-e.penumbra)),t.decay=e.decay,e.castShadow){const t=e.shadow,n=r.get(e);n.shadowBias=t.bias,n.shadowNormalBias=t.normalBias,n.shadowRadius=t.radius,n.shadowMapSize=t.mapSize,i.spotShadow[h]=n,i.spotShadowMap[h]=_,i.spotShadowMatrix[h]=e.shadow.matrix,g++}i.spot[h]=t,h++}else if(e.isRectAreaLight){const t=n.get(e);t.color.copy(v).multiplyScalar(y),t.halfWidth.set(.5*e.width,0,0),t.halfHeight.set(0,.5*e.height,0),i.rectArea[f]=t,f++}else if(e.isPointLight){const t=n.get(e);if(t.color.copy(e.color).multiplyScalar(e.intensity),t.distance=e.distance,t.decay=e.decay,e.castShadow){const t=e.shadow,n=r.get(e);n.shadowBias=t.bias,n.shadowNormalBias=t.normalBias,n.shadowRadius=t.radius,n.shadowMapSize=t.mapSize,n.shadowCameraNear=t.camera.near,n.shadowCameraFar=t.camera.far,i.pointShadow[l]=n,i.pointShadowMap[l]=_,i.pointShadowMatrix[l]=e.shadow.matrix,m++}i.point[l]=t,l++}else if(e.isHemisphereLight){const t=n.get(e);t.skyColor.copy(e.color).multiplyScalar(y),t.groundColor.copy(e.groundColor).multiplyScalar(y),i.hemi[d]=t,d++}}f>0&&(e.isWebGL2||!0===t.has("OES_texture_float_linear")?(i.rectAreaLTC1=hf.LTC_FLOAT_1,i.rectAreaLTC2=hf.LTC_FLOAT_2):!0===t.has("OES_texture_half_float_linear")?(i.rectAreaLTC1=hf.LTC_HALF_1,i.rectAreaLTC2=hf.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),i.ambient[0]=a,i.ambient[1]=s,i.ambient[2]=u;const v=i.hash;v.directionalLength===c&&v.pointLength===l&&v.spotLength===h&&v.rectAreaLength===f&&v.hemiLength===d&&v.numDirectionalShadows===p&&v.numPointShadows===m&&v.numSpotShadows===g||(i.directional.length=c,i.spot.length=h,i.rectArea.length=f,i.point.length=l,i.hemi.length=d,i.directionalShadow.length=p,i.directionalShadowMap.length=p,i.pointShadow.length=m,i.pointShadowMap.length=m,i.spotShadow.length=g,i.spotShadowMap.length=g,i.directionalShadowMatrix.length=p,i.pointShadowMatrix.length=m,i.spotShadowMatrix.length=g,v.directionalLength=c,v.pointLength=l,v.spotLength=h,v.rectAreaLength=f,v.hemiLength=d,v.numDirectionalShadows=p,v.numPointShadows=m,v.numSpotShadows=g,i.version=ip++)},setupView:function(t,e){let n=0,r=0,u=0,c=0,l=0;const h=e.matrixWorldInverse;for(let e=0,f=t.length;e<f;e++){const f=t[e];if(f.isDirectionalLight){const t=i.directional[n];t.direction.setFromMatrixPosition(f.matrixWorld),o.setFromMatrixPosition(f.target.matrixWorld),t.direction.sub(o),t.direction.transformDirection(h),n++}else if(f.isSpotLight){const t=i.spot[u];t.position.setFromMatrixPosition(f.matrixWorld),t.position.applyMatrix4(h),t.direction.setFromMatrixPosition(f.matrixWorld),o.setFromMatrixPosition(f.target.matrixWorld),t.direction.sub(o),t.direction.transformDirection(h),u++}else if(f.isRectAreaLight){const t=i.rectArea[c];t.position.setFromMatrixPosition(f.matrixWorld),t.position.applyMatrix4(h),s.identity(),a.copy(f.matrixWorld),a.premultiply(h),s.extractRotation(a),t.halfWidth.set(.5*f.width,0,0),t.halfHeight.set(0,.5*f.height,0),t.halfWidth.applyMatrix4(s),t.halfHeight.applyMatrix4(s),c++}else if(f.isPointLight){const t=i.point[r];t.position.setFromMatrixPosition(f.matrixWorld),t.position.applyMatrix4(h),r++}else if(f.isHemisphereLight){const t=i.hemi[l];t.direction.setFromMatrixPosition(f.matrixWorld),t.direction.transformDirection(h),t.direction.normalize(),l++}}},state:i}}function sp(t,e){const n=new ap(t,e),r=[],i=[];return{init:function(){r.length=0,i.length=0},state:{lightsArray:r,shadowsArray:i,lights:n},setupLights:function(){n.setup(r)},setupLightsView:function(t){n.setupView(r,t)},pushLight:function(t){r.push(t)},pushShadow:function(t){i.push(t)}}}function up(t,e){let n=new WeakMap;return{get:function(r,i=0){let o;return!1===n.has(r)?(o=new sp(t,e),n.set(r,[o])):i>=n.get(r).length?(o=new sp(t,e),n.get(r).push(o)):o=n.get(r)[i],o},dispose:function(){n=new WeakMap}}}class cp extends rh{constructor(t){super(),this.type="MeshDepthMaterial",this.depthPacking=3200,this.skinning=!1,this.morphTargets=!1,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.setValues(t)}copy(t){return super.copy(t),this.depthPacking=t.depthPacking,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.map=t.map,this.alphaMap=t.alphaMap,this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this}}cp.prototype.isMeshDepthMaterial=!0;class lp extends rh{constructor(t){super(),this.type="MeshDistanceMaterial",this.referencePosition=new Bc,this.nearDistance=1,this.farDistance=1e3,this.skinning=!1,this.morphTargets=!1,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.fog=!1,this.setValues(t)}copy(t){return super.copy(t),this.referencePosition.copy(t.referencePosition),this.nearDistance=t.nearDistance,this.farDistance=t.farDistance,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.map=t.map,this.alphaMap=t.alphaMap,this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this}}lp.prototype.isMeshDistanceMaterial=!0;function hp(t,e,n){let r=new af;const i=new Lc,o=new Lc,a=new Ic,s=[],u=[],c={},l=n.maxTextureSize,h={0:1,1:0,2:2},f=new Jh({defines:{SAMPLE_RATE:2/8,HALF_SAMPLE_RATE:1/8},uniforms:{shadow_pass:{value:null},resolution:{value:new Lc},radius:{value:4}},vertexShader:"void main() {\n\tgl_Position = vec4( position, 1.0 );\n}",fragmentShader:"uniform sampler2D shadow_pass;\nuniform vec2 resolution;\nuniform float radius;\n#include <packing>\nvoid main() {\n\tfloat mean = 0.0;\n\tfloat squared_mean = 0.0;\n\tfloat depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy ) / resolution ) );\n\tfor ( float i = -1.0; i < 1.0 ; i += SAMPLE_RATE) {\n\t\t#ifdef HORIZONTAL_PASS\n\t\t\tvec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( i, 0.0 ) * radius ) / resolution ) );\n\t\t\tmean += distribution.x;\n\t\t\tsquared_mean += distribution.y * distribution.y + distribution.x * distribution.x;\n\t\t#else\n\t\t\tfloat depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, i ) * radius ) / resolution ) );\n\t\t\tmean += depth;\n\t\t\tsquared_mean += depth * depth;\n\t\t#endif\n\t}\n\tmean = mean * HALF_SAMPLE_RATE;\n\tsquared_mean = squared_mean * HALF_SAMPLE_RATE;\n\tfloat std_dev = sqrt( squared_mean - mean * mean );\n\tgl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );\n}"}),d=f.clone();d.defines.HORIZONTAL_PASS=1;const p=new Mh;p.setAttribute("position",new ph(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const m=new Gh(p,f),g=this;function v(n,r){const i=e.update(m);f.uniforms.shadow_pass.value=n.map.texture,f.uniforms.resolution.value=n.mapSize,f.uniforms.radius.value=n.radius,t.setRenderTarget(n.mapPass),t.clear(),t.renderBufferDirect(r,null,i,f,m,null),d.uniforms.shadow_pass.value=n.mapPass.texture,d.uniforms.resolution.value=n.mapSize,d.uniforms.radius.value=n.radius,t.setRenderTarget(n.map),t.clear(),t.renderBufferDirect(r,null,i,d,m,null)}function y(t,e,n){const r=t<<0|e<<1|n<<2;let i=s[r];return void 0===i&&(i=new cp({depthPacking:3201,morphTargets:t,skinning:e}),s[r]=i),i}function b(t,e,n){const r=t<<0|e<<1|n<<2;let i=u[r];return void 0===i&&(i=new lp({morphTargets:t,skinning:e}),u[r]=i),i}function _(e,n,r,i,o,a,s){let u=null,l=y,f=e.customDepthMaterial;if(!0===i.isPointLight&&(l=b,f=e.customDistanceMaterial),void 0===f){let t=!1;!0===r.morphTargets&&(t=n.morphAttributes&&n.morphAttributes.position&&n.morphAttributes.position.length>0);let i=!1;!0===e.isSkinnedMesh&&(!0===r.skinning?i=!0:console.warn("THREE.WebGLShadowMap: THREE.SkinnedMesh with material.skinning set to false:",e));u=l(t,i,!0===e.isInstancedMesh)}else u=f;if(t.localClippingEnabled&&!0===r.clipShadows&&0!==r.clippingPlanes.length){const t=u.uuid,e=r.uuid;let n=c[t];void 0===n&&(n={},c[t]=n);let i=n[e];void 0===i&&(i=u.clone(),n[e]=i),u=i}return u.visible=r.visible,u.wireframe=r.wireframe,u.side=3===s?null!==r.shadowSide?r.shadowSide:r.side:null!==r.shadowSide?r.shadowSide:h[r.side],u.clipShadows=r.clipShadows,u.clippingPlanes=r.clippingPlanes,u.clipIntersection=r.clipIntersection,u.wireframeLinewidth=r.wireframeLinewidth,u.linewidth=r.linewidth,!0===i.isPointLight&&!0===u.isMeshDistanceMaterial&&(u.referencePosition.setFromMatrixPosition(i.matrixWorld),u.nearDistance=o,u.farDistance=a),u}function x(n,i,o,a,s){if(!1===n.visible)return;if(n.layers.test(i.layers)&&(n.isMesh||n.isLine||n.isPoints)&&(n.castShadow||n.receiveShadow&&3===s)&&(!n.frustumCulled||r.intersectsObject(n))){n.modelViewMatrix.multiplyMatrices(o.matrixWorldInverse,n.matrixWorld);const r=e.update(n),i=n.material;if(Array.isArray(i)){const e=r.groups;for(let u=0,c=e.length;u<c;u++){const c=e[u],l=i[c.materialIndex];if(l&&l.visible){const e=_(n,r,l,a,o.near,o.far,s);t.renderBufferDirect(o,null,r,e,n,c)}}}else if(i.visible){const e=_(n,r,i,a,o.near,o.far,s);t.renderBufferDirect(o,null,r,e,n,null)}}const u=n.children;for(let t=0,e=u.length;t<e;t++)x(u[t],i,o,a,s)}this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=1,this.render=function(e,n,s){if(!1===g.enabled)return;if(!1===g.autoUpdate&&!1===g.needsUpdate)return;if(0===e.length)return;const u=t.getRenderTarget(),c=t.getActiveCubeFace(),h=t.getActiveMipmapLevel(),f=t.state;f.setBlending(0),f.buffers.color.setClear(1,1,1,1),f.buffers.depth.setTest(!0),f.setScissorTest(!1);for(let u=0,c=e.length;u<c;u++){const c=e[u],h=c.shadow;if(void 0===h){console.warn("THREE.WebGLShadowMap:",c,"has no shadow.");continue}if(!1===h.autoUpdate&&!1===h.needsUpdate)continue;i.copy(h.mapSize);const d=h.getFrameExtents();if(i.multiply(d),o.copy(h.mapSize),(i.x>l||i.y>l)&&(i.x>l&&(o.x=Math.floor(l/d.x),i.x=o.x*d.x,h.mapSize.x=o.x),i.y>l&&(o.y=Math.floor(l/d.y),i.y=o.y*d.y,h.mapSize.y=o.y)),null===h.map&&!h.isPointLightShadow&&3===this.type){const t={minFilter:1006,magFilter:1006,format:1023};h.map=new Fc(i.x,i.y,t),h.map.texture.name=c.name+".shadowMap",h.mapPass=new Fc(i.x,i.y,t),h.camera.updateProjectionMatrix()}if(null===h.map){const t={minFilter:1003,magFilter:1003,format:1023};h.map=new Fc(i.x,i.y,t),h.map.texture.name=c.name+".shadowMap",h.camera.updateProjectionMatrix()}t.setRenderTarget(h.map),t.clear();const p=h.getViewportCount();for(let t=0;t<p;t++){const e=h.getViewport(t);a.set(o.x*e.x,o.y*e.y,o.x*e.z,o.y*e.w),f.viewport(a),h.updateMatrices(c,t),r=h.getFrustum(),x(n,s,h.camera,c,this.type)}h.isPointLightShadow||3!==this.type||v(h,s),h.needsUpdate=!1}g.needsUpdate=!1,t.setRenderTarget(u,c,h)}}function fp(t,e,n){const r=n.isWebGL2;const i=new function(){let e=!1;const n=new Ic;let r=null;const i=new Ic(0,0,0,0);return{setMask:function(n){r===n||e||(t.colorMask(n,n,n,n),r=n)},setLocked:function(t){e=t},setClear:function(e,r,o,a,s){!0===s&&(e*=a,r*=a,o*=a),n.set(e,r,o,a),!1===i.equals(n)&&(t.clearColor(e,r,o,a),i.copy(n))},reset:function(){e=!1,r=null,i.set(-1,0,0,0)}}},o=new function(){let e=!1,n=null,r=null,i=null;return{setTest:function(t){t?I(2929):F(2929)},setMask:function(r){n===r||e||(t.depthMask(r),n=r)},setFunc:function(e){if(r!==e){if(e)switch(e){case 0:t.depthFunc(512);break;case 1:t.depthFunc(519);break;case 2:t.depthFunc(513);break;case 3:t.depthFunc(515);break;case 4:t.depthFunc(514);break;case 5:t.depthFunc(518);break;case 6:t.depthFunc(516);break;case 7:t.depthFunc(517);break;default:t.depthFunc(515)}else t.depthFunc(515);r=e}},setLocked:function(t){e=t},setClear:function(e){i!==e&&(t.clearDepth(e),i=e)},reset:function(){e=!1,n=null,r=null,i=null}}},a=new function(){let e=!1,n=null,r=null,i=null,o=null,a=null,s=null,u=null,c=null;return{setTest:function(t){e||(t?I(2960):F(2960))},setMask:function(r){n===r||e||(t.stencilMask(r),n=r)},setFunc:function(e,n,a){r===e&&i===n&&o===a||(t.stencilFunc(e,n,a),r=e,i=n,o=a)},setOp:function(e,n,r){a===e&&s===n&&u===r||(t.stencilOp(e,n,r),a=e,s=n,u=r)},setLocked:function(t){e=t},setClear:function(e){c!==e&&(t.clearStencil(e),c=e)},reset:function(){e=!1,n=null,r=null,i=null,o=null,a=null,s=null,u=null,c=null}}};let s={},u=null,c={},l=null,h=!1,f=null,d=null,p=null,m=null,g=null,v=null,y=null,b=!1,_=null,x=null,w=null,S=null,E=null;const T=t.getParameter(35661);let M=!1,A=0;const L=t.getParameter(7938);-1!==L.indexOf("WebGL")?(A=parseFloat(/^WebGL (\d)/.exec(L)[1]),M=A>=1):-1!==L.indexOf("OpenGL ES")&&(A=parseFloat(/^OpenGL ES (\d)/.exec(L)[1]),M=A>=2);let D=null,C={};const P=new Ic(0,0,t.canvas.width,t.canvas.height),R=new Ic(0,0,t.canvas.width,t.canvas.height);function k(e,n,r){const i=new Uint8Array(4),o=t.createTexture();t.bindTexture(e,o),t.texParameteri(e,10241,9728),t.texParameteri(e,10240,9728);for(let e=0;e<r;e++)t.texImage2D(n+e,0,6408,1,1,0,6408,5121,i);return o}const O={};function I(e){!0!==s[e]&&(t.enable(e),s[e]=!0)}function F(e){!1!==s[e]&&(t.disable(e),s[e]=!1)}O[3553]=k(3553,3553,1),O[34067]=k(34067,34069,6),i.setClear(0,0,0,1),o.setClear(1),a.setClear(0),I(2929),o.setFunc(3),U(!1),j(1),I(2884),N(0);const z={100:32774,101:32778,102:32779};if(r)z[103]=32775,z[104]=32776;else{const t=e.get("EXT_blend_minmax");null!==t&&(z[103]=t.MIN_EXT,z[104]=t.MAX_EXT)}const B={200:0,201:1,202:768,204:770,210:776,208:774,206:772,203:769,205:771,209:775,207:773};function N(e,n,r,i,o,a,s,u){if(0!==e){if(!1===h&&(I(3042),h=!0),5===e)o=o||n,a=a||r,s=s||i,n===d&&o===g||(t.blendEquationSeparate(z[n],z[o]),d=n,g=o),r===p&&i===m&&a===v&&s===y||(t.blendFuncSeparate(B[r],B[i],B[a],B[s]),p=r,m=i,v=a,y=s),f=e,b=null;else if(e!==f||u!==b){if(100===d&&100===g||(t.blendEquation(32774),d=100,g=100),u)switch(e){case 1:t.blendFuncSeparate(1,771,1,771);break;case 2:t.blendFunc(1,1);break;case 3:t.blendFuncSeparate(0,0,769,771);break;case 4:t.blendFuncSeparate(0,768,0,770);break;default:console.error("THREE.WebGLState: Invalid blending: ",e)}else switch(e){case 1:t.blendFuncSeparate(770,771,1,771);break;case 2:t.blendFunc(770,1);break;case 3:t.blendFunc(0,769);break;case 4:t.blendFunc(0,768);break;default:console.error("THREE.WebGLState: Invalid blending: ",e)}p=null,m=null,v=null,y=null,f=e,b=u}}else!0===h&&(F(3042),h=!1)}function U(e){_!==e&&(e?t.frontFace(2304):t.frontFace(2305),_=e)}function j(e){0!==e?(I(2884),e!==x&&(1===e?t.cullFace(1029):2===e?t.cullFace(1028):t.cullFace(1032))):F(2884),x=e}function H(e,n,r){e?(I(32823),S===n&&E===r||(t.polygonOffset(n,r),S=n,E=r)):F(32823)}function V(e){void 0===e&&(e=33984+T-1),D!==e&&(t.activeTexture(e),D=e)}return{buffers:{color:i,depth:o,stencil:a},enable:I,disable:F,bindFramebuffer:function(e,n){null===n&&null!==u&&(n=u),c[e]!==n&&(t.bindFramebuffer(e,n),c[e]=n,r&&(36009===e&&(c[36160]=n),36160===e&&(c[36009]=n)))},bindXRFramebuffer:function(e){e!==u&&(t.bindFramebuffer(36160,e),u=e)},useProgram:function(e){return l!==e&&(t.useProgram(e),l=e,!0)},setBlending:N,setMaterial:function(t,e){2===t.side?F(2884):I(2884);let n=1===t.side;e&&(n=!n),U(n),1===t.blending&&!1===t.transparent?N(0):N(t.blending,t.blendEquation,t.blendSrc,t.blendDst,t.blendEquationAlpha,t.blendSrcAlpha,t.blendDstAlpha,t.premultipliedAlpha),o.setFunc(t.depthFunc),o.setTest(t.depthTest),o.setMask(t.depthWrite),i.setMask(t.colorWrite);const r=t.stencilWrite;a.setTest(r),r&&(a.setMask(t.stencilWriteMask),a.setFunc(t.stencilFunc,t.stencilRef,t.stencilFuncMask),a.setOp(t.stencilFail,t.stencilZFail,t.stencilZPass)),H(t.polygonOffset,t.polygonOffsetFactor,t.polygonOffsetUnits),!0===t.alphaToCoverage?I(32926):F(32926)},setFlipSided:U,setCullFace:j,setLineWidth:function(e){e!==w&&(M&&t.lineWidth(e),w=e)},setPolygonOffset:H,setScissorTest:function(t){t?I(3089):F(3089)},activeTexture:V,bindTexture:function(e,n){null===D&&V();let r=C[D];void 0===r&&(r={type:void 0,texture:void 0},C[D]=r),r.type===e&&r.texture===n||(t.bindTexture(e,n||O[e]),r.type=e,r.texture=n)},unbindTexture:function(){const e=C[D];void 0!==e&&void 0!==e.type&&(t.bindTexture(e.type,null),e.type=void 0,e.texture=void 0)},compressedTexImage2D:function(){try{t.compressedTexImage2D.apply(t,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},texImage2D:function(){try{t.texImage2D.apply(t,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},texImage3D:function(){try{t.texImage3D.apply(t,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},scissor:function(e){!1===P.equals(e)&&(t.scissor(e.x,e.y,e.z,e.w),P.copy(e))},viewport:function(e){!1===R.equals(e)&&(t.viewport(e.x,e.y,e.z,e.w),R.copy(e))},reset:function(){t.disable(3042),t.disable(2884),t.disable(2929),t.disable(32823),t.disable(3089),t.disable(2960),t.disable(32926),t.blendEquation(32774),t.blendFunc(1,0),t.blendFuncSeparate(1,0,1,0),t.colorMask(!0,!0,!0,!0),t.clearColor(0,0,0,0),t.depthMask(!0),t.depthFunc(513),t.clearDepth(1),t.stencilMask(4294967295),t.stencilFunc(519,0,4294967295),t.stencilOp(7680,7680,7680),t.clearStencil(0),t.cullFace(1029),t.frontFace(2305),t.polygonOffset(0,0),t.activeTexture(33984),t.bindFramebuffer(36160,null),!0===r&&(t.bindFramebuffer(36009,null),t.bindFramebuffer(36008,null)),t.useProgram(null),t.lineWidth(1),t.scissor(0,0,t.canvas.width,t.canvas.height),t.viewport(0,0,t.canvas.width,t.canvas.height),s={},D=null,C={},u=null,c={},l=null,h=!1,f=null,d=null,p=null,m=null,g=null,v=null,y=null,b=!1,_=null,x=null,w=null,S=null,E=null,P.set(0,0,t.canvas.width,t.canvas.height),R.set(0,0,t.canvas.width,t.canvas.height),i.reset(),o.reset(),a.reset()}}}function dp(t,e,n,r,i,o,a){const s=i.isWebGL2,u=i.maxTextures,c=i.maxCubemapSize,l=i.maxTextureSize,h=i.maxSamples,f=new WeakMap;let d,p=!1;try{p="undefined"!=typeof OffscreenCanvas&&null!==new OffscreenCanvas(1,1).getContext("2d")}catch(t){}function m(t,e){return p?new OffscreenCanvas(t,e):document.createElementNS("http://www.w3.org/1999/xhtml","canvas")}function g(t,e,n,r){let i=1;if((t.width>r||t.height>r)&&(i=r/Math.max(t.width,t.height)),i<1||!0===e){if("undefined"!=typeof HTMLImageElement&&t instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&t instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&t instanceof ImageBitmap){const r=e?Ac:Math.floor,o=r(i*t.width),a=r(i*t.height);void 0===d&&(d=m(o,a));const s=n?m(o,a):d;s.width=o,s.height=a;return s.getContext("2d").drawImage(t,0,0,o,a),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+t.width+"x"+t.height+") to ("+o+"x"+a+")."),s}return"data"in t&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+t.width+"x"+t.height+")."),t}return t}function v(t){return Tc(t.width)&&Tc(t.height)}function y(t,e){return t.generateMipmaps&&e&&1003!==t.minFilter&&1006!==t.minFilter}function b(e,n,i,o){t.generateMipmap(e);r.get(n).__maxMipLevel=Math.log2(Math.max(i,o))}function _(n,r,i){if(!1===s)return r;if(null!==n){if(void 0!==t[n])return t[n];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+n+"'")}let o=r;return 6403===r&&(5126===i&&(o=33326),5131===i&&(o=33325),5121===i&&(o=33321)),6407===r&&(5126===i&&(o=34837),5131===i&&(o=34843),5121===i&&(o=32849)),6408===r&&(5126===i&&(o=34836),5131===i&&(o=34842),5121===i&&(o=32856)),33325!==o&&33326!==o&&34842!==o&&34836!==o||e.get("EXT_color_buffer_float"),o}function x(t){return 1003===t||1004===t||1005===t?9728:9729}function w(e){const n=e.target;n.removeEventListener("dispose",w),function(e){const n=r.get(e);if(void 0===n.__webglInit)return;t.deleteTexture(n.__webglTexture),r.remove(e)}(n),n.isVideoTexture&&f.delete(n),a.memory.textures--}function S(e){const n=e.target;n.removeEventListener("dispose",S),function(e){const n=e.texture,i=r.get(e),o=r.get(n);if(!e)return;void 0!==o.__webglTexture&&t.deleteTexture(o.__webglTexture);e.depthTexture&&e.depthTexture.dispose();if(e.isWebGLCubeRenderTarget)for(let e=0;e<6;e++)t.deleteFramebuffer(i.__webglFramebuffer[e]),i.__webglDepthbuffer&&t.deleteRenderbuffer(i.__webglDepthbuffer[e]);else t.deleteFramebuffer(i.__webglFramebuffer),i.__webglDepthbuffer&&t.deleteRenderbuffer(i.__webglDepthbuffer),i.__webglMultisampledFramebuffer&&t.deleteFramebuffer(i.__webglMultisampledFramebuffer),i.__webglColorRenderbuffer&&t.deleteRenderbuffer(i.__webglColorRenderbuffer),i.__webglDepthRenderbuffer&&t.deleteRenderbuffer(i.__webglDepthRenderbuffer);r.remove(n),r.remove(e)}(n),a.memory.textures--}let E=0;function T(t,e){const i=r.get(t);if(t.isVideoTexture&&function(t){const e=a.render.frame;f.get(t)!==e&&(f.set(t,e),t.update())}(t),t.version>0&&i.__version!==t.version){const n=t.image;if(void 0===n)console.warn("THREE.WebGLRenderer: Texture marked for update but image is undefined");else{if(!1!==n.complete)return void P(i,t,e);console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete")}}n.activeTexture(33984+e),n.bindTexture(3553,i.__webglTexture)}function M(e,i){const a=r.get(e);e.version>0&&a.__version!==e.version?function(e,r,i){if(6!==r.image.length)return;C(e,r),n.activeTexture(33984+i),n.bindTexture(34067,e.__webglTexture),t.pixelStorei(37440,r.flipY),t.pixelStorei(37441,r.premultiplyAlpha),t.pixelStorei(3317,r.unpackAlignment),t.pixelStorei(37443,0);const a=r&&(r.isCompressedTexture||r.image[0].isCompressedTexture),u=r.image[0]&&r.image[0].isDataTexture,l=[];for(let t=0;t<6;t++)l[t]=a||u?u?r.image[t].image:r.image[t]:g(r.image[t],!1,!0,c);const h=l[0],f=v(h)||s,d=o.convert(r.format),p=o.convert(r.type),m=_(r.internalFormat,d,p);let x;if(D(34067,r,f),a){for(let t=0;t<6;t++){x=l[t].mipmaps;for(let e=0;e<x.length;e++){const i=x[e];1023!==r.format&&1022!==r.format?null!==d?n.compressedTexImage2D(34069+t,e,m,i.width,i.height,0,i.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):n.texImage2D(34069+t,e,m,i.width,i.height,0,d,p,i.data)}}e.__maxMipLevel=x.length-1}else{x=r.mipmaps;for(let t=0;t<6;t++)if(u){n.texImage2D(34069+t,0,m,l[t].width,l[t].height,0,d,p,l[t].data);for(let e=0;e<x.length;e++){const r=x[e].image[t].image;n.texImage2D(34069+t,e+1,m,r.width,r.height,0,d,p,r.data)}}else{n.texImage2D(34069+t,0,m,d,p,l[t]);for(let e=0;e<x.length;e++){const r=x[e];n.texImage2D(34069+t,e+1,m,d,p,r.image[t])}}e.__maxMipLevel=x.length}y(r,f)&&b(34067,r,h.width,h.height);e.__version=r.version,r.onUpdate&&r.onUpdate(r)}(a,e,i):(n.activeTexture(33984+i),n.bindTexture(34067,a.__webglTexture))}const A={1e3:10497,1001:33071,1002:33648},L={1003:9728,1004:9984,1005:9986,1006:9729,1007:9985,1008:9987};function D(n,o,a){if(a?(t.texParameteri(n,10242,A[o.wrapS]),t.texParameteri(n,10243,A[o.wrapT]),32879!==n&&35866!==n||t.texParameteri(n,32882,A[o.wrapR]),t.texParameteri(n,10240,L[o.magFilter]),t.texParameteri(n,10241,L[o.minFilter])):(t.texParameteri(n,10242,33071),t.texParameteri(n,10243,33071),32879!==n&&35866!==n||t.texParameteri(n,32882,33071),1001===o.wrapS&&1001===o.wrapT||console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),t.texParameteri(n,10240,x(o.magFilter)),t.texParameteri(n,10241,x(o.minFilter)),1003!==o.minFilter&&1006!==o.minFilter&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),!0===e.has("EXT_texture_filter_anisotropic")){const a=e.get("EXT_texture_filter_anisotropic");if(1015===o.type&&!1===e.has("OES_texture_float_linear"))return;if(!1===s&&1016===o.type&&!1===e.has("OES_texture_half_float_linear"))return;(o.anisotropy>1||r.get(o).__currentAnisotropy)&&(t.texParameterf(n,a.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(o.anisotropy,i.getMaxAnisotropy())),r.get(o).__currentAnisotropy=o.anisotropy)}}function C(e,n){void 0===e.__webglInit&&(e.__webglInit=!0,n.addEventListener("dispose",w),e.__webglTexture=t.createTexture(),a.memory.textures++)}function P(e,r,i){let a=3553;r.isDataTexture2DArray&&(a=35866),r.isDataTexture3D&&(a=32879),C(e,r),n.activeTexture(33984+i),n.bindTexture(a,e.__webglTexture),t.pixelStorei(37440,r.flipY),t.pixelStorei(37441,r.premultiplyAlpha),t.pixelStorei(3317,r.unpackAlignment),t.pixelStorei(37443,0);const u=function(t){return!s&&(1001!==t.wrapS||1001!==t.wrapT||1003!==t.minFilter&&1006!==t.minFilter)}(r)&&!1===v(r.image),c=g(r.image,u,!1,l),h=v(c)||s,f=o.convert(r.format);let d,p=o.convert(r.type),m=_(r.internalFormat,f,p);D(a,r,h);const x=r.mipmaps;if(r.isDepthTexture)m=6402,s?m=1015===r.type?36012:1014===r.type?33190:1020===r.type?35056:33189:1015===r.type&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),1026===r.format&&6402===m&&1012!==r.type&&1014!==r.type&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),r.type=1012,p=o.convert(r.type)),1027===r.format&&6402===m&&(m=34041,1020!==r.type&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),r.type=1020,p=o.convert(r.type))),n.texImage2D(3553,0,m,c.width,c.height,0,f,p,null);else if(r.isDataTexture)if(x.length>0&&h){for(let t=0,e=x.length;t<e;t++)d=x[t],n.texImage2D(3553,t,m,d.width,d.height,0,f,p,d.data);r.generateMipmaps=!1,e.__maxMipLevel=x.length-1}else n.texImage2D(3553,0,m,c.width,c.height,0,f,p,c.data),e.__maxMipLevel=0;else if(r.isCompressedTexture){for(let t=0,e=x.length;t<e;t++)d=x[t],1023!==r.format&&1022!==r.format?null!==f?n.compressedTexImage2D(3553,t,m,d.width,d.height,0,d.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):n.texImage2D(3553,t,m,d.width,d.height,0,f,p,d.data);e.__maxMipLevel=x.length-1}else if(r.isDataTexture2DArray)n.texImage3D(35866,0,m,c.width,c.height,c.depth,0,f,p,c.data),e.__maxMipLevel=0;else if(r.isDataTexture3D)n.texImage3D(32879,0,m,c.width,c.height,c.depth,0,f,p,c.data),e.__maxMipLevel=0;else if(x.length>0&&h){for(let t=0,e=x.length;t<e;t++)d=x[t],n.texImage2D(3553,t,m,f,p,d);r.generateMipmaps=!1,e.__maxMipLevel=x.length-1}else n.texImage2D(3553,0,m,f,p,c),e.__maxMipLevel=0;y(r,h)&&b(a,r,c.width,c.height),e.__version=r.version,r.onUpdate&&r.onUpdate(r)}function R(e,i,a,s){const u=i.texture,c=o.convert(u.format),l=o.convert(u.type),h=_(u.internalFormat,c,l);32879===s||35866===s?n.texImage3D(s,0,h,i.width,i.height,i.depth,0,c,l,null):n.texImage2D(s,0,h,i.width,i.height,0,c,l,null),n.bindFramebuffer(36160,e),t.framebufferTexture2D(36160,a,s,r.get(u).__webglTexture,0),n.bindFramebuffer(36160,null)}function k(e,n,r){if(t.bindRenderbuffer(36161,e),n.depthBuffer&&!n.stencilBuffer){let i=33189;if(r){const e=n.depthTexture;e&&e.isDepthTexture&&(1015===e.type?i=36012:1014===e.type&&(i=33190));const r=I(n);t.renderbufferStorageMultisample(36161,r,i,n.width,n.height)}else t.renderbufferStorage(36161,i,n.width,n.height);t.framebufferRenderbuffer(36160,36096,36161,e)}else if(n.depthBuffer&&n.stencilBuffer){if(r){const e=I(n);t.renderbufferStorageMultisample(36161,e,35056,n.width,n.height)}else t.renderbufferStorage(36161,34041,n.width,n.height);t.framebufferRenderbuffer(36160,33306,36161,e)}else{const e=n.texture,i=o.convert(e.format),a=o.convert(e.type),s=_(e.internalFormat,i,a);if(r){const e=I(n);t.renderbufferStorageMultisample(36161,e,s,n.width,n.height)}else t.renderbufferStorage(36161,s,n.width,n.height)}t.bindRenderbuffer(36161,null)}function O(e){const i=r.get(e),o=!0===e.isWebGLCubeRenderTarget;if(e.depthTexture){if(o)throw new Error("target.depthTexture not supported in Cube render targets");!function(e,i){if(i&&i.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(n.bindFramebuffer(36160,e),!i.depthTexture||!i.depthTexture.isDepthTexture)throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");r.get(i.depthTexture).__webglTexture&&i.depthTexture.image.width===i.width&&i.depthTexture.image.height===i.height||(i.depthTexture.image.width=i.width,i.depthTexture.image.height=i.height,i.depthTexture.needsUpdate=!0),T(i.depthTexture,0);const o=r.get(i.depthTexture).__webglTexture;if(1026===i.depthTexture.format)t.framebufferTexture2D(36160,36096,3553,o,0);else{if(1027!==i.depthTexture.format)throw new Error("Unknown depthTexture format");t.framebufferTexture2D(36160,33306,3553,o,0)}}(i.__webglFramebuffer,e)}else if(o){i.__webglDepthbuffer=[];for(let r=0;r<6;r++)n.bindFramebuffer(36160,i.__webglFramebuffer[r]),i.__webglDepthbuffer[r]=t.createRenderbuffer(),k(i.__webglDepthbuffer[r],e,!1)}else n.bindFramebuffer(36160,i.__webglFramebuffer),i.__webglDepthbuffer=t.createRenderbuffer(),k(i.__webglDepthbuffer,e,!1);n.bindFramebuffer(36160,null)}function I(t){return s&&t.isWebGLMultisampleRenderTarget?Math.min(h,t.samples):0}let F=!1,z=!1;this.allocateTextureUnit=function(){const t=E;return t>=u&&console.warn("THREE.WebGLTextures: Trying to use "+t+" texture units while this GPU supports only "+u),E+=1,t},this.resetTextureUnits=function(){E=0},this.setTexture2D=T,this.setTexture2DArray=function(t,e){const i=r.get(t);t.version>0&&i.__version!==t.version?P(i,t,e):(n.activeTexture(33984+e),n.bindTexture(35866,i.__webglTexture))},this.setTexture3D=function(t,e){const i=r.get(t);t.version>0&&i.__version!==t.version?P(i,t,e):(n.activeTexture(33984+e),n.bindTexture(32879,i.__webglTexture))},this.setTextureCube=M,this.setupRenderTarget=function(e){const i=e.texture,u=r.get(e),c=r.get(i);e.addEventListener("dispose",S),c.__webglTexture=t.createTexture(),c.__version=i.version,a.memory.textures++;const l=!0===e.isWebGLCubeRenderTarget,h=!0===e.isWebGLMultisampleRenderTarget,f=i.isDataTexture3D||i.isDataTexture2DArray,d=v(e)||s;if(!s||1022!==i.format||1015!==i.type&&1016!==i.type||(i.format=1023,console.warn("THREE.WebGLRenderer: Rendering to textures with RGB format is not supported. Using RGBA format instead.")),l){u.__webglFramebuffer=[];for(let e=0;e<6;e++)u.__webglFramebuffer[e]=t.createFramebuffer()}else if(u.__webglFramebuffer=t.createFramebuffer(),h)if(s){u.__webglMultisampledFramebuffer=t.createFramebuffer(),u.__webglColorRenderbuffer=t.createRenderbuffer(),t.bindRenderbuffer(36161,u.__webglColorRenderbuffer);const r=o.convert(i.format),a=o.convert(i.type),s=_(i.internalFormat,r,a),c=I(e);t.renderbufferStorageMultisample(36161,c,s,e.width,e.height),n.bindFramebuffer(36160,u.__webglMultisampledFramebuffer),t.framebufferRenderbuffer(36160,36064,36161,u.__webglColorRenderbuffer),t.bindRenderbuffer(36161,null),e.depthBuffer&&(u.__webglDepthRenderbuffer=t.createRenderbuffer(),k(u.__webglDepthRenderbuffer,e,!0)),n.bindFramebuffer(36160,null)}else console.warn("THREE.WebGLRenderer: WebGLMultisampleRenderTarget can only be used with WebGL2.");if(l){n.bindTexture(34067,c.__webglTexture),D(34067,i,d);for(let t=0;t<6;t++)R(u.__webglFramebuffer[t],e,36064,34069+t);y(i,d)&&b(34067,i,e.width,e.height),n.bindTexture(34067,null)}else{let t=3553;if(f)if(s){t=i.isDataTexture3D?32879:35866}else console.warn("THREE.DataTexture3D and THREE.DataTexture2DArray only supported with WebGL2.");n.bindTexture(t,c.__webglTexture),D(t,i,d),R(u.__webglFramebuffer,e,36064,t),y(i,d)&&b(3553,i,e.width,e.height),n.bindTexture(3553,null)}e.depthBuffer&&O(e)},this.updateRenderTargetMipmap=function(t){const e=t.texture;if(y(e,v(t)||s)){const i=t.isWebGLCubeRenderTarget?34067:3553,o=r.get(e).__webglTexture;n.bindTexture(i,o),b(i,e,t.width,t.height),n.bindTexture(i,null)}},this.updateMultisampleRenderTarget=function(e){if(e.isWebGLMultisampleRenderTarget)if(s){const i=e.width,o=e.height;let a=16384;e.depthBuffer&&(a|=256),e.stencilBuffer&&(a|=1024);const s=r.get(e);n.bindFramebuffer(36008,s.__webglMultisampledFramebuffer),n.bindFramebuffer(36009,s.__webglFramebuffer),t.blitFramebuffer(0,0,i,o,0,0,i,o,a,9728),n.bindFramebuffer(36008,null),n.bindFramebuffer(36009,s.__webglMultisampledFramebuffer)}else console.warn("THREE.WebGLRenderer: WebGLMultisampleRenderTarget can only be used with WebGL2.")},this.safeSetTexture2D=function(t,e){t&&t.isWebGLRenderTarget&&(!1===F&&(console.warn("THREE.WebGLTextures.safeSetTexture2D: don't use render targets as textures. Use their .texture property instead."),F=!0),t=t.texture),T(t,e)},this.safeSetTextureCube=function(t,e){t&&t.isWebGLCubeRenderTarget&&(!1===z&&(console.warn("THREE.WebGLTextures.safeSetTextureCube: don't use cube render targets as textures. Use their .texture property instead."),z=!0),t=t.texture),M(t,e)}}function pp(t,e,n){const r=n.isWebGL2;return{convert:function(t){let n;if(1009===t)return 5121;if(1017===t)return 32819;if(1018===t)return 32820;if(1019===t)return 33635;if(1010===t)return 5120;if(1011===t)return 5122;if(1012===t)return 5123;if(1013===t)return 5124;if(1014===t)return 5125;if(1015===t)return 5126;if(1016===t)return r?5131:(n=e.get("OES_texture_half_float"),null!==n?n.HALF_FLOAT_OES:null);if(1021===t)return 6406;if(1022===t)return 6407;if(1023===t)return 6408;if(1024===t)return 6409;if(1025===t)return 6410;if(1026===t)return 6402;if(1027===t)return 34041;if(1028===t)return 6403;if(1029===t)return 36244;if(1030===t)return 33319;if(1031===t)return 33320;if(1032===t)return 36248;if(1033===t)return 36249;if(33776===t||33777===t||33778===t||33779===t){if(n=e.get("WEBGL_compressed_texture_s3tc"),null===n)return null;if(33776===t)return n.COMPRESSED_RGB_S3TC_DXT1_EXT;if(33777===t)return n.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(33778===t)return n.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(33779===t)return n.COMPRESSED_RGBA_S3TC_DXT5_EXT}if(35840===t||35841===t||35842===t||35843===t){if(n=e.get("WEBGL_compressed_texture_pvrtc"),null===n)return null;if(35840===t)return n.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(35841===t)return n.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(35842===t)return n.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(35843===t)return n.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(36196===t)return n=e.get("WEBGL_compressed_texture_etc1"),null!==n?n.COMPRESSED_RGB_ETC1_WEBGL:null;if((37492===t||37496===t)&&(n=e.get("WEBGL_compressed_texture_etc"),null!==n)){if(37492===t)return n.COMPRESSED_RGB8_ETC2;if(37496===t)return n.COMPRESSED_RGBA8_ETC2_EAC}return 37808===t||37809===t||37810===t||37811===t||37812===t||37813===t||37814===t||37815===t||37816===t||37817===t||37818===t||37819===t||37820===t||37821===t||37840===t||37841===t||37842===t||37843===t||37844===t||37845===t||37846===t||37847===t||37848===t||37849===t||37850===t||37851===t||37852===t||37853===t?(n=e.get("WEBGL_compressed_texture_astc"),null!==n?t:null):36492===t?(n=e.get("EXT_texture_compression_bptc"),null!==n?t:null):1020===t?r?34042:(n=e.get("WEBGL_depth_texture"),null!==n?n.UNSIGNED_INT_24_8_WEBGL:null):void 0}}}class mp extends Kh{constructor(t=[]){super(),this.cameras=t}}mp.prototype.isArrayCamera=!0;class gp extends Ul{constructor(){super(),this.type="Group"}}gp.prototype.isGroup=!0;const vp={type:"move"};class yp{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return null===this._hand&&(this._hand=new gp,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return null===this._targetRay&&(this._targetRay=new gp,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new Bc,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new Bc),this._targetRay}getGripSpace(){return null===this._grip&&(this._grip=new gp,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new Bc,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new Bc),this._grip}dispatchEvent(t){return null!==this._targetRay&&this._targetRay.dispatchEvent(t),null!==this._grip&&this._grip.dispatchEvent(t),null!==this._hand&&this._hand.dispatchEvent(t),this}disconnect(t){return this.dispatchEvent({type:"disconnected",data:t}),null!==this._targetRay&&(this._targetRay.visible=!1),null!==this._grip&&(this._grip.visible=!1),null!==this._hand&&(this._hand.visible=!1),this}update(t,e,n){let r=null,i=null,o=null;const a=this._targetRay,s=this._grip,u=this._hand;if(t&&"visible-blurred"!==e.session.visibilityState)if(null!==a&&(r=e.getPose(t.targetRaySpace,n),null!==r&&(a.matrix.fromArray(r.transform.matrix),a.matrix.decompose(a.position,a.rotation,a.scale),r.linearVelocity?(a.hasLinearVelocity=!0,a.linearVelocity.copy(r.linearVelocity)):a.hasLinearVelocity=!1,r.angularVelocity?(a.hasAngularVelocity=!0,a.angularVelocity.copy(r.angularVelocity)):a.hasAngularVelocity=!1,this.dispatchEvent(vp))),u&&t.hand){o=!0;for(const r of t.hand.values()){const t=e.getJointPose(r,n);if(void 0===u.joints[r.jointName]){const t=new gp;t.matrixAutoUpdate=!1,t.visible=!1,u.joints[r.jointName]=t,u.add(t)}const i=u.joints[r.jointName];null!==t&&(i.matrix.fromArray(t.transform.matrix),i.matrix.decompose(i.position,i.rotation,i.scale),i.jointRadius=t.radius),i.visible=null!==t}const r=u.joints["index-finger-tip"],i=u.joints["thumb-tip"],a=r.position.distanceTo(i.position),s=.02,c=.005;u.inputState.pinching&&a>s+c?(u.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:t.handedness,target:this})):!u.inputState.pinching&&a<=s-c&&(u.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:t.handedness,target:this}))}else null!==s&&t.gripSpace&&(i=e.getPose(t.gripSpace,n),null!==i&&(s.matrix.fromArray(i.transform.matrix),s.matrix.decompose(s.position,s.rotation,s.scale),i.linearVelocity?(s.hasLinearVelocity=!0,s.linearVelocity.copy(i.linearVelocity)):s.hasLinearVelocity=!1,i.angularVelocity?(s.hasAngularVelocity=!0,s.angularVelocity.copy(i.angularVelocity)):s.hasAngularVelocity=!1));return null!==a&&(a.visible=null!==r),null!==s&&(s.visible=null!==i),null!==u&&(u.visible=null!==o),this}}class bp extends vc{constructor(t,e){super();const n=this,r=t.state;let i=null,o=1,a=null,s="local-floor",u=null;const c=[],l=new Map,h=new Kh;h.layers.enable(1),h.viewport=new Ic;const f=new Kh;f.layers.enable(2),f.viewport=new Ic;const d=[h,f],p=new mp;p.layers.enable(1),p.layers.enable(2);let m=null,g=null;function v(t){const e=l.get(t.inputSource);e&&e.dispatchEvent({type:t.type,data:t.inputSource})}function y(){l.forEach((function(t,e){t.disconnect(e)})),l.clear(),m=null,g=null,r.bindXRFramebuffer(null),t.setRenderTarget(t.getRenderTarget()),E.stop(),n.isPresenting=!1,n.dispatchEvent({type:"sessionend"})}function b(t){const e=i.inputSources;for(let t=0;t<c.length;t++)l.set(e[t],c[t]);for(let e=0;e<t.removed.length;e++){const n=t.removed[e],r=l.get(n);r&&(r.dispatchEvent({type:"disconnected",data:n}),l.delete(n))}for(let e=0;e<t.added.length;e++){const n=t.added[e],r=l.get(n);r&&r.dispatchEvent({type:"connected",data:n})}}this.enabled=!1,this.isPresenting=!1,this.getController=function(t){let e=c[t];return void 0===e&&(e=new yp,c[t]=e),e.getTargetRaySpace()},this.getControllerGrip=function(t){let e=c[t];return void 0===e&&(e=new yp,c[t]=e),e.getGripSpace()},this.getHand=function(t){let e=c[t];return void 0===e&&(e=new yp,c[t]=e),e.getHandSpace()},this.setFramebufferScaleFactor=function(t){o=t,!0===n.isPresenting&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(t){s=t,!0===n.isPresenting&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return a},this.getSession=function(){return i},this.setSession=async function(t){if(i=t,null!==i){i.addEventListener("select",v),i.addEventListener("selectstart",v),i.addEventListener("selectend",v),i.addEventListener("squeeze",v),i.addEventListener("squeezestart",v),i.addEventListener("squeezeend",v),i.addEventListener("end",y),i.addEventListener("inputsourceschange",b);const t=e.getContextAttributes();!0!==t.xrCompatible&&await e.makeXRCompatible();const r={antialias:t.antialias,alpha:t.alpha,depth:t.depth,stencil:t.stencil,framebufferScaleFactor:o},u=new XRWebGLLayer(i,e,r);i.updateRenderState({baseLayer:u}),a=await i.requestReferenceSpace(s),E.setContext(i),E.start(),n.isPresenting=!0,n.dispatchEvent({type:"sessionstart"})}};const _=new Bc,x=new Bc;function w(t,e){null===e?t.matrixWorld.copy(t.matrix):t.matrixWorld.multiplyMatrices(e.matrixWorld,t.matrix),t.matrixWorldInverse.copy(t.matrixWorld).invert()}this.getCamera=function(t){p.near=f.near=h.near=t.near,p.far=f.far=h.far=t.far,m===p.near&&g===p.far||(i.updateRenderState({depthNear:p.near,depthFar:p.far}),m=p.near,g=p.far);const e=t.parent,n=p.cameras;w(p,e);for(let t=0;t<n.length;t++)w(n[t],e);t.matrixWorld.copy(p.matrixWorld),t.matrix.copy(p.matrix),t.matrix.decompose(t.position,t.quaternion,t.scale);const r=t.children;for(let t=0,e=r.length;t<e;t++)r[t].updateMatrixWorld(!0);return 2===n.length?function(t,e,n){_.setFromMatrixPosition(e.matrixWorld),x.setFromMatrixPosition(n.matrixWorld);const r=_.distanceTo(x),i=e.projectionMatrix.elements,o=n.projectionMatrix.elements,a=i[14]/(i[10]-1),s=i[14]/(i[10]+1),u=(i[9]+1)/i[5],c=(i[9]-1)/i[5],l=(i[8]-1)/i[0],h=(o[8]+1)/o[0],f=a*l,d=a*h,p=r/(-l+h),m=p*-l;e.matrixWorld.decompose(t.position,t.quaternion,t.scale),t.translateX(m),t.translateZ(p),t.matrixWorld.compose(t.position,t.quaternion,t.scale),t.matrixWorldInverse.copy(t.matrixWorld).invert();const g=a+p,v=s+p,y=f-m,b=d+(r-m),w=u*s/v*g,S=c*s/v*g;t.projectionMatrix.makePerspective(y,b,w,S,g,v)}(p,h,f):p.projectionMatrix.copy(h.projectionMatrix),p};let S=null;const E=new sf;E.setAnimationLoop((function(t,e){if(u=e.getViewerPose(a),null!==u){const t=u.views,e=i.renderState.baseLayer;r.bindXRFramebuffer(e.framebuffer);let n=!1;t.length!==p.cameras.length&&(p.cameras.length=0,n=!0);for(let r=0;r<t.length;r++){const i=t[r],o=e.getViewport(i),a=d[r];a.matrix.fromArray(i.transform.matrix),a.projectionMatrix.fromArray(i.projectionMatrix),a.viewport.set(o.x,o.y,o.width,o.height),0===r&&p.matrix.copy(a.matrix),!0===n&&p.cameras.push(a)}}const n=i.inputSources;for(let t=0;t<c.length;t++){const r=c[t],i=n[t];r.update(i,e,a)}S&&S(t,e)})),this.setAnimationLoop=function(t){S=t},this.dispose=function(){}}}function _p(t){function e(e,n){e.opacity.value=n.opacity,n.color&&e.diffuse.value.copy(n.color),n.emissive&&e.emissive.value.copy(n.emissive).multiplyScalar(n.emissiveIntensity),n.map&&(e.map.value=n.map),n.alphaMap&&(e.alphaMap.value=n.alphaMap),n.specularMap&&(e.specularMap.value=n.specularMap);const r=t.get(n).envMap;if(r){e.envMap.value=r,e.flipEnvMap.value=r.isCubeTexture&&r._needsFlipEnvMap?-1:1,e.reflectivity.value=n.reflectivity,e.refractionRatio.value=n.refractionRatio;const i=t.get(r).__maxMipLevel;void 0!==i&&(e.maxMipLevel.value=i)}let i,o;n.lightMap&&(e.lightMap.value=n.lightMap,e.lightMapIntensity.value=n.lightMapIntensity),n.aoMap&&(e.aoMap.value=n.aoMap,e.aoMapIntensity.value=n.aoMapIntensity),n.map?i=n.map:n.specularMap?i=n.specularMap:n.displacementMap?i=n.displacementMap:n.normalMap?i=n.normalMap:n.bumpMap?i=n.bumpMap:n.roughnessMap?i=n.roughnessMap:n.metalnessMap?i=n.metalnessMap:n.alphaMap?i=n.alphaMap:n.emissiveMap?i=n.emissiveMap:n.clearcoatMap?i=n.clearcoatMap:n.clearcoatNormalMap?i=n.clearcoatNormalMap:n.clearcoatRoughnessMap&&(i=n.clearcoatRoughnessMap),void 0!==i&&(i.isWebGLRenderTarget&&(i=i.texture),!0===i.matrixAutoUpdate&&i.updateMatrix(),e.uvTransform.value.copy(i.matrix)),n.aoMap?o=n.aoMap:n.lightMap&&(o=n.lightMap),void 0!==o&&(o.isWebGLRenderTarget&&(o=o.texture),!0===o.matrixAutoUpdate&&o.updateMatrix(),e.uv2Transform.value.copy(o.matrix))}function n(e,n){e.roughness.value=n.roughness,e.metalness.value=n.metalness,n.roughnessMap&&(e.roughnessMap.value=n.roughnessMap),n.metalnessMap&&(e.metalnessMap.value=n.metalnessMap),n.emissiveMap&&(e.emissiveMap.value=n.emissiveMap),n.bumpMap&&(e.bumpMap.value=n.bumpMap,e.bumpScale.value=n.bumpScale,1===n.side&&(e.bumpScale.value*=-1)),n.normalMap&&(e.normalMap.value=n.normalMap,e.normalScale.value.copy(n.normalScale),1===n.side&&e.normalScale.value.negate()),n.displacementMap&&(e.displacementMap.value=n.displacementMap,e.displacementScale.value=n.displacementScale,e.displacementBias.value=n.displacementBias);t.get(n).envMap&&(e.envMapIntensity.value=n.envMapIntensity)}return{refreshFogUniforms:function(t,e){t.fogColor.value.copy(e.color),e.isFog?(t.fogNear.value=e.near,t.fogFar.value=e.far):e.isFogExp2&&(t.fogDensity.value=e.density)},refreshMaterialUniforms:function(t,r,i,o){r.isMeshBasicMaterial?e(t,r):r.isMeshLambertMaterial?(e(t,r),function(t,e){e.emissiveMap&&(t.emissiveMap.value=e.emissiveMap)}(t,r)):r.isMeshToonMaterial?(e(t,r),function(t,e){e.gradientMap&&(t.gradientMap.value=e.gradientMap);e.emissiveMap&&(t.emissiveMap.value=e.emissiveMap);e.bumpMap&&(t.bumpMap.value=e.bumpMap,t.bumpScale.value=e.bumpScale,1===e.side&&(t.bumpScale.value*=-1));e.normalMap&&(t.normalMap.value=e.normalMap,t.normalScale.value.copy(e.normalScale),1===e.side&&t.normalScale.value.negate());e.displacementMap&&(t.displacementMap.value=e.displacementMap,t.displacementScale.value=e.displacementScale,t.displacementBias.value=e.displacementBias)}(t,r)):r.isMeshPhongMaterial?(e(t,r),function(t,e){t.specular.value.copy(e.specular),t.shininess.value=Math.max(e.shininess,1e-4),e.emissiveMap&&(t.emissiveMap.value=e.emissiveMap);e.bumpMap&&(t.bumpMap.value=e.bumpMap,t.bumpScale.value=e.bumpScale,1===e.side&&(t.bumpScale.value*=-1));e.normalMap&&(t.normalMap.value=e.normalMap,t.normalScale.value.copy(e.normalScale),1===e.side&&t.normalScale.value.negate());e.displacementMap&&(t.displacementMap.value=e.displacementMap,t.displacementScale.value=e.displacementScale,t.displacementBias.value=e.displacementBias)}(t,r)):r.isMeshStandardMaterial?(e(t,r),r.isMeshPhysicalMaterial?function(t,e){n(t,e),t.reflectivity.value=e.reflectivity,t.clearcoat.value=e.clearcoat,t.clearcoatRoughness.value=e.clearcoatRoughness,e.sheen&&t.sheen.value.copy(e.sheen);e.clearcoatMap&&(t.clearcoatMap.value=e.clearcoatMap);e.clearcoatRoughnessMap&&(t.clearcoatRoughnessMap.value=e.clearcoatRoughnessMap);e.clearcoatNormalMap&&(t.clearcoatNormalScale.value.copy(e.clearcoatNormalScale),t.clearcoatNormalMap.value=e.clearcoatNormalMap,1===e.side&&t.clearcoatNormalScale.value.negate());t.transmission.value=e.transmission,e.transmissionMap&&(t.transmissionMap.value=e.transmissionMap)}(t,r):n(t,r)):r.isMeshMatcapMaterial?(e(t,r),function(t,e){e.matcap&&(t.matcap.value=e.matcap);e.bumpMap&&(t.bumpMap.value=e.bumpMap,t.bumpScale.value=e.bumpScale,1===e.side&&(t.bumpScale.value*=-1));e.normalMap&&(t.normalMap.value=e.normalMap,t.normalScale.value.copy(e.normalScale),1===e.side&&t.normalScale.value.negate());e.displacementMap&&(t.displacementMap.value=e.displacementMap,t.displacementScale.value=e.displacementScale,t.displacementBias.value=e.displacementBias)}(t,r)):r.isMeshDepthMaterial?(e(t,r),function(t,e){e.displacementMap&&(t.displacementMap.value=e.displacementMap,t.displacementScale.value=e.displacementScale,t.displacementBias.value=e.displacementBias)}(t,r)):r.isMeshDistanceMaterial?(e(t,r),function(t,e){e.displacementMap&&(t.displacementMap.value=e.displacementMap,t.displacementScale.value=e.displacementScale,t.displacementBias.value=e.displacementBias);t.referencePosition.value.copy(e.referencePosition),t.nearDistance.value=e.nearDistance,t.farDistance.value=e.farDistance}(t,r)):r.isMeshNormalMaterial?(e(t,r),function(t,e){e.bumpMap&&(t.bumpMap.value=e.bumpMap,t.bumpScale.value=e.bumpScale,1===e.side&&(t.bumpScale.value*=-1));e.normalMap&&(t.normalMap.value=e.normalMap,t.normalScale.value.copy(e.normalScale),1===e.side&&t.normalScale.value.negate());e.displacementMap&&(t.displacementMap.value=e.displacementMap,t.displacementScale.value=e.displacementScale,t.displacementBias.value=e.displacementBias)}(t,r)):r.isLineBasicMaterial?(function(t,e){t.diffuse.value.copy(e.color),t.opacity.value=e.opacity}(t,r),r.isLineDashedMaterial&&function(t,e){t.dashSize.value=e.dashSize,t.totalSize.value=e.dashSize+e.gapSize,t.scale.value=e.scale}(t,r)):r.isPointsMaterial?function(t,e,n,r){t.diffuse.value.copy(e.color),t.opacity.value=e.opacity,t.size.value=e.size*n,t.scale.value=.5*r,e.map&&(t.map.value=e.map);e.alphaMap&&(t.alphaMap.value=e.alphaMap);let i;e.map?i=e.map:e.alphaMap&&(i=e.alphaMap);void 0!==i&&(!0===i.matrixAutoUpdate&&i.updateMatrix(),t.uvTransform.value.copy(i.matrix))}(t,r,i,o):r.isSpriteMaterial?function(t,e){t.diffuse.value.copy(e.color),t.opacity.value=e.opacity,t.rotation.value=e.rotation,e.map&&(t.map.value=e.map);e.alphaMap&&(t.alphaMap.value=e.alphaMap);let n;e.map?n=e.map:e.alphaMap&&(n=e.alphaMap);void 0!==n&&(!0===n.matrixAutoUpdate&&n.updateMatrix(),t.uvTransform.value.copy(n.matrix))}(t,r):r.isShadowMaterial?(t.color.value.copy(r.color),t.opacity.value=r.opacity):r.isShaderMaterial&&(r.uniformsNeedUpdate=!1)}}}function xp(t){const e=void 0!==(t=t||{}).canvas?t.canvas:function(){const t=document.createElementNS("http://www.w3.org/1999/xhtml","canvas");return t.style.display="block",t}(),n=void 0!==t.context?t.context:null,r=void 0!==t.alpha&&t.alpha,i=void 0===t.depth||t.depth,o=void 0===t.stencil||t.stencil,a=void 0!==t.antialias&&t.antialias,s=void 0===t.premultipliedAlpha||t.premultipliedAlpha,u=void 0!==t.preserveDrawingBuffer&&t.preserveDrawingBuffer,c=void 0!==t.powerPreference?t.powerPreference:"default",l=void 0!==t.failIfMajorPerformanceCaveat&&t.failIfMajorPerformanceCaveat;let h=null,f=null;const d=[],p=[];this.domElement=e,this.debug={checkShaderErrors:!0},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.gammaFactor=2,this.outputEncoding=3e3,this.physicallyCorrectLights=!1,this.toneMapping=0,this.toneMappingExposure=1;const m=this;let g=!1,v=0,y=0,b=null,_=-1,x=null;const w=new Ic,S=new Ic;let E=null,T=e.width,M=e.height,A=1,L=null,D=null;const C=new Ic(0,0,T,M),P=new Ic(0,0,T,M);let R=!1;const k=new af;let O=!1,I=!1;const F=new ml,z=new Bc,B={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function N(){return null===b?A:1}let U,j,H,V,G,W,q,X,Y,Z,J,Q,K,$,tt,et,nt,rt,it,ot,at,st,ut=n;function ct(t,n){for(let r=0;r<t.length;r++){const i=t[r],o=e.getContext(i,n);if(null!==o)return o}return null}try{const t={alpha:r,depth:i,stencil:o,antialias:a,premultipliedAlpha:s,preserveDrawingBuffer:u,powerPreference:c,failIfMajorPerformanceCaveat:l};if(e.addEventListener("webglcontextlost",ft,!1),e.addEventListener("webglcontextrestored",dt,!1),null===ut){const e=["webgl2","webgl","experimental-webgl"];if(!0===m.isWebGL1Renderer&&e.shift(),ut=ct(e,t),null===ut)throw ct(e)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}void 0===ut.getShaderPrecisionFormat&&(ut.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(t){throw console.error("THREE.WebGLRenderer: "+t.message),t}function lt(){U=new bf(ut),j=new gf(ut,U,t),U.init(j),at=new pp(ut,U,j),H=new fp(ut,U,j),V=new wf(ut),G=new Kd,W=new dp(ut,U,H,G,j,at,V),q=new yf(m),X=new uf(ut,j),st=new pf(ut,U,X,j),Y=new _f(ut,X,V,st),Z=new Mf(ut,Y,X,V),rt=new Tf(ut),tt=new vf(G),J=new Qd(m,q,U,j,st,tt),Q=new _p(G),K=new np(G),$=new up(U,j),nt=new df(m,q,H,Z,s),et=new hp(m,Z,j),it=new mf(ut,U,V,j),ot=new xf(ut,U,V,j),V.programs=J.programs,m.capabilities=j,m.extensions=U,m.properties=G,m.renderLists=K,m.shadowMap=et,m.state=H,m.info=V}lt();const ht=new bp(m,ut);function ft(t){t.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),g=!0}function dt(){console.log("THREE.WebGLRenderer: Context Restored."),g=!1;const t=V.autoReset,e=et.enabled,n=et.autoUpdate,r=et.needsUpdate,i=et.type;lt(),V.autoReset=t,et.enabled=e,et.autoUpdate=n,et.needsUpdate=r,et.type=i}function pt(t){const e=t.target;e.removeEventListener("dispose",pt),function(t){(function(t){const e=G.get(t).programs;void 0!==e&&e.forEach((function(t){J.releaseProgram(t)}))})(t),G.remove(t)}(e)}this.xr=ht,this.getContext=function(){return ut},this.getContextAttributes=function(){return ut.getContextAttributes()},this.forceContextLoss=function(){const t=U.get("WEBGL_lose_context");t&&t.loseContext()},this.forceContextRestore=function(){const t=U.get("WEBGL_lose_context");t&&t.restoreContext()},this.getPixelRatio=function(){return A},this.setPixelRatio=function(t){void 0!==t&&(A=t,this.setSize(T,M,!1))},this.getSize=function(t){return void 0===t&&(console.warn("WebGLRenderer: .getsize() now requires a Vector2 as an argument"),t=new Lc),t.set(T,M)},this.setSize=function(t,n,r){ht.isPresenting?console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting."):(T=t,M=n,e.width=Math.floor(t*A),e.height=Math.floor(n*A),!1!==r&&(e.style.width=t+"px",e.style.height=n+"px"),this.setViewport(0,0,t,n))},this.getDrawingBufferSize=function(t){return void 0===t&&(console.warn("WebGLRenderer: .getdrawingBufferSize() now requires a Vector2 as an argument"),t=new Lc),t.set(T*A,M*A).floor()},this.setDrawingBufferSize=function(t,n,r){T=t,M=n,A=r,e.width=Math.floor(t*r),e.height=Math.floor(n*r),this.setViewport(0,0,t,n)},this.getCurrentViewport=function(t){return void 0===t&&(console.warn("WebGLRenderer: .getCurrentViewport() now requires a Vector4 as an argument"),t=new Ic),t.copy(w)},this.getViewport=function(t){return t.copy(C)},this.setViewport=function(t,e,n,r){t.isVector4?C.set(t.x,t.y,t.z,t.w):C.set(t,e,n,r),H.viewport(w.copy(C).multiplyScalar(A).floor())},this.getScissor=function(t){return t.copy(P)},this.setScissor=function(t,e,n,r){t.isVector4?P.set(t.x,t.y,t.z,t.w):P.set(t,e,n,r),H.scissor(S.copy(P).multiplyScalar(A).floor())},this.getScissorTest=function(){return R},this.setScissorTest=function(t){H.setScissorTest(R=t)},this.setOpaqueSort=function(t){L=t},this.setTransparentSort=function(t){D=t},this.getClearColor=function(t){return void 0===t&&(console.warn("WebGLRenderer: .getClearColor() now requires a Color as an argument"),t=new lh),t.copy(nt.getClearColor())},this.setClearColor=function(){nt.setClearColor.apply(nt,arguments)},this.getClearAlpha=function(){return nt.getClearAlpha()},this.setClearAlpha=function(){nt.setClearAlpha.apply(nt,arguments)},this.clear=function(t,e,n){let r=0;(void 0===t||t)&&(r|=16384),(void 0===e||e)&&(r|=256),(void 0===n||n)&&(r|=1024),ut.clear(r)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){e.removeEventListener("webglcontextlost",ft,!1),e.removeEventListener("webglcontextrestored",dt,!1),K.dispose(),$.dispose(),G.dispose(),q.dispose(),Z.dispose(),st.dispose(),ht.dispose(),ht.removeEventListener("sessionstart",gt),ht.removeEventListener("sessionend",vt),yt.stop()},this.renderBufferImmediate=function(t,e){st.initAttributes();const n=G.get(t);t.hasPositions&&!n.position&&(n.position=ut.createBuffer()),t.hasNormals&&!n.normal&&(n.normal=ut.createBuffer()),t.hasUvs&&!n.uv&&(n.uv=ut.createBuffer()),t.hasColors&&!n.color&&(n.color=ut.createBuffer());const r=e.getAttributes();t.hasPositions&&(ut.bindBuffer(34962,n.position),ut.bufferData(34962,t.positionArray,35048),st.enableAttribute(r.position),ut.vertexAttribPointer(r.position,3,5126,!1,0,0)),t.hasNormals&&(ut.bindBuffer(34962,n.normal),ut.bufferData(34962,t.normalArray,35048),st.enableAttribute(r.normal),ut.vertexAttribPointer(r.normal,3,5126,!1,0,0)),t.hasUvs&&(ut.bindBuffer(34962,n.uv),ut.bufferData(34962,t.uvArray,35048),st.enableAttribute(r.uv),ut.vertexAttribPointer(r.uv,2,5126,!1,0,0)),t.hasColors&&(ut.bindBuffer(34962,n.color),ut.bufferData(34962,t.colorArray,35048),st.enableAttribute(r.color),ut.vertexAttribPointer(r.color,3,5126,!1,0,0)),st.disableUnusedAttributes(),ut.drawArrays(4,0,t.count),t.count=0},this.renderBufferDirect=function(t,e,n,r,i,o){null===e&&(e=B);const a=i.isMesh&&i.matrixWorld.determinant()<0,s=Et(t,e,r,i);H.setMaterial(r,a);let u=n.index;const c=n.attributes.position;if(null===u){if(void 0===c||0===c.count)return}else if(0===u.count)return;let l,h=1;!0===r.wireframe&&(u=Y.getWireframeAttribute(n),h=2),(r.morphTargets||r.morphNormals)&&rt.update(i,n,r,s),st.setup(i,r,s,n,u);let f=it;null!==u&&(l=X.get(u),f=ot,f.setIndex(l));const d=null!==u?u.count:c.count,p=n.drawRange.start*h,m=n.drawRange.count*h,g=null!==o?o.start*h:0,v=null!==o?o.count*h:1/0,y=Math.max(p,g),b=Math.min(d,p+m,g+v)-1,_=Math.max(0,b-y+1);if(0!==_){if(i.isMesh)!0===r.wireframe?(H.setLineWidth(r.wireframeLinewidth*N()),f.setMode(1)):f.setMode(4);else if(i.isLine){let t=r.linewidth;void 0===t&&(t=1),H.setLineWidth(t*N()),i.isLineSegments?f.setMode(1):i.isLineLoop?f.setMode(2):f.setMode(3)}else i.isPoints?f.setMode(0):i.isSprite&&f.setMode(4);if(i.isInstancedMesh)f.renderInstances(y,_,i.count);else if(n.isInstancedBufferGeometry){const t=Math.min(n.instanceCount,n._maxInstanceCount);f.renderInstances(y,_,t)}else f.render(y,_)}},this.compile=function(t,e){f=$.get(t),f.init(),t.traverseVisible((function(t){t.isLight&&t.layers.test(e.layers)&&(f.pushLight(t),t.castShadow&&f.pushShadow(t))})),f.setupLights(),t.traverse((function(e){const n=e.material;if(n)if(Array.isArray(n))for(let r=0;r<n.length;r++){wt(n[r],t,e)}else wt(n,t,e)}))};let mt=null;function gt(){yt.stop()}function vt(){yt.start()}const yt=new sf;function bt(t,e,n,r){if(!1===t.visible)return;if(t.layers.test(e.layers))if(t.isGroup)n=t.renderOrder;else if(t.isLOD)!0===t.autoUpdate&&t.update(e);else if(t.isLight)f.pushLight(t),t.castShadow&&f.pushShadow(t);else if(t.isSprite){if(!t.frustumCulled||k.intersectsSprite(t)){r&&z.setFromMatrixPosition(t.matrixWorld).applyMatrix4(F);const e=Z.update(t),i=t.material;i.visible&&h.push(t,e,i,n,z.z,null)}}else if(t.isImmediateRenderObject)r&&z.setFromMatrixPosition(t.matrixWorld).applyMatrix4(F),h.push(t,null,t.material,n,z.z,null);else if((t.isMesh||t.isLine||t.isPoints)&&(t.isSkinnedMesh&&t.skeleton.frame!==V.render.frame&&(t.skeleton.update(),t.skeleton.frame=V.render.frame),!t.frustumCulled||k.intersectsObject(t))){r&&z.setFromMatrixPosition(t.matrixWorld).applyMatrix4(F);const e=Z.update(t),i=t.material;if(Array.isArray(i)){const r=e.groups;for(let o=0,a=r.length;o<a;o++){const a=r[o],s=i[a.materialIndex];s&&s.visible&&h.push(t,e,s,n,z.z,a)}}else i.visible&&h.push(t,e,i,n,z.z,null)}const i=t.children;for(let t=0,o=i.length;t<o;t++)bt(i[t],e,n,r)}function _t(t,e,n){const r=!0===e.isScene?e.overrideMaterial:null;for(let i=0,o=t.length;i<o;i++){const o=t[i],a=o.object,s=o.geometry,u=null===r?o.material:r,c=o.group;if(n.isArrayCamera){const t=n.cameras;for(let n=0,r=t.length;n<r;n++){const r=t[n];a.layers.test(r.layers)&&(H.viewport(w.copy(r.viewport)),f.setupLightsView(r),xt(a,e,r,s,u,c))}}else xt(a,e,n,s,u,c)}}function xt(t,e,n,r,i,o){if(t.onBeforeRender(m,e,n,r,i,o),t.modelViewMatrix.multiplyMatrices(n.matrixWorldInverse,t.matrixWorld),t.normalMatrix.getNormalMatrix(t.modelViewMatrix),t.isImmediateRenderObject){const r=Et(n,e,i,t);H.setMaterial(i),st.reset(),function(t,e){t.render((function(t){m.renderBufferImmediate(t,e)}))}(t,r)}else m.renderBufferDirect(n,e,r,i,t,o);t.onAfterRender(m,e,n,r,i,o)}function wt(t,e,n){!0!==e.isScene&&(e=B);const r=G.get(t),i=f.state.lights,o=f.state.shadowsArray,a=i.state.version,s=J.getParameters(t,i.state,o,e,n),u=J.getProgramCacheKey(s);let c=r.programs;r.environment=t.isMeshStandardMaterial?e.environment:null,r.fog=e.fog,r.envMap=q.get(t.envMap||r.environment),void 0===c&&(t.addEventListener("dispose",pt),c=new Map,r.programs=c);let l=c.get(u);if(void 0!==l){if(r.currentProgram===l&&r.lightsStateVersion===a)return St(t,s),l}else s.uniforms=J.getUniforms(t),t.onBuild(s,m),t.onBeforeCompile(s,m),l=J.acquireProgram(s,u),c.set(u,l),r.uniforms=s.uniforms;const h=r.uniforms;(t.isShaderMaterial||t.isRawShaderMaterial)&&!0!==t.clipping||(h.clippingPlanes=tt.uniform),St(t,s),r.needsLights=function(t){return t.isMeshLambertMaterial||t.isMeshToonMaterial||t.isMeshPhongMaterial||t.isMeshStandardMaterial||t.isShadowMaterial||t.isShaderMaterial&&!0===t.lights}(t),r.lightsStateVersion=a,r.needsLights&&(h.ambientLightColor.value=i.state.ambient,h.lightProbe.value=i.state.probe,h.directionalLights.value=i.state.directional,h.directionalLightShadows.value=i.state.directionalShadow,h.spotLights.value=i.state.spot,h.spotLightShadows.value=i.state.spotShadow,h.rectAreaLights.value=i.state.rectArea,h.ltc_1.value=i.state.rectAreaLTC1,h.ltc_2.value=i.state.rectAreaLTC2,h.pointLights.value=i.state.point,h.pointLightShadows.value=i.state.pointShadow,h.hemisphereLights.value=i.state.hemi,h.directionalShadowMap.value=i.state.directionalShadowMap,h.directionalShadowMatrix.value=i.state.directionalShadowMatrix,h.spotShadowMap.value=i.state.spotShadowMap,h.spotShadowMatrix.value=i.state.spotShadowMatrix,h.pointShadowMap.value=i.state.pointShadowMap,h.pointShadowMatrix.value=i.state.pointShadowMatrix);const d=l.getUniforms(),p=Cd.seqWithValue(d.seq,h);return r.currentProgram=l,r.uniformsList=p,l}function St(t,e){const n=G.get(t);n.outputEncoding=e.outputEncoding,n.instancing=e.instancing,n.numClippingPlanes=e.numClippingPlanes,n.numIntersection=e.numClipIntersection,n.vertexAlphas=e.vertexAlphas}function Et(t,e,n,r){!0!==e.isScene&&(e=B),W.resetTextureUnits();const i=e.fog,o=n.isMeshStandardMaterial?e.environment:null,a=null===b?m.outputEncoding:b.texture.encoding,s=q.get(n.envMap||o),u=!0===n.vertexColors&&r.geometry&&r.geometry.attributes.color&&4===r.geometry.attributes.color.itemSize,c=G.get(n),l=f.state.lights;if(!0===O&&(!0===I||t!==x)){const e=t===x&&n.id===_;tt.setState(n,t,e)}let h=!1;n.version===c.__version?c.needsLights&&c.lightsStateVersion!==l.state.version||c.outputEncoding!==a||r.isInstancedMesh&&!1===c.instancing?h=!0:r.isInstancedMesh||!0!==c.instancing?c.envMap!==s||n.fog&&c.fog!==i?h=!0:void 0===c.numClippingPlanes||c.numClippingPlanes===tt.numPlanes&&c.numIntersection===tt.numIntersection?c.vertexAlphas!==u&&(h=!0):h=!0:h=!0:(h=!0,c.__version=n.version);let d=c.currentProgram;!0===h&&(d=wt(n,e,r));let p=!1,g=!1,v=!1;const y=d.getUniforms(),w=c.uniforms;if(H.useProgram(d.program)&&(p=!0,g=!0,v=!0),n.id!==_&&(_=n.id,g=!0),p||x!==t){if(y.setValue(ut,"projectionMatrix",t.projectionMatrix),j.logarithmicDepthBuffer&&y.setValue(ut,"logDepthBufFC",2/(Math.log(t.far+1)/Math.LN2)),x!==t&&(x=t,g=!0,v=!0),n.isShaderMaterial||n.isMeshPhongMaterial||n.isMeshToonMaterial||n.isMeshStandardMaterial||n.envMap){const e=y.map.cameraPosition;void 0!==e&&e.setValue(ut,z.setFromMatrixPosition(t.matrixWorld))}(n.isMeshPhongMaterial||n.isMeshToonMaterial||n.isMeshLambertMaterial||n.isMeshBasicMaterial||n.isMeshStandardMaterial||n.isShaderMaterial)&&y.setValue(ut,"isOrthographic",!0===t.isOrthographicCamera),(n.isMeshPhongMaterial||n.isMeshToonMaterial||n.isMeshLambertMaterial||n.isMeshBasicMaterial||n.isMeshStandardMaterial||n.isShaderMaterial||n.isShadowMaterial||n.skinning)&&y.setValue(ut,"viewMatrix",t.matrixWorldInverse)}if(n.skinning){y.setOptional(ut,r,"bindMatrix"),y.setOptional(ut,r,"bindMatrixInverse");const t=r.skeleton;if(t){const e=t.bones;if(j.floatVertexTextures){if(null===t.boneTexture){let n=Math.sqrt(4*e.length);n=Mc(n),n=Math.max(n,4);const r=new Float32Array(n*n*4);r.set(t.boneMatrices);const i=new nf(r,n,n,1023,1015);t.boneMatrices=r,t.boneTexture=i,t.boneTextureSize=n}y.setValue(ut,"boneTexture",t.boneTexture,W),y.setValue(ut,"boneTextureSize",t.boneTextureSize)}else y.setOptional(ut,t,"boneMatrices")}}var S,E;return(g||c.receiveShadow!==r.receiveShadow)&&(c.receiveShadow=r.receiveShadow,y.setValue(ut,"receiveShadow",r.receiveShadow)),g&&(y.setValue(ut,"toneMappingExposure",m.toneMappingExposure),c.needsLights&&(E=v,(S=w).ambientLightColor.needsUpdate=E,S.lightProbe.needsUpdate=E,S.directionalLights.needsUpdate=E,S.directionalLightShadows.needsUpdate=E,S.pointLights.needsUpdate=E,S.pointLightShadows.needsUpdate=E,S.spotLights.needsUpdate=E,S.spotLightShadows.needsUpdate=E,S.rectAreaLights.needsUpdate=E,S.hemisphereLights.needsUpdate=E),i&&n.fog&&Q.refreshFogUniforms(w,i),Q.refreshMaterialUniforms(w,n,A,M),Cd.upload(ut,c.uniformsList,w,W)),n.isShaderMaterial&&!0===n.uniformsNeedUpdate&&(Cd.upload(ut,c.uniformsList,w,W),n.uniformsNeedUpdate=!1),n.isSpriteMaterial&&y.setValue(ut,"center",r.center),y.setValue(ut,"modelViewMatrix",r.modelViewMatrix),y.setValue(ut,"normalMatrix",r.normalMatrix),y.setValue(ut,"modelMatrix",r.matrixWorld),d}yt.setAnimationLoop((function(t){mt&&mt(t)})),"undefined"!=typeof window&&yt.setContext(window),this.setAnimationLoop=function(t){mt=t,ht.setAnimationLoop(t),null===t?yt.stop():yt.start()},ht.addEventListener("sessionstart",gt),ht.addEventListener("sessionend",vt),this.render=function(t,e){let n,r;if(void 0!==arguments[2]&&(console.warn("THREE.WebGLRenderer.render(): the renderTarget argument has been removed. Use .setRenderTarget() instead."),n=arguments[2]),void 0!==arguments[3]&&(console.warn("THREE.WebGLRenderer.render(): the forceClear argument has been removed. Use .clear() instead."),r=arguments[3]),void 0!==e&&!0!==e.isCamera)return void console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");if(!0===g)return;!0===t.autoUpdate&&t.updateMatrixWorld(),null===e.parent&&e.updateMatrixWorld(),!0===ht.enabled&&!0===ht.isPresenting&&(e=ht.getCamera(e)),!0===t.isScene&&t.onBeforeRender(m,t,e,n||b),f=$.get(t,p.length),f.init(),p.push(f),F.multiplyMatrices(e.projectionMatrix,e.matrixWorldInverse),k.setFromProjectionMatrix(F),I=this.localClippingEnabled,O=tt.init(this.clippingPlanes,I,e),h=K.get(t,d.length),h.init(),d.push(h),bt(t,e,0,m.sortObjects),h.finish(),!0===m.sortObjects&&h.sort(L,D),!0===O&&tt.beginShadows();const i=f.state.shadowsArray;et.render(i,t,e),f.setupLights(),f.setupLightsView(e),!0===O&&tt.endShadows(),!0===this.info.autoReset&&this.info.reset(),void 0!==n&&this.setRenderTarget(n),nt.render(h,t,e,r);const o=h.opaque,a=h.transparent;o.length>0&&_t(o,t,e),a.length>0&&_t(a,t,e),null!==b&&(W.updateRenderTargetMipmap(b),W.updateMultisampleRenderTarget(b)),!0===t.isScene&&t.onAfterRender(m,t,e),H.buffers.depth.setTest(!0),H.buffers.depth.setMask(!0),H.buffers.color.setMask(!0),H.setPolygonOffset(!1),st.resetDefaultState(),_=-1,x=null,p.pop(),f=p.length>0?p[p.length-1]:null,d.pop(),h=d.length>0?d[d.length-1]:null},this.getActiveCubeFace=function(){return v},this.getActiveMipmapLevel=function(){return y},this.getRenderTarget=function(){return b},this.setRenderTarget=function(t,e=0,n=0){b=t,v=e,y=n,t&&void 0===G.get(t).__webglFramebuffer&&W.setupRenderTarget(t);let r=null,i=!1,o=!1;if(t){const n=t.texture;(n.isDataTexture3D||n.isDataTexture2DArray)&&(o=!0);const a=G.get(t).__webglFramebuffer;t.isWebGLCubeRenderTarget?(r=a[e],i=!0):r=t.isWebGLMultisampleRenderTarget?G.get(t).__webglMultisampledFramebuffer:a,w.copy(t.viewport),S.copy(t.scissor),E=t.scissorTest}else w.copy(C).multiplyScalar(A).floor(),S.copy(P).multiplyScalar(A).floor(),E=R;if(H.bindFramebuffer(36160,r),H.viewport(w),H.scissor(S),H.setScissorTest(E),i){const r=G.get(t.texture);ut.framebufferTexture2D(36160,36064,34069+e,r.__webglTexture,n)}else if(o){const r=G.get(t.texture),i=e||0;ut.framebufferTextureLayer(36160,36064,r.__webglTexture,n||0,i)}},this.readRenderTargetPixels=function(t,e,n,r,i,o,a){if(!t||!t.isWebGLRenderTarget)return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let s=G.get(t).__webglFramebuffer;if(t.isWebGLCubeRenderTarget&&void 0!==a&&(s=s[a]),s){H.bindFramebuffer(36160,s);try{const a=t.texture,s=a.format,u=a.type;if(1023!==s&&at.convert(s)!==ut.getParameter(35739))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");const c=1016===u&&(U.has("EXT_color_buffer_half_float")||j.isWebGL2&&U.has("EXT_color_buffer_float"));if(!(1009===u||at.convert(u)===ut.getParameter(35738)||1015===u&&(j.isWebGL2||U.has("OES_texture_float")||U.has("WEBGL_color_buffer_float"))||c))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");36053===ut.checkFramebufferStatus(36160)?e>=0&&e<=t.width-r&&n>=0&&n<=t.height-i&&ut.readPixels(e,n,r,i,at.convert(s),at.convert(u),o):console.error("THREE.WebGLRenderer.readRenderTargetPixels: readPixels from renderTarget failed. Framebuffer not complete.")}finally{const t=null!==b?G.get(b).__webglFramebuffer:null;H.bindFramebuffer(36160,t)}}},this.copyFramebufferToTexture=function(t,e,n=0){const r=Math.pow(2,-n),i=Math.floor(e.image.width*r),o=Math.floor(e.image.height*r),a=at.convert(e.format);W.setTexture2D(e,0),ut.copyTexImage2D(3553,n,a,t.x,t.y,i,o,0),H.unbindTexture()},this.copyTextureToTexture=function(t,e,n,r=0){const i=e.image.width,o=e.image.height,a=at.convert(n.format),s=at.convert(n.type);W.setTexture2D(n,0),ut.pixelStorei(37440,n.flipY),ut.pixelStorei(37441,n.premultiplyAlpha),ut.pixelStorei(3317,n.unpackAlignment),e.isDataTexture?ut.texSubImage2D(3553,r,t.x,t.y,i,o,a,s,e.image.data):e.isCompressedTexture?ut.compressedTexSubImage2D(3553,r,t.x,t.y,e.mipmaps[0].width,e.mipmaps[0].height,a,e.mipmaps[0].data):ut.texSubImage2D(3553,r,t.x,t.y,a,s,e.image),0===r&&n.generateMipmaps&&ut.generateMipmap(3553),H.unbindTexture()},this.copyTextureToTexture3D=function(t,e,n,r,i=0){if(m.isWebGL1Renderer)return void console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2.");const{width:o,height:a,data:s}=n.image,u=at.convert(r.format),c=at.convert(r.type);let l;if(r.isDataTexture3D)W.setTexture3D(r,0),l=32879;else{if(!r.isDataTexture2DArray)return void console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");W.setTexture2DArray(r,0),l=35866}ut.pixelStorei(37440,r.flipY),ut.pixelStorei(37441,r.premultiplyAlpha),ut.pixelStorei(3317,r.unpackAlignment);const h=ut.getParameter(3314),f=ut.getParameter(32878),d=ut.getParameter(3316),p=ut.getParameter(3315),g=ut.getParameter(32877);ut.pixelStorei(3314,o),ut.pixelStorei(32878,a),ut.pixelStorei(3316,t.min.x),ut.pixelStorei(3315,t.min.y),ut.pixelStorei(32877,t.min.z),ut.texSubImage3D(l,i,e.x,e.y,e.z,t.max.x-t.min.x+1,t.max.y-t.min.y+1,t.max.z-t.min.z+1,u,c,s),ut.pixelStorei(3314,h),ut.pixelStorei(32878,f),ut.pixelStorei(3316,d),ut.pixelStorei(3315,p),ut.pixelStorei(32877,g),0===i&&r.generateMipmaps&&ut.generateMipmap(l),H.unbindTexture()},this.initTexture=function(t){W.setTexture2D(t,0),H.unbindTexture()},this.resetState=function(){v=0,y=0,b=null,H.reset(),st.reset()},"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}(class extends xp{}).prototype.isWebGL1Renderer=!0;class wp{constructor(t,e=25e-5){this.name="",this.color=new lh(t),this.density=e}clone(){return new wp(this.color,this.density)}toJSON(){return{type:"FogExp2",color:this.color.getHex(),density:this.density}}}wp.prototype.isFogExp2=!0;class Sp{constructor(t,e=1,n=1e3){this.name="",this.color=new lh(t),this.near=e,this.far=n}clone(){return new Sp(this.color,this.near,this.far)}toJSON(){return{type:"Fog",color:this.color.getHex(),near:this.near,far:this.far}}}Sp.prototype.isFog=!0;class Ep extends Ul{constructor(){super(),this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.overrideMaterial=null,this.autoUpdate=!0,"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(t,e){return super.copy(t,e),null!==t.background&&(this.background=t.background.clone()),null!==t.environment&&(this.environment=t.environment.clone()),null!==t.fog&&(this.fog=t.fog.clone()),null!==t.overrideMaterial&&(this.overrideMaterial=t.overrideMaterial.clone()),this.autoUpdate=t.autoUpdate,this.matrixAutoUpdate=t.matrixAutoUpdate,this}toJSON(t){const e=super.toJSON(t);return null!==this.background&&(e.object.background=this.background.toJSON(t)),null!==this.environment&&(e.object.environment=this.environment.toJSON(t)),null!==this.fog&&(e.object.fog=this.fog.toJSON()),e}}Ep.prototype.isScene=!0;class Tp{constructor(t,e){this.array=t,this.stride=e,this.count=void 0!==t?t.length/e:0,this.usage=35044,this.updateRange={offset:0,count:-1},this.version=0,this.uuid=xc(),this.onUploadCallback=function(){}}set needsUpdate(t){!0===t&&this.version++}setUsage(t){return this.usage=t,this}copy(t){return this.array=new t.array.constructor(t.array),this.count=t.count,this.stride=t.stride,this.usage=t.usage,this}copyAt(t,e,n){t*=this.stride,n*=e.stride;for(let r=0,i=this.stride;r<i;r++)this.array[t+r]=e.array[n+r];return this}set(t,e=0){return this.array.set(t,e),this}clone(t){void 0===t.arrayBuffers&&(t.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=xc()),void 0===t.arrayBuffers[this.array.buffer._uuid]&&(t.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const e=new this.array.constructor(t.arrayBuffers[this.array.buffer._uuid]),n=new Tp(e,this.stride);return n.setUsage(this.usage),n}onUpload(t){return this.onUploadCallback=t,this}toJSON(t){return void 0===t.arrayBuffers&&(t.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=xc()),void 0===t.arrayBuffers[this.array.buffer._uuid]&&(t.arrayBuffers[this.array.buffer._uuid]=Array.prototype.slice.call(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}Tp.prototype.isInterleavedBuffer=!0;const Mp=new Bc;class Ap{constructor(t,e,n,r){this.name="",this.data=t,this.itemSize=e,this.offset=n,this.normalized=!0===r}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(t){this.data.needsUpdate=t}applyMatrix4(t){for(let e=0,n=this.data.count;e<n;e++)Mp.x=this.getX(e),Mp.y=this.getY(e),Mp.z=this.getZ(e),Mp.applyMatrix4(t),this.setXYZ(e,Mp.x,Mp.y,Mp.z);return this}applyNormalMatrix(t){for(let e=0,n=this.count;e<n;e++)Mp.x=this.getX(e),Mp.y=this.getY(e),Mp.z=this.getZ(e),Mp.applyNormalMatrix(t),this.setXYZ(e,Mp.x,Mp.y,Mp.z);return this}transformDirection(t){for(let e=0,n=this.count;e<n;e++)Mp.x=this.getX(e),Mp.y=this.getY(e),Mp.z=this.getZ(e),Mp.transformDirection(t),this.setXYZ(e,Mp.x,Mp.y,Mp.z);return this}setX(t,e){return this.data.array[t*this.data.stride+this.offset]=e,this}setY(t,e){return this.data.array[t*this.data.stride+this.offset+1]=e,this}setZ(t,e){return this.data.array[t*this.data.stride+this.offset+2]=e,this}setW(t,e){return this.data.array[t*this.data.stride+this.offset+3]=e,this}getX(t){return this.data.array[t*this.data.stride+this.offset]}getY(t){return this.data.array[t*this.data.stride+this.offset+1]}getZ(t){return this.data.array[t*this.data.stride+this.offset+2]}getW(t){return this.data.array[t*this.data.stride+this.offset+3]}setXY(t,e,n){return t=t*this.data.stride+this.offset,this.data.array[t+0]=e,this.data.array[t+1]=n,this}setXYZ(t,e,n,r){return t=t*this.data.stride+this.offset,this.data.array[t+0]=e,this.data.array[t+1]=n,this.data.array[t+2]=r,this}setXYZW(t,e,n,r,i){return t=t*this.data.stride+this.offset,this.data.array[t+0]=e,this.data.array[t+1]=n,this.data.array[t+2]=r,this.data.array[t+3]=i,this}clone(t){if(void 0===t){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interlaved buffer attribute will deinterleave buffer data.");const t=[];for(let e=0;e<this.count;e++){const n=e*this.data.stride+this.offset;for(let e=0;e<this.itemSize;e++)t.push(this.data.array[n+e])}return new ph(new this.array.constructor(t),this.itemSize,this.normalized)}return void 0===t.interleavedBuffers&&(t.interleavedBuffers={}),void 0===t.interleavedBuffers[this.data.uuid]&&(t.interleavedBuffers[this.data.uuid]=this.data.clone(t)),new Ap(t.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(t){if(void 0===t){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interlaved buffer attribute will deinterleave buffer data.");const t=[];for(let e=0;e<this.count;e++){const n=e*this.data.stride+this.offset;for(let e=0;e<this.itemSize;e++)t.push(this.data.array[n+e])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:t,normalized:this.normalized}}return void 0===t.interleavedBuffers&&(t.interleavedBuffers={}),void 0===t.interleavedBuffers[this.data.uuid]&&(t.interleavedBuffers[this.data.uuid]=this.data.toJSON(t)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}Ap.prototype.isInterleavedBufferAttribute=!0;class Lp extends rh{constructor(t){super(),this.type="SpriteMaterial",this.color=new lh(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.alphaMap=t.alphaMap,this.rotation=t.rotation,this.sizeAttenuation=t.sizeAttenuation,this}}let Dp;Lp.prototype.isSpriteMaterial=!0;const Cp=new Bc,Pp=new Bc,Rp=new Bc,kp=new Lc,Op=new Lc,Ip=new ml,Fp=new Bc,zp=new Bc,Bp=new Bc,Np=new Lc,Up=new Lc,jp=new Lc;class Hp extends Ul{constructor(t){if(super(),this.type="Sprite",void 0===Dp){Dp=new Mh;const t=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),e=new Tp(t,5);Dp.setIndex([0,1,2,0,2,3]),Dp.setAttribute("position",new Ap(e,3,0,!1)),Dp.setAttribute("uv",new Ap(e,2,3,!1))}this.geometry=Dp,this.material=void 0!==t?t:new Lp,this.center=new Lc(.5,.5)}raycast(t,e){null===t.camera&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),Pp.setFromMatrixScale(this.matrixWorld),Ip.copy(t.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(t.camera.matrixWorldInverse,this.matrixWorld),Rp.setFromMatrixPosition(this.modelViewMatrix),t.camera.isPerspectiveCamera&&!1===this.material.sizeAttenuation&&Pp.multiplyScalar(-Rp.z);const n=this.material.rotation;let r,i;0!==n&&(i=Math.cos(n),r=Math.sin(n));const o=this.center;Vp(Fp.set(-.5,-.5,0),Rp,o,Pp,r,i),Vp(zp.set(.5,-.5,0),Rp,o,Pp,r,i),Vp(Bp.set(.5,.5,0),Rp,o,Pp,r,i),Np.set(0,0),Up.set(1,0),jp.set(1,1);let a=t.ray.intersectTriangle(Fp,zp,Bp,!1,Cp);if(null===a&&(Vp(zp.set(-.5,.5,0),Rp,o,Pp,r,i),Up.set(0,1),a=t.ray.intersectTriangle(Fp,Bp,zp,!1,Cp),null===a))return;const s=t.ray.origin.distanceTo(Cp);s<t.near||s>t.far||e.push({distance:s,point:Cp.clone(),uv:eh.getUV(Cp,Fp,zp,Bp,Np,Up,jp,new Lc),face:null,object:this})}copy(t){return super.copy(t),void 0!==t.center&&this.center.copy(t.center),this.material=t.material,this}}function Vp(t,e,n,r,i,o){kp.subVectors(t,n).addScalar(.5).multiply(r),void 0!==i?(Op.x=o*kp.x-i*kp.y,Op.y=i*kp.x+o*kp.y):Op.copy(kp),t.copy(e),t.x+=Op.x,t.y+=Op.y,t.applyMatrix4(Ip)}Hp.prototype.isSprite=!0;const Gp=new Bc,Wp=new Ic,qp=new Ic,Xp=new Bc,Yp=new ml;class Zp extends Gh{constructor(t,e){super(t,e),this.type="SkinnedMesh",this.bindMode="attached",this.bindMatrix=new ml,this.bindMatrixInverse=new ml}copy(t){return super.copy(t),this.bindMode=t.bindMode,this.bindMatrix.copy(t.bindMatrix),this.bindMatrixInverse.copy(t.bindMatrixInverse),this.skeleton=t.skeleton,this}bind(t,e){this.skeleton=t,void 0===e&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),e=this.matrixWorld),this.bindMatrix.copy(e),this.bindMatrixInverse.copy(e).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const t=new Ic,e=this.geometry.attributes.skinWeight;for(let n=0,r=e.count;n<r;n++){t.x=e.getX(n),t.y=e.getY(n),t.z=e.getZ(n),t.w=e.getW(n);const r=1/t.manhattanLength();r!==1/0?t.multiplyScalar(r):t.set(1,0,0,0),e.setXYZW(n,t.x,t.y,t.z,t.w)}}updateMatrixWorld(t){super.updateMatrixWorld(t),"attached"===this.bindMode?this.bindMatrixInverse.copy(this.matrixWorld).invert():"detached"===this.bindMode?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}boneTransform(t,e){const n=this.skeleton,r=this.geometry;Wp.fromBufferAttribute(r.attributes.skinIndex,t),qp.fromBufferAttribute(r.attributes.skinWeight,t),Gp.fromBufferAttribute(r.attributes.position,t).applyMatrix4(this.bindMatrix),e.set(0,0,0);for(let t=0;t<4;t++){const r=qp.getComponent(t);if(0!==r){const i=Wp.getComponent(t);Yp.multiplyMatrices(n.bones[i].matrixWorld,n.boneInverses[i]),e.addScaledVector(Xp.copy(Gp).applyMatrix4(Yp),r)}}return e.applyMatrix4(this.bindMatrixInverse)}}Zp.prototype.isSkinnedMesh=!0;class Jp extends Ul{constructor(){super(),this.type="Bone"}}Jp.prototype.isBone=!0;const Qp=new ml,Kp=new ml,$p=[],tm=new Gh;class em extends Gh{constructor(t,e,n){super(t,e),this.instanceMatrix=new ph(new Float32Array(16*n),16),this.instanceColor=null,this.count=n,this.frustumCulled=!1}copy(t){return super.copy(t),this.instanceMatrix.copy(t.instanceMatrix),null!==t.instanceColor&&(this.instanceColor=t.instanceColor.clone()),this.count=t.count,this}getColorAt(t,e){e.fromArray(this.instanceColor.array,3*t)}getMatrixAt(t,e){e.fromArray(this.instanceMatrix.array,16*t)}raycast(t,e){const n=this.matrixWorld,r=this.count;if(tm.geometry=this.geometry,tm.material=this.material,void 0!==tm.material)for(let i=0;i<r;i++){this.getMatrixAt(i,Qp),Kp.multiplyMatrices(n,Qp),tm.matrixWorld=Kp,tm.raycast(t,$p);for(let t=0,n=$p.length;t<n;t++){const n=$p[t];n.instanceId=i,n.object=this,e.push(n)}$p.length=0}}setColorAt(t,e){null===this.instanceColor&&(this.instanceColor=new ph(new Float32Array(3*this.count),3)),e.toArray(this.instanceColor.array,3*t)}setMatrixAt(t,e){e.toArray(this.instanceMatrix.array,16*t)}updateMorphTargets(){}dispose(){this.dispatchEvent({type:"dispose"})}}em.prototype.isInstancedMesh=!0;class nm extends rh{constructor(t){super(),this.type="LineBasicMaterial",this.color=new lh(16777215),this.linewidth=1,this.linecap="round",this.linejoin="round",this.morphTargets=!1,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.linewidth=t.linewidth,this.linecap=t.linecap,this.linejoin=t.linejoin,this.morphTargets=t.morphTargets,this}}nm.prototype.isLineBasicMaterial=!0;const rm=new Bc,im=new Bc,om=new ml,am=new pl,sm=new al;class um extends Ul{constructor(t=new Mh,e=new nm){super(),this.type="Line",this.geometry=t,this.material=e,this.updateMorphTargets()}copy(t){return super.copy(t),this.material=t.material,this.geometry=t.geometry,this}computeLineDistances(){const t=this.geometry;if(t.isBufferGeometry)if(null===t.index){const e=t.attributes.position,n=[0];for(let t=1,r=e.count;t<r;t++)rm.fromBufferAttribute(e,t-1),im.fromBufferAttribute(e,t),n[t]=n[t-1],n[t]+=rm.distanceTo(im);t.setAttribute("lineDistance",new vh(n,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else t.isGeometry&&console.error("THREE.Line.computeLineDistances() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.");return this}raycast(t,e){const n=this.geometry,r=this.matrixWorld,i=t.params.Line.threshold,o=n.drawRange;if(null===n.boundingSphere&&n.computeBoundingSphere(),sm.copy(n.boundingSphere),sm.applyMatrix4(r),sm.radius+=i,!1===t.ray.intersectsSphere(sm))return;om.copy(r).invert(),am.copy(t.ray).applyMatrix4(om);const a=i/((this.scale.x+this.scale.y+this.scale.z)/3),s=a*a,u=new Bc,c=new Bc,l=new Bc,h=new Bc,f=this.isLineSegments?2:1;if(n.isBufferGeometry){const r=n.index,i=n.attributes.position;if(null!==r){for(let n=Math.max(0,o.start),a=Math.min(r.count,o.start+o.count)-1;n<a;n+=f){const o=r.getX(n),a=r.getX(n+1);u.fromBufferAttribute(i,o),c.fromBufferAttribute(i,a);if(am.distanceSqToSegment(u,c,h,l)>s)continue;h.applyMatrix4(this.matrixWorld);const f=t.ray.origin.distanceTo(h);f<t.near||f>t.far||e.push({distance:f,point:l.clone().applyMatrix4(this.matrixWorld),index:n,face:null,faceIndex:null,object:this})}}else{for(let n=Math.max(0,o.start),r=Math.min(i.count,o.start+o.count)-1;n<r;n+=f){u.fromBufferAttribute(i,n),c.fromBufferAttribute(i,n+1);if(am.distanceSqToSegment(u,c,h,l)>s)continue;h.applyMatrix4(this.matrixWorld);const r=t.ray.origin.distanceTo(h);r<t.near||r>t.far||e.push({distance:r,point:l.clone().applyMatrix4(this.matrixWorld),index:n,face:null,faceIndex:null,object:this})}}}else n.isGeometry&&console.error("THREE.Line.raycast() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}updateMorphTargets(){const t=this.geometry;if(t.isBufferGeometry){const e=t.morphAttributes,n=Object.keys(e);if(n.length>0){const t=e[n[0]];if(void 0!==t){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let e=0,n=t.length;e<n;e++){const n=t[e].name||String(e);this.morphTargetInfluences.push(0),this.morphTargetDictionary[n]=e}}}}else{const e=t.morphTargets;void 0!==e&&e.length>0&&console.error("THREE.Line.updateMorphTargets() does not support THREE.Geometry. Use THREE.BufferGeometry instead.")}}}um.prototype.isLine=!0;const cm=new Bc,lm=new Bc;class hm extends um{constructor(t,e){super(t,e),this.type="LineSegments"}computeLineDistances(){const t=this.geometry;if(t.isBufferGeometry)if(null===t.index){const e=t.attributes.position,n=[];for(let t=0,r=e.count;t<r;t+=2)cm.fromBufferAttribute(e,t),lm.fromBufferAttribute(e,t+1),n[t]=0===t?0:n[t-1],n[t+1]=n[t]+cm.distanceTo(lm);t.setAttribute("lineDistance",new vh(n,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else t.isGeometry&&console.error("THREE.LineSegments.computeLineDistances() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.");return this}}hm.prototype.isLineSegments=!0;class fm extends um{constructor(t,e){super(t,e),this.type="LineLoop"}}fm.prototype.isLineLoop=!0;class dm extends rh{constructor(t){super(),this.type="PointsMaterial",this.color=new lh(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.morphTargets=!1,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.alphaMap=t.alphaMap,this.size=t.size,this.sizeAttenuation=t.sizeAttenuation,this.morphTargets=t.morphTargets,this}}dm.prototype.isPointsMaterial=!0;const pm=new ml,mm=new pl,gm=new al,vm=new Bc;class ym extends Ul{constructor(t=new Mh,e=new dm){super(),this.type="Points",this.geometry=t,this.material=e,this.updateMorphTargets()}copy(t){return super.copy(t),this.material=t.material,this.geometry=t.geometry,this}raycast(t,e){const n=this.geometry,r=this.matrixWorld,i=t.params.Points.threshold,o=n.drawRange;if(null===n.boundingSphere&&n.computeBoundingSphere(),gm.copy(n.boundingSphere),gm.applyMatrix4(r),gm.radius+=i,!1===t.ray.intersectsSphere(gm))return;pm.copy(r).invert(),mm.copy(t.ray).applyMatrix4(pm);const a=i/((this.scale.x+this.scale.y+this.scale.z)/3),s=a*a;if(n.isBufferGeometry){const i=n.index,a=n.attributes.position;if(null!==i){for(let n=Math.max(0,o.start),u=Math.min(i.count,o.start+o.count);n<u;n++){const o=i.getX(n);vm.fromBufferAttribute(a,o),bm(vm,o,s,r,t,e,this)}}else{for(let n=Math.max(0,o.start),i=Math.min(a.count,o.start+o.count);n<i;n++)vm.fromBufferAttribute(a,n),bm(vm,n,s,r,t,e,this)}}else console.error("THREE.Points.raycast() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}updateMorphTargets(){const t=this.geometry;if(t.isBufferGeometry){const e=t.morphAttributes,n=Object.keys(e);if(n.length>0){const t=e[n[0]];if(void 0!==t){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let e=0,n=t.length;e<n;e++){const n=t[e].name||String(e);this.morphTargetInfluences.push(0),this.morphTargetDictionary[n]=e}}}}else{const e=t.morphTargets;void 0!==e&&e.length>0&&console.error("THREE.Points.updateMorphTargets() does not support THREE.Geometry. Use THREE.BufferGeometry instead.")}}}function bm(t,e,n,r,i,o,a){const s=mm.distanceSqToPoint(t);if(s<n){const n=new Bc;mm.closestPointToPoint(t,n),n.applyMatrix4(r);const u=i.ray.origin.distanceTo(n);if(u<i.near||u>i.far)return;o.push({distance:u,distanceToRay:Math.sqrt(s),point:n,index:e,face:null,object:a})}}ym.prototype.isPoints=!0;(class extends kc{constructor(t,e,n,r,i,o,a,s,u){super(t,e,n,r,i,o,a,s,u),this.format=void 0!==a?a:1022,this.minFilter=void 0!==o?o:1006,this.magFilter=void 0!==i?i:1006,this.generateMipmaps=!1;const c=this;"requestVideoFrameCallback"in t&&t.requestVideoFrameCallback((function e(){c.needsUpdate=!0,t.requestVideoFrameCallback(e)}))}clone(){return new this.constructor(this.image).copy(this)}update(){const t=this.image;!1==="requestVideoFrameCallback"in t&&t.readyState>=t.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}).prototype.isVideoTexture=!0;class _m extends kc{constructor(t,e,n,r,i,o,a,s,u,c,l,h){super(null,o,a,s,u,c,r,i,l,h),this.image={width:e,height:n},this.mipmaps=t,this.flipY=!1,this.generateMipmaps=!1}}_m.prototype.isCompressedTexture=!0;(class extends kc{constructor(t,e,n,r,i,o,a,s,u){super(t,e,n,r,i,o,a,s,u),this.needsUpdate=!0}}).prototype.isCanvasTexture=!0;(class extends kc{constructor(t,e,n,r,i,o,a,s,u,c){if(1026!==(c=void 0!==c?c:1026)&&1027!==c)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");void 0===n&&1026===c&&(n=1012),void 0===n&&1027===c&&(n=1020),super(null,r,i,o,a,s,c,n,u),this.image={width:t,height:e},this.magFilter=void 0!==a?a:1003,this.minFilter=void 0!==s?s:1003,this.flipY=!1,this.generateMipmaps=!1}}).prototype.isDepthTexture=!0;new Bc,new Bc,new Bc,new eh;const xm=function(t,e,n){n=n||2;const r=e&&e.length,i=r?e[0]*n:t.length;let o=wm(t,0,i,n,!0);const a=[];if(!o||o.next===o.prev)return a;let s,u,c,l,h,f,d;if(r&&(o=function(t,e,n,r){const i=[];let o,a,s,u,c;for(o=0,a=e.length;o<a;o++)s=e[o]*r,u=o<a-1?e[o+1]*r:t.length,c=wm(t,s,u,r,!1),c===c.next&&(c.steiner=!0),i.push(km(c));for(i.sort(Dm),o=0;o<i.length;o++)Cm(i[o],n),n=Sm(n,n.next);return n}(t,e,o,n)),t.length>80*n){s=c=t[0],u=l=t[1];for(let e=n;e<i;e+=n)h=t[e],f=t[e+1],h<s&&(s=h),f<u&&(u=f),h>c&&(c=h),f>l&&(l=f);d=Math.max(c-s,l-u),d=0!==d?1/d:0}return Em(o,a,n,s,u,d),a};function wm(t,e,n,r,i){let o,a;if(i===function(t,e,n,r){let i=0;for(let o=e,a=n-r;o<n;o+=r)i+=(t[a]-t[o])*(t[o+1]+t[a+1]),a=o;return i}(t,e,n,r)>0)for(o=e;o<n;o+=r)a=Vm(o,t[o],t[o+1],a);else for(o=n-r;o>=e;o-=r)a=Vm(o,t[o],t[o+1],a);return a&&zm(a,a.next)&&(Gm(a),a=a.next),a}function Sm(t,e){if(!t)return t;e||(e=t);let n,r=t;do{if(n=!1,r.steiner||!zm(r,r.next)&&0!==Fm(r.prev,r,r.next))r=r.next;else{if(Gm(r),r=e=r.prev,r===r.next)break;n=!0}}while(n||r!==e);return e}function Em(t,e,n,r,i,o,a){if(!t)return;!a&&o&&function(t,e,n,r){let i=t;do{null===i.z&&(i.z=Rm(i.x,i.y,e,n,r)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next}while(i!==t);i.prevZ.nextZ=null,i.prevZ=null,function(t){let e,n,r,i,o,a,s,u,c=1;do{for(n=t,t=null,o=null,a=0;n;){for(a++,r=n,s=0,e=0;e<c&&(s++,r=r.nextZ,r);e++);for(u=c;s>0||u>0&&r;)0!==s&&(0===u||!r||n.z<=r.z)?(i=n,n=n.nextZ,s--):(i=r,r=r.nextZ,u--),o?o.nextZ=i:t=i,i.prevZ=o,o=i;n=r}o.nextZ=null,c*=2}while(a>1)}(i)}(t,r,i,o);let s,u,c=t;for(;t.prev!==t.next;)if(s=t.prev,u=t.next,o?Mm(t,r,i,o):Tm(t))e.push(s.i/n),e.push(t.i/n),e.push(u.i/n),Gm(t),t=u.next,c=u.next;else if((t=u)===c){a?1===a?Em(t=Am(Sm(t),e,n),e,n,r,i,o,2):2===a&&Lm(t,e,n,r,i,o):Em(Sm(t),e,n,r,i,o,1);break}}function Tm(t){const e=t.prev,n=t,r=t.next;if(Fm(e,n,r)>=0)return!1;let i=t.next.next;for(;i!==t.prev;){if(Om(e.x,e.y,n.x,n.y,r.x,r.y,i.x,i.y)&&Fm(i.prev,i,i.next)>=0)return!1;i=i.next}return!0}function Mm(t,e,n,r){const i=t.prev,o=t,a=t.next;if(Fm(i,o,a)>=0)return!1;const s=i.x<o.x?i.x<a.x?i.x:a.x:o.x<a.x?o.x:a.x,u=i.y<o.y?i.y<a.y?i.y:a.y:o.y<a.y?o.y:a.y,c=i.x>o.x?i.x>a.x?i.x:a.x:o.x>a.x?o.x:a.x,l=i.y>o.y?i.y>a.y?i.y:a.y:o.y>a.y?o.y:a.y,h=Rm(s,u,e,n,r),f=Rm(c,l,e,n,r);let d=t.prevZ,p=t.nextZ;for(;d&&d.z>=h&&p&&p.z<=f;){if(d!==t.prev&&d!==t.next&&Om(i.x,i.y,o.x,o.y,a.x,a.y,d.x,d.y)&&Fm(d.prev,d,d.next)>=0)return!1;if(d=d.prevZ,p!==t.prev&&p!==t.next&&Om(i.x,i.y,o.x,o.y,a.x,a.y,p.x,p.y)&&Fm(p.prev,p,p.next)>=0)return!1;p=p.nextZ}for(;d&&d.z>=h;){if(d!==t.prev&&d!==t.next&&Om(i.x,i.y,o.x,o.y,a.x,a.y,d.x,d.y)&&Fm(d.prev,d,d.next)>=0)return!1;d=d.prevZ}for(;p&&p.z<=f;){if(p!==t.prev&&p!==t.next&&Om(i.x,i.y,o.x,o.y,a.x,a.y,p.x,p.y)&&Fm(p.prev,p,p.next)>=0)return!1;p=p.nextZ}return!0}function Am(t,e,n){let r=t;do{const i=r.prev,o=r.next.next;!zm(i,o)&&Bm(i,r,r.next,o)&&jm(i,o)&&jm(o,i)&&(e.push(i.i/n),e.push(r.i/n),e.push(o.i/n),Gm(r),Gm(r.next),r=t=o),r=r.next}while(r!==t);return Sm(r)}function Lm(t,e,n,r,i,o){let a=t;do{let t=a.next.next;for(;t!==a.prev;){if(a.i!==t.i&&Im(a,t)){let s=Hm(a,t);return a=Sm(a,a.next),s=Sm(s,s.next),Em(a,e,n,r,i,o),void Em(s,e,n,r,i,o)}t=t.next}a=a.next}while(a!==t)}function Dm(t,e){return t.x-e.x}function Cm(t,e){if(e=function(t,e){let n=e;const r=t.x,i=t.y;let o,a=-1/0;do{if(i<=n.y&&i>=n.next.y&&n.next.y!==n.y){const t=n.x+(i-n.y)*(n.next.x-n.x)/(n.next.y-n.y);if(t<=r&&t>a){if(a=t,t===r){if(i===n.y)return n;if(i===n.next.y)return n.next}o=n.x<n.next.x?n:n.next}}n=n.next}while(n!==e);if(!o)return null;if(r===a)return o;const s=o,u=o.x,c=o.y;let l,h=1/0;n=o;do{r>=n.x&&n.x>=u&&r!==n.x&&Om(i<c?r:a,i,u,c,i<c?a:r,i,n.x,n.y)&&(l=Math.abs(i-n.y)/(r-n.x),jm(n,t)&&(l<h||l===h&&(n.x>o.x||n.x===o.x&&Pm(o,n)))&&(o=n,h=l)),n=n.next}while(n!==s);return o}(t,e)){const n=Hm(e,t);Sm(e,e.next),Sm(n,n.next)}}function Pm(t,e){return Fm(t.prev,t,e.prev)<0&&Fm(e.next,t,t.next)<0}function Rm(t,e,n,r,i){return(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-n)*i)|t<<8))|t<<4))|t<<2))|t<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-r)*i)|e<<8))|e<<4))|e<<2))|e<<1))<<1}function km(t){let e=t,n=t;do{(e.x<n.x||e.x===n.x&&e.y<n.y)&&(n=e),e=e.next}while(e!==t);return n}function Om(t,e,n,r,i,o,a,s){return(i-a)*(e-s)-(t-a)*(o-s)>=0&&(t-a)*(r-s)-(n-a)*(e-s)>=0&&(n-a)*(o-s)-(i-a)*(r-s)>=0}function Im(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!function(t,e){let n=t;do{if(n.i!==t.i&&n.next.i!==t.i&&n.i!==e.i&&n.next.i!==e.i&&Bm(n,n.next,t,e))return!0;n=n.next}while(n!==t);return!1}(t,e)&&(jm(t,e)&&jm(e,t)&&function(t,e){let n=t,r=!1;const i=(t.x+e.x)/2,o=(t.y+e.y)/2;do{n.y>o!=n.next.y>o&&n.next.y!==n.y&&i<(n.next.x-n.x)*(o-n.y)/(n.next.y-n.y)+n.x&&(r=!r),n=n.next}while(n!==t);return r}(t,e)&&(Fm(t.prev,t,e.prev)||Fm(t,e.prev,e))||zm(t,e)&&Fm(t.prev,t,t.next)>0&&Fm(e.prev,e,e.next)>0)}function Fm(t,e,n){return(e.y-t.y)*(n.x-e.x)-(e.x-t.x)*(n.y-e.y)}function zm(t,e){return t.x===e.x&&t.y===e.y}function Bm(t,e,n,r){const i=Um(Fm(t,e,n)),o=Um(Fm(t,e,r)),a=Um(Fm(n,r,t)),s=Um(Fm(n,r,e));return i!==o&&a!==s||(!(0!==i||!Nm(t,n,e))||(!(0!==o||!Nm(t,r,e))||(!(0!==a||!Nm(n,t,r))||!(0!==s||!Nm(n,e,r)))))}function Nm(t,e,n){return e.x<=Math.max(t.x,n.x)&&e.x>=Math.min(t.x,n.x)&&e.y<=Math.max(t.y,n.y)&&e.y>=Math.min(t.y,n.y)}function Um(t){return t>0?1:t<0?-1:0}function jm(t,e){return Fm(t.prev,t,t.next)<0?Fm(t,e,t.next)>=0&&Fm(t,t.prev,e)>=0:Fm(t,e,t.prev)<0||Fm(t,t.next,e)<0}function Hm(t,e){const n=new Wm(t.i,t.x,t.y),r=new Wm(e.i,e.x,e.y),i=t.next,o=e.prev;return t.next=e,e.prev=t,n.next=i,i.prev=n,r.next=n,n.prev=r,o.next=r,r.prev=o,r}function Vm(t,e,n,r){const i=new Wm(t,e,n);return r?(i.next=r.next,i.prev=r,r.next.prev=i,r.next=i):(i.prev=i,i.next=i),i}function Gm(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function Wm(t,e,n){this.i=t,this.x=e,this.y=n,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}class qm{static area(t){const e=t.length;let n=0;for(let r=e-1,i=0;i<e;r=i++)n+=t[r].x*t[i].y-t[i].x*t[r].y;return.5*n}static isClockWise(t){return qm.area(t)<0}static triangulateShape(t,e){const n=[],r=[],i=[];Xm(t),Ym(n,t);let o=t.length;e.forEach(Xm);for(let t=0;t<e.length;t++)r.push(o),o+=e[t].length,Ym(n,e[t]);const a=xm(n,r);for(let t=0;t<a.length;t+=3)i.push(a.slice(t,t+3));return i}}function Xm(t){const e=t.length;e>2&&t[e-1].equals(t[0])&&t.pop()}function Ym(t,e){for(let n=0;n<e.length;n++)t.push(e[n].x),t.push(e[n].y)}class Zm extends Mh{constructor(t,e){super(),this.type="ExtrudeGeometry",this.parameters={shapes:t,options:e},t=Array.isArray(t)?t:[t];const n=this,r=[],i=[];for(let e=0,n=t.length;e<n;e++){o(t[e])}function o(t){const o=[],a=void 0!==e.curveSegments?e.curveSegments:12,s=void 0!==e.steps?e.steps:1;let u=void 0!==e.depth?e.depth:100,c=void 0===e.bevelEnabled||e.bevelEnabled,l=void 0!==e.bevelThickness?e.bevelThickness:6,h=void 0!==e.bevelSize?e.bevelSize:l-2,f=void 0!==e.bevelOffset?e.bevelOffset:0,d=void 0!==e.bevelSegments?e.bevelSegments:3;const p=e.extrudePath,m=void 0!==e.UVGenerator?e.UVGenerator:Jm;void 0!==e.amount&&(console.warn("THREE.ExtrudeBufferGeometry: amount has been renamed to depth."),u=e.amount);let g,v,y,b,_,x=!1;p&&(g=p.getSpacedPoints(s),x=!0,c=!1,v=p.computeFrenetFrames(s,!1),y=new Bc,b=new Bc,_=new Bc),c||(d=0,l=0,h=0,f=0);const w=t.extractPoints(a);let S=w.shape;const E=w.holes;if(!qm.isClockWise(S)){S=S.reverse();for(let t=0,e=E.length;t<e;t++){const e=E[t];qm.isClockWise(e)&&(E[t]=e.reverse())}}const T=qm.triangulateShape(S,E),M=S;for(let t=0,e=E.length;t<e;t++){const e=E[t];S=S.concat(e)}function A(t,e,n){return e||console.error("THREE.ExtrudeGeometry: vec does not exist"),e.clone().multiplyScalar(n).add(t)}const L=S.length,D=T.length;function C(t,e,n){let r,i,o;const a=t.x-e.x,s=t.y-e.y,u=n.x-t.x,c=n.y-t.y,l=a*a+s*s,h=a*c-s*u;if(Math.abs(h)>Number.EPSILON){const h=Math.sqrt(l),f=Math.sqrt(u*u+c*c),d=e.x-s/h,p=e.y+a/h,m=((n.x-c/f-d)*c-(n.y+u/f-p)*u)/(a*c-s*u);r=d+a*m-t.x,i=p+s*m-t.y;const g=r*r+i*i;if(g<=2)return new Lc(r,i);o=Math.sqrt(g/2)}else{let t=!1;a>Number.EPSILON?u>Number.EPSILON&&(t=!0):a<-Number.EPSILON?u<-Number.EPSILON&&(t=!0):Math.sign(s)===Math.sign(c)&&(t=!0),t?(r=-s,i=a,o=Math.sqrt(l)):(r=a,i=s,o=Math.sqrt(l/2))}return new Lc(r/o,i/o)}const P=[];for(let t=0,e=M.length,n=e-1,r=t+1;t<e;t++,n++,r++)n===e&&(n=0),r===e&&(r=0),P[t]=C(M[t],M[n],M[r]);const R=[];let k,O=P.concat();for(let t=0,e=E.length;t<e;t++){const e=E[t];k=[];for(let t=0,n=e.length,r=n-1,i=t+1;t<n;t++,r++,i++)r===n&&(r=0),i===n&&(i=0),k[t]=C(e[t],e[r],e[i]);R.push(k),O=O.concat(k)}for(let t=0;t<d;t++){const e=t/d,n=l*Math.cos(e*Math.PI/2),r=h*Math.sin(e*Math.PI/2)+f;for(let t=0,e=M.length;t<e;t++){const e=A(M[t],P[t],r);z(e.x,e.y,-n)}for(let t=0,e=E.length;t<e;t++){const e=E[t];k=R[t];for(let t=0,i=e.length;t<i;t++){const i=A(e[t],k[t],r);z(i.x,i.y,-n)}}}const I=h+f;for(let t=0;t<L;t++){const e=c?A(S[t],O[t],I):S[t];x?(b.copy(v.normals[0]).multiplyScalar(e.x),y.copy(v.binormals[0]).multiplyScalar(e.y),_.copy(g[0]).add(b).add(y),z(_.x,_.y,_.z)):z(e.x,e.y,0)}for(let t=1;t<=s;t++)for(let e=0;e<L;e++){const n=c?A(S[e],O[e],I):S[e];x?(b.copy(v.normals[t]).multiplyScalar(n.x),y.copy(v.binormals[t]).multiplyScalar(n.y),_.copy(g[t]).add(b).add(y),z(_.x,_.y,_.z)):z(n.x,n.y,u/s*t)}for(let t=d-1;t>=0;t--){const e=t/d,n=l*Math.cos(e*Math.PI/2),r=h*Math.sin(e*Math.PI/2)+f;for(let t=0,e=M.length;t<e;t++){const e=A(M[t],P[t],r);z(e.x,e.y,u+n)}for(let t=0,e=E.length;t<e;t++){const e=E[t];k=R[t];for(let t=0,i=e.length;t<i;t++){const i=A(e[t],k[t],r);x?z(i.x,i.y+g[s-1].y,g[s-1].x+n):z(i.x,i.y,u+n)}}}function F(t,e){let n=t.length;for(;--n>=0;){const r=n;let i=n-1;i<0&&(i=t.length-1);for(let t=0,n=s+2*d;t<n;t++){const n=L*t,o=L*(t+1);N(e+r+n,e+i+n,e+i+o,e+r+o)}}}function z(t,e,n){o.push(t),o.push(e),o.push(n)}function B(t,e,i){U(t),U(e),U(i);const o=r.length/3,a=m.generateTopUV(n,r,o-3,o-2,o-1);j(a[0]),j(a[1]),j(a[2])}function N(t,e,i,o){U(t),U(e),U(o),U(e),U(i),U(o);const a=r.length/3,s=m.generateSideWallUV(n,r,a-6,a-3,a-2,a-1);j(s[0]),j(s[1]),j(s[3]),j(s[1]),j(s[2]),j(s[3])}function U(t){r.push(o[3*t+0]),r.push(o[3*t+1]),r.push(o[3*t+2])}function j(t){i.push(t.x),i.push(t.y)}!function(){const t=r.length/3;if(c){let t=0,e=L*t;for(let t=0;t<D;t++){const n=T[t];B(n[2]+e,n[1]+e,n[0]+e)}t=s+2*d,e=L*t;for(let t=0;t<D;t++){const n=T[t];B(n[0]+e,n[1]+e,n[2]+e)}}else{for(let t=0;t<D;t++){const e=T[t];B(e[2],e[1],e[0])}for(let t=0;t<D;t++){const e=T[t];B(e[0]+L*s,e[1]+L*s,e[2]+L*s)}}n.addGroup(t,r.length/3-t,0)}(),function(){const t=r.length/3;let e=0;F(M,e),e+=M.length;for(let t=0,n=E.length;t<n;t++){const n=E[t];F(n,e),e+=n.length}n.addGroup(t,r.length/3-t,1)}()}this.setAttribute("position",new vh(r,3)),this.setAttribute("uv",new vh(i,2)),this.computeVertexNormals()}toJSON(){const t=Mh.prototype.toJSON.call(this);return function(t,e,n){if(n.shapes=[],Array.isArray(t))for(let e=0,r=t.length;e<r;e++){const r=t[e];n.shapes.push(r.uuid)}else n.shapes.push(t.uuid);void 0!==e.extrudePath&&(n.options.extrudePath=e.extrudePath.toJSON());return n}(this.parameters.shapes,this.parameters.options,t)}}const Jm={generateTopUV:function(t,e,n,r,i){const o=e[3*n],a=e[3*n+1],s=e[3*r],u=e[3*r+1],c=e[3*i],l=e[3*i+1];return[new Lc(o,a),new Lc(s,u),new Lc(c,l)]},generateSideWallUV:function(t,e,n,r,i,o){const a=e[3*n],s=e[3*n+1],u=e[3*n+2],c=e[3*r],l=e[3*r+1],h=e[3*r+2],f=e[3*i],d=e[3*i+1],p=e[3*i+2],m=e[3*o],g=e[3*o+1],v=e[3*o+2];return Math.abs(s-l)<.01?[new Lc(a,1-u),new Lc(c,1-h),new Lc(f,1-p),new Lc(m,1-v)]:[new Lc(s,1-u),new Lc(l,1-h),new Lc(d,1-p),new Lc(g,1-v)]}};class Qm extends Mh{constructor(t,e=12){super(),this.type="ShapeGeometry",this.parameters={shapes:t,curveSegments:e};const n=[],r=[],i=[],o=[];let a=0,s=0;if(!1===Array.isArray(t))u(t);else for(let e=0;e<t.length;e++)u(t[e]),this.addGroup(a,s,e),a+=s,s=0;function u(t){const a=r.length/3,u=t.extractPoints(e);let c=u.shape;const l=u.holes;!1===qm.isClockWise(c)&&(c=c.reverse());for(let t=0,e=l.length;t<e;t++){const e=l[t];!0===qm.isClockWise(e)&&(l[t]=e.reverse())}const h=qm.triangulateShape(c,l);for(let t=0,e=l.length;t<e;t++){const e=l[t];c=c.concat(e)}for(let t=0,e=c.length;t<e;t++){const e=c[t];r.push(e.x,e.y,0),i.push(0,0,1),o.push(e.x,e.y)}for(let t=0,e=h.length;t<e;t++){const e=h[t],r=e[0]+a,i=e[1]+a,o=e[2]+a;n.push(r,i,o),s+=3}}this.setIndex(n),this.setAttribute("position",new vh(r,3)),this.setAttribute("normal",new vh(i,3)),this.setAttribute("uv",new vh(o,2))}toJSON(){const t=Mh.prototype.toJSON.call(this);return function(t,e){if(e.shapes=[],Array.isArray(t))for(let n=0,r=t.length;n<r;n++){const r=t[n];e.shapes.push(r.uuid)}else e.shapes.push(t.uuid);return e}(this.parameters.shapes,t)}}class Km extends Mh{constructor(t=1,e=.4,n=8,r=6,i=2*Math.PI){super(),this.type="TorusGeometry",this.parameters={radius:t,tube:e,radialSegments:n,tubularSegments:r,arc:i},n=Math.floor(n),r=Math.floor(r);const o=[],a=[],s=[],u=[],c=new Bc,l=new Bc,h=new Bc;for(let o=0;o<=n;o++)for(let f=0;f<=r;f++){const d=f/r*i,p=o/n*Math.PI*2;l.x=(t+e*Math.cos(p))*Math.cos(d),l.y=(t+e*Math.cos(p))*Math.sin(d),l.z=e*Math.sin(p),a.push(l.x,l.y,l.z),c.x=t*Math.cos(d),c.y=t*Math.sin(d),h.subVectors(l,c).normalize(),s.push(h.x,h.y,h.z),u.push(f/r),u.push(o/n)}for(let t=1;t<=n;t++)for(let e=1;e<=r;e++){const n=(r+1)*t+e-1,i=(r+1)*(t-1)+e-1,a=(r+1)*(t-1)+e,s=(r+1)*t+e;o.push(n,i,s),o.push(i,a,s)}this.setIndex(o),this.setAttribute("position",new vh(a,3)),this.setAttribute("normal",new vh(s,3)),this.setAttribute("uv",new vh(u,2))}}class $m extends rh{constructor(t){super(),this.type="ShadowMaterial",this.color=new lh(0),this.transparent=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this}}$m.prototype.isShadowMaterial=!0;class tg extends Jh{constructor(t){super(t),this.type="RawShaderMaterial"}}tg.prototype.isRawShaderMaterial=!0;class eg extends rh{constructor(t){super(),this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new lh(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new lh(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new Lc(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.flatShading=!1,this.vertexTangents=!1,this.setValues(t)}copy(t){return super.copy(t),this.defines={STANDARD:""},this.color.copy(t.color),this.roughness=t.roughness,this.metalness=t.metalness,this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.roughnessMap=t.roughnessMap,this.metalnessMap=t.metalnessMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.envMapIntensity=t.envMapIntensity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.morphNormals=t.morphNormals,this.flatShading=t.flatShading,this.vertexTangents=t.vertexTangents,this}}eg.prototype.isMeshStandardMaterial=!0;class ng extends eg{constructor(t){super(),this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.clearcoat=0,this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new Lc(1,1),this.clearcoatNormalMap=null,this.reflectivity=.5,Object.defineProperty(this,"ior",{get:function(){return(1+.4*this.reflectivity)/(1-.4*this.reflectivity)},set:function(t){this.reflectivity=wc(2.5*(t-1)/(t+1),0,1)}}),this.sheen=null,this.transmission=0,this.transmissionMap=null,this.setValues(t)}copy(t){return super.copy(t),this.defines={STANDARD:"",PHYSICAL:""},this.clearcoat=t.clearcoat,this.clearcoatMap=t.clearcoatMap,this.clearcoatRoughness=t.clearcoatRoughness,this.clearcoatRoughnessMap=t.clearcoatRoughnessMap,this.clearcoatNormalMap=t.clearcoatNormalMap,this.clearcoatNormalScale.copy(t.clearcoatNormalScale),this.reflectivity=t.reflectivity,t.sheen?this.sheen=(this.sheen||new lh).copy(t.sheen):this.sheen=null,this.transmission=t.transmission,this.transmissionMap=t.transmissionMap,this}}ng.prototype.isMeshPhysicalMaterial=!0;class rg extends rh{constructor(t){super(),this.type="MeshPhongMaterial",this.color=new lh(16777215),this.specular=new lh(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new lh(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new Lc(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=0,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.flatShading=!1,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.specular.copy(t.specular),this.shininess=t.shininess,this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.morphNormals=t.morphNormals,this.flatShading=t.flatShading,this}}rg.prototype.isMeshPhongMaterial=!0;class ig extends rh{constructor(t){super(),this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new lh(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new lh(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new Lc(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.gradientMap=t.gradientMap,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.alphaMap=t.alphaMap,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.morphNormals=t.morphNormals,this}}ig.prototype.isMeshToonMaterial=!0;class og extends rh{constructor(t){super(),this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new Lc(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.flatShading=!1,this.setValues(t)}copy(t){return super.copy(t),this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.morphNormals=t.morphNormals,this.flatShading=t.flatShading,this}}og.prototype.isMeshNormalMaterial=!0;class ag extends rh{constructor(t){super(),this.type="MeshLambertMaterial",this.color=new lh(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new lh(0),this.emissiveIntensity=1,this.emissiveMap=null,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=0,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.morphNormals=t.morphNormals,this}}ag.prototype.isMeshLambertMaterial=!0;class sg extends rh{constructor(t){super(),this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new lh(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new Lc(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.flatShading=!1,this.setValues(t)}copy(t){return super.copy(t),this.defines={MATCAP:""},this.color.copy(t.color),this.matcap=t.matcap,this.map=t.map,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.alphaMap=t.alphaMap,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.morphNormals=t.morphNormals,this.flatShading=t.flatShading,this}}sg.prototype.isMeshMatcapMaterial=!0;class ug extends nm{constructor(t){super(),this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(t)}copy(t){return super.copy(t),this.scale=t.scale,this.dashSize=t.dashSize,this.gapSize=t.gapSize,this}}ug.prototype.isLineDashedMaterial=!0;const cg={arraySlice:function(t,e,n){return cg.isTypedArray(t)?new t.constructor(t.subarray(e,void 0!==n?n:t.length)):t.slice(e,n)},convertArray:function(t,e,n){return!t||!n&&t.constructor===e?t:"number"==typeof e.BYTES_PER_ELEMENT?new e(t):Array.prototype.slice.call(t)},isTypedArray:function(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)},getKeyframeOrder:function(t){const e=t.length,n=new Array(e);for(let t=0;t!==e;++t)n[t]=t;return n.sort((function(e,n){return t[e]-t[n]})),n},sortedArray:function(t,e,n){const r=t.length,i=new t.constructor(r);for(let o=0,a=0;a!==r;++o){const r=n[o]*e;for(let n=0;n!==e;++n)i[a++]=t[r+n]}return i},flattenJSON:function(t,e,n,r){let i=1,o=t[0];for(;void 0!==o&&void 0===o[r];)o=t[i++];if(void 0===o)return;let a=o[r];if(void 0!==a)if(Array.isArray(a))do{a=o[r],void 0!==a&&(e.push(o.time),n.push.apply(n,a)),o=t[i++]}while(void 0!==o);else if(void 0!==a.toArray)do{a=o[r],void 0!==a&&(e.push(o.time),a.toArray(n,n.length)),o=t[i++]}while(void 0!==o);else do{a=o[r],void 0!==a&&(e.push(o.time),n.push(a)),o=t[i++]}while(void 0!==o)},subclip:function(t,e,n,r,i=30){const o=t.clone();o.name=e;const a=[];for(let t=0;t<o.tracks.length;++t){const e=o.tracks[t],s=e.getValueSize(),u=[],c=[];for(let t=0;t<e.times.length;++t){const o=e.times[t]*i;if(!(o<n||o>=r)){u.push(e.times[t]);for(let n=0;n<s;++n)c.push(e.values[t*s+n])}}0!==u.length&&(e.times=cg.convertArray(u,e.times.constructor),e.values=cg.convertArray(c,e.values.constructor),a.push(e))}o.tracks=a;let s=1/0;for(let t=0;t<o.tracks.length;++t)s>o.tracks[t].times[0]&&(s=o.tracks[t].times[0]);for(let t=0;t<o.tracks.length;++t)o.tracks[t].shift(-1*s);return o.resetDuration(),o},makeClipAdditive:function(t,e=0,n=t,r=30){r<=0&&(r=30);const i=n.tracks.length,o=e/r;for(let e=0;e<i;++e){const r=n.tracks[e],i=r.ValueTypeName;if("bool"===i||"string"===i)continue;const a=t.tracks.find((function(t){return t.name===r.name&&t.ValueTypeName===i}));if(void 0===a)continue;let s=0;const u=r.getValueSize();r.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(s=u/3);let c=0;const l=a.getValueSize();a.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(c=l/3);const h=r.times.length-1;let f;if(o<=r.times[0]){const t=s,e=u-s;f=cg.arraySlice(r.values,t,e)}else if(o>=r.times[h]){const t=h*u+s,e=t+u-s;f=cg.arraySlice(r.values,t,e)}else{const t=r.createInterpolant(),e=s,n=u-s;t.evaluate(o),f=cg.arraySlice(t.resultBuffer,e,n)}if("quaternion"===i){(new zc).fromArray(f).normalize().conjugate().toArray(f)}const d=a.times.length;for(let t=0;t<d;++t){const e=t*l+c;if("quaternion"===i)zc.multiplyQuaternionsFlat(a.values,e,f,0,a.values,e);else{const t=l-2*c;for(let n=0;n<t;++n)a.values[e+n]-=f[n]}}}return t.blendMode=2501,t}};class lg{constructor(t,e,n,r){this.parameterPositions=t,this._cachedIndex=0,this.resultBuffer=void 0!==r?r:new e.constructor(n),this.sampleValues=e,this.valueSize=n,this.settings=null,this.DefaultSettings_={}}evaluate(t){const e=this.parameterPositions;let n=this._cachedIndex,r=e[n],i=e[n-1];t:{e:{let o;n:{r:if(!(t<r)){for(let o=n+2;;){if(void 0===r){if(t<i)break r;return n=e.length,this._cachedIndex=n,this.afterEnd_(n-1,t,i)}if(n===o)break;if(i=r,r=e[++n],t<r)break e}o=e.length;break n}if(t>=i)break t;{const a=e[1];t<a&&(n=2,i=a);for(let o=n-2;;){if(void 0===i)return this._cachedIndex=0,this.beforeStart_(0,t,r);if(n===o)break;if(r=i,i=e[--n-1],t>=i)break e}o=n,n=0}}for(;n<o;){const r=n+o>>>1;t<e[r]?o=r:n=r+1}if(r=e[n],i=e[n-1],void 0===i)return this._cachedIndex=0,this.beforeStart_(0,t,r);if(void 0===r)return n=e.length,this._cachedIndex=n,this.afterEnd_(n-1,i,t)}this._cachedIndex=n,this.intervalChanged_(n,i,r)}return this.interpolate_(n,i,t,r)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(t){const e=this.resultBuffer,n=this.sampleValues,r=this.valueSize,i=t*r;for(let t=0;t!==r;++t)e[t]=n[i+t];return e}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}lg.prototype.beforeStart_=lg.prototype.copySampleValue_,lg.prototype.afterEnd_=lg.prototype.copySampleValue_;class hg extends lg{constructor(t,e,n,r){super(t,e,n,r),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:2400,endingEnd:2400}}intervalChanged_(t,e,n){const r=this.parameterPositions;let i=t-2,o=t+1,a=r[i],s=r[o];if(void 0===a)switch(this.getSettings_().endingStart){case 2401:i=t,a=2*e-n;break;case 2402:i=r.length-2,a=e+r[i]-r[i+1];break;default:i=t,a=n}if(void 0===s)switch(this.getSettings_().endingEnd){case 2401:o=t,s=2*n-e;break;case 2402:o=1,s=n+r[1]-r[0];break;default:o=t-1,s=e}const u=.5*(n-e),c=this.valueSize;this._weightPrev=u/(e-a),this._weightNext=u/(s-n),this._offsetPrev=i*c,this._offsetNext=o*c}interpolate_(t,e,n,r){const i=this.resultBuffer,o=this.sampleValues,a=this.valueSize,s=t*a,u=s-a,c=this._offsetPrev,l=this._offsetNext,h=this._weightPrev,f=this._weightNext,d=(n-e)/(r-e),p=d*d,m=p*d,g=-h*m+2*h*p-h*d,v=(1+h)*m+(-1.5-2*h)*p+(-.5+h)*d+1,y=(-1-f)*m+(1.5+f)*p+.5*d,b=f*m-f*p;for(let t=0;t!==a;++t)i[t]=g*o[c+t]+v*o[u+t]+y*o[s+t]+b*o[l+t];return i}}class fg extends lg{constructor(t,e,n,r){super(t,e,n,r)}interpolate_(t,e,n,r){const i=this.resultBuffer,o=this.sampleValues,a=this.valueSize,s=t*a,u=s-a,c=(n-e)/(r-e),l=1-c;for(let t=0;t!==a;++t)i[t]=o[u+t]*l+o[s+t]*c;return i}}class dg extends lg{constructor(t,e,n,r){super(t,e,n,r)}interpolate_(t){return this.copySampleValue_(t-1)}}class pg{constructor(t,e,n,r){if(void 0===t)throw new Error("THREE.KeyframeTrack: track name is undefined");if(void 0===e||0===e.length)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+t);this.name=t,this.times=cg.convertArray(e,this.TimeBufferType),this.values=cg.convertArray(n,this.ValueBufferType),this.setInterpolation(r||this.DefaultInterpolation)}static toJSON(t){const e=t.constructor;let n;if(e.toJSON!==this.toJSON)n=e.toJSON(t);else{n={name:t.name,times:cg.convertArray(t.times,Array),values:cg.convertArray(t.values,Array)};const e=t.getInterpolation();e!==t.DefaultInterpolation&&(n.interpolation=e)}return n.type=t.ValueTypeName,n}InterpolantFactoryMethodDiscrete(t){return new dg(this.times,this.values,this.getValueSize(),t)}InterpolantFactoryMethodLinear(t){return new fg(this.times,this.values,this.getValueSize(),t)}InterpolantFactoryMethodSmooth(t){return new hg(this.times,this.values,this.getValueSize(),t)}setInterpolation(t){let e;switch(t){case 2300:e=this.InterpolantFactoryMethodDiscrete;break;case 2301:e=this.InterpolantFactoryMethodLinear;break;case 2302:e=this.InterpolantFactoryMethodSmooth}if(void 0===e){const e="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(void 0===this.createInterpolant){if(t===this.DefaultInterpolation)throw new Error(e);this.setInterpolation(this.DefaultInterpolation)}return console.warn("THREE.KeyframeTrack:",e),this}return this.createInterpolant=e,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return 2300;case this.InterpolantFactoryMethodLinear:return 2301;case this.InterpolantFactoryMethodSmooth:return 2302}}getValueSize(){return this.values.length/this.times.length}shift(t){if(0!==t){const e=this.times;for(let n=0,r=e.length;n!==r;++n)e[n]+=t}return this}scale(t){if(1!==t){const e=this.times;for(let n=0,r=e.length;n!==r;++n)e[n]*=t}return this}trim(t,e){const n=this.times,r=n.length;let i=0,o=r-1;for(;i!==r&&n[i]<t;)++i;for(;-1!==o&&n[o]>e;)--o;if(++o,0!==i||o!==r){i>=o&&(o=Math.max(o,1),i=o-1);const t=this.getValueSize();this.times=cg.arraySlice(n,i,o),this.values=cg.arraySlice(this.values,i*t,o*t)}return this}validate(){let t=!0;const e=this.getValueSize();e-Math.floor(e)!=0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),t=!1);const n=this.times,r=this.values,i=n.length;0===i&&(console.error("THREE.KeyframeTrack: Track is empty.",this),t=!1);let o=null;for(let e=0;e!==i;e++){const r=n[e];if("number"==typeof r&&isNaN(r)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,e,r),t=!1;break}if(null!==o&&o>r){console.error("THREE.KeyframeTrack: Out of order keys.",this,e,r,o),t=!1;break}o=r}if(void 0!==r&&cg.isTypedArray(r))for(let e=0,n=r.length;e!==n;++e){const n=r[e];if(isNaN(n)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,e,n),t=!1;break}}return t}optimize(){const t=cg.arraySlice(this.times),e=cg.arraySlice(this.values),n=this.getValueSize(),r=2302===this.getInterpolation(),i=t.length-1;let o=1;for(let a=1;a<i;++a){let i=!1;const s=t[a];if(s!==t[a+1]&&(1!==a||s!==t[0]))if(r)i=!0;else{const t=a*n,r=t-n,o=t+n;for(let a=0;a!==n;++a){const n=e[t+a];if(n!==e[r+a]||n!==e[o+a]){i=!0;break}}}if(i){if(a!==o){t[o]=t[a];const r=a*n,i=o*n;for(let t=0;t!==n;++t)e[i+t]=e[r+t]}++o}}if(i>0){t[o]=t[i];for(let t=i*n,r=o*n,a=0;a!==n;++a)e[r+a]=e[t+a];++o}return o!==t.length?(this.times=cg.arraySlice(t,0,o),this.values=cg.arraySlice(e,0,o*n)):(this.times=t,this.values=e),this}clone(){const t=cg.arraySlice(this.times,0),e=cg.arraySlice(this.values,0),n=new(0,this.constructor)(this.name,t,e);return n.createInterpolant=this.createInterpolant,n}}pg.prototype.TimeBufferType=Float32Array,pg.prototype.ValueBufferType=Float32Array,pg.prototype.DefaultInterpolation=2301;class mg extends pg{}mg.prototype.ValueTypeName="bool",mg.prototype.ValueBufferType=Array,mg.prototype.DefaultInterpolation=2300,mg.prototype.InterpolantFactoryMethodLinear=void 0,mg.prototype.InterpolantFactoryMethodSmooth=void 0;class gg extends pg{}gg.prototype.ValueTypeName="color";class vg extends pg{}vg.prototype.ValueTypeName="number";class yg extends lg{constructor(t,e,n,r){super(t,e,n,r)}interpolate_(t,e,n,r){const i=this.resultBuffer,o=this.sampleValues,a=this.valueSize,s=(n-e)/(r-e);let u=t*a;for(let t=u+a;u!==t;u+=4)zc.slerpFlat(i,0,o,u-a,o,u,s);return i}}class bg extends pg{InterpolantFactoryMethodLinear(t){return new yg(this.times,this.values,this.getValueSize(),t)}}bg.prototype.ValueTypeName="quaternion",bg.prototype.DefaultInterpolation=2301,bg.prototype.InterpolantFactoryMethodSmooth=void 0;class _g extends pg{}_g.prototype.ValueTypeName="string",_g.prototype.ValueBufferType=Array,_g.prototype.DefaultInterpolation=2300,_g.prototype.InterpolantFactoryMethodLinear=void 0,_g.prototype.InterpolantFactoryMethodSmooth=void 0;class xg extends pg{}xg.prototype.ValueTypeName="vector";class wg{constructor(t,e=-1,n,r=2500){this.name=t,this.tracks=n,this.duration=e,this.blendMode=r,this.uuid=xc(),this.duration<0&&this.resetDuration()}static parse(t){const e=[],n=t.tracks,r=1/(t.fps||1);for(let t=0,i=n.length;t!==i;++t)e.push(Sg(n[t]).scale(r));const i=new this(t.name,t.duration,e,t.blendMode);return i.uuid=t.uuid,i}static toJSON(t){const e=[],n=t.tracks,r={name:t.name,duration:t.duration,tracks:e,uuid:t.uuid,blendMode:t.blendMode};for(let t=0,r=n.length;t!==r;++t)e.push(pg.toJSON(n[t]));return r}static CreateFromMorphTargetSequence(t,e,n,r){const i=e.length,o=[];for(let t=0;t<i;t++){let a=[],s=[];a.push((t+i-1)%i,t,(t+1)%i),s.push(0,1,0);const u=cg.getKeyframeOrder(a);a=cg.sortedArray(a,1,u),s=cg.sortedArray(s,1,u),r||0!==a[0]||(a.push(i),s.push(s[0])),o.push(new vg(".morphTargetInfluences["+e[t].name+"]",a,s).scale(1/n))}return new this(t,-1,o)}static findByName(t,e){let n=t;if(!Array.isArray(t)){const e=t;n=e.geometry&&e.geometry.animations||e.animations}for(let t=0;t<n.length;t++)if(n[t].name===e)return n[t];return null}static CreateClipsFromMorphTargetSequences(t,e,n){const r={},i=/^([\w-]*?)([\d]+)$/;for(let e=0,n=t.length;e<n;e++){const n=t[e],o=n.name.match(i);if(o&&o.length>1){const t=o[1];let e=r[t];e||(r[t]=e=[]),e.push(n)}}const o=[];for(const t in r)o.push(this.CreateFromMorphTargetSequence(t,r[t],e,n));return o}static parseAnimation(t,e){if(!t)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const n=function(t,e,n,r,i){if(0!==n.length){const o=[],a=[];cg.flattenJSON(n,o,a,r),0!==o.length&&i.push(new t(e,o,a))}},r=[],i=t.name||"default",o=t.fps||30,a=t.blendMode;let s=t.length||-1;const u=t.hierarchy||[];for(let t=0;t<u.length;t++){const i=u[t].keys;if(i&&0!==i.length)if(i[0].morphTargets){const t={};let e;for(e=0;e<i.length;e++)if(i[e].morphTargets)for(let n=0;n<i[e].morphTargets.length;n++)t[i[e].morphTargets[n]]=-1;for(const n in t){const t=[],o=[];for(let r=0;r!==i[e].morphTargets.length;++r){const r=i[e];t.push(r.time),o.push(r.morphTarget===n?1:0)}r.push(new vg(".morphTargetInfluence["+n+"]",t,o))}s=t.length*(o||1)}else{const o=".bones["+e[t].name+"]";n(xg,o+".position",i,"pos",r),n(bg,o+".quaternion",i,"rot",r),n(xg,o+".scale",i,"scl",r)}}if(0===r.length)return null;return new this(i,s,r,a)}resetDuration(){let t=0;for(let e=0,n=this.tracks.length;e!==n;++e){const n=this.tracks[e];t=Math.max(t,n.times[n.times.length-1])}return this.duration=t,this}trim(){for(let t=0;t<this.tracks.length;t++)this.tracks[t].trim(0,this.duration);return this}validate(){let t=!0;for(let e=0;e<this.tracks.length;e++)t=t&&this.tracks[e].validate();return t}optimize(){for(let t=0;t<this.tracks.length;t++)this.tracks[t].optimize();return this}clone(){const t=[];for(let e=0;e<this.tracks.length;e++)t.push(this.tracks[e].clone());return new this.constructor(this.name,this.duration,t,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function Sg(t){if(void 0===t.type)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const e=function(t){switch(t.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return vg;case"vector":case"vector2":case"vector3":case"vector4":return xg;case"color":return gg;case"quaternion":return bg;case"bool":case"boolean":return mg;case"string":return _g}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+t)}(t.type);if(void 0===t.times){const e=[],n=[];cg.flattenJSON(t.keys,e,n,"value"),t.times=e,t.values=n}return void 0!==e.parse?e.parse(t):new e(t.name,t.times,t.values,t.interpolation)}const Eg={enabled:!1,files:{},add:function(t,e){!1!==this.enabled&&(this.files[t]=e)},get:function(t){if(!1!==this.enabled)return this.files[t]},remove:function(t){delete this.files[t]},clear:function(){this.files={}}};class Tg{constructor(t,e,n){const r=this;let i=!1,o=0,a=0,s=void 0;const u=[];this.onStart=void 0,this.onLoad=t,this.onProgress=e,this.onError=n,this.itemStart=function(t){a++,!1===i&&void 0!==r.onStart&&r.onStart(t,o,a),i=!0},this.itemEnd=function(t){o++,void 0!==r.onProgress&&r.onProgress(t,o,a),o===a&&(i=!1,void 0!==r.onLoad&&r.onLoad())},this.itemError=function(t){void 0!==r.onError&&r.onError(t)},this.resolveURL=function(t){return s?s(t):t},this.setURLModifier=function(t){return s=t,this},this.addHandler=function(t,e){return u.push(t,e),this},this.removeHandler=function(t){const e=u.indexOf(t);return-1!==e&&u.splice(e,2),this},this.getHandler=function(t){for(let e=0,n=u.length;e<n;e+=2){const n=u[e],r=u[e+1];if(n.global&&(n.lastIndex=0),n.test(t))return r}return null}}}const Mg=new Tg;class Ag{constructor(t){this.manager=void 0!==t?t:Mg,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(t,e){const n=this;return new Promise((function(r,i){n.load(t,r,e,i)}))}parse(){}setCrossOrigin(t){return this.crossOrigin=t,this}setWithCredentials(t){return this.withCredentials=t,this}setPath(t){return this.path=t,this}setResourcePath(t){return this.resourcePath=t,this}setRequestHeader(t){return this.requestHeader=t,this}}const Lg={};class Dg extends Ag{constructor(t){super(t)}load(t,e,n,r){void 0===t&&(t=""),void 0!==this.path&&(t=this.path+t),t=this.manager.resolveURL(t);const i=this,o=Eg.get(t);if(void 0!==o)return i.manager.itemStart(t),setTimeout((function(){e&&e(o),i.manager.itemEnd(t)}),0),o;if(void 0!==Lg[t])return void Lg[t].push({onLoad:e,onProgress:n,onError:r});const a=t.match(/^data:(.*?)(;base64)?,(.*)$/);let s;if(a){const n=a[1],o=!!a[2];let s=a[3];s=decodeURIComponent(s),o&&(s=atob(s));try{let r;const o=(this.responseType||"").toLowerCase();switch(o){case"arraybuffer":case"blob":const t=new Uint8Array(s.length);for(let e=0;e<s.length;e++)t[e]=s.charCodeAt(e);r="blob"===o?new Blob([t.buffer],{type:n}):t.buffer;break;case"document":const e=new DOMParser;r=e.parseFromString(s,n);break;case"json":r=JSON.parse(s);break;default:r=s}setTimeout((function(){e&&e(r),i.manager.itemEnd(t)}),0)}catch(e){setTimeout((function(){r&&r(e),i.manager.itemError(t),i.manager.itemEnd(t)}),0)}}else{Lg[t]=[],Lg[t].push({onLoad:e,onProgress:n,onError:r}),s=new XMLHttpRequest,s.open("GET",t,!0),s.addEventListener("load",(function(e){const n=this.response,r=Lg[t];if(delete Lg[t],200===this.status||0===this.status){0===this.status&&console.warn("THREE.FileLoader: HTTP Status 0 received."),Eg.add(t,n);for(let t=0,e=r.length;t<e;t++){const e=r[t];e.onLoad&&e.onLoad(n)}i.manager.itemEnd(t)}else{for(let t=0,n=r.length;t<n;t++){const n=r[t];n.onError&&n.onError(e)}i.manager.itemError(t),i.manager.itemEnd(t)}}),!1),s.addEventListener("progress",(function(e){const n=Lg[t];for(let t=0,r=n.length;t<r;t++){const r=n[t];r.onProgress&&r.onProgress(e)}}),!1),s.addEventListener("error",(function(e){const n=Lg[t];delete Lg[t];for(let t=0,r=n.length;t<r;t++){const r=n[t];r.onError&&r.onError(e)}i.manager.itemError(t),i.manager.itemEnd(t)}),!1),s.addEventListener("abort",(function(e){const n=Lg[t];delete Lg[t];for(let t=0,r=n.length;t<r;t++){const r=n[t];r.onError&&r.onError(e)}i.manager.itemError(t),i.manager.itemEnd(t)}),!1),void 0!==this.responseType&&(s.responseType=this.responseType),void 0!==this.withCredentials&&(s.withCredentials=this.withCredentials),s.overrideMimeType&&s.overrideMimeType(void 0!==this.mimeType?this.mimeType:"text/plain");for(const t in this.requestHeader)s.setRequestHeader(t,this.requestHeader[t]);s.send(null)}return i.manager.itemStart(t),s}setResponseType(t){return this.responseType=t,this}setMimeType(t){return this.mimeType=t,this}}class Cg extends Ag{constructor(t){super(t)}load(t,e,n,r){void 0!==this.path&&(t=this.path+t),t=this.manager.resolveURL(t);const i=this,o=Eg.get(t);if(void 0!==o)return i.manager.itemStart(t),setTimeout((function(){e&&e(o),i.manager.itemEnd(t)}),0),o;const a=document.createElementNS("http://www.w3.org/1999/xhtml","img");function s(){a.removeEventListener("load",s,!1),a.removeEventListener("error",u,!1),Eg.add(t,this),e&&e(this),i.manager.itemEnd(t)}function u(e){a.removeEventListener("load",s,!1),a.removeEventListener("error",u,!1),r&&r(e),i.manager.itemError(t),i.manager.itemEnd(t)}return a.addEventListener("load",s,!1),a.addEventListener("error",u,!1),"data:"!==t.substr(0,5)&&void 0!==this.crossOrigin&&(a.crossOrigin=this.crossOrigin),i.manager.itemStart(t),a.src=t,a}}class Pg extends Ag{constructor(t){super(t)}load(t,e,n,r){const i=new tf,o=new Cg(this.manager);o.setCrossOrigin(this.crossOrigin),o.setPath(this.path);let a=0;function s(n){o.load(t[n],(function(t){i.images[n]=t,a++,6===a&&(i.needsUpdate=!0,e&&e(i))}),void 0,r)}for(let e=0;e<t.length;++e)s(e);return i}}class Rg extends Ag{constructor(t){super(t)}load(t,e,n,r){const i=new kc,o=new Cg(this.manager);return o.setCrossOrigin(this.crossOrigin),o.setPath(this.path),o.load(t,(function(n){i.image=n;const r=t.search(/\.jpe?g($|\?)/i)>0||0===t.search(/^data\:image\/jpeg/);i.format=r?1022:1023,i.needsUpdate=!0,void 0!==e&&e(i)}),n,r),i}}class kg{constructor(){this.type="Curve",this.arcLengthDivisions=200}getPoint(){return console.warn("THREE.Curve: .getPoint() not implemented."),null}getPointAt(t,e){const n=this.getUtoTmapping(t);return this.getPoint(n,e)}getPoints(t=5){const e=[];for(let n=0;n<=t;n++)e.push(this.getPoint(n/t));return e}getSpacedPoints(t=5){const e=[];for(let n=0;n<=t;n++)e.push(this.getPointAt(n/t));return e}getLength(){const t=this.getLengths();return t[t.length-1]}getLengths(t=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===t+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const e=[];let n,r=this.getPoint(0),i=0;e.push(0);for(let o=1;o<=t;o++)n=this.getPoint(o/t),i+=n.distanceTo(r),e.push(i),r=n;return this.cacheArcLengths=e,e}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(t,e){const n=this.getLengths();let r=0;const i=n.length;let o;o=e||t*n[i-1];let a,s=0,u=i-1;for(;s<=u;)if(r=Math.floor(s+(u-s)/2),a=n[r]-o,a<0)s=r+1;else{if(!(a>0)){u=r;break}u=r-1}if(r=u,n[r]===o)return r/(i-1);const c=n[r];return(r+(o-c)/(n[r+1]-c))/(i-1)}getTangent(t,e){let n=t-1e-4,r=t+1e-4;n<0&&(n=0),r>1&&(r=1);const i=this.getPoint(n),o=this.getPoint(r),a=e||(i.isVector2?new Lc:new Bc);return a.copy(o).sub(i).normalize(),a}getTangentAt(t,e){const n=this.getUtoTmapping(t);return this.getTangent(n,e)}computeFrenetFrames(t,e){const n=new Bc,r=[],i=[],o=[],a=new Bc,s=new ml;for(let e=0;e<=t;e++){const n=e/t;r[e]=this.getTangentAt(n,new Bc),r[e].normalize()}i[0]=new Bc,o[0]=new Bc;let u=Number.MAX_VALUE;const c=Math.abs(r[0].x),l=Math.abs(r[0].y),h=Math.abs(r[0].z);c<=u&&(u=c,n.set(1,0,0)),l<=u&&(u=l,n.set(0,1,0)),h<=u&&n.set(0,0,1),a.crossVectors(r[0],n).normalize(),i[0].crossVectors(r[0],a),o[0].crossVectors(r[0],i[0]);for(let e=1;e<=t;e++){if(i[e]=i[e-1].clone(),o[e]=o[e-1].clone(),a.crossVectors(r[e-1],r[e]),a.length()>Number.EPSILON){a.normalize();const t=Math.acos(wc(r[e-1].dot(r[e]),-1,1));i[e].applyMatrix4(s.makeRotationAxis(a,t))}o[e].crossVectors(r[e],i[e])}if(!0===e){let e=Math.acos(wc(i[0].dot(i[t]),-1,1));e/=t,r[0].dot(a.crossVectors(i[0],i[t]))>0&&(e=-e);for(let n=1;n<=t;n++)i[n].applyMatrix4(s.makeRotationAxis(r[n],e*n)),o[n].crossVectors(r[n],i[n])}return{tangents:r,normals:i,binormals:o}}clone(){return(new this.constructor).copy(this)}copy(t){return this.arcLengthDivisions=t.arcLengthDivisions,this}toJSON(){const t={metadata:{version:4.5,type:"Curve",generator:"Curve.toJSON"}};return t.arcLengthDivisions=this.arcLengthDivisions,t.type=this.type,t}fromJSON(t){return this.arcLengthDivisions=t.arcLengthDivisions,this}}class Og extends kg{constructor(t=0,e=0,n=1,r=1,i=0,o=2*Math.PI,a=!1,s=0){super(),this.type="EllipseCurve",this.aX=t,this.aY=e,this.xRadius=n,this.yRadius=r,this.aStartAngle=i,this.aEndAngle=o,this.aClockwise=a,this.aRotation=s}getPoint(t,e){const n=e||new Lc,r=2*Math.PI;let i=this.aEndAngle-this.aStartAngle;const o=Math.abs(i)<Number.EPSILON;for(;i<0;)i+=r;for(;i>r;)i-=r;i<Number.EPSILON&&(i=o?0:r),!0!==this.aClockwise||o||(i===r?i=-r:i-=r);const a=this.aStartAngle+t*i;let s=this.aX+this.xRadius*Math.cos(a),u=this.aY+this.yRadius*Math.sin(a);if(0!==this.aRotation){const t=Math.cos(this.aRotation),e=Math.sin(this.aRotation),n=s-this.aX,r=u-this.aY;s=n*t-r*e+this.aX,u=n*e+r*t+this.aY}return n.set(s,u)}copy(t){return super.copy(t),this.aX=t.aX,this.aY=t.aY,this.xRadius=t.xRadius,this.yRadius=t.yRadius,this.aStartAngle=t.aStartAngle,this.aEndAngle=t.aEndAngle,this.aClockwise=t.aClockwise,this.aRotation=t.aRotation,this}toJSON(){const t=super.toJSON();return t.aX=this.aX,t.aY=this.aY,t.xRadius=this.xRadius,t.yRadius=this.yRadius,t.aStartAngle=this.aStartAngle,t.aEndAngle=this.aEndAngle,t.aClockwise=this.aClockwise,t.aRotation=this.aRotation,t}fromJSON(t){return super.fromJSON(t),this.aX=t.aX,this.aY=t.aY,this.xRadius=t.xRadius,this.yRadius=t.yRadius,this.aStartAngle=t.aStartAngle,this.aEndAngle=t.aEndAngle,this.aClockwise=t.aClockwise,this.aRotation=t.aRotation,this}}Og.prototype.isEllipseCurve=!0;class Ig extends Og{constructor(t,e,n,r,i,o){super(t,e,n,n,r,i,o),this.type="ArcCurve"}}function Fg(){let t=0,e=0,n=0,r=0;function i(i,o,a,s){t=i,e=a,n=-3*i+3*o-2*a-s,r=2*i-2*o+a+s}return{initCatmullRom:function(t,e,n,r,o){i(e,n,o*(n-t),o*(r-e))},initNonuniformCatmullRom:function(t,e,n,r,o,a,s){let u=(e-t)/o-(n-t)/(o+a)+(n-e)/a,c=(n-e)/a-(r-e)/(a+s)+(r-n)/s;u*=a,c*=a,i(e,n,u,c)},calc:function(i){const o=i*i;return t+e*i+n*o+r*(o*i)}}}Ig.prototype.isArcCurve=!0;const zg=new Bc,Bg=new Fg,Ng=new Fg,Ug=new Fg;class jg extends kg{constructor(t=[],e=!1,n="centripetal",r=.5){super(),this.type="CatmullRomCurve3",this.points=t,this.closed=e,this.curveType=n,this.tension=r}getPoint(t,e=new Bc){const n=e,r=this.points,i=r.length,o=(i-(this.closed?0:1))*t;let a,s,u=Math.floor(o),c=o-u;this.closed?u+=u>0?0:(Math.floor(Math.abs(u)/i)+1)*i:0===c&&u===i-1&&(u=i-2,c=1),this.closed||u>0?a=r[(u-1)%i]:(zg.subVectors(r[0],r[1]).add(r[0]),a=zg);const l=r[u%i],h=r[(u+1)%i];if(this.closed||u+2<i?s=r[(u+2)%i]:(zg.subVectors(r[i-1],r[i-2]).add(r[i-1]),s=zg),"centripetal"===this.curveType||"chordal"===this.curveType){const t="chordal"===this.curveType?.5:.25;let e=Math.pow(a.distanceToSquared(l),t),n=Math.pow(l.distanceToSquared(h),t),r=Math.pow(h.distanceToSquared(s),t);n<1e-4&&(n=1),e<1e-4&&(e=n),r<1e-4&&(r=n),Bg.initNonuniformCatmullRom(a.x,l.x,h.x,s.x,e,n,r),Ng.initNonuniformCatmullRom(a.y,l.y,h.y,s.y,e,n,r),Ug.initNonuniformCatmullRom(a.z,l.z,h.z,s.z,e,n,r)}else"catmullrom"===this.curveType&&(Bg.initCatmullRom(a.x,l.x,h.x,s.x,this.tension),Ng.initCatmullRom(a.y,l.y,h.y,s.y,this.tension),Ug.initCatmullRom(a.z,l.z,h.z,s.z,this.tension));return n.set(Bg.calc(c),Ng.calc(c),Ug.calc(c)),n}copy(t){super.copy(t),this.points=[];for(let e=0,n=t.points.length;e<n;e++){const n=t.points[e];this.points.push(n.clone())}return this.closed=t.closed,this.curveType=t.curveType,this.tension=t.tension,this}toJSON(){const t=super.toJSON();t.points=[];for(let e=0,n=this.points.length;e<n;e++){const n=this.points[e];t.points.push(n.toArray())}return t.closed=this.closed,t.curveType=this.curveType,t.tension=this.tension,t}fromJSON(t){super.fromJSON(t),this.points=[];for(let e=0,n=t.points.length;e<n;e++){const n=t.points[e];this.points.push((new Bc).fromArray(n))}return this.closed=t.closed,this.curveType=t.curveType,this.tension=t.tension,this}}function Hg(t,e,n,r,i){const o=.5*(r-e),a=.5*(i-n),s=t*t;return(2*n-2*r+o+a)*(t*s)+(-3*n+3*r-2*o-a)*s+o*t+n}function Vg(t,e,n,r){return function(t,e){const n=1-t;return n*n*e}(t,e)+function(t,e){return 2*(1-t)*t*e}(t,n)+function(t,e){return t*t*e}(t,r)}function Gg(t,e,n,r,i){return function(t,e){const n=1-t;return n*n*n*e}(t,e)+function(t,e){const n=1-t;return 3*n*n*t*e}(t,n)+function(t,e){return 3*(1-t)*t*t*e}(t,r)+function(t,e){return t*t*t*e}(t,i)}jg.prototype.isCatmullRomCurve3=!0;class Wg extends kg{constructor(t=new Lc,e=new Lc,n=new Lc,r=new Lc){super(),this.type="CubicBezierCurve",this.v0=t,this.v1=e,this.v2=n,this.v3=r}getPoint(t,e=new Lc){const n=e,r=this.v0,i=this.v1,o=this.v2,a=this.v3;return n.set(Gg(t,r.x,i.x,o.x,a.x),Gg(t,r.y,i.y,o.y,a.y)),n}copy(t){return super.copy(t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this.v3.copy(t.v3),this}toJSON(){const t=super.toJSON();return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t.v3=this.v3.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this.v3.fromArray(t.v3),this}}Wg.prototype.isCubicBezierCurve=!0;class qg extends kg{constructor(t=new Bc,e=new Bc,n=new Bc,r=new Bc){super(),this.type="CubicBezierCurve3",this.v0=t,this.v1=e,this.v2=n,this.v3=r}getPoint(t,e=new Bc){const n=e,r=this.v0,i=this.v1,o=this.v2,a=this.v3;return n.set(Gg(t,r.x,i.x,o.x,a.x),Gg(t,r.y,i.y,o.y,a.y),Gg(t,r.z,i.z,o.z,a.z)),n}copy(t){return super.copy(t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this.v3.copy(t.v3),this}toJSON(){const t=super.toJSON();return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t.v3=this.v3.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this.v3.fromArray(t.v3),this}}qg.prototype.isCubicBezierCurve3=!0;class Xg extends kg{constructor(t=new Lc,e=new Lc){super(),this.type="LineCurve",this.v1=t,this.v2=e}getPoint(t,e=new Lc){const n=e;return 1===t?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(t).add(this.v1)),n}getPointAt(t,e){return this.getPoint(t,e)}getTangent(t,e){const n=e||new Lc;return n.copy(this.v2).sub(this.v1).normalize(),n}copy(t){return super.copy(t),this.v1.copy(t.v1),this.v2.copy(t.v2),this}toJSON(){const t=super.toJSON();return t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this}}Xg.prototype.isLineCurve=!0;class Yg extends kg{constructor(t=new Lc,e=new Lc,n=new Lc){super(),this.type="QuadraticBezierCurve",this.v0=t,this.v1=e,this.v2=n}getPoint(t,e=new Lc){const n=e,r=this.v0,i=this.v1,o=this.v2;return n.set(Vg(t,r.x,i.x,o.x),Vg(t,r.y,i.y,o.y)),n}copy(t){return super.copy(t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this}toJSON(){const t=super.toJSON();return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this}}Yg.prototype.isQuadraticBezierCurve=!0;class Zg extends kg{constructor(t=new Bc,e=new Bc,n=new Bc){super(),this.type="QuadraticBezierCurve3",this.v0=t,this.v1=e,this.v2=n}getPoint(t,e=new Bc){const n=e,r=this.v0,i=this.v1,o=this.v2;return n.set(Vg(t,r.x,i.x,o.x),Vg(t,r.y,i.y,o.y),Vg(t,r.z,i.z,o.z)),n}copy(t){return super.copy(t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this}toJSON(){const t=super.toJSON();return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this}}Zg.prototype.isQuadraticBezierCurve3=!0;class Jg extends kg{constructor(t=[]){super(),this.type="SplineCurve",this.points=t}getPoint(t,e=new Lc){const n=e,r=this.points,i=(r.length-1)*t,o=Math.floor(i),a=i-o,s=r[0===o?o:o-1],u=r[o],c=r[o>r.length-2?r.length-1:o+1],l=r[o>r.length-3?r.length-1:o+2];return n.set(Hg(a,s.x,u.x,c.x,l.x),Hg(a,s.y,u.y,c.y,l.y)),n}copy(t){super.copy(t),this.points=[];for(let e=0,n=t.points.length;e<n;e++){const n=t.points[e];this.points.push(n.clone())}return this}toJSON(){const t=super.toJSON();t.points=[];for(let e=0,n=this.points.length;e<n;e++){const n=this.points[e];t.points.push(n.toArray())}return t}fromJSON(t){super.fromJSON(t),this.points=[];for(let e=0,n=t.points.length;e<n;e++){const n=t.points[e];this.points.push((new Lc).fromArray(n))}return this}}Jg.prototype.isSplineCurve=!0;var Qg=Object.freeze({__proto__:null,ArcCurve:Ig,CatmullRomCurve3:jg,CubicBezierCurve:Wg,CubicBezierCurve3:qg,EllipseCurve:Og,LineCurve:Xg,LineCurve3:class extends kg{constructor(t=new Bc,e=new Bc){super(),this.type="LineCurve3",this.isLineCurve3=!0,this.v1=t,this.v2=e}getPoint(t,e=new Bc){const n=e;return 1===t?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(t).add(this.v1)),n}getPointAt(t,e){return this.getPoint(t,e)}copy(t){return super.copy(t),this.v1.copy(t.v1),this.v2.copy(t.v2),this}toJSON(){const t=super.toJSON();return t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this}},QuadraticBezierCurve:Yg,QuadraticBezierCurve3:Zg,SplineCurve:Jg});class Kg extends kg{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(t){this.curves.push(t)}closePath(){const t=this.curves[0].getPoint(0),e=this.curves[this.curves.length-1].getPoint(1);t.equals(e)||this.curves.push(new Xg(e,t))}getPoint(t){const e=t*this.getLength(),n=this.getCurveLengths();let r=0;for(;r<n.length;){if(n[r]>=e){const t=n[r]-e,i=this.curves[r],o=i.getLength(),a=0===o?0:1-t/o;return i.getPointAt(a)}r++}return null}getLength(){const t=this.getCurveLengths();return t[t.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const t=[];let e=0;for(let n=0,r=this.curves.length;n<r;n++)e+=this.curves[n].getLength(),t.push(e);return this.cacheLengths=t,t}getSpacedPoints(t=40){const e=[];for(let n=0;n<=t;n++)e.push(this.getPoint(n/t));return this.autoClose&&e.push(e[0]),e}getPoints(t=12){const e=[];let n;for(let r=0,i=this.curves;r<i.length;r++){const o=i[r],a=o&&o.isEllipseCurve?2*t:o&&(o.isLineCurve||o.isLineCurve3)?1:o&&o.isSplineCurve?t*o.points.length:t,s=o.getPoints(a);for(let t=0;t<s.length;t++){const r=s[t];n&&n.equals(r)||(e.push(r),n=r)}}return this.autoClose&&e.length>1&&!e[e.length-1].equals(e[0])&&e.push(e[0]),e}copy(t){super.copy(t),this.curves=[];for(let e=0,n=t.curves.length;e<n;e++){const n=t.curves[e];this.curves.push(n.clone())}return this.autoClose=t.autoClose,this}toJSON(){const t=super.toJSON();t.autoClose=this.autoClose,t.curves=[];for(let e=0,n=this.curves.length;e<n;e++){const n=this.curves[e];t.curves.push(n.toJSON())}return t}fromJSON(t){super.fromJSON(t),this.autoClose=t.autoClose,this.curves=[];for(let e=0,n=t.curves.length;e<n;e++){const n=t.curves[e];this.curves.push((new Qg[n.type]).fromJSON(n))}return this}}class $g extends Kg{constructor(t){super(),this.type="Path",this.currentPoint=new Lc,t&&this.setFromPoints(t)}setFromPoints(t){this.moveTo(t[0].x,t[0].y);for(let e=1,n=t.length;e<n;e++)this.lineTo(t[e].x,t[e].y);return this}moveTo(t,e){return this.currentPoint.set(t,e),this}lineTo(t,e){const n=new Xg(this.currentPoint.clone(),new Lc(t,e));return this.curves.push(n),this.currentPoint.set(t,e),this}quadraticCurveTo(t,e,n,r){const i=new Yg(this.currentPoint.clone(),new Lc(t,e),new Lc(n,r));return this.curves.push(i),this.currentPoint.set(n,r),this}bezierCurveTo(t,e,n,r,i,o){const a=new Wg(this.currentPoint.clone(),new Lc(t,e),new Lc(n,r),new Lc(i,o));return this.curves.push(a),this.currentPoint.set(i,o),this}splineThru(t){const e=[this.currentPoint.clone()].concat(t),n=new Jg(e);return this.curves.push(n),this.currentPoint.copy(t[t.length-1]),this}arc(t,e,n,r,i,o){const a=this.currentPoint.x,s=this.currentPoint.y;return this.absarc(t+a,e+s,n,r,i,o),this}absarc(t,e,n,r,i,o){return this.absellipse(t,e,n,n,r,i,o),this}ellipse(t,e,n,r,i,o,a,s){const u=this.currentPoint.x,c=this.currentPoint.y;return this.absellipse(t+u,e+c,n,r,i,o,a,s),this}absellipse(t,e,n,r,i,o,a,s){const u=new Og(t,e,n,r,i,o,a,s);if(this.curves.length>0){const t=u.getPoint(0);t.equals(this.currentPoint)||this.lineTo(t.x,t.y)}this.curves.push(u);const c=u.getPoint(1);return this.currentPoint.copy(c),this}copy(t){return super.copy(t),this.currentPoint.copy(t.currentPoint),this}toJSON(){const t=super.toJSON();return t.currentPoint=this.currentPoint.toArray(),t}fromJSON(t){return super.fromJSON(t),this.currentPoint.fromArray(t.currentPoint),this}}class tv extends $g{constructor(t){super(t),this.uuid=xc(),this.type="Shape",this.holes=[]}getPointsHoles(t){const e=[];for(let n=0,r=this.holes.length;n<r;n++)e[n]=this.holes[n].getPoints(t);return e}extractPoints(t){return{shape:this.getPoints(t),holes:this.getPointsHoles(t)}}copy(t){super.copy(t),this.holes=[];for(let e=0,n=t.holes.length;e<n;e++){const n=t.holes[e];this.holes.push(n.clone())}return this}toJSON(){const t=super.toJSON();t.uuid=this.uuid,t.holes=[];for(let e=0,n=this.holes.length;e<n;e++){const n=this.holes[e];t.holes.push(n.toJSON())}return t}fromJSON(t){super.fromJSON(t),this.uuid=t.uuid,this.holes=[];for(let e=0,n=t.holes.length;e<n;e++){const n=t.holes[e];this.holes.push((new $g).fromJSON(n))}return this}}class ev extends Ul{constructor(t,e=1){super(),this.type="Light",this.color=new lh(t),this.intensity=e}dispose(){}copy(t){return super.copy(t),this.color.copy(t.color),this.intensity=t.intensity,this}toJSON(t){const e=super.toJSON(t);return e.object.color=this.color.getHex(),e.object.intensity=this.intensity,void 0!==this.groundColor&&(e.object.groundColor=this.groundColor.getHex()),void 0!==this.distance&&(e.object.distance=this.distance),void 0!==this.angle&&(e.object.angle=this.angle),void 0!==this.decay&&(e.object.decay=this.decay),void 0!==this.penumbra&&(e.object.penumbra=this.penumbra),void 0!==this.shadow&&(e.object.shadow=this.shadow.toJSON()),e}}ev.prototype.isLight=!0;class nv extends ev{constructor(t,e,n){super(t,n),this.type="HemisphereLight",this.position.copy(Ul.DefaultUp),this.updateMatrix(),this.groundColor=new lh(e)}copy(t){return ev.prototype.copy.call(this,t),this.groundColor.copy(t.groundColor),this}}nv.prototype.isHemisphereLight=!0;const rv=new ml,iv=new Bc,ov=new Bc;class av{constructor(t){this.camera=t,this.bias=0,this.normalBias=0,this.radius=1,this.mapSize=new Lc(512,512),this.map=null,this.mapPass=null,this.matrix=new ml,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new af,this._frameExtents=new Lc(1,1),this._viewportCount=1,this._viewports=[new Ic(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(t){const e=this.camera,n=this.matrix;iv.setFromMatrixPosition(t.matrixWorld),e.position.copy(iv),ov.setFromMatrixPosition(t.target.matrixWorld),e.lookAt(ov),e.updateMatrixWorld(),rv.multiplyMatrices(e.projectionMatrix,e.matrixWorldInverse),this._frustum.setFromProjectionMatrix(rv),n.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),n.multiply(e.projectionMatrix),n.multiply(e.matrixWorldInverse)}getViewport(t){return this._viewports[t]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(t){return this.camera=t.camera.clone(),this.bias=t.bias,this.radius=t.radius,this.mapSize.copy(t.mapSize),this}clone(){return(new this.constructor).copy(this)}toJSON(){const t={};return 0!==this.bias&&(t.bias=this.bias),0!==this.normalBias&&(t.normalBias=this.normalBias),1!==this.radius&&(t.radius=this.radius),512===this.mapSize.x&&512===this.mapSize.y||(t.mapSize=this.mapSize.toArray()),t.camera=this.camera.toJSON(!1).object,delete t.camera.matrix,t}}class sv extends av{constructor(){super(new Kh(50,1,.5,500)),this.focus=1}updateMatrices(t){const e=this.camera,n=2*_c*t.angle*this.focus,r=this.mapSize.width/this.mapSize.height,i=t.distance||e.far;n===e.fov&&r===e.aspect&&i===e.far||(e.fov=n,e.aspect=r,e.far=i,e.updateProjectionMatrix()),super.updateMatrices(t)}copy(t){return super.copy(t),this.focus=t.focus,this}}sv.prototype.isSpotLightShadow=!0;class uv extends ev{constructor(t,e,n=0,r=Math.PI/3,i=0,o=1){super(t,e),this.type="SpotLight",this.position.copy(Ul.DefaultUp),this.updateMatrix(),this.target=new Ul,this.distance=n,this.angle=r,this.penumbra=i,this.decay=o,this.shadow=new sv}get power(){return this.intensity*Math.PI}set power(t){this.intensity=t/Math.PI}dispose(){this.shadow.dispose()}copy(t){return super.copy(t),this.distance=t.distance,this.angle=t.angle,this.penumbra=t.penumbra,this.decay=t.decay,this.target=t.target.clone(),this.shadow=t.shadow.clone(),this}}uv.prototype.isSpotLight=!0;const cv=new ml,lv=new Bc,hv=new Bc;class fv extends av{constructor(){super(new Kh(90,1,.5,500)),this._frameExtents=new Lc(4,2),this._viewportCount=6,this._viewports=[new Ic(2,1,1,1),new Ic(0,1,1,1),new Ic(3,1,1,1),new Ic(1,1,1,1),new Ic(3,0,1,1),new Ic(1,0,1,1)],this._cubeDirections=[new Bc(1,0,0),new Bc(-1,0,0),new Bc(0,0,1),new Bc(0,0,-1),new Bc(0,1,0),new Bc(0,-1,0)],this._cubeUps=[new Bc(0,1,0),new Bc(0,1,0),new Bc(0,1,0),new Bc(0,1,0),new Bc(0,0,1),new Bc(0,0,-1)]}updateMatrices(t,e=0){const n=this.camera,r=this.matrix,i=t.distance||n.far;i!==n.far&&(n.far=i,n.updateProjectionMatrix()),lv.setFromMatrixPosition(t.matrixWorld),n.position.copy(lv),hv.copy(n.position),hv.add(this._cubeDirections[e]),n.up.copy(this._cubeUps[e]),n.lookAt(hv),n.updateMatrixWorld(),r.makeTranslation(-lv.x,-lv.y,-lv.z),cv.multiplyMatrices(n.projectionMatrix,n.matrixWorldInverse),this._frustum.setFromProjectionMatrix(cv)}}fv.prototype.isPointLightShadow=!0;class dv extends ev{constructor(t,e,n=0,r=1){super(t,e),this.type="PointLight",this.distance=n,this.decay=r,this.shadow=new fv}get power(){return 4*this.intensity*Math.PI}set power(t){this.intensity=t/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(t){return super.copy(t),this.distance=t.distance,this.decay=t.decay,this.shadow=t.shadow.clone(),this}}dv.prototype.isPointLight=!0;class pv extends Qh{constructor(t=-1,e=1,n=1,r=-1,i=.1,o=2e3){super(),this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=t,this.right=e,this.top=n,this.bottom=r,this.near=i,this.far=o,this.updateProjectionMatrix()}copy(t,e){return super.copy(t,e),this.left=t.left,this.right=t.right,this.top=t.top,this.bottom=t.bottom,this.near=t.near,this.far=t.far,this.zoom=t.zoom,this.view=null===t.view?null:Object.assign({},t.view),this}setViewOffset(t,e,n,r,i,o){null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=t,this.view.fullHeight=e,this.view.offsetX=n,this.view.offsetY=r,this.view.width=i,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const t=(this.right-this.left)/(2*this.zoom),e=(this.top-this.bottom)/(2*this.zoom),n=(this.right+this.left)/2,r=(this.top+this.bottom)/2;let i=n-t,o=n+t,a=r+e,s=r-e;if(null!==this.view&&this.view.enabled){const t=(this.right-this.left)/this.view.fullWidth/this.zoom,e=(this.top-this.bottom)/this.view.fullHeight/this.zoom;i+=t*this.view.offsetX,o=i+t*this.view.width,a-=e*this.view.offsetY,s=a-e*this.view.height}this.projectionMatrix.makeOrthographic(i,o,a,s,this.near,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(t){const e=super.toJSON(t);return e.object.zoom=this.zoom,e.object.left=this.left,e.object.right=this.right,e.object.top=this.top,e.object.bottom=this.bottom,e.object.near=this.near,e.object.far=this.far,null!==this.view&&(e.object.view=Object.assign({},this.view)),e}}pv.prototype.isOrthographicCamera=!0;class mv extends av{constructor(){super(new pv(-5,5,5,-5,.5,500))}}mv.prototype.isDirectionalLightShadow=!0;class gv extends ev{constructor(t,e){super(t,e),this.type="DirectionalLight",this.position.copy(Ul.DefaultUp),this.updateMatrix(),this.target=new Ul,this.shadow=new mv}dispose(){this.shadow.dispose()}copy(t){return super.copy(t),this.target=t.target.clone(),this.shadow=t.shadow.clone(),this}}gv.prototype.isDirectionalLight=!0;class vv extends ev{constructor(t,e){super(t,e),this.type="AmbientLight"}}vv.prototype.isAmbientLight=!0;class yv extends ev{constructor(t,e,n=10,r=10){super(t,e),this.type="RectAreaLight",this.width=n,this.height=r}copy(t){return super.copy(t),this.width=t.width,this.height=t.height,this}toJSON(t){const e=super.toJSON(t);return e.object.width=this.width,e.object.height=this.height,e}}yv.prototype.isRectAreaLight=!0;class bv{constructor(){this.coefficients=[];for(let t=0;t<9;t++)this.coefficients.push(new Bc)}set(t){for(let e=0;e<9;e++)this.coefficients[e].copy(t[e]);return this}zero(){for(let t=0;t<9;t++)this.coefficients[t].set(0,0,0);return this}getAt(t,e){const n=t.x,r=t.y,i=t.z,o=this.coefficients;return e.copy(o[0]).multiplyScalar(.282095),e.addScaledVector(o[1],.488603*r),e.addScaledVector(o[2],.488603*i),e.addScaledVector(o[3],.488603*n),e.addScaledVector(o[4],n*r*1.092548),e.addScaledVector(o[5],r*i*1.092548),e.addScaledVector(o[6],.315392*(3*i*i-1)),e.addScaledVector(o[7],n*i*1.092548),e.addScaledVector(o[8],.546274*(n*n-r*r)),e}getIrradianceAt(t,e){const n=t.x,r=t.y,i=t.z,o=this.coefficients;return e.copy(o[0]).multiplyScalar(.886227),e.addScaledVector(o[1],1.023328*r),e.addScaledVector(o[2],1.023328*i),e.addScaledVector(o[3],1.023328*n),e.addScaledVector(o[4],.858086*n*r),e.addScaledVector(o[5],.858086*r*i),e.addScaledVector(o[6],.743125*i*i-.247708),e.addScaledVector(o[7],.858086*n*i),e.addScaledVector(o[8],.429043*(n*n-r*r)),e}add(t){for(let e=0;e<9;e++)this.coefficients[e].add(t.coefficients[e]);return this}addScaledSH(t,e){for(let n=0;n<9;n++)this.coefficients[n].addScaledVector(t.coefficients[n],e);return this}scale(t){for(let e=0;e<9;e++)this.coefficients[e].multiplyScalar(t);return this}lerp(t,e){for(let n=0;n<9;n++)this.coefficients[n].lerp(t.coefficients[n],e);return this}equals(t){for(let e=0;e<9;e++)if(!this.coefficients[e].equals(t.coefficients[e]))return!1;return!0}copy(t){return this.set(t.coefficients)}clone(){return(new this.constructor).copy(this)}fromArray(t,e=0){const n=this.coefficients;for(let r=0;r<9;r++)n[r].fromArray(t,e+3*r);return this}toArray(t=[],e=0){const n=this.coefficients;for(let r=0;r<9;r++)n[r].toArray(t,e+3*r);return t}static getBasisAt(t,e){const n=t.x,r=t.y,i=t.z;e[0]=.282095,e[1]=.488603*r,e[2]=.488603*i,e[3]=.488603*n,e[4]=1.092548*n*r,e[5]=1.092548*r*i,e[6]=.315392*(3*i*i-1),e[7]=1.092548*n*i,e[8]=.546274*(n*n-r*r)}}bv.prototype.isSphericalHarmonics3=!0;class _v extends ev{constructor(t=new bv,e=1){super(void 0,e),this.sh=t}copy(t){return super.copy(t),this.sh.copy(t.sh),this}fromJSON(t){return this.intensity=t.intensity,this.sh.fromArray(t.sh),this}toJSON(t){const e=super.toJSON(t);return e.object.sh=this.sh.toArray(),e}}_v.prototype.isLightProbe=!0;class xv{static decodeText(t){if("undefined"!=typeof TextDecoder)return(new TextDecoder).decode(t);let e="";for(let n=0,r=t.length;n<r;n++)e+=String.fromCharCode(t[n]);try{return decodeURIComponent(escape(e))}catch(t){return e}}static extractUrlBase(t){const e=t.lastIndexOf("/");return-1===e?"./":t.substr(0,e+1)}}class wv extends Mh{constructor(){super(),this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(t){return super.copy(t),this.instanceCount=t.instanceCount,this}clone(){return(new this.constructor).copy(this)}toJSON(){const t=super.toJSON(this);return t.instanceCount=this.instanceCount,t.isInstancedBufferGeometry=!0,t}}wv.prototype.isInstancedBufferGeometry=!0;class Sv extends ph{constructor(t,e,n,r){"number"==typeof n&&(r=n,n=!1,console.error("THREE.InstancedBufferAttribute: The constructor now expects normalized as the third argument.")),super(t,e,n),this.meshPerAttribute=r||1}copy(t){return super.copy(t),this.meshPerAttribute=t.meshPerAttribute,this}toJSON(){const t=super.toJSON();return t.meshPerAttribute=this.meshPerAttribute,t.isInstancedBufferAttribute=!0,t}}Sv.prototype.isInstancedBufferAttribute=!0;(class extends Ag{constructor(t){super(t),"undefined"==typeof createImageBitmap&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),"undefined"==typeof fetch&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"}}setOptions(t){return this.options=t,this}load(t,e,n,r){void 0===t&&(t=""),void 0!==this.path&&(t=this.path+t),t=this.manager.resolveURL(t);const i=this,o=Eg.get(t);if(void 0!==o)return i.manager.itemStart(t),setTimeout((function(){e&&e(o),i.manager.itemEnd(t)}),0),o;const a={};a.credentials="anonymous"===this.crossOrigin?"same-origin":"include",a.headers=this.requestHeader,fetch(t,a).then((function(t){return t.blob()})).then((function(t){return createImageBitmap(t,Object.assign(i.options,{colorSpaceConversion:"none"}))})).then((function(n){Eg.add(t,n),e&&e(n),i.manager.itemEnd(t)})).catch((function(e){r&&r(e),i.manager.itemError(t),i.manager.itemEnd(t)})),i.manager.itemStart(t)}}).prototype.isImageBitmapLoader=!0;class Ev{constructor(){this.type="ShapePath",this.color=new lh,this.subPaths=[],this.currentPath=null}moveTo(t,e){return this.currentPath=new $g,this.subPaths.push(this.currentPath),this.currentPath.moveTo(t,e),this}lineTo(t,e){return this.currentPath.lineTo(t,e),this}quadraticCurveTo(t,e,n,r){return this.currentPath.quadraticCurveTo(t,e,n,r),this}bezierCurveTo(t,e,n,r,i,o){return this.currentPath.bezierCurveTo(t,e,n,r,i,o),this}splineThru(t){return this.currentPath.splineThru(t),this}toShapes(t,e){function n(t){const e=[];for(let n=0,r=t.length;n<r;n++){const r=t[n],i=new tv;i.curves=r.curves,e.push(i)}return e}function r(t,e){const n=e.length;let r=!1;for(let i=n-1,o=0;o<n;i=o++){let n=e[i],a=e[o],s=a.x-n.x,u=a.y-n.y;if(Math.abs(u)>Number.EPSILON){if(u<0&&(n=e[o],s=-s,a=e[i],u=-u),t.y<n.y||t.y>a.y)continue;if(t.y===n.y){if(t.x===n.x)return!0}else{const e=u*(t.x-n.x)-s*(t.y-n.y);if(0===e)return!0;if(e<0)continue;r=!r}}else{if(t.y!==n.y)continue;if(a.x<=t.x&&t.x<=n.x||n.x<=t.x&&t.x<=a.x)return!0}}return r}const i=qm.isClockWise,o=this.subPaths;if(0===o.length)return[];if(!0===e)return n(o);let a,s,u;const c=[];if(1===o.length)return s=o[0],u=new tv,u.curves=s.curves,c.push(u),c;let l=!i(o[0].getPoints());l=t?!l:l;const h=[],f=[];let d,p,m=[],g=0;f[g]=void 0,m[g]=[];for(let e=0,n=o.length;e<n;e++)s=o[e],d=s.getPoints(),a=i(d),a=t?!a:a,a?(!l&&f[g]&&g++,f[g]={s:new tv,p:d},f[g].s.curves=s.curves,l&&g++,m[g]=[]):m[g].push({h:s,p:d[0]});if(!f[0])return n(o);if(f.length>1){let t=!1;const e=[];for(let t=0,e=f.length;t<e;t++)h[t]=[];for(let n=0,i=f.length;n<i;n++){const i=m[n];for(let o=0;o<i.length;o++){const a=i[o];let s=!0;for(let i=0;i<f.length;i++)r(a.p,f[i].p)&&(n!==i&&e.push({froms:n,tos:i,hole:o}),s?(s=!1,h[i].push(a)):t=!0);s&&h[n].push(a)}}e.length>0&&(t||(m=h))}for(let t=0,e=f.length;t<e;t++){u=f[t].s,c.push(u),p=m[t];for(let t=0,e=p.length;t<e;t++)u.holes.push(p[t].h)}return c}}class Tv{constructor(t){this.type="Font",this.data=t}generateShapes(t,e=100){const n=[],r=function(t,e,n){const r=Array.from(t),i=e/n.resolution,o=(n.boundingBox.yMax-n.boundingBox.yMin+n.underlineThickness)*i,a=[];let s=0,u=0;for(let t=0;t<r.length;t++){const e=r[t];if("\n"===e)s=0,u-=o;else{const t=Mv(e,i,s,u,n);s+=t.offsetX,a.push(t.path)}}return a}(t,e,this.data);for(let t=0,e=r.length;t<e;t++)Array.prototype.push.apply(n,r[t].toShapes());return n}}function Mv(t,e,n,r,i){const o=i.glyphs[t]||i.glyphs["?"];if(!o)return void console.error('THREE.Font: character "'+t+'" does not exists in font family '+i.familyName+".");const a=new Ev;let s,u,c,l,h,f,d,p;if(o.o){const t=o._cachedOutline||(o._cachedOutline=o.o.split(" "));for(let i=0,o=t.length;i<o;){switch(t[i++]){case"m":s=t[i++]*e+n,u=t[i++]*e+r,a.moveTo(s,u);break;case"l":s=t[i++]*e+n,u=t[i++]*e+r,a.lineTo(s,u);break;case"q":c=t[i++]*e+n,l=t[i++]*e+r,h=t[i++]*e+n,f=t[i++]*e+r,a.quadraticCurveTo(h,f,c,l);break;case"b":c=t[i++]*e+n,l=t[i++]*e+r,h=t[i++]*e+n,f=t[i++]*e+r,d=t[i++]*e+n,p=t[i++]*e+r,a.bezierCurveTo(h,f,d,p,c,l)}}}return{offsetX:o.ha*e,path:a}}Tv.prototype.isFont=!0;let Av;const Lv=function(){return void 0===Av&&(Av=new(window.AudioContext||window.webkitAudioContext)),Av};class Dv extends Ag{constructor(t){super(t)}load(t,e,n,r){const i=this,o=new Dg(this.manager);o.setResponseType("arraybuffer"),o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(t,(function(n){try{const t=n.slice(0);Lv().decodeAudioData(t,(function(t){e(t)}))}catch(e){r?r(e):console.error(e),i.manager.itemError(t)}}),n,r)}}(class extends _v{constructor(t,e,n=1){super(void 0,n);const r=(new lh).set(t),i=(new lh).set(e),o=new Bc(r.r,r.g,r.b),a=new Bc(i.r,i.g,i.b),s=Math.sqrt(Math.PI),u=s*Math.sqrt(.75);this.sh.coefficients[0].copy(o).add(a).multiplyScalar(s),this.sh.coefficients[1].copy(o).sub(a).multiplyScalar(u)}}).prototype.isHemisphereLightProbe=!0;(class extends _v{constructor(t,e=1){super(void 0,e);const n=(new lh).set(t);this.sh.coefficients[0].set(n.r,n.g,n.b).multiplyScalar(2*Math.sqrt(Math.PI))}}).prototype.isAmbientLightProbe=!0;class Cv extends Ul{constructor(t){super(),this.type="Audio",this.listener=t,this.context=t.context,this.gain=this.context.createGain(),this.gain.connect(t.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.source=null,this.sourceType="empty",this._startedAt=0,this._progress=0,this._connected=!1,this.filters=[]}getOutput(){return this.gain}setNodeSource(t){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=t,this.connect(),this}setMediaElementSource(t){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(t),this.connect(),this}setMediaStreamSource(t){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(t),this.connect(),this}setBuffer(t){return this.buffer=t,this.sourceType="buffer",this.autoplay&&this.play(),this}play(t=0){if(!0===this.isPlaying)return void console.warn("THREE.Audio: Audio is already playing.");if(!1===this.hasPlaybackControl)return void console.warn("THREE.Audio: this Audio has no playback control.");this._startedAt=this.context.currentTime+t;const e=this.context.createBufferSource();return e.buffer=this.buffer,e.loop=this.loop,e.loopStart=this.loopStart,e.loopEnd=this.loopEnd,e.onended=this.onEnded.bind(this),e.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=e,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}pause(){if(!1!==this.hasPlaybackControl)return!0===this.isPlaying&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,!0===this.loop&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this;console.warn("THREE.Audio: this Audio has no playback control.")}stop(){if(!1!==this.hasPlaybackControl)return this._progress=0,this.source.stop(),this.source.onended=null,this.isPlaying=!1,this;console.warn("THREE.Audio: this Audio has no playback control.")}connect(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(let t=1,e=this.filters.length;t<e;t++)this.filters[t-1].connect(this.filters[t]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}disconnect(){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(let t=1,e=this.filters.length;t<e;t++)this.filters[t-1].disconnect(this.filters[t]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}getFilters(){return this.filters}setFilters(t){return t||(t=[]),!0===this._connected?(this.disconnect(),this.filters=t.slice(),this.connect()):this.filters=t.slice(),this}setDetune(t){if(this.detune=t,void 0!==this.source.detune)return!0===this.isPlaying&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}getDetune(){return this.detune}getFilter(){return this.getFilters()[0]}setFilter(t){return this.setFilters(t?[t]:[])}setPlaybackRate(t){if(!1!==this.hasPlaybackControl)return this.playbackRate=t,!0===this.isPlaying&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this;console.warn("THREE.Audio: this Audio has no playback control.")}getPlaybackRate(){return this.playbackRate}onEnded(){this.isPlaying=!1}getLoop(){return!1===this.hasPlaybackControl?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop}setLoop(t){if(!1!==this.hasPlaybackControl)return this.loop=t,!0===this.isPlaying&&(this.source.loop=this.loop),this;console.warn("THREE.Audio: this Audio has no playback control.")}setLoopStart(t){return this.loopStart=t,this}setLoopEnd(t){return this.loopEnd=t,this}getVolume(){return this.gain.gain.value}setVolume(t){return this.gain.gain.setTargetAtTime(t,this.context.currentTime,.01),this}}class Pv{constructor(t,e,n){let r,i,o;switch(this.binding=t,this.valueSize=n,e){case"quaternion":r=this._slerp,i=this._slerpAdditive,o=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(6*n),this._workIndex=5;break;case"string":case"bool":r=this._select,i=this._select,o=this._setAdditiveIdentityOther,this.buffer=new Array(5*n);break;default:r=this._lerp,i=this._lerpAdditive,o=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(5*n)}this._mixBufferRegion=r,this._mixBufferRegionAdditive=i,this._setIdentity=o,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(t,e){const n=this.buffer,r=this.valueSize,i=t*r+r;let o=this.cumulativeWeight;if(0===o){for(let t=0;t!==r;++t)n[i+t]=n[t];o=e}else{o+=e;const t=e/o;this._mixBufferRegion(n,i,0,t,r)}this.cumulativeWeight=o}accumulateAdditive(t){const e=this.buffer,n=this.valueSize,r=n*this._addIndex;0===this.cumulativeWeightAdditive&&this._setIdentity(),this._mixBufferRegionAdditive(e,r,0,t,n),this.cumulativeWeightAdditive+=t}apply(t){const e=this.valueSize,n=this.buffer,r=t*e+e,i=this.cumulativeWeight,o=this.cumulativeWeightAdditive,a=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,i<1){const t=e*this._origIndex;this._mixBufferRegion(n,r,t,1-i,e)}o>0&&this._mixBufferRegionAdditive(n,r,this._addIndex*e,1,e);for(let t=e,i=e+e;t!==i;++t)if(n[t]!==n[t+e]){a.setValue(n,r);break}}saveOriginalState(){const t=this.binding,e=this.buffer,n=this.valueSize,r=n*this._origIndex;t.getValue(e,r);for(let t=n,i=r;t!==i;++t)e[t]=e[r+t%n];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){const t=3*this.valueSize;this.binding.setValue(this.buffer,t)}_setAdditiveIdentityNumeric(){const t=this._addIndex*this.valueSize,e=t+this.valueSize;for(let n=t;n<e;n++)this.buffer[n]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const t=this._origIndex*this.valueSize,e=this._addIndex*this.valueSize;for(let n=0;n<this.valueSize;n++)this.buffer[e+n]=this.buffer[t+n]}_select(t,e,n,r,i){if(r>=.5)for(let r=0;r!==i;++r)t[e+r]=t[n+r]}_slerp(t,e,n,r){zc.slerpFlat(t,e,t,e,t,n,r)}_slerpAdditive(t,e,n,r,i){const o=this._workIndex*i;zc.multiplyQuaternionsFlat(t,o,t,e,t,n),zc.slerpFlat(t,e,t,e,t,o,r)}_lerp(t,e,n,r,i){const o=1-r;for(let a=0;a!==i;++a){const i=e+a;t[i]=t[i]*o+t[n+a]*r}}_lerpAdditive(t,e,n,r,i){for(let o=0;o!==i;++o){const i=e+o;t[i]=t[i]+t[n+o]*r}}}const Rv=new RegExp("[\\[\\]\\.:\\/]","g"),kv="[^"+"\\[\\]\\.:\\/".replace("\\.","")+"]",Ov=/((?:WC+[\/:])*)/.source.replace("WC","[^\\[\\]\\.:\\/]"),Iv=/(WCOD+)?/.source.replace("WCOD",kv),Fv=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC","[^\\[\\]\\.:\\/]"),zv=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC","[^\\[\\]\\.:\\/]"),Bv=new RegExp("^"+Ov+Iv+Fv+zv+"$"),Nv=["material","materials","bones"];class Uv{constructor(t,e,n){this.path=e,this.parsedPath=n||Uv.parseTrackName(e),this.node=Uv.findNode(t,this.parsedPath.nodeName)||t,this.rootNode=t,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(t,e,n){return t&&t.isAnimationObjectGroup?new Uv.Composite(t,e,n):new Uv(t,e,n)}static sanitizeNodeName(t){return t.replace(/\s/g,"_").replace(Rv,"")}static parseTrackName(t){const e=Bv.exec(t);if(!e)throw new Error("PropertyBinding: Cannot parse trackName: "+t);const n={nodeName:e[2],objectName:e[3],objectIndex:e[4],propertyName:e[5],propertyIndex:e[6]},r=n.nodeName&&n.nodeName.lastIndexOf(".");if(void 0!==r&&-1!==r){const t=n.nodeName.substring(r+1);-1!==Nv.indexOf(t)&&(n.nodeName=n.nodeName.substring(0,r),n.objectName=t)}if(null===n.propertyName||0===n.propertyName.length)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+t);return n}static findNode(t,e){if(!e||""===e||"."===e||-1===e||e===t.name||e===t.uuid)return t;if(t.skeleton){const n=t.skeleton.getBoneByName(e);if(void 0!==n)return n}if(t.children){const n=function(t){for(let r=0;r<t.length;r++){const i=t[r];if(i.name===e||i.uuid===e)return i;const o=n(i.children);if(o)return o}return null},r=n(t.children);if(r)return r}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(t,e){t[e]=this.node[this.propertyName]}_getValue_array(t,e){const n=this.resolvedProperty;for(let r=0,i=n.length;r!==i;++r)t[e++]=n[r]}_getValue_arrayElement(t,e){t[e]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(t,e){this.resolvedProperty.toArray(t,e)}_setValue_direct(t,e){this.targetObject[this.propertyName]=t[e]}_setValue_direct_setNeedsUpdate(t,e){this.targetObject[this.propertyName]=t[e],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(t,e){this.targetObject[this.propertyName]=t[e],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(t,e){const n=this.resolvedProperty;for(let r=0,i=n.length;r!==i;++r)n[r]=t[e++]}_setValue_array_setNeedsUpdate(t,e){const n=this.resolvedProperty;for(let r=0,i=n.length;r!==i;++r)n[r]=t[e++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(t,e){const n=this.resolvedProperty;for(let r=0,i=n.length;r!==i;++r)n[r]=t[e++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(t,e){this.resolvedProperty[this.propertyIndex]=t[e]}_setValue_arrayElement_setNeedsUpdate(t,e){this.resolvedProperty[this.propertyIndex]=t[e],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(t,e){this.resolvedProperty[this.propertyIndex]=t[e],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(t,e){this.resolvedProperty.fromArray(t,e)}_setValue_fromArray_setNeedsUpdate(t,e){this.resolvedProperty.fromArray(t,e),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(t,e){this.resolvedProperty.fromArray(t,e),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(t,e){this.bind(),this.getValue(t,e)}_setValue_unbound(t,e){this.bind(),this.setValue(t,e)}bind(){let t=this.node;const e=this.parsedPath,n=e.objectName,r=e.propertyName;let i=e.propertyIndex;if(t||(t=Uv.findNode(this.rootNode,e.nodeName)||this.rootNode,this.node=t),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!t)return void console.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.");if(n){let r=e.objectIndex;switch(n){case"materials":if(!t.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!t.material.materials)return void console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);t=t.material.materials;break;case"bones":if(!t.skeleton)return void console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);t=t.skeleton.bones;for(let e=0;e<t.length;e++)if(t[e].name===r){r=e;break}break;default:if(void 0===t[n])return void console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);t=t[n]}if(void 0!==r){if(void 0===t[r])return void console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,t);t=t[r]}}const o=t[r];if(void 0===o){const n=e.nodeName;return void console.error("THREE.PropertyBinding: Trying to update property for track: "+n+"."+r+" but it wasn't found.",t)}let a=this.Versioning.None;this.targetObject=t,void 0!==t.needsUpdate?a=this.Versioning.NeedsUpdate:void 0!==t.matrixWorldNeedsUpdate&&(a=this.Versioning.MatrixWorldNeedsUpdate);let s=this.BindingType.Direct;if(void 0!==i){if("morphTargetInfluences"===r){if(!t.geometry)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);if(!t.geometry.isBufferGeometry)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences on THREE.Geometry. Use THREE.BufferGeometry instead.",this);if(!t.geometry.morphAttributes)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);void 0!==t.morphTargetDictionary[i]&&(i=t.morphTargetDictionary[i])}s=this.BindingType.ArrayElement,this.resolvedProperty=o,this.propertyIndex=i}else void 0!==o.fromArray&&void 0!==o.toArray?(s=this.BindingType.HasFromToArray,this.resolvedProperty=o):Array.isArray(o)?(s=this.BindingType.EntireArray,this.resolvedProperty=o):this.propertyName=r;this.getValue=this.GetterByBindingType[s],this.setValue=this.SetterByBindingTypeAndVersioning[s][a]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}Uv.Composite=class{constructor(t,e,n){const r=n||Uv.parseTrackName(e);this._targetGroup=t,this._bindings=t.subscribe_(e,r)}getValue(t,e){this.bind();const n=this._targetGroup.nCachedObjects_,r=this._bindings[n];void 0!==r&&r.getValue(t,e)}setValue(t,e){const n=this._bindings;for(let r=this._targetGroup.nCachedObjects_,i=n.length;r!==i;++r)n[r].setValue(t,e)}bind(){const t=this._bindings;for(let e=this._targetGroup.nCachedObjects_,n=t.length;e!==n;++e)t[e].bind()}unbind(){const t=this._bindings;for(let e=this._targetGroup.nCachedObjects_,n=t.length;e!==n;++e)t[e].unbind()}},Uv.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},Uv.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},Uv.prototype.GetterByBindingType=[Uv.prototype._getValue_direct,Uv.prototype._getValue_array,Uv.prototype._getValue_arrayElement,Uv.prototype._getValue_toArray],Uv.prototype.SetterByBindingTypeAndVersioning=[[Uv.prototype._setValue_direct,Uv.prototype._setValue_direct_setNeedsUpdate,Uv.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[Uv.prototype._setValue_array,Uv.prototype._setValue_array_setNeedsUpdate,Uv.prototype._setValue_array_setMatrixWorldNeedsUpdate],[Uv.prototype._setValue_arrayElement,Uv.prototype._setValue_arrayElement_setNeedsUpdate,Uv.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[Uv.prototype._setValue_fromArray,Uv.prototype._setValue_fromArray_setNeedsUpdate,Uv.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];(class{constructor(){this.uuid=xc(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;const t={};this._indicesByUUID=t;for(let e=0,n=arguments.length;e!==n;++e)t[arguments[e].uuid]=e;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};const e=this;this.stats={objects:{get total(){return e._objects.length},get inUse(){return this.total-e.nCachedObjects_}},get bindingsPerObject(){return e._bindings.length}}}add(){const t=this._objects,e=this._indicesByUUID,n=this._paths,r=this._parsedPaths,i=this._bindings,o=i.length;let a=void 0,s=t.length,u=this.nCachedObjects_;for(let c=0,l=arguments.length;c!==l;++c){const l=arguments[c],h=l.uuid;let f=e[h];if(void 0===f){f=s++,e[h]=f,t.push(l);for(let t=0,e=o;t!==e;++t)i[t].push(new Uv(l,n[t],r[t]))}else if(f<u){a=t[f];const s=--u,c=t[s];e[c.uuid]=f,t[f]=c,e[h]=s,t[s]=l;for(let t=0,e=o;t!==e;++t){const e=i[t],o=e[s];let a=e[f];e[f]=o,void 0===a&&(a=new Uv(l,n[t],r[t])),e[s]=a}}else t[f]!==a&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=u}remove(){const t=this._objects,e=this._indicesByUUID,n=this._bindings,r=n.length;let i=this.nCachedObjects_;for(let o=0,a=arguments.length;o!==a;++o){const a=arguments[o],s=a.uuid,u=e[s];if(void 0!==u&&u>=i){const o=i++,c=t[o];e[c.uuid]=u,t[u]=c,e[s]=o,t[o]=a;for(let t=0,e=r;t!==e;++t){const e=n[t],r=e[o],i=e[u];e[u]=r,e[o]=i}}}this.nCachedObjects_=i}uncache(){const t=this._objects,e=this._indicesByUUID,n=this._bindings,r=n.length;let i=this.nCachedObjects_,o=t.length;for(let a=0,s=arguments.length;a!==s;++a){const s=arguments[a].uuid,u=e[s];if(void 0!==u)if(delete e[s],u<i){const a=--i,s=t[a],c=--o,l=t[c];e[s.uuid]=u,t[u]=s,e[l.uuid]=a,t[a]=l,t.pop();for(let t=0,e=r;t!==e;++t){const e=n[t],r=e[a],i=e[c];e[u]=r,e[a]=i,e.pop()}}else{const i=--o,a=t[i];i>0&&(e[a.uuid]=u),t[u]=a,t.pop();for(let t=0,e=r;t!==e;++t){const e=n[t];e[u]=e[i],e.pop()}}}this.nCachedObjects_=i}subscribe_(t,e){const n=this._bindingsIndicesByPath;let r=n[t];const i=this._bindings;if(void 0!==r)return i[r];const o=this._paths,a=this._parsedPaths,s=this._objects,u=s.length,c=this.nCachedObjects_,l=new Array(u);r=i.length,n[t]=r,o.push(t),a.push(e),i.push(l);for(let n=c,r=s.length;n!==r;++n){const r=s[n];l[n]=new Uv(r,t,e)}return l}unsubscribe_(t){const e=this._bindingsIndicesByPath,n=e[t];if(void 0!==n){const r=this._paths,i=this._parsedPaths,o=this._bindings,a=o.length-1,s=o[a];e[t[a]]=n,o[n]=s,o.pop(),i[n]=i[a],i.pop(),r[n]=r[a],r.pop()}}}).prototype.isAnimationObjectGroup=!0;class jv{constructor(t,e,n=null,r=e.blendMode){this._mixer=t,this._clip=e,this._localRoot=n,this.blendMode=r;const i=e.tracks,o=i.length,a=new Array(o),s={endingStart:2400,endingEnd:2400};for(let t=0;t!==o;++t){const e=i[t].createInterpolant(null);a[t]=e,e.settings=s}this._interpolantSettings=s,this._interpolants=a,this._propertyBindings=new Array(o),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=2201,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&0!==this.timeScale&&null===this._startTime&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(t){return this._startTime=t,this}setLoop(t,e){return this.loop=t,this.repetitions=e,this}setEffectiveWeight(t){return this.weight=t,this._effectiveWeight=this.enabled?t:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(t){return this._scheduleFading(t,0,1)}fadeOut(t){return this._scheduleFading(t,1,0)}crossFadeFrom(t,e,n){if(t.fadeOut(e),this.fadeIn(e),n){const n=this._clip.duration,r=t._clip.duration,i=r/n,o=n/r;t.warp(1,i,e),this.warp(o,1,e)}return this}crossFadeTo(t,e,n){return t.crossFadeFrom(this,e,n)}stopFading(){const t=this._weightInterpolant;return null!==t&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(t)),this}setEffectiveTimeScale(t){return this.timeScale=t,this._effectiveTimeScale=this.paused?0:t,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(t){return this.timeScale=this._clip.duration/t,this.stopWarping()}syncWith(t){return this.time=t.time,this.timeScale=t.timeScale,this.stopWarping()}halt(t){return this.warp(this._effectiveTimeScale,0,t)}warp(t,e,n){const r=this._mixer,i=r.time,o=this.timeScale;let a=this._timeScaleInterpolant;null===a&&(a=r._lendControlInterpolant(),this._timeScaleInterpolant=a);const s=a.parameterPositions,u=a.sampleValues;return s[0]=i,s[1]=i+n,u[0]=t/o,u[1]=e/o,this}stopWarping(){const t=this._timeScaleInterpolant;return null!==t&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(t)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(t,e,n,r){if(!this.enabled)return void this._updateWeight(t);const i=this._startTime;if(null!==i){const r=(t-i)*n;if(r<0||0===n)return;this._startTime=null,e=n*r}e*=this._updateTimeScale(t);const o=this._updateTime(e),a=this._updateWeight(t);if(a>0){const t=this._interpolants,e=this._propertyBindings;switch(this.blendMode){case 2501:for(let n=0,r=t.length;n!==r;++n)t[n].evaluate(o),e[n].accumulateAdditive(a);break;case 2500:default:for(let n=0,i=t.length;n!==i;++n)t[n].evaluate(o),e[n].accumulate(r,a)}}}_updateWeight(t){let e=0;if(this.enabled){e=this.weight;const n=this._weightInterpolant;if(null!==n){const r=n.evaluate(t)[0];e*=r,t>n.parameterPositions[1]&&(this.stopFading(),0===r&&(this.enabled=!1))}}return this._effectiveWeight=e,e}_updateTimeScale(t){let e=0;if(!this.paused){e=this.timeScale;const n=this._timeScaleInterpolant;if(null!==n){e*=n.evaluate(t)[0],t>n.parameterPositions[1]&&(this.stopWarping(),0===e?this.paused=!0:this.timeScale=e)}}return this._effectiveTimeScale=e,e}_updateTime(t){const e=this._clip.duration,n=this.loop;let r=this.time+t,i=this._loopCount;const o=2202===n;if(0===t)return-1===i?r:o&&1==(1&i)?e-r:r;if(2200===n){-1===i&&(this._loopCount=0,this._setEndings(!0,!0,!1));t:{if(r>=e)r=e;else{if(!(r<0)){this.time=r;break t}r=0}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:t<0?-1:1})}}else{if(-1===i&&(t>=0?(i=0,this._setEndings(!0,0===this.repetitions,o)):this._setEndings(0===this.repetitions,!0,o)),r>=e||r<0){const n=Math.floor(r/e);r-=e*n,i+=Math.abs(n);const a=this.repetitions-i;if(a<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,r=t>0?e:0,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:t>0?1:-1});else{if(1===a){const e=t<0;this._setEndings(e,!e,o)}else this._setEndings(!1,!1,o);this._loopCount=i,this.time=r,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:n})}}else this.time=r;if(o&&1==(1&i))return e-r}return r}_setEndings(t,e,n){const r=this._interpolantSettings;n?(r.endingStart=2401,r.endingEnd=2401):(r.endingStart=t?this.zeroSlopeAtStart?2401:2400:2402,r.endingEnd=e?this.zeroSlopeAtEnd?2401:2400:2402)}_scheduleFading(t,e,n){const r=this._mixer,i=r.time;let o=this._weightInterpolant;null===o&&(o=r._lendControlInterpolant(),this._weightInterpolant=o);const a=o.parameterPositions,s=o.sampleValues;return a[0]=i,s[0]=e,a[1]=i+t,s[1]=n,this}}(class extends vc{constructor(t){super(),this._root=t,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(t,e){const n=t._localRoot||this._root,r=t._clip.tracks,i=r.length,o=t._propertyBindings,a=t._interpolants,s=n.uuid,u=this._bindingsByRootAndName;let c=u[s];void 0===c&&(c={},u[s]=c);for(let t=0;t!==i;++t){const i=r[t],u=i.name;let l=c[u];if(void 0!==l)o[t]=l;else{if(l=o[t],void 0!==l){null===l._cacheIndex&&(++l.referenceCount,this._addInactiveBinding(l,s,u));continue}const r=e&&e._propertyBindings[t].binding.parsedPath;l=new Pv(Uv.create(n,u,r),i.ValueTypeName,i.getValueSize()),++l.referenceCount,this._addInactiveBinding(l,s,u),o[t]=l}a[t].resultBuffer=l.buffer}}_activateAction(t){if(!this._isActiveAction(t)){if(null===t._cacheIndex){const e=(t._localRoot||this._root).uuid,n=t._clip.uuid,r=this._actionsByClip[n];this._bindAction(t,r&&r.knownActions[0]),this._addInactiveAction(t,n,e)}const e=t._propertyBindings;for(let t=0,n=e.length;t!==n;++t){const n=e[t];0==n.useCount++&&(this._lendBinding(n),n.saveOriginalState())}this._lendAction(t)}}_deactivateAction(t){if(this._isActiveAction(t)){const e=t._propertyBindings;for(let t=0,n=e.length;t!==n;++t){const n=e[t];0==--n.useCount&&(n.restoreOriginalState(),this._takeBackBinding(n))}this._takeBackAction(t)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const t=this;this.stats={actions:{get total(){return t._actions.length},get inUse(){return t._nActiveActions}},bindings:{get total(){return t._bindings.length},get inUse(){return t._nActiveBindings}},controlInterpolants:{get total(){return t._controlInterpolants.length},get inUse(){return t._nActiveControlInterpolants}}}}_isActiveAction(t){const e=t._cacheIndex;return null!==e&&e<this._nActiveActions}_addInactiveAction(t,e,n){const r=this._actions,i=this._actionsByClip;let o=i[e];if(void 0===o)o={knownActions:[t],actionByRoot:{}},t._byClipCacheIndex=0,i[e]=o;else{const e=o.knownActions;t._byClipCacheIndex=e.length,e.push(t)}t._cacheIndex=r.length,r.push(t),o.actionByRoot[n]=t}_removeInactiveAction(t){const e=this._actions,n=e[e.length-1],r=t._cacheIndex;n._cacheIndex=r,e[r]=n,e.pop(),t._cacheIndex=null;const i=t._clip.uuid,o=this._actionsByClip,a=o[i],s=a.knownActions,u=s[s.length-1],c=t._byClipCacheIndex;u._byClipCacheIndex=c,s[c]=u,s.pop(),t._byClipCacheIndex=null;delete a.actionByRoot[(t._localRoot||this._root).uuid],0===s.length&&delete o[i],this._removeInactiveBindingsForAction(t)}_removeInactiveBindingsForAction(t){const e=t._propertyBindings;for(let t=0,n=e.length;t!==n;++t){const n=e[t];0==--n.referenceCount&&this._removeInactiveBinding(n)}}_lendAction(t){const e=this._actions,n=t._cacheIndex,r=this._nActiveActions++,i=e[r];t._cacheIndex=r,e[r]=t,i._cacheIndex=n,e[n]=i}_takeBackAction(t){const e=this._actions,n=t._cacheIndex,r=--this._nActiveActions,i=e[r];t._cacheIndex=r,e[r]=t,i._cacheIndex=n,e[n]=i}_addInactiveBinding(t,e,n){const r=this._bindingsByRootAndName,i=this._bindings;let o=r[e];void 0===o&&(o={},r[e]=o),o[n]=t,t._cacheIndex=i.length,i.push(t)}_removeInactiveBinding(t){const e=this._bindings,n=t.binding,r=n.rootNode.uuid,i=n.path,o=this._bindingsByRootAndName,a=o[r],s=e[e.length-1],u=t._cacheIndex;s._cacheIndex=u,e[u]=s,e.pop(),delete a[i],0===Object.keys(a).length&&delete o[r]}_lendBinding(t){const e=this._bindings,n=t._cacheIndex,r=this._nActiveBindings++,i=e[r];t._cacheIndex=r,e[r]=t,i._cacheIndex=n,e[n]=i}_takeBackBinding(t){const e=this._bindings,n=t._cacheIndex,r=--this._nActiveBindings,i=e[r];t._cacheIndex=r,e[r]=t,i._cacheIndex=n,e[n]=i}_lendControlInterpolant(){const t=this._controlInterpolants,e=this._nActiveControlInterpolants++;let n=t[e];return void 0===n&&(n=new fg(new Float32Array(2),new Float32Array(2),1,this._controlInterpolantsResultBuffer),n.__cacheIndex=e,t[e]=n),n}_takeBackControlInterpolant(t){const e=this._controlInterpolants,n=t.__cacheIndex,r=--this._nActiveControlInterpolants,i=e[r];t.__cacheIndex=r,e[r]=t,i.__cacheIndex=n,e[n]=i}clipAction(t,e,n){const r=e||this._root,i=r.uuid;let o="string"==typeof t?wg.findByName(r,t):t;const a=null!==o?o.uuid:t,s=this._actionsByClip[a];let u=null;if(void 0===n&&(n=null!==o?o.blendMode:2500),void 0!==s){const t=s.actionByRoot[i];if(void 0!==t&&t.blendMode===n)return t;u=s.knownActions[0],null===o&&(o=u._clip)}if(null===o)return null;const c=new jv(this,o,e,n);return this._bindAction(c,u),this._addInactiveAction(c,a,i),c}existingAction(t,e){const n=e||this._root,r=n.uuid,i="string"==typeof t?wg.findByName(n,t):t,o=i?i.uuid:t,a=this._actionsByClip[o];return void 0!==a&&a.actionByRoot[r]||null}stopAllAction(){const t=this._actions;for(let e=this._nActiveActions-1;e>=0;--e)t[e].stop();return this}update(t){t*=this.timeScale;const e=this._actions,n=this._nActiveActions,r=this.time+=t,i=Math.sign(t),o=this._accuIndex^=1;for(let a=0;a!==n;++a){e[a]._update(r,t,i,o)}const a=this._bindings,s=this._nActiveBindings;for(let t=0;t!==s;++t)a[t].apply(o);return this}setTime(t){this.time=0;for(let t=0;t<this._actions.length;t++)this._actions[t].time=0;return this.update(t)}getRoot(){return this._root}uncacheClip(t){const e=this._actions,n=t.uuid,r=this._actionsByClip,i=r[n];if(void 0!==i){const t=i.knownActions;for(let n=0,r=t.length;n!==r;++n){const r=t[n];this._deactivateAction(r);const i=r._cacheIndex,o=e[e.length-1];r._cacheIndex=null,r._byClipCacheIndex=null,o._cacheIndex=i,e[i]=o,e.pop(),this._removeInactiveBindingsForAction(r)}delete r[n]}}uncacheRoot(t){const e=t.uuid,n=this._actionsByClip;for(const t in n){const r=n[t].actionByRoot[e];void 0!==r&&(this._deactivateAction(r),this._removeInactiveAction(r))}const r=this._bindingsByRootAndName[e];if(void 0!==r)for(const t in r){const e=r[t];e.restoreOriginalState(),this._removeInactiveBinding(e)}}uncacheAction(t,e){const n=this.existingAction(t,e);null!==n&&(this._deactivateAction(n),this._removeInactiveAction(n))}}).prototype._controlInterpolantsResultBuffer=new Float32Array(1);class Hv{constructor(t){"string"==typeof t&&(console.warn("THREE.Uniform: Type parameter is no longer needed."),t=arguments[1]),this.value=t}clone(){return new Hv(void 0===this.value.clone?this.value:this.value.clone())}}(class extends Tp{constructor(t,e,n=1){super(t,e),this.meshPerAttribute=n||1}copy(t){return super.copy(t),this.meshPerAttribute=t.meshPerAttribute,this}clone(t){const e=super.clone(t);return e.meshPerAttribute=this.meshPerAttribute,e}toJSON(t){const e=super.toJSON(t);return e.isInstancedInterleavedBuffer=!0,e.meshPerAttribute=this.meshPerAttribute,e}}).prototype.isInstancedInterleavedBuffer=!0;(class{constructor(t,e,n,r,i){this.buffer=t,this.type=e,this.itemSize=n,this.elementSize=r,this.count=i,this.version=0}set needsUpdate(t){!0===t&&this.version++}setBuffer(t){return this.buffer=t,this}setType(t,e){return this.type=t,this.elementSize=e,this}setItemSize(t){return this.itemSize=t,this}setCount(t){return this.count=t,this}}).prototype.isGLBufferAttribute=!0;const Vv=new Lc;class Gv{constructor(t=new Lc(1/0,1/0),e=new Lc(-1/0,-1/0)){this.min=t,this.max=e}set(t,e){return this.min.copy(t),this.max.copy(e),this}setFromPoints(t){this.makeEmpty();for(let e=0,n=t.length;e<n;e++)this.expandByPoint(t[e]);return this}setFromCenterAndSize(t,e){const n=Vv.copy(e).multiplyScalar(.5);return this.min.copy(t).sub(n),this.max.copy(t).add(n),this}clone(){return(new this.constructor).copy(this)}copy(t){return this.min.copy(t.min),this.max.copy(t.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(t){return void 0===t&&(console.warn("THREE.Box2: .getCenter() target is now required"),t=new Lc),this.isEmpty()?t.set(0,0):t.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(t){return void 0===t&&(console.warn("THREE.Box2: .getSize() target is now required"),t=new Lc),this.isEmpty()?t.set(0,0):t.subVectors(this.max,this.min)}expandByPoint(t){return this.min.min(t),this.max.max(t),this}expandByVector(t){return this.min.sub(t),this.max.add(t),this}expandByScalar(t){return this.min.addScalar(-t),this.max.addScalar(t),this}containsPoint(t){return!(t.x<this.min.x||t.x>this.max.x||t.y<this.min.y||t.y>this.max.y)}containsBox(t){return this.min.x<=t.min.x&&t.max.x<=this.max.x&&this.min.y<=t.min.y&&t.max.y<=this.max.y}getParameter(t,e){return void 0===e&&(console.warn("THREE.Box2: .getParameter() target is now required"),e=new Lc),e.set((t.x-this.min.x)/(this.max.x-this.min.x),(t.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(t){return!(t.max.x<this.min.x||t.min.x>this.max.x||t.max.y<this.min.y||t.min.y>this.max.y)}clampPoint(t,e){return void 0===e&&(console.warn("THREE.Box2: .clampPoint() target is now required"),e=new Lc),e.copy(t).clamp(this.min,this.max)}distanceToPoint(t){return Vv.copy(t).clamp(this.min,this.max).sub(t).length()}intersect(t){return this.min.max(t.min),this.max.min(t.max),this}union(t){return this.min.min(t.min),this.max.max(t.max),this}translate(t){return this.min.add(t),this.max.add(t),this}equals(t){return t.min.equals(this.min)&&t.max.equals(this.max)}}Gv.prototype.isBox2=!0;const Wv=new Bc,qv=new Bc;(class extends Ul{constructor(t){super(),this.material=t,this.render=function(){},this.hasPositions=!1,this.hasNormals=!1,this.hasColors=!1,this.hasUvs=!1,this.positionArray=null,this.normalArray=null,this.colorArray=null,this.uvArray=null,this.count=0}}).prototype.isImmediateRenderObject=!0;const Xv=new Bc,Yv=new ml,Zv=new ml;const Jv=new Float32Array(1);new Int32Array(Jv.buffer);Math.pow(2,8);const Qv=[.125,.215,.35,.446,.526,.582],Kv=5+Qv.length,$v=new hh({side:1,depthWrite:!1,depthTest:!1}),{_lodPlanes:ty,_sizeLods:ey,_sigmas:ny}=(new Gh(new qh,$v),ry());Math.sqrt(5);function ry(){const t=[],e=[],n=[];let r=8;for(let i=0;i<Kv;i++){const o=Math.pow(2,r);e.push(o);let a=1/o;i>4?a=Qv[i-8+4-1]:0==i&&(a=0),n.push(a);const s=1/(o-1),u=-s/2,c=1+s/2,l=[u,u,c,u,c,c,u,u,c,c,u,c],h=6,f=6,d=3,p=2,m=1,g=new Float32Array(d*f*h),v=new Float32Array(p*f*h),y=new Float32Array(m*f*h);for(let t=0;t<h;t++){const e=t%3*2/3-1,n=t>2?0:-1,r=[e,n,0,e+2/3,n,0,e+2/3,n+1,0,e,n,0,e+2/3,n+1,0,e,n+1,0];g.set(r,d*f*t),v.set(l,p*f*t);const i=[t,t,t,t,t,t];y.set(i,m*f*t)}const b=new Mh;b.setAttribute("position",new ph(g,d)),b.setAttribute("uv",new ph(v,p)),b.setAttribute("faceIndex",new ph(y,m)),t.push(b),r>4&&r--}return{_lodPlanes:t,_sizeLods:e,_sigmas:n}}kg.create=function(t,e){return console.log("THREE.Curve.create() has been deprecated"),t.prototype=Object.create(kg.prototype),t.prototype.constructor=t,t.prototype.getPoint=e,t},$g.prototype.fromPoints=function(t){return console.warn("THREE.Path: .fromPoints() has been renamed to .setFromPoints()."),this.setFromPoints(t)},class extends hm{constructor(t=10,e=10,n=4473924,r=8947848){n=new lh(n),r=new lh(r);const i=e/2,o=t/e,a=t/2,s=[],u=[];for(let t=0,c=0,l=-a;t<=e;t++,l+=o){s.push(-a,0,l,a,0,l),s.push(l,0,-a,l,0,a);const e=t===i?n:r;e.toArray(u,c),c+=3,e.toArray(u,c),c+=3,e.toArray(u,c),c+=3,e.toArray(u,c),c+=3}const c=new Mh;c.setAttribute("position",new vh(s,3)),c.setAttribute("color",new vh(u,3));super(c,new nm({vertexColors:!0,toneMapped:!1})),this.type="GridHelper"}}.prototype.setColors=function(){console.error("THREE.GridHelper: setColors() has been deprecated, pass them in the constructor instead.")},class extends hm{constructor(t){const e=function t(e){const n=[];e&&e.isBone&&n.push(e);for(let r=0;r<e.children.length;r++)n.push.apply(n,t(e.children[r]));return n}(t),n=new Mh,r=[],i=[],o=new lh(0,0,1),a=new lh(0,1,0);for(let t=0;t<e.length;t++){const n=e[t];n.parent&&n.parent.isBone&&(r.push(0,0,0),r.push(0,0,0),i.push(o.r,o.g,o.b),i.push(a.r,a.g,a.b))}n.setAttribute("position",new vh(r,3)),n.setAttribute("color",new vh(i,3));super(n,new nm({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0})),this.type="SkeletonHelper",this.isSkeletonHelper=!0,this.root=t,this.bones=e,this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1}updateMatrixWorld(t){const e=this.bones,n=this.geometry,r=n.getAttribute("position");Zv.copy(this.root.matrixWorld).invert();for(let t=0,n=0;t<e.length;t++){const i=e[t];i.parent&&i.parent.isBone&&(Yv.multiplyMatrices(Zv,i.matrixWorld),Xv.setFromMatrixPosition(Yv),r.setXYZ(n,Xv.x,Xv.y,Xv.z),Yv.multiplyMatrices(Zv,i.parent.matrixWorld),Xv.setFromMatrixPosition(Yv),r.setXYZ(n+1,Xv.x,Xv.y,Xv.z),n+=2)}n.getAttribute("position").needsUpdate=!0,super.updateMatrixWorld(t)}}.prototype.update=function(){console.error("THREE.SkeletonHelper: update() no longer needs to be called.")},Ag.prototype.extractUrlBase=function(t){return console.warn("THREE.Loader: .extractUrlBase() has been deprecated. Use THREE.LoaderUtils.extractUrlBase() instead."),xv.extractUrlBase(t)},Ag.Handlers={add:function(){console.error("THREE.Loader: Handlers.add() has been removed. Use LoadingManager.addHandler() instead.")},get:function(){console.error("THREE.Loader: Handlers.get() has been removed. Use LoadingManager.getHandler() instead.")}},Gv.prototype.center=function(t){return console.warn("THREE.Box2: .center() has been renamed to .getCenter()."),this.getCenter(t)},Gv.prototype.empty=function(){return console.warn("THREE.Box2: .empty() has been renamed to .isEmpty()."),this.isEmpty()},Gv.prototype.isIntersectionBox=function(t){return console.warn("THREE.Box2: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(t)},Gv.prototype.size=function(t){return console.warn("THREE.Box2: .size() has been renamed to .getSize()."),this.getSize(t)},jc.prototype.center=function(t){return console.warn("THREE.Box3: .center() has been renamed to .getCenter()."),this.getCenter(t)},jc.prototype.empty=function(){return console.warn("THREE.Box3: .empty() has been renamed to .isEmpty()."),this.isEmpty()},jc.prototype.isIntersectionBox=function(t){return console.warn("THREE.Box3: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(t)},jc.prototype.isIntersectionSphere=function(t){return console.warn("THREE.Box3: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(t)},jc.prototype.size=function(t){return console.warn("THREE.Box3: .size() has been renamed to .getSize()."),this.getSize(t)},al.prototype.empty=function(){return console.warn("THREE.Sphere: .empty() has been renamed to .isEmpty()."),this.isEmpty()},af.prototype.setFromMatrix=function(t){return console.warn("THREE.Frustum: .setFromMatrix() has been renamed to .setFromProjectionMatrix()."),this.setFromProjectionMatrix(t)},class{constructor(t=new Bc,e=new Bc){this.start=t,this.end=e}set(t,e){return this.start.copy(t),this.end.copy(e),this}copy(t){return this.start.copy(t.start),this.end.copy(t.end),this}getCenter(t){return void 0===t&&(console.warn("THREE.Line3: .getCenter() target is now required"),t=new Bc),t.addVectors(this.start,this.end).multiplyScalar(.5)}delta(t){return void 0===t&&(console.warn("THREE.Line3: .delta() target is now required"),t=new Bc),t.subVectors(this.end,this.start)}distanceSq(){return this.start.distanceToSquared(this.end)}distance(){return this.start.distanceTo(this.end)}at(t,e){return void 0===e&&(console.warn("THREE.Line3: .at() target is now required"),e=new Bc),this.delta(e).multiplyScalar(t).add(this.start)}closestPointToPointParameter(t,e){Wv.subVectors(t,this.start),qv.subVectors(this.end,this.start);const n=qv.dot(qv);let r=qv.dot(Wv)/n;return e&&(r=wc(r,0,1)),r}closestPointToPoint(t,e,n){const r=this.closestPointToPointParameter(t,e);return void 0===n&&(console.warn("THREE.Line3: .closestPointToPoint() target is now required"),n=new Bc),this.delta(n).multiplyScalar(r).add(this.start)}applyMatrix4(t){return this.start.applyMatrix4(t),this.end.applyMatrix4(t),this}equals(t){return t.start.equals(this.start)&&t.end.equals(this.end)}clone(){return(new this.constructor).copy(this)}}.prototype.center=function(t){return console.warn("THREE.Line3: .center() has been renamed to .getCenter()."),this.getCenter(t)},Dc.prototype.flattenToArrayOffset=function(t,e){return console.warn("THREE.Matrix3: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(t,e)},Dc.prototype.multiplyVector3=function(t){return console.warn("THREE.Matrix3: .multiplyVector3() has been removed. Use vector.applyMatrix3( matrix ) instead."),t.applyMatrix3(this)},Dc.prototype.multiplyVector3Array=function(){console.error("THREE.Matrix3: .multiplyVector3Array() has been removed.")},Dc.prototype.applyToBufferAttribute=function(t){return console.warn("THREE.Matrix3: .applyToBufferAttribute() has been removed. Use attribute.applyMatrix3( matrix ) instead."),t.applyMatrix3(this)},Dc.prototype.applyToVector3Array=function(){console.error("THREE.Matrix3: .applyToVector3Array() has been removed.")},Dc.prototype.getInverse=function(t){return console.warn("THREE.Matrix3: .getInverse() has been removed. Use matrixInv.copy( matrix ).invert(); instead."),this.copy(t).invert()},ml.prototype.extractPosition=function(t){return console.warn("THREE.Matrix4: .extractPosition() has been renamed to .copyPosition()."),this.copyPosition(t)},ml.prototype.flattenToArrayOffset=function(t,e){return console.warn("THREE.Matrix4: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(t,e)},ml.prototype.getPosition=function(){return console.warn("THREE.Matrix4: .getPosition() has been removed. Use Vector3.setFromMatrixPosition( matrix ) instead."),(new Bc).setFromMatrixColumn(this,3)},ml.prototype.setRotationFromQuaternion=function(t){return console.warn("THREE.Matrix4: .setRotationFromQuaternion() has been renamed to .makeRotationFromQuaternion()."),this.makeRotationFromQuaternion(t)},ml.prototype.multiplyToArray=function(){console.warn("THREE.Matrix4: .multiplyToArray() has been removed.")},ml.prototype.multiplyVector3=function(t){return console.warn("THREE.Matrix4: .multiplyVector3() has been removed. Use vector.applyMatrix4( matrix ) instead."),t.applyMatrix4(this)},ml.prototype.multiplyVector4=function(t){return console.warn("THREE.Matrix4: .multiplyVector4() has been removed. Use vector.applyMatrix4( matrix ) instead."),t.applyMatrix4(this)},ml.prototype.multiplyVector3Array=function(){console.error("THREE.Matrix4: .multiplyVector3Array() has been removed.")},ml.prototype.rotateAxis=function(t){console.warn("THREE.Matrix4: .rotateAxis() has been removed. Use Vector3.transformDirection( matrix ) instead."),t.transformDirection(this)},ml.prototype.crossVector=function(t){return console.warn("THREE.Matrix4: .crossVector() has been removed. Use vector.applyMatrix4( matrix ) instead."),t.applyMatrix4(this)},ml.prototype.translate=function(){console.error("THREE.Matrix4: .translate() has been removed.")},ml.prototype.rotateX=function(){console.error("THREE.Matrix4: .rotateX() has been removed.")},ml.prototype.rotateY=function(){console.error("THREE.Matrix4: .rotateY() has been removed.")},ml.prototype.rotateZ=function(){console.error("THREE.Matrix4: .rotateZ() has been removed.")},ml.prototype.rotateByAxis=function(){console.error("THREE.Matrix4: .rotateByAxis() has been removed.")},ml.prototype.applyToBufferAttribute=function(t){return console.warn("THREE.Matrix4: .applyToBufferAttribute() has been removed. Use attribute.applyMatrix4( matrix ) instead."),t.applyMatrix4(this)},ml.prototype.applyToVector3Array=function(){console.error("THREE.Matrix4: .applyToVector3Array() has been removed.")},ml.prototype.makeFrustum=function(t,e,n,r,i,o){return console.warn("THREE.Matrix4: .makeFrustum() has been removed. Use .makePerspective( left, right, top, bottom, near, far ) instead."),this.makePerspective(t,e,r,n,i,o)},ml.prototype.getInverse=function(t){return console.warn("THREE.Matrix4: .getInverse() has been removed. Use matrixInv.copy( matrix ).invert(); instead."),this.copy(t).invert()},Gl.prototype.isIntersectionLine=function(t){return console.warn("THREE.Plane: .isIntersectionLine() has been renamed to .intersectsLine()."),this.intersectsLine(t)},zc.prototype.multiplyVector3=function(t){return console.warn("THREE.Quaternion: .multiplyVector3() has been removed. Use is now vector.applyQuaternion( quaternion ) instead."),t.applyQuaternion(this)},zc.prototype.inverse=function(){return console.warn("THREE.Quaternion: .inverse() has been renamed to invert()."),this.invert()},pl.prototype.isIntersectionBox=function(t){return console.warn("THREE.Ray: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(t)},pl.prototype.isIntersectionPlane=function(t){return console.warn("THREE.Ray: .isIntersectionPlane() has been renamed to .intersectsPlane()."),this.intersectsPlane(t)},pl.prototype.isIntersectionSphere=function(t){return console.warn("THREE.Ray: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(t)},eh.prototype.area=function(){return console.warn("THREE.Triangle: .area() has been renamed to .getArea()."),this.getArea()},eh.prototype.barycoordFromPoint=function(t,e){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),this.getBarycoord(t,e)},eh.prototype.midpoint=function(t){return console.warn("THREE.Triangle: .midpoint() has been renamed to .getMidpoint()."),this.getMidpoint(t)},eh.prototypenormal=function(t){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),this.getNormal(t)},eh.prototype.plane=function(t){return console.warn("THREE.Triangle: .plane() has been renamed to .getPlane()."),this.getPlane(t)},eh.barycoordFromPoint=function(t,e,n,r,i){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),eh.getBarycoord(t,e,n,r,i)},eh.normal=function(t,e,n,r){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),eh.getNormal(t,e,n,r)},tv.prototype.extractAllPoints=function(t){return console.warn("THREE.Shape: .extractAllPoints() has been removed. Use .extractPoints() instead."),this.extractPoints(t)},tv.prototype.extrude=function(t){return console.warn("THREE.Shape: .extrude() has been removed. Use ExtrudeGeometry() instead."),new Zm(this,t)},tv.prototype.makeGeometry=function(t){return console.warn("THREE.Shape: .makeGeometry() has been removed. Use ShapeGeometry() instead."),new Qm(this,t)},Lc.prototype.fromAttribute=function(t,e,n){return console.warn("THREE.Vector2: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(t,e,n)},Lc.prototype.distanceToManhattan=function(t){return console.warn("THREE.Vector2: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(t)},Lc.prototype.lengthManhattan=function(){return console.warn("THREE.Vector2: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()},Bc.prototype.setEulerFromRotationMatrix=function(){console.error("THREE.Vector3: .setEulerFromRotationMatrix() has been removed. Use Euler.setFromRotationMatrix() instead.")},Bc.prototype.setEulerFromQuaternion=function(){console.error("THREE.Vector3: .setEulerFromQuaternion() has been removed. Use Euler.setFromQuaternion() instead.")},Bc.prototype.getPositionFromMatrix=function(t){return console.warn("THREE.Vector3: .getPositionFromMatrix() has been renamed to .setFromMatrixPosition()."),this.setFromMatrixPosition(t)},Bc.prototype.getScaleFromMatrix=function(t){return console.warn("THREE.Vector3: .getScaleFromMatrix() has been renamed to .setFromMatrixScale()."),this.setFromMatrixScale(t)},Bc.prototype.getColumnFromMatrix=function(t,e){return console.warn("THREE.Vector3: .getColumnFromMatrix() has been renamed to .setFromMatrixColumn()."),this.setFromMatrixColumn(e,t)},Bc.prototype.applyProjection=function(t){return console.warn("THREE.Vector3: .applyProjection() has been removed. Use .applyMatrix4( m ) instead."),this.applyMatrix4(t)},Bc.prototype.fromAttribute=function(t,e,n){return console.warn("THREE.Vector3: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(t,e,n)},Bc.prototype.distanceToManhattan=function(t){return console.warn("THREE.Vector3: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(t)},Bc.prototype.lengthManhattan=function(){return console.warn("THREE.Vector3: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()},Ic.prototype.fromAttribute=function(t,e,n){return console.warn("THREE.Vector4: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(t,e,n)},Ic.prototype.lengthManhattan=function(){return console.warn("THREE.Vector4: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()},Ul.prototype.getChildByName=function(t){return console.warn("THREE.Object3D: .getChildByName() has been renamed to .getObjectByName()."),this.getObjectByName(t)},Ul.prototype.renderDepth=function(){console.warn("THREE.Object3D: .renderDepth has been removed. Use .renderOrder, instead.")},Ul.prototype.translate=function(t,e){return console.warn("THREE.Object3D: .translate() has been removed. Use .translateOnAxis( axis, distance ) instead."),this.translateOnAxis(e,t)},Ul.prototype.getWorldRotation=function(){console.error("THREE.Object3D: .getWorldRotation() has been removed. Use THREE.Object3D.getWorldQuaternion( target ) instead.")},Ul.prototype.applyMatrix=function(t){return console.warn("THREE.Object3D: .applyMatrix() has been renamed to .applyMatrix4()."),this.applyMatrix4(t)},Object.defineProperties(Ul.prototype,{eulerOrder:{get:function(){return console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order},set:function(t){console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order=t}},useQuaternion:{get:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")},set:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")}}}),Gh.prototype.setDrawMode=function(){console.error("THREE.Mesh: .setDrawMode() has been removed. The renderer now always assumes THREE.TrianglesDrawMode. Transform your geometry via BufferGeometryUtils.toTrianglesDrawMode() if necessary.")},Object.defineProperties(Gh.prototype,{drawMode:{get:function(){return console.error("THREE.Mesh: .drawMode has been removed. The renderer now always assumes THREE.TrianglesDrawMode."),0},set:function(){console.error("THREE.Mesh: .drawMode has been removed. The renderer now always assumes THREE.TrianglesDrawMode. Transform your geometry via BufferGeometryUtils.toTrianglesDrawMode() if necessary.")}}}),Zp.prototype.initBones=function(){console.error("THREE.SkinnedMesh: initBones() has been removed.")},Kh.prototype.setLens=function(t,e){console.warn("THREE.PerspectiveCamera.setLens is deprecated. Use .setFocalLength and .filmGauge for a photographic setup."),void 0!==e&&(this.filmGauge=e),this.setFocalLength(t)},Object.defineProperties(ev.prototype,{onlyShadow:{set:function(){console.warn("THREE.Light: .onlyShadow has been removed.")}},shadowCameraFov:{set:function(t){console.warn("THREE.Light: .shadowCameraFov is now .shadow.camera.fov."),this.shadow.camera.fov=t}},shadowCameraLeft:{set:function(t){console.warn("THREE.Light: .shadowCameraLeft is now .shadow.camera.left."),this.shadow.camera.left=t}},shadowCameraRight:{set:function(t){console.warn("THREE.Light: .shadowCameraRight is now .shadow.camera.right."),this.shadow.camera.right=t}},shadowCameraTop:{set:function(t){console.warn("THREE.Light: .shadowCameraTop is now .shadow.camera.top."),this.shadow.camera.top=t}},shadowCameraBottom:{set:function(t){console.warn("THREE.Light: .shadowCameraBottom is now .shadow.camera.bottom."),this.shadow.camera.bottom=t}},shadowCameraNear:{set:function(t){console.warn("THREE.Light: .shadowCameraNear is now .shadow.camera.near."),this.shadow.camera.near=t}},shadowCameraFar:{set:function(t){console.warn("THREE.Light: .shadowCameraFar is now .shadow.camera.far."),this.shadow.camera.far=t}},shadowCameraVisible:{set:function(){console.warn("THREE.Light: .shadowCameraVisible has been removed. Use new THREE.CameraHelper( light.shadow.camera ) instead.")}},shadowBias:{set:function(t){console.warn("THREE.Light: .shadowBias is now .shadow.bias."),this.shadow.bias=t}},shadowDarkness:{set:function(){console.warn("THREE.Light: .shadowDarkness has been removed.")}},shadowMapWidth:{set:function(t){console.warn("THREE.Light: .shadowMapWidth is now .shadow.mapSize.width."),this.shadow.mapSize.width=t}},shadowMapHeight:{set:function(t){console.warn("THREE.Light: .shadowMapHeight is now .shadow.mapSize.height."),this.shadow.mapSize.height=t}}}),Object.defineProperties(ph.prototype,{length:{get:function(){return console.warn("THREE.BufferAttribute: .length has been deprecated. Use .count instead."),this.array.length}},dynamic:{get:function(){return console.warn("THREE.BufferAttribute: .dynamic has been deprecated. Use .usage instead."),35048===this.usage},set:function(){console.warn("THREE.BufferAttribute: .dynamic has been deprecated. Use .usage instead."),this.setUsage(35048)}}}),ph.prototype.setDynamic=function(t){return console.warn("THREE.BufferAttribute: .setDynamic() has been deprecated. Use .setUsage() instead."),this.setUsage(!0===t?35048:35044),this},ph.prototype.copyIndicesArray=function(){console.error("THREE.BufferAttribute: .copyIndicesArray() has been removed.")},ph.prototype.setArray=function(){console.error("THREE.BufferAttribute: .setArray has been removed. Use BufferGeometry .setAttribute to replace/resize attribute buffers")},Mh.prototype.addIndex=function(t){console.warn("THREE.BufferGeometry: .addIndex() has been renamed to .setIndex()."),this.setIndex(t)},Mh.prototype.addAttribute=function(t,e){return console.warn("THREE.BufferGeometry: .addAttribute() has been renamed to .setAttribute()."),e&&e.isBufferAttribute||e&&e.isInterleavedBufferAttribute?"index"===t?(console.warn("THREE.BufferGeometry.addAttribute: Use .setIndex() for index attribute."),this.setIndex(e),this):this.setAttribute(t,e):(console.warn("THREE.BufferGeometry: .addAttribute() now expects ( name, attribute )."),this.setAttribute(t,new ph(arguments[1],arguments[2])))},Mh.prototype.addDrawCall=function(t,e,n){void 0!==n&&console.warn("THREE.BufferGeometry: .addDrawCall() no longer supports indexOffset."),console.warn("THREE.BufferGeometry: .addDrawCall() is now .addGroup()."),this.addGroup(t,e)},Mh.prototype.clearDrawCalls=function(){console.warn("THREE.BufferGeometry: .clearDrawCalls() is now .clearGroups()."),this.clearGroups()},Mh.prototype.computeOffsets=function(){console.warn("THREE.BufferGeometry: .computeOffsets() has been removed.")},Mh.prototype.removeAttribute=function(t){return console.warn("THREE.BufferGeometry: .removeAttribute() has been renamed to .deleteAttribute()."),this.deleteAttribute(t)},Mh.prototype.applyMatrix=function(t){return console.warn("THREE.BufferGeometry: .applyMatrix() has been renamed to .applyMatrix4()."),this.applyMatrix4(t)},Object.defineProperties(Mh.prototype,{drawcalls:{get:function(){return console.error("THREE.BufferGeometry: .drawcalls has been renamed to .groups."),this.groups}},offsets:{get:function(){return console.warn("THREE.BufferGeometry: .offsets has been renamed to .groups."),this.groups}}}),Tp.prototype.setDynamic=function(t){return console.warn("THREE.InterleavedBuffer: .setDynamic() has been deprecated. Use .setUsage() instead."),this.setUsage(!0===t?35048:35044),this},Tp.prototype.setArray=function(){console.error("THREE.InterleavedBuffer: .setArray has been removed. Use BufferGeometry .setAttribute to replace/resize attribute buffers")},Zm.prototype.getArrays=function(){console.error("THREE.ExtrudeGeometry: .getArrays() has been removed.")},Zm.prototype.addShapeList=function(){console.error("THREE.ExtrudeGeometry: .addShapeList() has been removed.")},Zm.prototype.addShape=function(){console.error("THREE.ExtrudeGeometry: .addShape() has been removed.")},Ep.prototype.dispose=function(){console.error("THREE.Scene: .dispose() has been removed.")},Hv.prototype.onUpdate=function(){return console.warn("THREE.Uniform: .onUpdate() has been removed. Use object.onBeforeRender() instead."),this},Object.defineProperties(rh.prototype,{wrapAround:{get:function(){console.warn("THREE.Material: .wrapAround has been removed.")},set:function(){console.warn("THREE.Material: .wrapAround has been removed.")}},overdraw:{get:function(){console.warn("THREE.Material: .overdraw has been removed.")},set:function(){console.warn("THREE.Material: .overdraw has been removed.")}},wrapRGB:{get:function(){return console.warn("THREE.Material: .wrapRGB has been removed."),new lh}},shading:{get:function(){console.error("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead.")},set:function(t){console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=1===t}},stencilMask:{get:function(){return console.warn("THREE."+this.type+": .stencilMask has been removed. Use .stencilFuncMask instead."),this.stencilFuncMask},set:function(t){console.warn("THREE."+this.type+": .stencilMask has been removed. Use .stencilFuncMask instead."),this.stencilFuncMask=t}}}),Object.defineProperties(Jh.prototype,{derivatives:{get:function(){return console.warn("THREE.ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives},set:function(t){console.warn("THREE. ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives=t}}}),xp.prototype.clearTarget=function(t,e,n,r){console.warn("THREE.WebGLRenderer: .clearTarget() has been deprecated. Use .setRenderTarget() and .clear() instead."),this.setRenderTarget(t),this.clear(e,n,r)},xp.prototype.animate=function(t){console.warn("THREE.WebGLRenderer: .animate() is now .setAnimationLoop()."),this.setAnimationLoop(t)},xp.prototype.getCurrentRenderTarget=function(){return console.warn("THREE.WebGLRenderer: .getCurrentRenderTarget() is now .getRenderTarget()."),this.getRenderTarget()},xp.prototype.getMaxAnisotropy=function(){return console.warn("THREE.WebGLRenderer: .getMaxAnisotropy() is now .capabilities.getMaxAnisotropy()."),this.capabilities.getMaxAnisotropy()},xp.prototype.getPrecision=function(){return console.warn("THREE.WebGLRenderer: .getPrecision() is now .capabilities.precision."),this.capabilities.precision},xp.prototype.resetGLState=function(){return console.warn("THREE.WebGLRenderer: .resetGLState() is now .state.reset()."),this.state.reset()},xp.prototype.supportsFloatTextures=function(){return console.warn("THREE.WebGLRenderer: .supportsFloatTextures() is now .extensions.get( 'OES_texture_float' )."),this.extensions.get("OES_texture_float")},xp.prototype.supportsHalfFloatTextures=function(){return console.warn("THREE.WebGLRenderer: .supportsHalfFloatTextures() is now .extensions.get( 'OES_texture_half_float' )."),this.extensions.get("OES_texture_half_float")},xp.prototype.supportsStandardDerivatives=function(){return console.warn("THREE.WebGLRenderer: .supportsStandardDerivatives() is now .extensions.get( 'OES_standard_derivatives' )."),this.extensions.get("OES_standard_derivatives")},xp.prototype.supportsCompressedTextureS3TC=function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTextureS3TC() is now .extensions.get( 'WEBGL_compressed_texture_s3tc' )."),this.extensions.get("WEBGL_compressed_texture_s3tc")},xp.prototype.supportsCompressedTexturePVRTC=function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTexturePVRTC() is now .extensions.get( 'WEBGL_compressed_texture_pvrtc' )."),this.extensions.get("WEBGL_compressed_texture_pvrtc")},xp.prototype.supportsBlendMinMax=function(){return console.warn("THREE.WebGLRenderer: .supportsBlendMinMax() is now .extensions.get( 'EXT_blend_minmax' )."),this.extensions.get("EXT_blend_minmax")},xp.prototype.supportsVertexTextures=function(){return console.warn("THREE.WebGLRenderer: .supportsVertexTextures() is now .capabilities.vertexTextures."),this.capabilities.vertexTextures},xp.prototype.supportsInstancedArrays=function(){return console.warn("THREE.WebGLRenderer: .supportsInstancedArrays() is now .extensions.get( 'ANGLE_instanced_arrays' )."),this.extensions.get("ANGLE_instanced_arrays")},xp.prototype.enableScissorTest=function(t){console.warn("THREE.WebGLRenderer: .enableScissorTest() is now .setScissorTest()."),this.setScissorTest(t)},xp.prototype.initMaterial=function(){console.warn("THREE.WebGLRenderer: .initMaterial() has been removed.")},xp.prototype.addPrePlugin=function(){console.warn("THREE.WebGLRenderer: .addPrePlugin() has been removed.")},xp.prototype.addPostPlugin=function(){console.warn("THREE.WebGLRenderer: .addPostPlugin() has been removed.")},xp.prototype.updateShadowMap=function(){console.warn("THREE.WebGLRenderer: .updateShadowMap() has been removed.")},xp.prototype.setFaceCulling=function(){console.warn("THREE.WebGLRenderer: .setFaceCulling() has been removed.")},xp.prototype.allocTextureUnit=function(){console.warn("THREE.WebGLRenderer: .allocTextureUnit() has been removed.")},xp.prototype.setTexture=function(){console.warn("THREE.WebGLRenderer: .setTexture() has been removed.")},xp.prototype.setTexture2D=function(){console.warn("THREE.WebGLRenderer: .setTexture2D() has been removed.")},xp.prototype.setTextureCube=function(){console.warn("THREE.WebGLRenderer: .setTextureCube() has been removed.")},xp.prototype.getActiveMipMapLevel=function(){return console.warn("THREE.WebGLRenderer: .getActiveMipMapLevel() is now .getActiveMipmapLevel()."),this.getActiveMipmapLevel()},Object.defineProperties(xp.prototype,{shadowMapEnabled:{get:function(){return this.shadowMap.enabled},set:function(t){console.warn("THREE.WebGLRenderer: .shadowMapEnabled is now .shadowMap.enabled."),this.shadowMap.enabled=t}},shadowMapType:{get:function(){return this.shadowMap.type},set:function(t){console.warn("THREE.WebGLRenderer: .shadowMapType is now .shadowMap.type."),this.shadowMap.type=t}},shadowMapCullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")}},context:{get:function(){return console.warn("THREE.WebGLRenderer: .context has been removed. Use .getContext() instead."),this.getContext()}},vr:{get:function(){return console.warn("THREE.WebGLRenderer: .vr has been renamed to .xr"),this.xr}},gammaInput:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaInput has been removed. Set the encoding for textures via Texture.encoding instead."),!1},set:function(){console.warn("THREE.WebGLRenderer: .gammaInput has been removed. Set the encoding for textures via Texture.encoding instead.")}},gammaOutput:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaOutput has been removed. Set WebGLRenderer.outputEncoding instead."),!1},set:function(t){console.warn("THREE.WebGLRenderer: .gammaOutput has been removed. Set WebGLRenderer.outputEncoding instead."),this.outputEncoding=!0===t?3001:3e3}},toneMappingWhitePoint:{get:function(){return console.warn("THREE.WebGLRenderer: .toneMappingWhitePoint has been removed."),1},set:function(){console.warn("THREE.WebGLRenderer: .toneMappingWhitePoint has been removed.")}}}),Object.defineProperties(hp.prototype,{cullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")}},renderReverseSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")}},renderSingleSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")}}}),Object.defineProperties(Fc.prototype,{wrapS:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS},set:function(t){console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS=t}},wrapT:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT},set:function(t){console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT=t}},magFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter},set:function(t){console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter=t}},minFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter},set:function(t){console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter=t}},anisotropy:{get:function(){return console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy},set:function(t){console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy=t}},offset:{get:function(){return console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset},set:function(t){console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset=t}},repeat:{get:function(){return console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat},set:function(t){console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat=t}},format:{get:function(){return console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format},set:function(t){console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format=t}},type:{get:function(){return console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type},set:function(t){console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type=t}},generateMipmaps:{get:function(){return console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps},set:function(t){console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps=t}}}),Cv.prototype.load=function(t){console.warn("THREE.Audio: .load has been deprecated. Use THREE.AudioLoader instead.");const e=this;return(new Dv).load(t,(function(t){e.setBuffer(t)})),this},class{constructor(t,e=2048){this.analyser=t.context.createAnalyser(),this.analyser.fftSize=e,this.data=new Uint8Array(this.analyser.frequencyBinCount),t.getOutput().connect(this.analyser)}getFrequencyData(){return this.analyser.getByteFrequencyData(this.data),this.data}getAverageFrequency(){let t=0;const e=this.getFrequencyData();for(let n=0;n<e.length;n++)t+=e[n];return t/e.length}}.prototype.getData=function(){return console.warn("THREE.AudioAnalyser: .getData() is now .getFrequencyData()."),this.getFrequencyData()},$h.prototype.updateCubeMap=function(t,e){return console.warn("THREE.CubeCamera: .updateCubeMap() is now .update()."),this.update(t,e)},$h.prototype.clear=function(t,e,n,r){return console.warn("THREE.CubeCamera: .clear() is now .renderTarget.clear()."),this.renderTarget.clear(t,e,n,r)},Pc.crossOrigin=void 0,Pc.loadTexture=function(t,e,n,r){console.warn("THREE.ImageUtils.loadTexture has been deprecated. Use THREE.TextureLoader() instead.");const i=new Rg;i.setCrossOrigin(this.crossOrigin);const o=i.load(t,n,void 0,r);return e&&(o.mapping=e),o},Pc.loadTextureCube=function(t,e,n,r){console.warn("THREE.ImageUtils.loadTextureCube has been deprecated. Use THREE.CubeTextureLoader() instead.");const i=new Pg;i.setCrossOrigin(this.crossOrigin);const o=i.load(t,n,void 0,r);return e&&(o.mapping=e),o},Pc.loadCompressedTexture=function(){console.error("THREE.ImageUtils.loadCompressedTexture has been removed. Use THREE.DDSLoader instead.")},Pc.loadCompressedTextureCube=function(){console.error("THREE.ImageUtils.loadCompressedTextureCube has been removed. Use THREE.DDSLoader instead.")};function iy(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:"128"}})),"undefined"!=typeof window&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__="128");var oy=function(){function t(e){var n,r,i,o=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),i=function(t){o.container.rotation.x=.2*(t.clientY/o.size.height-.5),o.container.rotation.y=.2*(t.clientX/o.size.width-.5)},(r="handleMove")in(n=this)?Object.defineProperty(n,r,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[r]=i,this.render=this.render.bind(this),this.resize=this.resize.bind(this),this.tick=this.tick.bind(this),this.requestTick=this.requestTick.bind(this),this.stopTick=this.stopTick.bind(this),this.$canvas=e,this.rotation=0,this.ticker=!1}var e,n,r;return e=t,(n=[{key:"attach",value:function(){var t;this.scene=new Ep,this.scene.background=new lh(16777215),this.renderer=new xp({antialias:!0,canvas:this.$canvas}),this.renderer.setPixelRatio(window.devicePixelRatio),this.size=this.$canvas.getBoundingClientRect(),this.renderer.setSize(this.size.width,this.size.height),this.renderer.clearColor(16777215),this.camera=new Kh(30,1,1,1e4),this.camera.position.set(0,0,10),this.globe=new Ul,this.material=new hh({color:15658734});for(var e=0;e<12;e++)(t=new Gh(new Km(2,.005,4,50),this.material)).rotation.y=e/12*Math.PI*2,this.globe.add(t);for(var n=0;n<6;n++){var r=2.14-Math.abs(Math.asin(1-(n+.5)/3));(t=new Gh(new Km(r,.005,4,50),this.material)).rotation.x=.5*Math.PI,t.position.y=2-(n+.5)/6*4,this.globe.add(t)}this.container=new Ul,this.container.add(this.globe),this.scene.add(this.container),this.t=0}},{key:"detach",value:function(){this.opened&&this.close()}},{key:"open",value:function(){this.opened||(this.resize(),this.requestTick(),this.opened=!0,window.addEventListener("mousemove",this.handleMove))}},{key:"close",value:function(){this.opened&&(this.stopTick(),this.opened=!1,window.removeEventListener("mousemove",this.handleMove))}},{key:"render",value:function(){this.renderer.render(this.scene,this.camera)}},{key:"tick",value:function(){this.ticker&&(this.globe.rotation.y+=.002,requestAnimationFrame(this.tick),this.render())}},{key:"requestTick",value:function(){this.ticker=!0,this.tick()}},{key:"stopTick",value:function(){this.ticker=!1}},{key:"resize",value:function(){this.size=this.$canvas.getBoundingClientRect(),this.camera.aspect=this.size.width/this.size.height,this.camera.updateProjectionMatrix(),this.renderer.setSize(this.size.width,this.size.height)}}])&&iy(e.prototype,n),r&&iy(e,r),t}();function ay(t){return(ay="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function sy(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function uy(t,e){return(uy=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function cy(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=fy(t);if(e){var i=fy(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return ly(this,n)}}function ly(t,e){return!e||"object"!==ay(e)&&"function"!=typeof e?hy(t):e}function hy(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function fy(t){return(fy=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var dy=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&uy(t,e)}(o,t);var e,n,r,i=cy(o);function o(t,e){var n,r,a,s;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o),n=i.call(this,t,e),r=hy(n),s=function(){n.globe.resize()},(a="handleResize")in r?Object.defineProperty(r,a,{value:s,enumerable:!0,configurable:!0,writable:!0}):r[a]=s,n.canvas=n.element.querySelector(".globe-canvas"),n.globe=new oy(n.canvas),n}return e=o,(n=[{key:"attach",value:function(){var t=this;this.globe.attach(),this.viewport.on("resize",this.handleResize),this.tl=Na.create({trigger:this.element,onEnter:function(){t.globe.open()},onEnterBack:function(){t.globe.open()},onLeave:function(){t.globe.close()},onLeaveBack:function(){t.globe.close()}})}},{key:"detach",value:function(){this.globe.detach(),this.viewport.off("resize",this.handleResize)}}])&&sy(e.prototype,n),r&&sy(e,r),o}(Bu);function py(t){return(py="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function my(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function gy(t,e){return(gy=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function vy(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=_y(t);if(e){var i=_y(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return yy(this,n)}}function yy(t,e){return!e||"object"!==py(e)&&"function"!=typeof e?by(t):e}function by(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function _y(t){return(_y=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var xy=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&gy(t,e)}(o,t);var e,n,r,i=vy(o);function o(t,e){var n,r,a,s;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o),n=i.call(this,t,e),r=by(n),s=function(){n.ticking&&(n.nextTl&&n.nextTl.clear(),n.nextTl=qr.timeline(),n.nextTl.fromTo(n.slides[n.id].timer,{strokeDashoffset:56.5},{strokeDashoffset:0,duration:5,ease:"power.inOut"},0),n.nextTl.add((function(){n.ticking&&(n.snapTo(n.id+1),n.tick())}),5))},(a="tick")in r?Object.defineProperty(r,a,{value:s,enumerable:!0,configurable:!0,writable:!0}):r[a]=s,n.handleMove=n.handleMove.bind(by(n)),n.handleResize=n.handleResize.bind(by(n)),n.handleUp=n.handleUp.bind(by(n)),n.handleDown=n.handleDown.bind(by(n)),n.container=n.element.querySelector(".container"),n.dots=n.element.querySelector(".dots"),n.slides=Array.from(n.element.querySelectorAll(".item")).map((function(t,e){return{elem:t,n:e,img:t.querySelector(".image"),w:1,dot:null,event:null,timer:null}})),n.slides.length>1&&n.slides.forEach((function(t,e){var r=document.createElement("div");r.classList.add("dot"),0==e&&r.classList.add("active"),r.innerHTML='<span><svg viewport="0 0 20 20" preserveAspectRatio="xMidYMid meet"><circle cx="10" cy="10" r="9" class="circle-front"/><circle cx="10" cy="10" r="9" class="circle-back"/></svg></span>',n.dots.appendChild(r),t.event=n.handleDotClick.bind(by(n),t),t.dot=r,t.timer=r.querySelector(".circle-front")})),n.mouse=0,n.start=0,n.max=0,n.current=0,n.id=0,n.last=0,n.nextTl=null,n.scrollTl=null,n.ticking=!1,n}return e=o,(n=[{key:"attach",value:function(){var t=this;this.slides.length<=1||(this.handleResize(),this.container.addEventListener("mousedown",this.handleDown),this.container.addEventListener("touchstart",this.handleDown,{passive:!0}),this.viewport.on("resize",this.handleResize),this.scrollTl=Na.create({trigger:this.element,onEnter:function(){t.requestTick()},onEnterBack:function(){t.requestTick()},onLeave:function(){t.stopTick()},onLeaveBack:function(){t.stopTick()}}),this.slides.forEach((function(t){t.dot.addEventListener("click",t.event)})))}},{key:"detach",value:function(){this.slides.length<=1||(this.container.removeEventListener("mousedown",this.handleDown),this.container.removeEventListener("touchstart",this.handleDown),this.viewport.off("resize",this.handleResize),this.scrollTl.kill(),this.slides.forEach((function(t){t.dot.removeEventListener("click",t.event)})))}},{key:"handleResize",value:function(){var t=this;this.max=0,this.slides.forEach((function(e){e.w=e.elem.getBoundingClientRect().width,t.max+=e.w+(t.viewport.medias.desktop?60:0)})),this.max=this.max-this.viewport.width,this.handleMove()}},{key:"handleMove",value:function(t){this.mouse=this.getTouchX(t),this.moveTo(this.mouse-this.start)}},{key:"moveTo",value:function(t){this.current=Math.max(Math.min(t,0),-this.max),this.container.style.transform="translate3d("+this.current+"px, 0, 0)",this.id=-Math.round(this.current/this.max*(this.slides.length-1)),this.last!=this.id&&(this.slides[this.last].dot.classList.remove("active"),this.slides[this.id].dot.classList.add("active"),this.last=this.id)}},{key:"snapTo",value:function(t){t%=this.slides.length,this.moveTo(-t*this.max/(this.slides.length-1))}},{key:"handleDown",value:function(t){this.stopTick(),this.start=this.getTouchX(t)-this.current,this.container.classList.add("no-anim"),this.container.addEventListener("mousemove",this.handleMove),this.container.addEventListener("touchmove",this.handleMove,{passive:!0}),window.addEventListener("mouseup",this.handleUp),window.addEventListener("touchend",this.handleUp,{passive:!0})}},{key:"handleUp",value:function(t){this.requestTick(),this.container.classList.remove("no-anim"),this.container.removeEventListener("mousemove",this.handleMove),this.container.removeEventListener("touchmove",this.handleMove),window.removeEventListener("mouseup",this.handleUp),window.removeEventListener("touchend",this.handleUp),this.moveTo(Math.round(this.current/this.max*(this.slides.length-1))*this.max/(this.slides.length-1))}},{key:"requestTick",value:function(){this.ticking=!0,this.tick()}},{key:"stopTick",value:function(){this.nextTl&&this.nextTl.clear(),this.ticking=!1}},{key:"handleDotClick",value:function(t){var e=this;this.stopTick(),this.moveTo(-t.n*this.max/(this.slides.length-1)),setTimeout((function(){e.requestTick()}),400)}},{key:"getTouchX",value:function(t){return t?t.clientX?t.clientX:t.changedTouches&&t.changedTouches.length?t.changedTouches[0].clientX:0:0}}])&&my(e.prototype,n),r&&my(e,r),o}(Bu);function wy(t){return(wy="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Sy(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Ey(t,e){return(Ey=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Ty(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Ly(t);if(e){var i=Ly(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return My(this,n)}}function My(t,e){return!e||"object"!==wy(e)&&"function"!=typeof e?Ay(t):e}function Ay(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Ly(t){return(Ly=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Dy=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Ey(t,e)}(o,t);var e,n,r,i=Ty(o);function o(t,e){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o),(n=i.call(this,t,e)).handleMove=n.handleMove.bind(Ay(n)),n.handleResize=n.handleResize.bind(Ay(n)),n.handleUp=n.handleUp.bind(Ay(n)),n.handleDown=n.handleDown.bind(Ay(n)),n.gallery=n.element.querySelector(".gallery"),n.scrollbar=n.element.querySelector(".gallery-scrollbar .inner"),n.slides=Array.from(n.element.querySelectorAll(".item")).map((function(t){return{elem:t,img:t.querySelector(".image"),w:1}})),n.mouse=0,n.start=0,n.max=0,n.current=0,n}return e=o,(n=[{key:"open",value:function(){}},{key:"close",value:function(){}},{key:"attach",value:function(){this.handleResize(),this.element.addEventListener("mousedown",this.handleDown),this.element.addEventListener("touchstart",this.handleDown,{passive:!0}),this.viewport.on("resize",this.handleResize)}},{key:"detach",value:function(){this.element.removeEventListener("mousedown",this.handleDown),this.element.removeEventListener("touchstart",this.handleDown),this.viewport.off("resize",this.handleResize)}},{key:"handleResize",value:function(){var t=this;this.max=0,this.slides.forEach((function(e){e.w=e.elem.getBoundingClientRect().width,t.max+=e.w+20})),this.max=this.max-this.viewport.width,this.handleMove()}},{key:"handleMove",value:function(t){this.mouse=this.getTouchX(t),this.current=Math.max(Math.min(this.mouse-this.start,0),-this.max),this.gallery.style.transform="translate3d("+this.current+"px, 0, 0)"}},{key:"handleDown",value:function(t){this.start=this.getTouchX(t)-this.current,this.element.addEventListener("mousemove",this.handleMove),this.element.addEventListener("touchmove",this.handleMove,{passive:!0}),window.addEventListener("mouseup",this.handleUp),window.addEventListener("touchend",this.handleUp,{passive:!0})}},{key:"handleUp",value:function(t){this.element.removeEventListener("mousemove",this.handleMove),this.element.removeEventListener("touchmove",this.handleMove),window.removeEventListener("mouseup",this.handleUp),window.removeEventListener("touchend",this.handleUp)}},{key:"getTouchX",value:function(t){return t?t.clientX?t.clientX:t.changedTouches&&t.changedTouches.length?t.changedTouches[0].clientX:0:0}}])&&Sy(e.prototype,n),r&&Sy(e,r),o}(Bu);function Cy(t){return(Cy="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Py(t,e,n,r,i,o,a){try{var s=t[o](a),u=s.value}catch(t){return void n(t)}s.done?e(u):Promise.resolve(u).then(r,i)}function Ry(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function ky(t,e){return(ky=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Oy(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=zy(t);if(e){var i=zy(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Iy(this,n)}}function Iy(t,e){return!e||"object"!==Cy(e)&&"function"!=typeof e?Fy(t):e}function Fy(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function zy(t){return(zy=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function By(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var Ny=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&ky(t,e)}(u,t);var e,n,r,i,o,s=Oy(u);function u(t,e){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,u),By(Fy(n=s.call(this,t,e)),"handleResize",(function(){var t=n.offices.ul.style.height;n.offices.ul.style.height="",n.offices.height=n.offices.ul.getBoundingClientRect().height-78,n.offices.ul.style.height=t,t=n.titles.ul.style.height,n.titles.ul.style.height="",n.titles.height=n.titles.ul.getBoundingClientRect().height-78,n.titles.ul.style.height=t})),By(Fy(n),"handleMedia",(function(){n.st&&n.st.kill(),n.viewport.medias.desktop&&(n.st=Na.create({trigger:n.grid,start:"top +=100px",end:"bottom center",pin:n.filters,pinSpacing:!1}))})),By(Fy(n),"toggleFilter",(function(t,e){n.viewport.medias.desktop&&(t.opened?n.closeFilter(t):(n.closeFilter(n.offices),n.closeFilter(n.titles),n.openFilter(t),e.preventDefault(),e.stopPropagation()))})),By(Fy(n),"focusout",(function(t){n.offices.opened&&n.closeFilter(n.offices),n.titles.opened&&n.closeFilter(n.titles)})),n.query=n.query.bind(Fy(n)),n.loadMore=n.loadMore.bind(Fy(n)),n.seachByName=n.seachByName.bind(Fy(n)),n.search=n.element.querySelector(".search>input"),n.grid=n.element.querySelector(".grid>.content"),n.more=n.element.querySelector(".link-plus"),n.form=n.element.querySelector(".filters-forms"),n.offices={elem:n.element.querySelector(".offices"),content:"",height:1,opened:!0},n.titles={elem:n.element.querySelector(".titles"),content:"",height:1,opened:!0},n.lastUse="null",n.filters=document.querySelector(".filters"),n.offices.changeByList=n.changeByList.bind(Fy(n),n.offices),n.offices.changeBySelect=n.changeBySelect.bind(Fy(n),n.offices),n.offices.toggle=n.toggleFilter.bind(Fy(n),n.offices),n.titles.changeByList=n.changeByList.bind(Fy(n),n.titles),n.titles.changeBySelect=n.changeBySelect.bind(Fy(n),n.titles),n.titles.toggle=n.toggleFilter.bind(Fy(n),n.titles),n.offices.value=n.offices.elem.querySelector(".value"),n.titles.value=n.titles.elem.querySelector(".value"),n.offices.select=n.offices.elem.querySelector("select"),n.titles.select=n.titles.elem.querySelector("select"),n.offices.ul=n.offices.elem.querySelector("ul"),n.titles.ul=n.titles.elem.querySelector("ul"),n.offices.li=Array.from(n.offices.ul.querySelectorAll("li")),n.titles.li=Array.from(n.titles.ul.querySelectorAll("li")),n.getLawyerIds(),n}return e=u,(n=[{key:"attach",value:function(){var t=this;this.search.addEventListener("keyup",this.seachByName,{useCapture:!0}),this.form.addEventListener("submit",this.seachByName,{useCapture:!0}),this.offices.li.forEach((function(e){e.addEventListener("click",t.offices.changeByList)})),this.titles.li.forEach((function(e){e.addEventListener("click",t.titles.changeByList)})),this.offices.elem.addEventListener("click",this.offices.toggle,{useCapture:!0}),this.titles.elem.addEventListener("click",this.titles.toggle,{useCapture:!0}),this.offices.select.addEventListener("change",this.offices.changeBySelect),this.titles.select.addEventListener("change",this.titles.changeBySelect),this.more.addEventListener("click",this.loadMore),this.viewport.on("resize",this.handleResize),this.viewport.on("media",this.handleMedia),this.toggleFilter(this.offices),this.toggleFilter(this.titles),window.addEventListener("click",this.focusout),this.handleMedia(),this.search.focus()}},{key:"detach",value:function(){var t=this;this.search.removeEventListener("keyup",this.seachByName),this.offices.li.forEach((function(e){e.removeEventListener("click",t.titles.changeByList)})),this.titles.li.forEach((function(e){e.removeEventListener("click",t.titles.changeByList)})),this.offices.elem.removeEventListener("click",this.offices.toggle),this.titles.elem.removeEventListener("click",this.titles.toggle),this.offices.select.removeEventListener("change",this.offices.changeBySelect),this.titles.select.removeEventListener("change",this.titles.changeBySelect),this.more.removeEventListener("click",this.loadMore),this.viewport.off("resize",this.handleResize),this.viewport.off("media",this.handleMedia),window.removeEventListener("click",this.focusout),this.st&&this.st.kill()}},{key:"openFilter",value:function(t){t.opened||(t.ul.style.height=Math.min(Math.min(t.height,400),this.viewport.height-284)+"px",t.elem.classList.add("active"),t.opened=!0)}},{key:"closeFilter",value:function(t){t.opened&&(t.ul.style.height="0px",t.elem.classList.remove("active"),qr.to(t.ul,{scrollTo:0,duration:.5,ease:"power2.out"}),t.opened=!1)}},{key:"getLawyerIds",value:function(){this.lawyers=Array.from(this.grid.querySelectorAll(".item")),this.lawyerIds=this.lawyers.map((function(t){return t.getAttribute("data-id")}))}},{key:"seachByName",value:function(t){t.stopPropagation(),t.preventDefault(),this.query(!0),this.lastUse="search"}},{key:"changeByList",value:function(t,e){t.content=t.select.value=e.srcElement.getAttribute("data-value"),t.value.innerHTML=e.srcElement.innerHTML,this.query(!0),this.lastUse="list"}},{key:"changeBySelect",value:function(t){t.content=t.select.value,t.value.innerHTML=t.select.querySelector('option[value="'+t.content+'"]').innerHTML,this.query(!0)}},{key:"loadMore",value:function(){this.query()}},{key:"query",value:(i=a.a.mark((function t(){var e,n,r,i=arguments;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=i.length>0&&void 0!==i[0]&&i[0],t.next=3,fetch(ADMIN_AJAX_URL,{method:"POST",credentials:"include",headers:{"Content-type":"application/x-www-form-urlencoded"},body:new URLSearchParams({action:"capstan_filter_lawyers",search:this.search.value,office:this.offices.content,status:this.titles.content,notin:e?"":this.lawyerIds}).toString()});case 3:return n=t.sent,t.next=6,n.json();case 6:r=t.sent,this.update(r,e);case 8:case"end":return t.stop()}}),t,this)})),o=function(){var t=this,e=arguments;return new Promise((function(n,r){var o=i.apply(t,e);function a(t){Py(o,n,r,a,s,"next",t)}function s(t){Py(o,n,r,a,s,"throw",t)}a(void 0)}))},function(){return o.apply(this,arguments)})},{key:"update",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];n&&(this.grid.innerHTML=""),t.lawyers.forEach((function(t){var n='\n\t\t\t\t<div class="item" data-id="'.concat(t.ID,'">\n\t\t\t\t\t<div class="image">\n\t\t\t\t\t\t<picture>\n\t\t\t\t\t\t\t<img src="').concat(t.image,'" alt="').concat(t.alt,'" draggable="false">\n\t\t\t\t\t\t</picture>\n\t\t\t\t\t\t<div class="overlay">\n\t\t\t\t\t\t\t<div class="border"></div>\n\t\t\t\t\t\t\t<div class="inner">\n\t\t\t\t\t\t\t\t<div class="work-for-container">\n\t\t\t\t\t\t\t\t\t<div class="work-for">Bureau</div>\n\t\t\t\t\t\t\t\t\t<a href="').concat(t.officeUrl,'" class="office">').concat(t.officeName,'</a>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div class="icons">');t.socials.phone&&(n+='<a href="tel:'.concat(t.socials.phone.replaceAll(" ",""),'"><i class="icon-phone"></i></a>')),t.socials.mail&&(n+='<a href="mailto:'.concat(t.socials.mail,'"><i class="icon-mail"></i></a>')),t.socials.linkedin&&(n+='<a href="'.concat(t.socials.linkedin.url,'" target="').concat(t.socials.linkedin.target,'"><i class="icon-in"></i></a>')),n+='</div>\n\t\t\t\t\t\t\t\t<a href="'.concat(t.url,'" class="lawyer-cta">VOIR LE PROFIL<i class="icon-right"></i></a>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<a href="').concat(t.url,'">\n\t\t\t\t\t\t<div class="subtitle">').concat(t.title,'</div>\n\t\t\t\t\t\t<div class="job">').concat(t.status,"</div>\n\t\t\t\t\t</a>\n\t\t\t\t</div>"),e.grid.innerHTML+=n})),this.getLawyerIds(),this.lawyers.length<parseInt(t.total)?this.more.style.display="block":this.more.style.display="none",this.handleMedia(),"search"==this.lastUse&&this.search.focus()}}])&&Ry(e.prototype,n),r&&Ry(e,r),u}(Bu);function Uy(t){return(Uy="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function jy(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Hy(t,e){return(Hy=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Vy(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=qy(t);if(e){var i=qy(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Gy(this,n)}}function Gy(t,e){return!e||"object"!==Uy(e)&&"function"!=typeof e?Wy(t):e}function Wy(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function qy(t){return(qy=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Xy=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Hy(t,e)}(o,t);var e,n,r,i=Vy(o);function o(t,e){var n,r,a,s;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o),n=i.call(this,t,e),r=Wy(n),s=function(){n.playing?n.pause():n.play()},(a="handleMediaCLick")in r?Object.defineProperty(r,a,{value:s,enumerable:!0,configurable:!0,writable:!0}):r[a]=s,n.media=n.element.querySelector(".media"),n.video=n.element.querySelector(".video"),n.playing=!1,n.ticking=!1,n}return e=o,(n=[{key:"attach",value:function(){this.media.addEventListener("click",this.handleMediaCLick)}},{key:"detach",value:function(){this.media.removeEventListener("click",this.handleMediaCLick)}},{key:"play",value:function(){this.video.play(),this.video.setAttribute("controls",""),this.playing=!0,this.media.classList.add("playing")}},{key:"pause",value:function(){this.video.pause(),this.video.removeAttribute("controls"),this.playing=!1,this.media.classList.remove("playing")}},{key:"tick",value:function(){this.ticking&&(this.video.currentTime>=this.video.duration&&this.pause(),requestAnimationFrame(this.tick))}},{key:"requestTick",value:function(){this.ticking||(this.ticking=!0,this.tick())}},{key:"stopTick",value:function(){this.ticking=!1}}])&&jy(e.prototype,n),r&&jy(e,r),o}(Bu);function Yy(t){return(Yy="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Zy(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Jy(t,e){return(Jy=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Qy(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=tb(t);if(e){var i=tb(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Ky(this,n)}}function Ky(t,e){return!e||"object"!==Yy(e)&&"function"!=typeof e?$y(t):e}function $y(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function tb(t){return(tb=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var eb=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Jy(t,e)}(o,t);var e,n,r,i=Qy(o);function o(t,e){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o),(n=i.call(this,t,e)).resize=n.resize.bind($y(n)),n.hours=Array.from(n.element.querySelectorAll(".hours")).map((function(t){return{elem:t,btn:t.querySelector(".info"),arrow:t.querySelector(".icon-arrow-bottom"),content:t.querySelector(".all-dates"),toggle:null,opened:!1,height:1}})),n.hours.forEach((function(t){t.toggle=n.handleHoursClick.bind($y(n),t)})),n}return e=o,(n=[{key:"attach",value:function(){this.hours.forEach((function(t){t.btn.addEventListener("click",t.toggle)})),this.viewport.on("resize",this.resize)}},{key:"detach",value:function(){this.hours.forEach((function(t){t.btn.removeEventListener("click",t.toggle)})),this.viewport.off("resize",this.resize)}},{key:"handleHoursClick",value:function(t,e){t.opened?(t.content.style.height="0px",t.arrow.style.transform=""):(t.content.style.height=t.height+"px",t.arrow.style.transform="rotate(180deg)"),t.opened=!t.opened}},{key:"resize",value:function(){this.hours.forEach((function(t){t.content.style.height="",t.height=t.content.getBoundingClientRect().height,t.opened?t.content.style.height=t.height+"px":t.content.style.height="0px"}))}}])&&Zy(e.prototype,n),r&&Zy(e,r),o}(Bu);function nb(t){return(nb="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function rb(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function ib(t,e){return(ib=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function ob(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=ub(t);if(e){var i=ub(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return ab(this,n)}}function ab(t,e){return!e||"object"!==nb(e)&&"function"!=typeof e?sb(t):e}function sb(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function ub(t){return(ub=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var cb=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&ib(t,e)}(o,t);var e,n,r,i=ob(o);function o(t,e){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o),(n=i.call(this,t,e)).handleMove=n.handleMove.bind(sb(n)),n.handleResize=n.handleResize.bind(sb(n)),n.handleUp=n.handleUp.bind(sb(n)),n.handleDown=n.handleDown.bind(sb(n)),n.gallery=n.element.querySelector(".container"),n.slides=Array.from(n.element.querySelectorAll(".item")).map((function(t){return{elem:t,img:t.querySelector(".image img"),w:1}})),n.mouse=0,n.start=0,n.max=0,n.current=0,n}return e=o,(n=[{key:"open",value:function(){}},{key:"close",value:function(){}},{key:"attach",value:function(){0!=this.slides.length&&(this.handleResize(),this.element.addEventListener("mousedown",this.handleDown),this.element.addEventListener("touchstart",this.handleDown,{passive:!0}),this.viewport.on("resize",this.handleResize))}},{key:"detach",value:function(){0!=this.slides.length&&(this.element.removeEventListener("mousedown",this.handleDown),this.element.removeEventListener("touchstart",this.handleDown),this.viewport.off("resize",this.handleResize))}},{key:"handleResize",value:function(){var t=this;this.max=0,this.slides.forEach((function(e){e.w=e.elem.getBoundingClientRect().width,t.max+=e.w+30})),this.max=this.max+60-this.viewport.width,this.handleMove()}},{key:"handleMove",value:function(t){var e=this;this.mouse=this.getTouchX(t),this.current=Math.max(Math.min((this.mouse-this.start)*(this.viewport.medias.desktop?1:2.5),0),-this.max),this.gallery.style.transform="translate3d("+this.current+"px, 0, 0)",this.slides.forEach((function(t){t.img.style.transform="translate3d("+(e.current/e.max*20+10)+"%, 0, 0) scale(1.2)"}))}},{key:"handleDown",value:function(t){this.start=this.getTouchX(t)-this.current,this.element.addEventListener("mousemove",this.handleMove),this.element.addEventListener("touchmove",this.handleMove,{passive:!0}),window.addEventListener("mouseup",this.handleUp),window.addEventListener("touchend",this.handleUp,{passive:!0})}},{key:"handleUp",value:function(t){this.element.removeEventListener("mousemove",this.handleMove),this.element.removeEventListener("touchmove",this.handleMove),window.removeEventListener("mouseup",this.handleUp),window.removeEventListener("touchend",this.handleUp)}},{key:"getTouchX",value:function(t){return t?t.clientX?t.clientX:t.changedTouches&&t.changedTouches.length?t.changedTouches[0].clientX:0:0}}])&&rb(e.prototype,n),r&&rb(e,r),o}(Bu);function lb(t){return(lb="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function hb(t,e,n,r,i,o,a){try{var s=t[o](a),u=s.value}catch(t){return void n(t)}s.done?e(u):Promise.resolve(u).then(r,i)}function fb(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function db(t,e){return(db=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function pb(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=vb(t);if(e){var i=vb(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return mb(this,n)}}function mb(t,e){return!e||"object"!==lb(e)&&"function"!=typeof e?gb(t):e}function gb(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function vb(t){return(vb=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function yb(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var bb=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&db(t,e)}(u,t);var e,n,r,i,o,s=pb(u);function u(t,e){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,u),yb(gb(n=s.call(this,t,e)),"handleResize",(function(){n.hoursResize();var t=n.offices.ul.style.height;n.offices.ul.style.height="",n.offices.height=n.offices.ul.getBoundingClientRect().height-78,n.offices.ul.style.height=t,t=n.types.ul.style.height,n.types.ul.style.height="",n.types.height=n.types.ul.getBoundingClientRect().height-78,n.types.ul.style.height=t})),yb(gb(n),"handleMedia",(function(){n.st&&n.st.kill(),n.viewport.medias.desktop&&(n.st=Na.create({trigger:n.grid,start:"top +=140px",end:"bottom center",pin:n.filters,pinSpacing:!1}))})),yb(gb(n),"seachByName",(function(){n.query(!0)})),n.query=n.query.bind(gb(n)),n.loadMore=n.loadMore.bind(gb(n)),n.search=n.element.querySelector(".search>input"),n.grid=n.element.querySelector(".grid>div>.content"),n.more=n.element.querySelector(".link-plus"),n.offices={elem:n.element.querySelector(".offices"),content:"",height:1,opened:!0},n.types={elem:n.element.querySelector(".types"),content:"",height:1,opened:!0},n.filters=document.querySelector(".filters"),n.offices.changeByList=n.changeByList.bind(gb(n),n.offices),n.offices.changeBySelect=n.changeBySelect.bind(gb(n),n.offices),n.offices.toggle=n.toggleFilter.bind(gb(n),n.offices),n.types.changeByList=n.changeByList.bind(gb(n),n.types),n.types.changeBySelect=n.changeBySelect.bind(gb(n),n.types),n.types.toggle=n.toggleFilter.bind(gb(n),n.types),n.offices.value=n.offices.elem.querySelector(".value"),n.types.value=n.types.elem.querySelector(".value"),n.offices.select=n.offices.elem.querySelector("select"),n.types.select=n.types.elem.querySelector("select"),n.offices.ul=n.offices.elem.querySelector("ul"),n.types.ul=n.types.elem.querySelector("ul"),n.offices.li=Array.from(n.offices.ul.querySelectorAll("li")),n.types.li=Array.from(n.types.ul.querySelectorAll("li")),n.getFormationIds(),n}return e=u,(n=[{key:"attach",value:function(){var t=this;this.search.addEventListener("keyup",this.seachByName),this.offices.li.forEach((function(e){e.addEventListener("click",t.offices.changeByList)})),this.types.li.forEach((function(e){e.addEventListener("click",t.types.changeByList)})),this.offices.elem.addEventListener("click",this.offices.toggle),this.types.elem.addEventListener("click",this.types.toggle),this.offices.select.addEventListener("change",this.offices.changeBySelect),this.types.select.addEventListener("change",this.types.changeBySelect),this.more&&this.more.addEventListener("click",this.loadMore),this.viewport.on("resize",this.handleResize),this.viewport.on("media",this.handleMedia),this.addHoursEvents(),this.toggleFilter(this.offices),this.toggleFilter(this.types),this.handleMedia()}},{key:"detach",value:function(){var t=this;this.search.removeEventListener("keyup",this.seachByName),this.offices.li.forEach((function(e){e.removeEventListener("click",t.types.changeByList)})),this.types.li.forEach((function(e){e.removeEventListener("click",t.types.changeByList)})),this.offices.select.removeEventListener("change",this.offices.changeBySelect),this.types.select.removeEventListener("change",this.types.changeBySelect),this.more&&this.more.removeEventListener("click",this.loadMore),this.removeHoursEvents(),this.viewport.off("resize",this.handleResize),this.viewport.off("media",this.handleMedia),this.st.kill()}},{key:"addHoursEvents",value:function(){var t=this;this.hours=Array.from(this.element.querySelectorAll(".hours")).map((function(t){return{elem:t,btn:t.querySelector(".item"),arrow:t.querySelector(".icon-arrow-bottom"),content:t.querySelector(".all-dates"),toggle:null,opened:!0,height:1}})),this.hoursResize(),this.hours.forEach((function(e){e.toggle=t.handleHoursClick.bind(t,e),e.btn.addEventListener("click",e.toggle),t.closeHours(e)}))}},{key:"removeHoursEvents",value:function(){this.hours.forEach((function(t){t.btn.removeEventListener("click",t.toggle)}))}},{key:"toggleFilter",value:function(t){t.opened?this.closeFilter(t):(this.closeFilter(this.offices),this.closeFilter(this.types),this.openFilter(t))}},{key:"openFilter",value:function(t){t.opened||(t.ul.style.height=Math.min(Math.min(t.height,400),this.viewport.height-284)+"px",t.elem.classList.add("active"),t.opened=!0)}},{key:"closeFilter",value:function(t){t.opened&&(t.ul.style.height="0px",t.elem.classList.remove("active"),qr.to(t.ul,{scrollTo:0,duration:.5,ease:"power2.out"}),t.opened=!1)}},{key:"getFormationIds",value:function(){this.formations=Array.from(this.grid.querySelectorAll(".content>.item")),this.formationIds=this.formations.map((function(t){return t.getAttribute("data-id")}))}},{key:"changeByList",value:function(t,e){t.content=t.select.value=e.srcElement.getAttribute("data-value"),t.value.innerHTML=e.srcElement.innerHTML,this.query(!0)}},{key:"changeBySelect",value:function(t){t.content=t.select.value,t.value.innerHTML=t.select.innerHTML,this.query(!0)}},{key:"loadMore",value:function(){this.query()}},{key:"query",value:(i=a.a.mark((function t(){var e,n,r,i=arguments;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=i.length>0&&void 0!==i[0]&&i[0],this.getFormationIds(),t.next=4,fetch(ADMIN_AJAX_URL,{method:"POST",credentials:"include",headers:{"Content-type":"application/x-www-form-urlencoded"},body:new URLSearchParams({action:"capstan_filter_formations",search:this.search.value,office:this.offices.content,type:this.types.content,notin:e?"":this.formationIds}).toString()});case 4:return n=t.sent,t.next=7,n.json();case 7:r=t.sent,this.update(r,e);case 9:case"end":return t.stop()}}),t,this)})),o=function(){var t=this,e=arguments;return new Promise((function(n,r){var o=i.apply(t,e);function a(t){hb(o,n,r,a,s,"next",t)}function s(t){hb(o,n,r,a,s,"throw",t)}a(void 0)}))},function(){return o.apply(this,arguments)})},{key:"update",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];n&&(this.grid.innerHTML=""),this.removeHoursEvents(),t.formations.forEach((function(t){var n="";n+='\n\n\t\t\t<div class="item" data-id="'.concat(t.ID,'">\n\t\t\t\t<div class="image">\n\t\t\t\t\t<picture>\n\t\t\t\t\t\t<img src="').concat(t.image,'" alt="').concat(t.alt,'" draggable="false">\n\t\t\t\t\t</picture>\n\t\t\t\t</div>\n\t\t\t\t<div class="text">\n\t\t\t\t\t<div class="date">').concat(t.subtitle,'</div>\n\t\t\t\t\t<a href="').concat(t.url,'"><div class="title"><span class="t-word">').concat(t.title,'</span></div></a>\n\t\t\t\t\t<div class="description">').concat(t.description,'</div>\n\t\t\t\t\t<div class="infos">\n\t\t\t\t\t\t<div class="item"><span class="name">Bureau</span><span class="value">').concat(t.office,"</span></div>"),"multi"==t.type?(n+='\n\t\t\t\t\t\t\t<div class="hours">\n\t\t\t\t\t\t\t\t<div class="item">\n\t\t\t\t\t\t\t\t\t<span class="name">Horaires</span>\n\t\t\t\t\t\t\t\t\t<span class="value">'.concat(t.dates.length,' dates disponibles</span>\n\t\t\t\t\t\t\t\t\t<i class="icon-arrow-bottom"></i>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div class="all-dates">'),t.dates.forEach((function(t){n+='\n\t\t\t\t\t\t\t\t\t<div class="single-date">\n\t\t\t\t\t\t\t\t\t\t<span class="left">'.concat(t[0],'</span>\n\t\t\t\t\t\t\t\t\t\t<span class="right">').concat(t[1],"</span>\n\t\t\t\t\t\t\t\t\t</div>")})),n+="\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>"):n+='\n\t\t\t\t\t\t<div class="item"><span class="name">Horaires</span><span class="value">'.concat(t.dates,"</span></div>"),n+="\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>",e.grid.innerHTML+=n})),this.more&&(t.havemore?this.more.style.display="block":this.more.style.display="none"),this.addHoursEvents(),this.getFormationIds(),this.handleMedia()}},{key:"handleHoursClick",value:function(t,e){t.opened?this.closeHours(t):this.openHours(t)}},{key:"closeHours",value:function(t){t.content.style.height="0px",t.arrow.style.transform="",t.opened=!1}},{key:"openHours",value:function(t){t.content.style.height=t.height+"px",t.arrow.style.transform="rotate(180deg)",t.opened=!0}},{key:"hoursResize",value:function(){this.hours.forEach((function(t){var e=t.content.style.height;t.content.style.height="",t.height=t.content.getBoundingClientRect().height,t.content.style.height=e}))}}])&&fb(e.prototype,n),r&&fb(e,r),u}(Bu);function _b(t){return(_b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function xb(t,e,n,r,i,o,a){try{var s=t[o](a),u=s.value}catch(t){return void n(t)}s.done?e(u):Promise.resolve(u).then(r,i)}function wb(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Sb(t,e){return(Sb=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Eb(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Ab(t);if(e){var i=Ab(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Tb(this,n)}}function Tb(t,e){return!e||"object"!==_b(e)&&"function"!=typeof e?Mb(t):e}function Mb(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Ab(t){return(Ab=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Lb(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var Db=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Sb(t,e)}(o,t);var e,n,r,i=Eb(o);function o(t,e){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o),Lb(Mb(n=i.call(this,t,e)),"handleSubmit",function(){var t,e=(t=a.a.mark((function t(e){var r,i;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.preventDefault(),e.stopPropagation(),t.next=4,fetch(ADMIN_AJAX_URL,{method:"POST",credentials:"include",headers:{"Content-type":"application/x-www-form-urlencoded"},body:new URLSearchParams({action:"capstan_request_formation",mail:n.mail.value,firstname:n.firstname.value,lastname:n.lastname.value,business:n.business.value,role:n.role.value,mailto:n.form.getAttribute("data-mailto"),id:n.form.getAttribute("data-id")}).toString()});case 4:return r=t.sent,t.next=7,r.json();case 7:i=t.sent,n.update(i);case 9:case"end":return t.stop()}}),t)})),function(){var e=this,n=arguments;return new Promise((function(r,i){var o=t.apply(e,n);function a(t){xb(o,r,i,a,s,"next",t)}function s(t){xb(o,r,i,a,s,"throw",t)}a(void 0)}))});return function(t){return e.apply(this,arguments)}}()),Lb(Mb(n),"handleSubscribe",(function(){qr.to(window,{scrollTo:{y:n.form,offsetY:200},ease:"power2.inOut",duration:.5})})),n.form=n.element.querySelector(".inscription-form"),n.confirm=n.element.querySelector(".confirm"),n.subscribe=n.element.querySelector(".subscribe"),n.mail=n.element.querySelector(".input-mail"),n.firstname=n.element.querySelector(".input-firstname"),n.lastname=n.element.querySelector(".input-lastname"),n.business=n.element.querySelector(".input-business"),n.role=n.element.querySelector(".input-role"),n.addCalendar=n.element.querySelector(".add-formation-to-calendar"),n}return e=o,(n=[{key:"attach",value:function(){this.form.addEventListener("submit",this.handleSubmit,{useCapture:!0}),this.subscribe.addEventListener("click",this.handleSubscribe),this.addCalendar.href="data:text/ics;base64,"+btoa(this.addCalendar.getAttribute("data-info"))}},{key:"detach",value:function(){this.form.removeEventListener("submit",this.handleSubmit,{useCapture:!0}),this.subscribe.removeEventListener("click",this.handleSubscribe)}},{key:"update",value:function(t){if(t.success){var e=qr.timeline();e.fromTo(this.form,{opacity:1},{opacity:0,ease:"none",duration:.5}),e.set(this.form,{display:"none"}),e.set(this.confirm,{display:"block"}),e.fromTo(this.confirm,{opacity:0},{opacity:1,ease:"none",duration:.5})}}}])&&wb(e.prototype,n),r&&wb(e,r),o}(Bu);function Cb(t){return(Cb="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Pb(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Rb(t,e){return(Rb=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function kb(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Fb(t);if(e){var i=Fb(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Ob(this,n)}}function Ob(t,e){return!e||"object"!==Cb(e)&&"function"!=typeof e?Ib(t):e}function Ib(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Fb(t){return(Fb=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var zb=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Rb(t,e)}(o,t);var e,n,r,i=kb(o);function o(t,e){var n,r,a,s;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o),n=i.call(this,t,e),r=Ib(n),s=function(){n.ticking&&(n.nextTl&&n.nextTl.clear(),n.nextTl=qr.timeline(),n.nextTl.fromTo(n.slides[n.id].timer,{strokeDashoffset:56.5},{strokeDashoffset:0,duration:5,ease:"power.inOut"},0),n.nextTl.add((function(){n.ticking&&(n.snapTo(n.id+1),n.tick())}),5))},(a="tick")in r?Object.defineProperty(r,a,{value:s,enumerable:!0,configurable:!0,writable:!0}):r[a]=s,n.handleMove=n.handleMove.bind(Ib(n)),n.handleResize=n.handleResize.bind(Ib(n)),n.handleUp=n.handleUp.bind(Ib(n)),n.handleDown=n.handleDown.bind(Ib(n)),n.slideshow=n.element.querySelector(".slideshow"),n.dots=n.element.querySelector(".dots"),n.contents=Array.from(n.element.querySelectorAll(".content>.items>.item")),n.slides=Array.from(n.slideshow.querySelectorAll(".item")).map((function(t,e){return{elem:t,n:e,img:t.querySelector(".image"),w:1,dot:null,event:null,timer:null,left:0,content:n.contents[e]}})),n.slides.length>1&&n.slides.forEach((function(t,e){var r=document.createElement("div");r.classList.add("dot"),0==e&&r.classList.add("active"),r.innerHTML='<span><svg viewport="0 0 20 20" preserveAspectRatio="xMidYMid meet"><circle cx="10" cy="10" r="9" class="circle-front"/><circle cx="10" cy="10" r="9" class="circle-back"/></svg></span>',n.dots.appendChild(r),t.event=n.handleDotClick.bind(Ib(n),t),t.dot=r,t.timer=r.querySelector(".circle-front")})),n.mouse=0,n.start=0,n.max=0,n.current=0,n.id=0,n.last=0,n.nextTl=null,n.scrollTl=null,n.ticking=!1,n}return e=o,(n=[{key:"attach",value:function(){var t=this;this.slides.length<=1||(this.handleResize(),this.slideshow.addEventListener("mousedown",this.handleDown),this.slideshow.addEventListener("touchstart",this.handleDown,{passive:!0}),this.viewport.on("resize",this.handleResize),this.scrollTl=Na.create({trigger:this.element,onEnter:function(){t.requestTick()},onEnterBack:function(){t.requestTick()},onLeave:function(){t.stopTick()},onLeaveBack:function(){t.stopTick()}}),this.slides.forEach((function(t){t.dot.addEventListener("click",t.event),t.elem.addEventListener("click",t.event)})))}},{key:"detach",value:function(){this.slides.length<=1||(this.slideshow.removeEventListener("mousedown",this.handleDown),this.slideshow.removeEventListener("touchstart",this.handleDown),this.viewport.off("resize",this.handleResize),this.scrollTl.kill(),this.slides.forEach((function(t){t.dot.removeEventListener("click",t.event),t.elem.removeEventListener("click",t.event)})))}},{key:"handleResize",value:function(){var t=this;this.max=0,this.slides.forEach((function(e){e.w=e.elem.getBoundingClientRect().width,e.left=t.max,t.max+=e.w+(t.viewport.medias.desktop?110:30)})),this.max=this.max,this.moveTo(0)}},{key:"handleMove",value:function(t){this.mouse=this.getTouchX(t),this.moveTo(this.mouse-this.start)}},{key:"moveTo",value:function(t){var e=this;this.current=Math.max(Math.min(t,0),-this.max),this.slideshow.style.transform="translate3d("+this.current+"px, 0, 0)",this.id=this.slides.filter((function(t){return t.left-.5*t.w<=-e.current})).pop().n,this.last!=this.id&&this.changeId()}},{key:"changeId",value:function(){this.slides[this.last].dot.classList.remove("active"),this.slides[this.id].dot.classList.add("active"),this.slides[this.last].elem.classList.remove("active"),this.slides[this.id].elem.classList.add("active");var t=qr.timeline();t.fromTo(this.slides[this.last].content,{opacity:1},{opacity:0,duration:.5,ease:"none"}),t.set(this.slides[this.last].content,{display:"none"}),t.set(this.slides[this.id].content,{display:"block"}),t.fromTo(this.slides[this.id].content,{opacity:0},{opacity:1,duration:.5,ease:"none"}),this.last=this.id}},{key:"snapTo",value:function(t){t>=this.slides.length&&(t=0),this.slides[t]&&this.moveTo(-this.slides[t].left)}},{key:"handleDown",value:function(t){this.stopTick(),this.start=this.getTouchX(t)-this.current,this.slideshow.classList.add("no-anim"),this.slideshow.addEventListener("mousemove",this.handleMove),this.slideshow.addEventListener("touchmove",this.handleMove,{passive:!0}),window.addEventListener("mouseup",this.handleUp),window.addEventListener("touchend",this.handleUp,{passive:!0})}},{key:"handleUp",value:function(t){this.requestTick(),this.slideshow.classList.remove("no-anim"),this.slideshow.removeEventListener("mousemove",this.handleMove),this.slideshow.removeEventListener("touchmove",this.handleMove),window.removeEventListener("mouseup",this.handleUp),window.removeEventListener("touchend",this.handleUp),this.snapTo(this.id)}},{key:"requestTick",value:function(){this.ticking=!0,this.tick()}},{key:"stopTick",value:function(){this.nextTl&&this.nextTl.clear(),this.ticking=!1}},{key:"handleDotClick",value:function(t){var e=this;this.stopTick(),this.snapTo(t.n),setTimeout((function(){e.requestTick()}),400)}},{key:"getTouchX",value:function(t){return t?t.clientX?t.clientX:t.changedTouches&&t.changedTouches.length?t.changedTouches[0].clientX:0:0}}])&&Pb(e.prototype,n),r&&Pb(e,r),o}(Bu);function Bb(t){return(Bb="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Nb(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Ub(t,e){return(Ub=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function jb(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Gb(t);if(e){var i=Gb(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Hb(this,n)}}function Hb(t,e){return!e||"object"!==Bb(e)&&"function"!=typeof e?Vb(t):e}function Vb(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Gb(t){return(Gb=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Wb(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var qb=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Ub(t,e)}(o,t);var e,n,r,i=jb(o);function o(t,e){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o),Wb(Vb(n=i.call(this,t,e)),"handleResize",(function(){var t;n.viewport.medias.desktop&&n.items.forEach((function(e){t=e.inner.style.height,e.inner.style.height="",e.height=e.inner.getBoundingClientRect().height,e.inner.style.height=t}))})),Wb(Vb(n),"handleMedia",(function(){n.viewport.medias.desktop?(n.items.forEach((function(t,e){n.closeItem(t,!0)})),n.openItem(n.items[0],!0)):n.items.forEach((function(t,e){t.elem.classList.add("active"),t.inner.style.height="",t.img.style.opacity=""}))})),n.items=Array.from(n.element.querySelectorAll(".item")).map((function(t){return{elem:t,trigger:t.querySelector(".text"),inner:t.querySelector(".inner"),img:t.querySelector(".image img"),height:1,opened:!1,event:null}})),n.items.forEach((function(t){t.event=n.handleClick.bind(Vb(n),t)})),n}return e=o,(n=[{key:"attach",value:function(){var t=this;0!=this.items.length&&(this.handleResize(),this.items.forEach((function(e,n){t.closeItem(e,!0),e.trigger.addEventListener("click",e.event)})),this.openItem(this.items[0],!0),this.viewport.on("resize",this.handleResize),this.viewport.on("media",this.handleMedia))}},{key:"detach",value:function(){0!=this.items.length&&this.viewport.off("resize",this.handleResize)}},{key:"handleClick",value:function(t,e){var n=this;this.items.forEach((function(e){e!=t||t.opened?n.closeItem(e):n.openItem(e)}))}},{key:"openItem",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];!e&&t.opened||!this.viewport.medias.desktop||(t.elem.classList.add("active"),t.inner.style.height=t.height+"px",t.img.style.opacity="",t.opened=!0)}},{key:"closeItem",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];(e||t.opened)&&this.viewport.medias.desktop&&(t.elem.classList.remove("active"),t.inner.style.height="0px",t.img.style.opacity="0",t.opened=!1)}}])&&Nb(e.prototype,n),r&&Nb(e,r),o}(Bu);function Xb(t){return(Xb="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Yb(t,e,n,r,i,o,a){try{var s=t[o](a),u=s.value}catch(t){return void n(t)}s.done?e(u):Promise.resolve(u).then(r,i)}function Zb(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Jb(t,e){return(Jb=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Qb(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=t_(t);if(e){var i=t_(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Kb(this,n)}}function Kb(t,e){return!e||"object"!==Xb(e)&&"function"!=typeof e?$b(t):e}function $b(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function t_(t){return(t_=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function e_(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var n_=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Jb(t,e)}(o,t);var e,n,r,i=Qb(o);function o(t,e){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o),e_($b(n=i.call(this,t,e)),"subjectSelectChange",(function(t){n.subjectValue=n.subjectSelect.value;n.setSubject(n.subjectsDom.filter((function(t){return t.value==n.subjectValue}))[0])})),e_($b(n),"openGlobalFade",(function(){var t=qr.timeline();return t.set(n.globalFade,{display:"block"}),t.fromTo(n.globalFade,{opacity:0},{opacity:.86,duration:.5,ease:"none"}),t})),e_($b(n),"closeGlobalFade",(function(){var t=qr.timeline();return t.to(n.globalFade,{opacity:0,duration:.3,ease:"none"}),t.set(n.globalFade,{display:"none",duration:.5,ease:"none"}),t})),e_($b(n),"submit",function(){var t,e=(t=a.a.mark((function t(e){var r,i;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.stopPropagation(),e.preventDefault(),t.next=4,fetch(ADMIN_AJAX_URL,{method:"POST",credentials:"include",headers:{"Content-type":"application/x-www-form-urlencoded"},body:new URLSearchParams({action:"capstan_send_message",subject:n.subjectValue,companyname:n.companyName.value,city:""!=n.selects[0].value?n.selects[0].value:"Paris",content:n.content.value,mail:n.mail.value,phone:n.phone.value,formule:n.selects[1].value,author:n.author.value,poste:n.poste.value}).toString()});case 4:return r=t.sent,t.next=7,r.json();case 7:i=t.sent,n.update(i);case 9:case"end":return t.stop()}}),t)})),function(){var e=this,n=arguments;return new Promise((function(r,i){var o=t.apply(e,n);function a(t){Yb(o,r,i,a,s,"next",t)}function s(t){Yb(o,r,i,a,s,"throw",t)}a(void 0)}))});return function(t){return e.apply(this,arguments)}}()),e_($b(n),"update",(function(t){if(t.success){var e=qr.timeline();e.fromTo(n.visibleForm,{opacity:1},{opacity:0,duration:.5,ease:"none"}),e.set(n.visibleForm,{display:"none"}),e.to(window,{scrollTo:0,duration:.5,ease:"power2.out"}),e.set(n.feedback,{display:"block"}),e.fromTo(n.feedback,{opacity:0},{opacity:1,duration:.5,ease:"none"})}})),e_($b(n),"resetForm",(function(t){t.preventDefault();var e=qr.timeline();n.subjectValue="",n.companyName.value="",n.city.value="",n.content.value="",n.mail.value="",n.phone.value="",n.author.value="",n.poste.value="",e.fromTo(n.feedback,{opacity:1},{opacity:0,duration:.5,ease:"none"}),e.set(n.feedback,{display:"none"}),e.to(window,{scrollTo:0,duration:.5,ease:"power2.out"}),e.set(n.visibleForm,{display:"block"}),e.fromTo(n.visibleForm,{opacity:0},{opacity:1,duration:.5,ease:"none"})})),n.globalFade=n.element.querySelector(".global-fade"),n.form=n.element.querySelector(".contact-form"),n.visibleForm=n.element.querySelector(".form"),n.subjectSelect=n.element.querySelector(".message-subject-select"),n.subjectOptions=Array.from(n.subjectSelect.querySelectorAll("option")),n.selects=Array.from(n.element.querySelectorAll(".select-openable")).map((function(t,e){return{elem:t,select:t.querySelector("select"),preview:t.querySelector(".preview"),value:"",open:null,close:null,change:null,setValue:null,optns:[],fake:null,fakeOptns:[],fakeClick:[]}})),n.selects.forEach((function(t){t.open=n.openSelect.bind($b(n),t),t.close=n.closeSelect.bind($b(n),t),t.change=n.changeSelect.bind($b(n),t),t.optns=Array.from(t.select.querySelectorAll("option"))})),n.subjectValue="",n.subjectSelect=document.querySelector(".message-subject-select"),n.subjectsDom=Array.from(n.element.querySelectorAll(".message-subject li")).map((function(t,e){var r=!1,i=t.querySelector(".value").innerHTML;return t.classList.contains("active")&&(r=!0,n.subjectValue=i),{elem:t,event:null,option:n.subjectOptions[e],value:i,active:r}})),n.companyName=document.querySelector(".message-name"),n.city=document.querySelector(".message-city"),n.content=document.querySelector(".message-content"),n.mail=document.querySelector(".message-mail"),n.phone=document.querySelector(".message-phone"),n.author=document.querySelector(".message-author"),n.poste=document.querySelector(".message-poste"),n.feedback=document.querySelector(".feedback"),n.subjectsDom.forEach((function(t){t.event=n.setSubject.bind($b(n),t)})),n.restart=document.querySelector(".restart"),n}return e=o,(n=[{key:"attach",value:function(){var t=this;this.form.addEventListener("submit",this.submit,{useCapture:!0}),this.subjectSelect.addEventListener("change",this.subjectSelectChange),this.subjectsDom.forEach((function(t){t.elem.addEventListener("click",t.event)})),this.selects.forEach((function(e){e.captureClick=document.createElement("span"),e.captureClick.classList.add("capture-click"),e.elem.appendChild(e.captureClick),e.select.addEventListener("change",e.change),e.captureClick.addEventListener("click",e.open);var n=document.createElement("div");n.classList.add("fake"),e.optns.forEach((function(r){var i=document.createElement("span");i.classList.add("entry"),i.innerHTML=r.innerHTML;var o=t.setValue.bind(t,e,r.innerHTML);i.addEventListener("click",o),e.fakeClick.push(o),e.fakeOptns.push(i),n.appendChild(i)})),e.fake=n,e.elem.appendChild(n)})),this.restart.addEventListener("click",this.resetForm,{useCapture:!0})}},{key:"detach",value:function(){this.form.removeEventListener("submit",this.submit,{useCapture:!0}),this.subjectSelect.removeEventListener("change",this.subjectSelectChange),this.subjectsDom.forEach((function(t){t.elem.removeEventListener("click",t.event)})),this.selects.forEach((function(t){t.select.removeEventListener("change",t.change),t.preview.removeEventListener("click",t.open),t.fakeOptns.forEach((function(e,n){e.removeEventListener("click",t.fakeClick[n])}))})),this.restart.removeEventListener("click",this.resetForm,{useCapture:!0})}},{key:"setSubject",value:function(t){this.subjectsDom.forEach((function(t){t.active&&(t.active=!1,t.elem.classList.remove("active"))})),this.subjectSelect.value=t.value,t.elem.classList.add("active"),t.active=!0,this.subjectSelect.value=this.subjectValue=t.value}},{key:"openSelect",value:function(t){this.openGlobalFade(),this.globalFade.addEventListener("click",t.close);var e=qr.timeline();return e.set(t.fake,{display:"block"}),e.fromTo(t.fakeOptns,{opacity:0},{opacity:1,stagger:.08,ease:"none"}),e}},{key:"closeSelect",value:function(t){this.closeGlobalFade(),this.globalFade.removeEventListener("click",t.close);var e=qr.timeline();return e.to(t.fakeOptns,{opacity:0,stagger:{each:.05,from:"end",axis:"y"},ease:"none"}),e.set(t.fake,{display:"none"}),e}},{key:"changeSelect",value:function(t){this.setValue(t,t.select.value)}},{key:"setValue",value:function(t,e){t.select.value=t.preview.innerHTML=t.value=e,t.close()}}])&&Zb(e.prototype,n),r&&Zb(e,r),o}(Bu);function r_(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i_(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var o_=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;r_(this,t),this.elem=e,this.props=n,this.t=null}var e,n,r;return e=t,(n=[{key:"timeline",value:function(){return this.t&&this.t.clear(),gsap.timeline()}},{key:"reset",value:function(){}}])&&i_(e.prototype,n),r&&i_(e,r),t}();function a_(t){return(a_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function s_(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function u_(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function c_(t,e){return(c_=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function l_(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=f_(t);if(e){var i=f_(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return h_(this,n)}}function h_(t,e){return!e||"object"!==a_(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function f_(t){return(f_=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var d_=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&c_(t,e)}(o,t);var e,n,r,i=l_(o);function o(t){var e,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return s_(this,o),(e=i.call(this,t,n)).childs=Array.from(e.elem.querySelectorAll("p")),0==e.childs.length?e.childs=[{elem:e.elem,initial:e.elem.innerHTML}]:e.childs=e.childs.map((function(t){return{elem:t,initial:t.innerHTML}})),e.t=null,e.buildAtResize=!0,e}return e=o,(n=[{key:"timeline",value:function(){var t=this;return this.t&&this.t.clear(),this.t=qr.timeline(),this.reset(),this.childs.forEach((function(e,n){var r=[],i=[];e.elem.querySelectorAll("i").forEach((function(t,e){i.push(t.innerHTML),t.innerHTML="***i"+e+"***"})),e.elem.querySelectorAll("em").forEach((function(t,e){r.push(t.innerHTML),t.innerHTML="***em"+e+"***"})),i.forEach((function(t,n){e.elem.innerHTML=e.elem.innerHTML.replace("***i"+n+"***",t.split(" ").join("</i> <i>"))})),r.forEach((function(t,n){e.elem.innerHTML=e.elem.innerHTML.replace("***em"+n+"***",t.split(" ").join("</em> <em>"))}));var o=new Fs(e.elem,{type:"lines"}).lines.map((function(t){return t.classList.add("line-hi"),new Fs(t,{type:"words",wordsClass:"t-word"})}));t.t.fromTo(e.elem,{opacity:0},{opacity:1,duration:.3},0),o.forEach((function(e,n){t.t.set(e.words,{y:-120,rotation:-12},0),t.t.to(e.words,{y:0,rotation:0,ease:"power2.out",duration:.6,stagger:.04},.1*n+.1)}))})),this.t}},{key:"reset",value:function(){this.childs.forEach((function(t){t.elem.innerHTML=t.initial}))}}])&&u_(e.prototype,n),r&&u_(e,r),o}(o_);function p_(t){return(p_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function m_(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function g_(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function v_(t,e){return(v_=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function y_(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=__(t);if(e){var i=__(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return b_(this,n)}}function b_(t,e){return!e||"object"!==p_(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function __(t){return(__=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var x_=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&v_(t,e)}(o,t);var e,n,r,i=y_(o);function o(t){var e,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return m_(this,o),(e=i.call(this,t,n)).text=t.querySelector(".inner"),e.icon=t.querySelector("i"),e.t=null,e}return e=o,(n=[{key:"timeline",value:function(){return this.t&&this.t.clear(),this.t=qr.timeline(),this.t.fromTo(this.icon,{opacity:0},{opacity:1,duration:1,ease:"none"},.2),this.t.fromTo(this.text,{y:50},{y:0,duration:.6,ease:"power2.out"},.2),this.t}}])&&g_(e.prototype,n),r&&g_(e,r),o}(o_);function w_(t){return(w_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function S_(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function E_(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function T_(t,e){return(T_=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function M_(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=L_(t);if(e){var i=L_(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return A_(this,n)}}function A_(t,e){return!e||"object"!==w_(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function L_(t){return(L_=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var D_=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&T_(t,e)}(o,t);var e,n,r,i=M_(o);function o(t){var e,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return S_(this,o),(e=i.call(this,t,n)).img=t.querySelector("img"),e.t=null,e}return e=o,(n=[{key:"timeline",value:function(){return this.t&&this.t.clear(),this.t=qr.timeline(),this.h=this.elem.getBoundingClientRect().height,this.t.fromTo(this.img,{y:this.h},{y:0,duration:1,ease:"power2.out"},0),this.t.fromTo(this.elem,{y:.5*this.h},{y:0,duration:1,ease:"power2.out"},0),this.t}}])&&E_(e.prototype,n),r&&E_(e,r),o}(o_);function C_(t){return(C_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function P_(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function R_(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function k_(t,e){return(k_=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function O_(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=F_(t);if(e){var i=F_(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return I_(this,n)}}function I_(t,e){return!e||"object"!==C_(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function F_(t){return(F_=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var z_=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&k_(t,e)}(o,t);var e,n,r,i=O_(o);function o(t){var e,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return P_(this,o),(e=i.call(this,t,n)).child=t.children[0],e.t=null,e}return e=o,(n=[{key:"timeline",value:function(){return this.t&&this.t.clear(),this.child&&(this.h=this.child.getBoundingClientRect().height,this.t=qr.timeline(),this.t.fromTo(this.child,{y:-this.h},{y:0,duration:.8,ease:"power2.out"},0),this.t.fromTo(this.elem,{y:1.2*this.h},{y:0,duration:.8,ease:"power2.out"},0)),this.t}}])&&R_(e.prototype,n),r&&R_(e,r),o}(o_);function B_(t){return(B_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function N_(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function U_(t,e){return(U_=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function j_(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=G_(t);if(e){var i=G_(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return H_(this,n)}}function H_(t,e){return!e||"object"!==B_(e)&&"function"!=typeof e?V_(t):e}function V_(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function G_(t){return(G_=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function W_(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var q_=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&U_(t,e)}(o,t);var e,n,r,i=j_(o);function o(t,e){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o),W_(V_(n=i.call(this,t,e)),"computeAnimations",(function(){n.reset(),n.viewport.medias.desktop&&(n.enter=qr.timeline(),n.enter.fromTo(n.images,{y:500},{y:0,duration:.5,ease:"power2.out",stagger:{each:.02,from:"random"}},0),n.t=qr.timeline({paused:!0}),n.t.fromTo(n.background,{scale:.5},{scale:1,duration:1,ease:"expo.inOut"},0),n.t.fromTo(n.career,{y:0,opacity:1},{y:200,duration:.5,opacity:0,ease:"power2.in"},0),n.t.fromTo([n.columns[0],n.columns[1]],{x:0,scale:1},{x:function(){return.5*-n.viewport.width},duration:.8,scale:1.5,ease:"power2.inOut"},.2),n.t.fromTo([n.columns[3],n.columns[4]],{x:0,scale:1},{x:function(){return.5*n.viewport.width},duration:.8,scale:1.5,ease:"power2.inOut"},.2),n.t.fromTo([n.columns[0],n.columns[3]],{y:0},{y:function(){return n.viewport.height-n.columns[0].offsetHeight-150},duration:1,ease:"linear"},0),n.t.fromTo([n.columns[1],n.columns[4]],{y:function(){return n.viewport.height-n.columns[0].offsetHeight}},{y:0,duration:1,ease:"linear"},0),n.t.fromTo(n.text,{opacity:0},{opacity:1,ease:"linear",duration:.1},.7),n.titleReveal=new d_(n.text),n.t.add((function(){return n.titleReveal.timeline()}),.7),n.st=Na.create({trigger:n.container,animation:n.t,start:"top top",end:"+=3000",scrub:.5,pin:!0,pinSpacing:!1,anticipatePin:1,invalidateOnRefresh:!0}))})),W_(V_(n),"handleResize",(function(){n.t&&n.t.invalidate()})),W_(V_(n),"handleMedia",(function(){n.computeAnimations()})),W_(V_(n),"scrollNext",(function(t){qr.to(window,{duration:1,ease:"power2.inOut",scrollTo:3e3+n.viewport.height})})),n.container=n.element.querySelector(".container"),n.main=n.element.querySelector(".main"),n.background=n.element.querySelector(".main-bg"),n.img=n.background.querySelector("img"),n.columns=Array.from(n.element.querySelectorAll(".column")),n.images=Array.from(n.element.querySelectorAll(".secondary-img")),n.career=n.element.querySelector(".careers"),n.text=n.element.querySelector(".text"),n.scrollCta=n.element.querySelector(".scroll-cta"),n.st=null,n.t=null,n.enter=null,n}return e=o,(n=[{key:"attach",value:function(){this.scrollCta.addEventListener("click",this.scrollNext),this.viewport.on("resize",this.handleResize),this.viewport.on("media",this.handleMedia),setTimeout(this.computeAnimations,20)}},{key:"detach",value:function(){this.scrollCta.removeEventListener("click",this.scrollNext),this.viewport.off("resize",this.handleResize),this.viewport.off("media",this.handleMedia),this.reset()}},{key:"open",value:function(){}},{key:"reset",value:function(){this.st&&(this.st.disable(),this.st=null),qr.set(this.images,{clearProps:"all"}),qr.set(this.background,{clearProps:"all"}),qr.set(this.career,{clearProps:"all"}),qr.set(this.columns,{clearProps:"all"}),qr.set(this.text,{clearProps:"all"}),this.titleReveal&&this.titleReveal.reset()}}])&&N_(e.prototype,n),r&&N_(e,r),o}(Bu);function X_(t){return(X_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Y_(t,e,n,r,i,o,a){try{var s=t[o](a),u=s.value}catch(t){return void n(t)}s.done?e(u):Promise.resolve(u).then(r,i)}function Z_(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function J_(t,e){return(J_=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Q_(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=tx(t);if(e){var i=tx(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return K_(this,n)}}function K_(t,e){return!e||"object"!==X_(e)&&"function"!=typeof e?$_(t):e}function $_(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function tx(t){return(tx=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function ex(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var nx=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&J_(t,e)}(o,t);var e,n,r,i=Q_(o);function o(t,e){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o),ex($_(n=i.call(this,t,e)),"openGlobalFade",(function(){var t=qr.timeline();return t.set(n.globalFade,{display:"block"}),t.fromTo(n.globalFade,{opacity:0},{opacity:.86,duration:.5,ease:"none"}),t})),ex($_(n),"closeGlobalFade",(function(){var t=qr.timeline();return t.to(n.globalFade,{opacity:0,duration:.3,ease:"none"}),t.set(n.globalFade,{display:"none",duration:.5,ease:"none"}),t})),ex($_(n),"submit",function(){var t,e=(t=a.a.mark((function t(e){var r,i;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch(ADMIN_AJAX_URL,{method:"POST",credentials:"include",headers:{"Content-type":"application/x-www-form-urlencoded"},body:new URLSearchParams({action:"capstan_filter_careers",city:n.selects[0].value,poste:n.selects[1].value}).toString()});case 2:return r=t.sent,t.next=5,r.json();case 5:i=t.sent,n.update(i);case 7:case"end":return t.stop()}}),t)})),function(){var e=this,n=arguments;return new Promise((function(r,i){var o=t.apply(e,n);function a(t){Y_(o,r,i,a,s,"next",t)}function s(t){Y_(o,r,i,a,s,"throw",t)}a(void 0)}))});return function(t){return e.apply(this,arguments)}}()),ex($_(n),"update",(function(t){var e="\n\t\t\t<tr>\n\t\t\t\t<th>Postes</th>\n\t\t\t\t<th>Type de contrat</th>\n\t\t\t\t<th>Bureau</th>\n\t\t\t</tr>";t.forEach((function(t){e+='\n\t\t\t<tr class="entry">\n\t\t\t\t<td class="title">\n\t\t\t\t\t<a href="'.concat(t.link,'">').concat(t.title,'</a>\n\t\t\t\t\t<div class="date">Publi il y a ').concat(t.time,' jours</div>\n\t\t\t\t</td>\n\t\t\t\t<td class="info">\n\t\t\t\t\t<span class="label">CONTRAT</span>\n\t\t\t\t\t<span class="value">').concat(t.contract,'</span>\n\t\t\t\t</td>\n\t\t\t\t<td class="info last">\n\t\t\t\t\t<span class="label">BUREAU</span>\n\t\t\t\t\t<span class="value">').concat(t.city,"</span>\n\t\t\t\t</td>\n\t\t\t</tr>")})),n.content.innerHTML=e})),n.globalFade=n.element.querySelector(".global-fade"),n.content=n.element.querySelector(".content"),n.selects=Array.from(n.element.querySelectorAll(".select-openable")).map((function(t,e){return{elem:t,select:t.querySelector("select"),preview:t.querySelector(".preview"),value:"",open:null,close:null,change:null,setValue:null,optns:[],fake:null,fakeOptns:[],fakeClick:[]}})),n.selects.forEach((function(t){t.open=n.openSelect.bind($_(n),t),t.close=n.closeSelect.bind($_(n),t),t.change=n.changeSelect.bind($_(n),t),t.optns=Array.from(t.select.querySelectorAll("option"))})),n}return e=o,(n=[{key:"attach",value:function(){var t=this;this.selects.forEach((function(e){e.select.addEventListener("change",e.change),e.preview.addEventListener("click",e.open);var n=document.createElement("div");n.classList.add("fake"),e.optns.forEach((function(r){var i=document.createElement("span");i.classList.add("entry"),i.innerHTML=r.innerHTML;var o=t.setValue.bind(t,e,r.value?r.value:r.innerHTML,r.innerHTML);i.addEventListener("click",o),e.fakeClick.push(o),e.fakeOptns.push(i),n.appendChild(i)})),e.fake=n,e.elem.appendChild(n)}))}},{key:"detach",value:function(){this.selects.forEach((function(t){t.select.removeEventListener("change",t.change),t.preview.removeEventListener("click",t.open),t.fakeOptns.forEach((function(e,n){e.removeEventListener("click",t.fakeClick[n])}))}))}},{key:"openSelect",value:function(t){this.openGlobalFade(),this.globalFade.addEventListener("click",t.close);var e=qr.timeline();return e.set(t.fake,{display:"block"}),e.fromTo(t.fakeOptns,{opacity:0},{opacity:1,stagger:.08,ease:"none"}),e}},{key:"closeSelect",value:function(t){this.closeGlobalFade(),this.globalFade.removeEventListener("click",t.close);var e=qr.timeline();return e.to(t.fakeOptns,{opacity:0,stagger:{each:.05,from:"end",axis:"y"},ease:"none"}),e.set(t.fake,{display:"none"}),e}},{key:"changeSelect",value:function(t){this.setValue(t,t.select.value)}},{key:"setValue",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;t.select.value=t.value=e,t.preview.innerHTML=n||e,t.preview.classList.remove("empty"),t.close(),this.submit()}}])&&Z_(e.prototype,n),r&&Z_(e,r),o}(Bu);function rx(t){return(rx="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ix(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function ox(t,e){return(ox=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function ax(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=cx(t);if(e){var i=cx(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return sx(this,n)}}function sx(t,e){return!e||"object"!==rx(e)&&"function"!=typeof e?ux(t):e}function ux(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function cx(t){return(cx=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function lx(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var hx=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&ox(t,e)}(o,t);var e,n,r,i=ax(o);function o(t,e){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o),lx(ux(n=i.call(this,t,e)),"handleMedia",(function(){n.viewport.medias.desktop?n.eventsTriggered||(n.eventsTriggered=!0,n.element.addEventListener("mousemove",n.handleMove),n.element.addEventListener("mouseleave",n.handleLeave),n.slides.forEach((function(t){t.elem.addEventListener("mouseenter",t.over)}))):(n.eventsTriggered=!1,n.element.removeEventListener("mousemove",n.handleMove),n.element.removeEventListener("mouseleave",n.handleLeave),n.slides.forEach((function(t){t.elem.removeEventListener("mouseenter",t.over)})))})),lx(ux(n),"handleResize",(function(){n.top=n.element.getBoundingClientRect().top+n.scrollY})),lx(ux(n),"handleScroll",(function(){n.scrollY=window.scrollY})),lx(ux(n),"handleMove",(function(t){n.container.style.transform="translate3d("+t.clientX+"px, "+(t.clientY+n.scrollY-n.top)+"px, 0px)"})),lx(ux(n),"handleOver",(function(t){n.container.style.display="block",null!=n.t&&n.t.kill(),n.t=qr.timeline(),n.t.to(n.inner,{opacity:0,duration:.2,ease:"none"}),n.t.add((function(){n.image.src=t.img.src})),n.t.set(n.inner,{scale:.8,rotation:-20}),n.t.to(n.inner,{scale:1,rotation:6,duration:1,ease:"expo.out"},.2),n.t.to(n.inner,{opacity:1,duration:.5,ease:"none"},.2)})),lx(ux(n),"handleLeave",(function(){n.container.style.display="none"})),n.container=n.element.querySelector(".image-container"),n.inner=n.container.querySelector(".inner"),n.image=n.container.querySelector("img"),n.slides=Array.from(n.element.querySelectorAll(".gallery li")).map((function(t,e){return{elem:t,i:e,img:t.querySelector("img"),over:null}})),n.slides.forEach((function(t){t.over=n.handleOver.bind(ux(n),t)})),n.scrollY=0,n.top=0,n.t=qr.timeline(),n.eventsTriggered=!1,n}return e=o,(n=[{key:"attach",value:function(){this.viewport.on("media",this.handleMedia),this.viewport.on("resize",this.handleResize),window.addEventListener("scroll",this.handleScroll),this.handleMedia(),this.handleScroll(),this.handleResize(),Na.create({trigger:this.element,onEnter:this.handleResize})}},{key:"detach",value:function(){this.viewport.off("media",this.handleMedia),this.viewport.off("resize",this.handleResize),window.removeEventListener("scroll",this.handleScroll),this.element.removeEventListener("mousemove",this.handleMove),this.element.removeEventListener("mouseleave",this.handleLeave),this.slides.forEach((function(t){t.elem.removeEventListener("mouseenter",t.over)}))}}])&&ix(e.prototype,n),r&&ix(e,r),o}(Bu),fx=n(33);function dx(t){return(dx="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function px(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function mx(t,e,n){return e&&px(t.prototype,e),n&&px(t,n),t}function gx(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&vx(t,e)}function vx(t,e){return(vx=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function yx(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=xx(t);if(e){var i=xx(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return bx(this,n)}}function bx(t,e){return!e||"object"!==dx(e)&&"function"!=typeof e?_x(t):e}function _x(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function xx(t){return(xx=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function wx(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var Sx,Ex="/wp-content/themes/capstan/resources/assets/globekit/",Tx={noise:Ex+"clouds.png",bg:Ex+"bg.png",disk:Ex+"disk.png"},Mx=(Sx={type:"FeatureCollection",features:[]},[{name:"pbbr",address:"Av. Liberdade, 110, 6 - 1250 - 146 Lisboa - Portugal",city:"Lisboa",country:"Portugal",lat:38.7077507,long:-9.1365919},{name:"Troillet Meier Raetzo",address:"Rue de Lyon, 77 - 1203 Geneve Suisse",city:"Geneve",country:"Switzerland",lat:46.2017559,long:6.1466014},{name:"Advokatfirmaet Hjort DA",address:"Akersgata 51, 0180 Oslo, Norway",city:"Oslo",country:"Norway",lat:59.9133301,long:10.7389701},{name:"Elmzell Advokatbyr",address:"Rehnsgatan 11, 113 57 Stockholm",city:"Stockholm",country:"Sweden",lat:59.3251172,long:18.0710935},{name:"Blesi & Papa",address:"Usteristrasse 10, am Lwenplatz P.O. Box, CH-8021 Zrich",city:"Zrich",country:"Switzerland",lat:47.3744489,long:8.5410422},{name:"Bronsgeest Deur Advocaten",address:"IJdok 29, 1013 MM Amsterdam, The Netherlands",city:"Amsterdam",country:"Netherlands",lat:52.3727598,long:4.8936041},{name:"Lewis Silkin (Ireland)",address:"26 Lower Baggot Street, Dublin, Ireland",city:"Dublin",country:"Ireland",lat:53.3497645,long:-6.2602732},{name:"Al Tamimi & Co (UAE)",address:"PO Box 9275, 6th Floor, Building 4 East, Sheikh Zayed Rd, Dubai",city:"Dubai",country:"United Arab Emirates",lat:25.2653471,long:55.2924914},{name:"Bener Law Office",address:"Bykdere Cad. No: 193/4, 34394 Levent, Istanbul, Turkey",city:"Istanbul",country:"Turkey",lat:41.0096334,long:28.9651646},{name:"Al Tamimi & Co (Saudi Arabia)",address:"Zamil House, 9th Floor Prince Turkey Street Corniche District P.O. Box 1227 Al Khobar, Saudi Arabia 31952",city:"Al Khobar",country:"Saudi Arabia",lat:26.3039999,long:50.1960237},{name:"COBALT (Estonia)",address:"Kawe Plaza, Prnu mnt 15, 10141 Tallinn, Estonia",city:"Tallinn",country:"Estonia",lat:59.4372155,long:24.7453688},{name:"COBALT (Belarus)",address:"Prospekte Pobeditelei 100, Minsk, Belarus",city:"Minsk",country:"Belarus",lat:53.902334,long:27.5618791},{name:"Al Tamimi & Co (Bahrain)",address:"Suite 1304, Office 13B, 13th Floor, Building 1459, Block 346, West Tower, Bahrain Financial Harbour, PO Box 60380, Manama, Bahrain",city:"Manama",country:"Bahrain",lat:26.2235041,long:50.5822436},{name:"Nestor Nestor Diculescu Kingston Petersen (NNDKP)",address:"Strada Barbu Vcrescu nr. 201, Cldirea Globalworth Tower Et. 18, Bucharest 020276, Romania",city:"Bucharest",country:"Romania",lat:44.4361414,long:26.1027202},{name:"Estudio Olaechea",address:"Bernardo Monteagudo 201, San Isidro, Lima 27, Per",city:"Lima",country:"Peru",lat:-12.0621065,long:-77.0365256},{name:"Rajah & Tann Thailand",address:"12a, 973 President Tower, 12th Floor Units 12F Phloen Chit Rd, Bangkok 10330, Thailand",city:"Bangkok",country:"Thailand",lat:13.8245796,long:100.6224463},{name:"Mathews Dinsdale",address:"RBC Centre, Suite 3600, 155 Wellington Street West, Toronto, ON M5V 3H1, Canada - Other offices",city:"Toronto",country:"Canada",lat:43.6534817,long:-79.3839347},{name:"Yulchon LLC",address:"Textile Center 12F, 518 Teheran-ro, Daechi-dong, Gangnam-gu - Seoul 135-713, Korea",city:"Seoul",country:"South Korea",lat:37.5666791,long:126.9782914},{name:"Basham, Ringe y Correa S.C.",address:"Paseo de los Tamarindos No. 400-A, Piso 9 Col. Bosques de las Lomas, C.P. 05120, Mexico City, Mexico",city:"Mexico City",country:"Mexico",lat:19.4326296,long:-99.1331785},{name:"Funes de Rioja & Asociados",address:"Av Eduardo Madero 942, 11th floor, C1106ACW Buenos Aires, Argentina",city:"Buenos Aires",country:"Argentina",lat:-36.3789925,long:-60.3855889},{name:"DEmpaire",address:"Edificio Bancaracas, Plaza La Castellana 1060, Venezuela",city:"Caracas",country:"Venezuela",lat:10.506098,long:-66.9146017},{name:"FordHarrison LLP",address:"271 17th Street NW, Suite 1900 - Atlanta, Georgia 30363",city:"Atlanta",country:"United States",lat:33.7489924,long:-84.3902644},{name:"Vasil Kisil & Partners",address:"Street B. Khmelnytsky, 17/52 A - BC Leonardo, 6th floor - Kyiv 01054 Ukraine",city:"Kyiv",country:"Ukraine",lat:50.4500336,long:30.5241361},{name:"Herzog Fox & Neeman",address:"4 Weizmann Street, Tel Aviv 6423904, Israel",city:"Tel Aviv",country:"Israel",lat:32.0852997,long:34.7818064},{name:"Anderson Mori & Tomotsune",address:"Otemaci Park Building,1-1-1 Otemachi, Chiyoda-ku, Tokyo 100-8136, Japan",city:"Tokyo",country:"Japan",lat:35.6828387,long:139.7594549},{name:"Toffoletto De Luca Tamajo",address:"Via Rovello 12 - 20121, Milano, Italy",city:"Milano",country:"Italy",lat:45.4668,long:9.1905},{name:"Kochhar & Co.",address:"11th Floor, Tower A, DLF Towers Jasola - Jasola District Center - New Delhi - 110 025 India",city:"New Delhi",country:"India",lat:28.6138954,long:77.2090057},{name:"CLV Partners",address:"Tartsay Vilmos u. 3, 1121, Budapest, Hungary",city:"Budapest",country:"Hungary",lat:47.48138955,long:19.14609412691246},{name:"Lewis Silkin (Hong Kong)",address:"Unit 1302, 13/F, Dina House - Ruttonjee Centre - 11 Duddell Street - Central - Hong Kong",city:"Hong Kong",country:"Hong Kong",lat:22.350627,long:114.1849161},{name:"KREMALIS LAW FIRM",address:"Kirillou Loukareos 35, Athens 114 75 - Greece",city:"Athens",country:"Greece",lat:37.9839412,long:23.7283052},{name:"Capstan Avocats",address:"83, rue La Botie 75008 Paris",city:"Paris",country:"France",lat:48.8566969,long:2.3514616},{name:"Dittmar & Indrenius",address:"Pohjoisesplanadi 25 A - FI-00100 Helsinki, Finland",city:"Helsinki",country:"Finland",lat:60.1674881,long:24.9427473},{name:"Norrbom Vinding",address:"Dampfrgevej 26, 2100 Copenhagen, Denmark",city:"Copenhagen",country:"Denmark",lat:55.6867243,long:12.5700724},{name:"Kliemt.HR Lawyers",address:"Speditionstrae 21 - D-40221 Dsseldorf",city:"Dsseldorf",country:"Germany",lat:51.2254018,long:6.7763137},{name:"Rajah & Tann Singapore",address:"9 Straits View #06-07 Marina One West Tower, Singapore 018937",city:"Singapore",country:"Singapore",lat:1.2904753,long:103.8520359},{name:"Randl Partners, advoktn kancel, s.r.o.",address:"Tetris Office Building - Budjovick 1550/15a - CZ 140 00, Prague 4",city:"Prague",country:"Czech Republic",lat:50.0874654,long:14.4212535},{name:"Sackers",address:"20 Gresham Street - London - EC2V 7JE",city:"London",country:"United Kingdom",lat:51.5153381,long:-.0957187},{name:"Lewis Silkin",address:"5 Chancery Lane - Clifford's Inn - London - EC4A 1BL | DX 182 CHANCERY LANE",city:"London",country:"United Kingdom",lat:51.5142956,long:-.113279},{name:"Sagardoy Abogados",address:"c/ Tutor, 27 - 28008 Madrid, Spain",city:"Madrid",country:"Spain",lat:40.4167047,long:-3.7035825},{name:"ELIH & PARTNERJI Law Firm",address:"Komenskega ulica 36 - 1000 Ljubljana, Slovenia",city:"Ljubljana",country:"Slovenia",lat:46.0499803,long:14.5068602},{name:"NITSCHNEIDER & PARTNERS",address:"Lazaretsk 12 - 811 08 Bratislava - Slovakia",city:"Bratislava",country:"Slovakia",lat:48.1516988,long:17.1093063},{name:"Karanovic & Partners",address:"Resavska 23 - 11000 Belgrade, Serbia",city:"Belgrade",country:"Serbia",lat:44.8178131,long:20.4568974},{name:"Raczkowski",address:"Bonifraterska 17, 00-203 Warsaw, Poland",city:"Warsaw",country:"Poland",lat:52.2319581,long:21.0067249},{name:"Kiely Thompson Caisley",address:"Level 10, 188 Quay St, Auckland, New Zealand",city:"Auckland",country:"New Zealand",lat:-36.8433264,long:174.7630263},{name:"Blom Veugelers Zuiderman Advocaten",address:"Schiedamseweg 53A, 3134 BB Vlaardingen, The Netherlands",city:"Vlaardingen",country:"Netherlands",lat:51.9075958,long:4.3399618},{name:"George Z. Georgiou <br>& Associates LLC",address:"1 Iras Street - 1060 Nicosia, Cyprus",city:"Nicosia",country:"Cyprus",lat:35.1677369,long:33.3621672},{name:"Brigard Urrutia",address:"Calle 70 Bis No. 4 - 41 Bogot, Colombia",city:"Bogot",country:"Colombia",lat:4.6519899,long:-74.0565586},{name:"Divjak Topi <br>Bahtijarevi & Krka",address:"EUROTOWER, Ivana Luia 2A / 18th Floor, 10000 Zagreb, Croatia",city:"Zagreb",country:"Croatia",lat:4.6533326,long:-74.083652},{name:"Fangda Partners",address:"27/F, North Tower, Beijing Kerry Centre - 1 Guanghua Road, Chaoyang District - Beijing 100020, China",city:"Beijing",country:"China",lat:40.190632,long:116.412144},{name:"Munita & Olavarra",address:"Alcantara 200, Las Condes, Santiago, Chile",city:"Santiago",country:"Chile",lat:-33.4377756,long:-70.6504502},{name:"BOYANOV & Co.",address:"82, Patriarch Evtimii Blvd., 1463 Sofia, Bulgaria",city:"Sofia",country:"Bulgaria",lat:42.6978634,long:23.3221789},{name:"Claeys & Engels",address:"Boulevard du Souverain 280, 1160 Brussels, Belgium",city:"Brussels",country:"Belgium",lat:50.83879505,long:4.375304132256188},{name:"Corrs Chambers Westgarth",address:"Level 25, 567 Collins Street, Melbourne VIC 3000",city:"Melbourne",country:"Australia, Papua New Guinea",lat:-37.8142176,long:144.9631608},{name:"Ganado Advocates",address:"171, Old Bakery Street, Valletta VLT 1455, Malta",city:"Valletta",country:"Malta",lat:35.8989818,long:14.5136759},{name:"CASTEGNARO",address:"67, rue Ermesinde, L-1469 Luxembourg",city:"Luxembourg",country:"Luxembourg",lat:49.6112768,long:6.129799},{name:"COBALT (Lithuania)",address:"Lvovo 25, LT-09320 Vilnius",city:"Vilnius",country:"Lithuania",lat:54.6870458,long:25.2829111},{name:"COBALT (Latvia)",address:"Marijas iela 13 k-2, LV-1050, Riga, Latvia",city:"Riga",country:"Latvia",lat:56.9500002,long:24.1211754},{name:"AEQUITAS Law Firm",address:"47 Abai Ave., Office 2, Almaty 050000, Republic of Kazakhstan",city:"Almaty",country:"Kazakhstan",lat:43.2214719,long:76.847242},{name:"Veirano Advogados",address:"Av Presidente Wilson, 231, 25 andar - Centro - Rio de Janeiro, RJ, Brazil - 20030-021",city:"Rio de Janeiro",country:"Brazil",lat:-22.9110137,long:-43.2093727},{name:"Schima Mayer Starlinger",address:"Trabrennstrae 2B, A-1020 Vienna",city:"Vienna",country:"Austria",lat:48.2124507,long:16.4101008}].forEach((function(t){var e={type:"Feature",properties:{},geometry:{type:"Point",coordinates:[]}};e.geometry.coordinates=[t.long,t.lat],e.properties.name=t.name,e.properties.address=t.city+" - "+t.country,Sx.features.push(e)})),Sx),Ax=function t(e,n){var r=this;wx(this,t),this.gkOptions={apiKey:"gk_96cec9a051f6ca67d9a9332cde1d003d1b3071522b677b2b9c402ee19551e3c26a294830ab0fb2bc220e176631201fe413a7e9508951aac1a52326c99ddb6d31",wasmPath:Ex+"gkweb_bg.wasm",attributes:{alpha:!1}},this.gkview=new fx.h(e,this.gkOptions),this.calloutManager=new fx.f(n),this.gkview.registerCalloutManager(this.calloutManager),this.background=new fx.c(Tx.bg),this.gkview.addDrawable(this.background),this.atmosphere=new fx.b({texture:Tx.disk}),this.arcs=new fx.a,this.gkview.addDrawable(this.arcs),this.atmosphere.nScale=1.03,this.gkview.addDrawable(this.atmosphere),fetch(Ex+"pointglobe.bin").then((function(t){return t.arrayBuffer()})).then((function(t){r.pointglobe=new fx.i(Tx,t,{pointSize:.003,randomPointSizeVariance:.002,randomPointSizeRatio:.1,minPointAlpha:0,minPointSize:.006,color:"#dddddd"}),r.pointglobe.setInteractive(!0,!0,!1)})).then((function(){r.gkview.addDrawable(r.pointglobe,(function(){r.gkview.startDrawing()})),r.points=new fx.j,r.points.transform=function(t,e){return e.color=fx.g.hexToRGBA("#ff0000",.3*Math.random()+.7,!0),e.size=3*Math.random()+7,e},r.points.addGeojson(Mx),r.points.setInteractive(!0,!0,!1),r.gkview.addDrawable(r.points)})),this.gkview.onSelection=function(t){t.drawables.forEach((function(t){if(t.obj.id===r.points.id)if(void 0!==t.selection){var e=t.selection[0][0];r.calloutManager.removeAllCallouts(),r.arcs.removeAllArcs(),r.calloutManager.addCallout(new fx.e(e.lat,e.lon,Lx,e.properties));var n={from:[e.lat,e.lon],to:[41,-111],startColor:"#ffffff",startAlpha:1,midWidth:4};r.arcs.addArc(n,1e3)}else r.arcs.removeAllArcs(),r.calloutManager.removeAllCallouts()}))}},Lx=function(t){gx(n,t);var e=yx(n);function n(){return wx(this,n),e.apply(this,arguments)}return mx(n,[{key:"createElement",value:function(){var t=document.createElement("div");return t.className="office-callout",t.innerHTML='<div class="callout-container">\n      <div class="wrapper">\n        <div class="name">'.concat(this.definition.data.name,'</div>\n        <p class="address">').concat(this.definition.data.address,'</p>\n      </div>\n      <div class="arc"><span class="pointer"></span><span class="ref"></span></div>\n    </div>'),t}},{key:"setPosition",value:function(t){this.element.style.transform="translate(".concat((t.screen.x+50).toFixed(1),"px, ").concat((t.screen.y-60).toFixed(0),"px)")}}]),n}(fx.d),Dx=function(t){gx(n,t);var e=yx(n);function n(t,r){var i,o,a,s;return wx(this,n),i=e.call(this,t,r),o=_x(i),s=function(){},(a="handleResize")in o?Object.defineProperty(o,a,{value:s,enumerable:!0,configurable:!0,writable:!0}):o[a]=s,i.canvas=i.element.querySelector("canvas"),i.callout=i.element.querySelector(".globe-callout-manager"),i}return mx(n,[{key:"attach",value:function(){this.viewport.on("resize",this.handleResize),this.tl=Na.create({trigger:this.element,onEnter:function(){},onEnterBack:function(){},onLeave:function(){},onLeaveBack:function(){}}),this.gk=new Ax(this.canvas,this.callout)}},{key:"detach",value:function(){}}]),n}(Bu);function Cx(t){return(Cx="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Px(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Rx(t,e){return(Rx=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function kx(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Fx(t);if(e){var i=Fx(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Ox(this,n)}}function Ox(t,e){return!e||"object"!==Cx(e)&&"function"!=typeof e?Ix(t):e}function Ix(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Fx(t){return(Fx=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var zx=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Rx(t,e)}(o,t);var e,n,r,i=kx(o);function o(t,e){var n,r,a,s;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o),n=i.call(this,t,e),r=Ix(n),s=function(){n.st&&n.st.kill(),n.viewport.medias.desktop&&(n.st=Na.create({trigger:n.content,start:"top +=100px",end:"bottom center",pin:n.menu,pinSpacing:!1}))},(a="handleMedia")in r?Object.defineProperty(r,a,{value:s,enumerable:!0,configurable:!0,writable:!0}):r[a]=s,n.content=n.element.querySelector(".content"),n.menu=n.element.querySelector(".menu"),n.chapters=Array.from(n.menu.querySelectorAll("[data-ref]")).map((function(t,e){var r=n.element.querySelector('[data-id="'+t.getAttribute("data-ref")+'"]');return{btn:t,target:r,click:n.scrollTo.bind(Ix(n),r),i:e}})),n}return e=o,(n=[{key:"attach",value:function(){var t=this;this.viewport.on("media",this.handleMedia),this.handleMedia(),this.t=[],this.chapters.forEach((function(e){e.btn.addEventListener("click",e.click,{passive:!1}),t.t.push(Na.create({trigger:e.target,start:"top center",end:"bottom center",onEnter:function(){e.btn.parentNode.classList.add("current")},onEnterBack:function(){e.btn.parentNode.classList.add("current")},onLeave:function(){e.btn.parentNode.classList.remove("current")},onLeaveBack:function(){e.btn.parentNode.classList.remove("current")}}))}))}},{key:"detach",value:function(){this.viewport.off("media",this.handleMedia),this.t.length&&this.t.forEach((function(t){t.disable(),t=null}))}},{key:"scrollTo",value:function(t){qr.to(window,{duration:1,ease:"power2.inOut",scrollTo:{y:t,offsetY:120}})}}])&&Px(e.prototype,n),r&&Px(e,r),o}(Bu);function Bx(t){return(Bx="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Nx(t,e,n,r,i,o,a){try{var s=t[o](a),u=s.value}catch(t){return void n(t)}s.done?e(u):Promise.resolve(u).then(r,i)}function Ux(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function jx(t,e){return(jx=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Hx(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Wx(t);if(e){var i=Wx(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Vx(this,n)}}function Vx(t,e){return!e||"object"!==Bx(e)&&"function"!=typeof e?Gx(t):e}function Gx(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Wx(t){return(Wx=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var qx=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&jx(t,e)}(u,t);var e,n,r,i,o,s=Hx(u);function u(t,e){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,u),(n=s.call(this,t,e)).query=n.query.bind(Gx(n)),n.loadMore=n.loadMore.bind(Gx(n)),n.grid=n.element.querySelector(".lawyers-grid"),n.more=n.element.querySelector(".lawyers-plus"),n.officeId=n.grid.getAttribute("data-office"),n.getLawyerIds(),n}return e=u,(n=[{key:"attach",value:function(){this.more&&this.more.addEventListener("click",this.loadMore)}},{key:"detach",value:function(){this.more&&this.more.addEventListener("click",this.loadMore)}},{key:"getLawyerIds",value:function(){this.lawyers=Array.from(this.grid.querySelectorAll(".item")),this.lawyerIds=this.lawyers.map((function(t){return t.getAttribute("data-id")}))}},{key:"loadMore",value:function(){this.query()}},{key:"query",value:(i=a.a.mark((function t(){var e,n,r=arguments;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r.length>0&&void 0!==r[0]&&r[0],t.next=3,fetch(ADMIN_AJAX_URL,{method:"POST",credentials:"include",headers:{"Content-type":"application/x-www-form-urlencoded"},body:new URLSearchParams({action:"capstan_filter_lawyers",search:"",office:this.officeId,status:"",notin:this.lawyerIds,max:3}).toString()});case 3:return e=t.sent,t.next=6,e.json();case 6:n=t.sent,this.update(n);case 8:case"end":return t.stop()}}),t,this)})),o=function(){var t=this,e=arguments;return new Promise((function(n,r){var o=i.apply(t,e);function a(t){Nx(o,n,r,a,s,"next",t)}function s(t){Nx(o,n,r,a,s,"throw",t)}a(void 0)}))},function(){return o.apply(this,arguments)})},{key:"update",value:function(t){var e=this;t.lawyers.forEach((function(t){var n='\n\t\t\t\t<div class="item" data-id="'.concat(t.ID,'">\n\t\t\t\t\t<div class="image overflow-h" data-animation="imageReveal">\n\t\t\t\t\t\t<picture>\n\t\t\t\t\t\t\t<img src="').concat(t.image,'" alt="').concat(t.alt,'" draggable="false">\n\t\t\t\t\t\t</picture>\n\t\t\t\t\t</div>\n\t\t\t\t\t<a href="').concat(t.url,'">\n\t\t\t\t\t\t<div class="subtitle">').concat(t.title,'</div>\n\t\t\t\t\t\t<div class="job">').concat(t.status,"</div>\n\t\t\t\t\t</a>\n\t\t\t\t</div>");e.grid.innerHTML+=n})),this.getLawyerIds(),parseInt(t.total)>this.lawyers.length?this.more.style.display="block":this.more.style.display="none"}}])&&Ux(e.prototype,n),r&&Ux(e,r),u}(Bu),Xx=n(170);function Yx(t){return(Yx="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Zx(t,e,n,r,i,o,a){try{var s=t[o](a),u=s.value}catch(t){return void n(t)}s.done?e(u):Promise.resolve(u).then(r,i)}function Jx(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Qx(t,e){return(Qx=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Kx(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=ew(t);if(e){var i=ew(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return $x(this,n)}}function $x(t,e){return!e||"object"!==Yx(e)&&"function"!=typeof e?tw(t):e}function tw(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function ew(t){return(ew=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var nw=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Qx(t,e)}(u,t);var e,n,r,i,o,s=Kx(u);function u(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,u),(e=s.call(this,t)).dependencies.add($s),e.selector="[data-follow-link]",e.onClick=e.onClick.bind(tw(e)),e}return e=u,(n=[{key:"after",value:(i=a.a.mark((function t(){var e=this;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this.items&&this.items.forEach((function(t){return t.removeEventListener("click",e.onClick,!0)})),this.items=document.querySelectorAll(this.selector),this.items.forEach((function(t){return t.addEventListener("click",e.onClick,!0)}));case 3:case"end":return t.stop()}}),t,this)})),o=function(){var t=this,e=arguments;return new Promise((function(n,r){var o=i.apply(t,e);function a(t){Zx(o,n,r,a,s,"next",t)}function s(t){Zx(o,n,r,a,s,"throw",t)}a(void 0)}))},function(){return o.apply(this,arguments)})},{key:"getParentAnchor",value:function(t){return t&&t.parentNode&&"a"!=t.tagName.toLowerCase()?this.getParentAnchor(t.parentNode):t==document?null:t}},{key:"getLink",value:function(t){if(t.currentTarget.dataset.followLink)return{url:t.currentTarget.dataset.followLink,target:t.currentTarget.dataset.followLinkTarget?t.currentTarget.dataset.followLinkTarget:"_self"};for(var e=0,n=[this.getParentAnchor(t.target),t.currentTarget.querySelector("a")];e<n.length;e++){var r=n[e];if(r){var i=r.getAttribute("href"),o=r.getAttribute("target");if(i)return{url:i,target:o||"_self"}}}return{url:t.currentTarget.dataset.followLink,target:t.currentTarget.dataset.followLinkTarget}}},{key:"onClick",value:function(t){if("a"!=t.target.tagName.toLowerCase()){t.preventDefault(),t.stopPropagation(),t.stopImmediatePropagation();var e=this.getLink(t);if(e.target=t.metaKey||new Js(e.url).external?"_blank":e.target,"_blank"==e.target)return window.open(e.url);this.bootstrap.modules.has(ru)?this.bootstrap._running||this.bootstrap.get($s).set(e.url):window.location.href=e.url}}}])&&Jx(e.prototype,n),r&&Jx(e,r),u}(Ns);function rw(t){return(rw="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function iw(t,e,n,r,i,o,a){try{var s=t[o](a),u=s.value}catch(t){return void n(t)}s.done?e(u):Promise.resolve(u).then(r,i)}function ow(t){return function(t){if(Array.isArray(t))return aw(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return aw(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return aw(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function aw(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function sw(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function uw(t,e){return(uw=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function cw(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=fw(t);if(e){var i=fw(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return lw(this,n)}}function lw(t,e){return!e||"object"!==rw(e)&&"function"!=typeof e?hw(t):e}function hw(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function fw(t){return(fw=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function dw(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var pw=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&uw(t,e)}(u,t);var e,n,r,i,o,s=cw(u);function u(t,e){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,u),dw(hw(n=s.call(this,t,e)),"onSubmitForm",(function(t){t.preventDefault()})),dw(hw(n),"handleResize",(function(){var t=n.themes.ul.style.height;n.themes.ul.style.height="",n.themes.height=n.themes.ul.getBoundingClientRect().height-78,n.themes.ul.style.height=t})),dw(hw(n),"handleMedia",(function(){n.st&&n.st.kill(),n.viewport.medias.desktop&&(n.st=Na.create({trigger:n.columns,start:"top +=200px",end:"bottom center",pin:n.filters,pinSpacing:!1}))})),dw(hw(n),"focusout",(function(t){n.themes.opened&&n.closeFilter(n.themes)})),n.buttonLoadMore=n.element.querySelector(".button-load-more"),n.filters=n.element.querySelector(".filters"),n.filtersForm=n.element.querySelector(".filters-forms"),n.inputSearch=n.filtersForm.querySelector("input[name='input']"),n.filterTypes=ow(n.element.querySelectorAll(".filter-types li")),n.filterThemes=n.filtersForm.querySelector(".themes.list"),n.columns=n.element.querySelector(".columns"),n.topWrapper=n.columns.querySelector(":scope > .right > .top"),n.resultArticles=n.element.querySelector(".result-articles"),n.buttonFavoris=n.element.querySelector(".button-favoris"),n.query=Object(Xx.debounce)(n.query.bind(hw(n)),300),n.onClickType=n.onClickType.bind(hw(n)),n.onClickButtonMore=n.onClickButtonMore.bind(hw(n)),n.onClickFavoris=n.onClickFavoris.bind(hw(n)),n.onKeyUpSearch=n.onKeyUpSearch.bind(hw(n)),n.themes={elem:n.filterThemes,content:"",height:1,opened:!0},n.themes.changeByList=n.changeByList.bind(hw(n),n.themes),n.themes.changeBySelect=n.changeBySelect.bind(hw(n),n.themes),n.themes.toggle=n.toggleFilter.bind(hw(n),n.themes),n.themes.value=n.themes.elem.querySelector(".value"),n.themes.select=n.themes.elem.querySelector("select"),n.themes.ul=n.themes.elem.querySelector("ul"),n.themes.li=Array.from(n.themes.ul.querySelectorAll("li")),n.getPostsIds(),n}return e=u,(n=[{key:"attach",value:function(){var t=this;this.buttonLoadMore&&this.buttonLoadMore.addEventListener("click",this.onClickButtonMore),this.buttonFavoris&&this.buttonFavoris.addEventListener("click",this.onClickFavoris),this.filterTypes.forEach((function(e){return e.addEventListener("click",t.onClickType)})),this.inputSearch.addEventListener("keyup",this.onKeyUpSearch),this.filtersForm.addEventListener("submit",this.onSubmitForm),this.themes.li.forEach((function(e){return e.addEventListener("click",t.themes.changeByList)})),this.themes.elem.addEventListener("click",this.themes.toggle,{useCapture:!0}),this.themes.select.addEventListener("change",this.themes.changeBySelect),this.toggleFilter(this.themes),window.addEventListener("click",this.focusout),this.viewport.on("resize",this.handleResize),this.viewport.on("media",this.handleMedia),this.handleMedia(),this.inputSearch.focus();var e=this.filterTypes.find((function(t){return t.classList.contains("selected")&&t.dataset.id})),n=this.themes.li.find((function(t){return t.classList.contains("selected")}));(this.inputSearch.value||e||n)&&(n?(n.click(),this.inputSearch.focus()):this.inputSearch.dispatchEvent(new KeyboardEvent("keyup",{})))}},{key:"detach",value:function(){var t=this;this.buttonLoadMore&&this.buttonLoadMore.removeEventListener("click",this.onClickButtonMore),this.buttonFavoris&&this.buttonFavoris.removeEventListener("click",this.onClickFavoris),this.filterTypes.forEach((function(e){return e.removeEventListener("click",t.onClickType)})),this.inputSearch.removeEventListener("keyup",this.onKeyUpSearch),this.filtersForm.removeEventListener("submit",this.onSubmitForm),this.viewport.off("resize",this.handleResize),this.viewport.off("media",this.handleMedia),this.themes.li.forEach((function(e){return e.removeEventListener("click",t.themes.changeByList)})),this.themes.elem.removeEventListener("click",this.themes.toggle,{useCapture:!0}),this.themes.select.removeEventListener("change",this.themes.changeBySelect),window.removeEventListener("click",this.focusout)}},{key:"openFilter",value:function(t){t.opened||(t.ul.style.height=Math.min(t.height,400)+"px",t.elem.classList.add("active"),t.opened=!0)}},{key:"closeFilter",value:function(t){t.opened&&(t.ul.style.height="0px",t.elem.classList.remove("active"),qr.to(t.ul,{scrollTo:0,duration:.5,ease:"power2.out"}),t.opened=!1)}},{key:"changeByList",value:function(t,e){t.content=t.select.value=e.srcElement.getAttribute("data-value"),t.value.innerHTML=e.srcElement.innerHTML,this.query(!0),this.lastUse="list"}},{key:"changeBySelect",value:function(t){t.content=t.select.value,t.value.innerHTML=t.select.options[t.select.selectedIndex].innerHTML,this.query(!0)}},{key:"toggleFilter",value:function(t,e){t.opened?this.closeFilter(t):(this.closeFilter(this.themes),this.openFilter(t),e.preventDefault(),e.stopPropagation())}},{key:"open",value:function(){this.buttonFavoris&&document.location.search&&document.location.search.includes("favoris=1")&&this.buttonFavoris.click()}},{key:"getPostsIds",value:function(){var t=Array.from(this.element.querySelectorAll(".article-card"));this.articlesIds=t.map((function(t){return t.getAttribute("data-id")}))}},{key:"onClickButtonMore",value:function(){this.query(!1)}},{key:"onClickFavoris",value:function(){this.buttonFavoris.classList.toggle("black"),this.query(!0)}},{key:"onClickType",value:function(t){this.filterTypes.forEach((function(t){return t.classList.remove("selected")})),t.currentTarget.classList.add("selected"),this.query(!0)}},{key:"onKeyUpSearch",value:function(){this.query(!0)}},{key:"query",value:(i=a.a.mark((function t(){var e,n,r,i,o,s,u,c=arguments;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=!(c.length>0&&void 0!==c[0])||c[0],n={action:"capstan_filter_articles",search:this.inputSearch.value,theme:this.themes.content,type:this.filterTypes.find((function(t){return t.classList.contains("selected")})).dataset.id||"",notin:this.articlesIds,favoris:this.buttonFavoris.classList.contains("black"),isLoadMore:!e},r=!!(""!=n.search||n.type||n.favoris||n.theme),""!=n.search||n.type||n.favoris||n.theme||(r=!1),i="?terme="+n.search+"&type="+n.type+"&theme="+n.theme,o=document.location.origin+document.location.pathname+i,window.history.pushState({path:o},"",o),t.next=9,fetch(ADMIN_AJAX_URL,{method:"POST",credentials:"include",headers:{"Content-type":"application/x-www-form-urlencoded"},body:new URLSearchParams(n).toString()});case 9:return s=t.sent,t.next=12,s.text();case 12:u=t.sent,this.update(u,r,e,s.status);case 14:case"end":return t.stop()}}),t,this)})),o=function(){var t=this,e=arguments;return new Promise((function(n,r){var o=i.apply(t,e);function a(t){iw(o,n,r,a,s,"next",t)}function s(t){iw(o,n,r,a,s,"throw",t)}a(void 0)}))},function(){return o.apply(this,arguments)})},{key:"update",value:function(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:200;t||(t='<div class="no-result">Aucun rsultat ne correspond aux filtres de recherche.</div>'),e?this.topWrapper.classList.remove("visible"):this.topWrapper.classList.add("visible"),n?this.resultArticles.innerHTML=t:this.resultArticles.insertAdjacentHTML("beforeend",t),this.getPostsIds(),this.buttonLoadMore.style.display=206==r?"block":"none",this.bootstrap.get(nw).after(),n&&qr.to(window,{scrollTo:0,duration:.5,ease:"power2.out"})}}])&&sw(e.prototype,n),r&&sw(e,r),u}(Bu);function mw(t){return(mw="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function gw(t,e,n,r,i,o,a){try{var s=t[o](a),u=s.value}catch(t){return void n(t)}s.done?e(u):Promise.resolve(u).then(r,i)}function vw(t){return function(t){if(Array.isArray(t))return yw(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return yw(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return yw(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function yw(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function bw(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function _w(t,e){return(_w=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function xw(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Ew(t);if(e){var i=Ew(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return ww(this,n)}}function ww(t,e){return!e||"object"!==mw(e)&&"function"!=typeof e?Sw(t):e}function Sw(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Ew(t){return(Ew=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Tw=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&_w(t,e)}(u,t);var e,n,r,i,o,s=xw(u);function u(t,e){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,u),(n=s.call(this,t,e)).buttonFavoris=vw(n.element.querySelectorAll(".button-favoris-small, .button-favoris")),n.buttonScrollTop=n.element.querySelector(".button-scrolltop"),n.readingBarLine=n.element.querySelector(".post-readingbar .progress"),n.onClickFavoris=n.onClickFavoris.bind(Sw(n)),n}return e=u,(n=[{key:"attach",value:function(){var t=this;this.buttonFavoris.length&&this.buttonFavoris.forEach((function(e){return e.addEventListener("click",t.onClickFavoris)})),this.buttonScrollTop&&this.buttonScrollTop.addEventListener("click",this.onClickButtonScrollTop)}},{key:"open",value:function(){var t=this;this.readingBarLine&&setTimeout((function(){t.st=qr.fromTo(t.readingBarLine,{scaleX:0},{scaleX:1,ease:"linear",scrollTrigger:{trigger:document.body,start:"top top",end:"bottom bottom",scrub:.8,invalidateOnRefresh:!0}})}),400);var e={action:"capstan_pageview_article",postid:this.element.dataset.id};fetch(ADMIN_AJAX_URL,{method:"POST",credentials:"include",headers:{"Content-type":"application/x-www-form-urlencoded"},body:new URLSearchParams(e).toString()})}},{key:"detach",value:function(){var t=this;this.buttonFavoris.length&&this.buttonFavoris.forEach((function(e){return e.removeEventListener("click",t.onClickFavoris)})),this.buttonScrollTop&&this.buttonScrollTop.removeEventListener("click",this.onClickButtonScrollTop),this.st&&this.st.kill()}},{key:"onClickButtonScrollTop",value:function(){qr.to(window,{duration:1,ease:"power2.inOut",scrollTo:{y:0}})}},{key:"onClickFavoris",value:(i=a.a.mark((function t(){var e,n,r;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e={action:"capstan_toggle_favorite",postid:this.element.dataset.id},t.next=3,fetch(ADMIN_AJAX_URL,{method:"POST",credentials:"include",headers:{"Content-type":"application/x-www-form-urlencoded"},body:new URLSearchParams(e).toString()});case 3:return n=t.sent,t.next=6,n.json();case 6:(r=t.sent).success&&200==r.result&&this.buttonFavoris.forEach((function(t){return t.classList.toggle("black")}));case 8:case"end":return t.stop()}}),t,this)})),o=function(){var t=this,e=arguments;return new Promise((function(n,r){var o=i.apply(t,e);function a(t){gw(o,n,r,a,s,"next",t)}function s(t){gw(o,n,r,a,s,"throw",t)}a(void 0)}))},function(){return o.apply(this,arguments)})}])&&bw(e.prototype,n),r&&bw(e,r),u}(Bu);function Mw(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var Aw=new function t(){var e=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),Mw(this,"validateEmail",(function(t){return/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(String(t).toLowerCase())})),Mw(this,"formIsValid",(function(t,n){var r=!1;return t.forEach((function(t){var i=t.querySelector("input"),o=i.getAttribute("type"),a=i.getAttribute("name");"text"==o||"hidden"==o||"checkbox"==o||"password"==o?n.get(a)?t.classList.remove("error"):("1"==t.dataset.typed&&t.classList.add("error"),r=!0):"email"==o&&(e.validateEmail(n.get(a))?t.classList.remove("error"):("1"==t.dataset.typed&&t.classList.add("error"),r=!0))})),!r})),Mw(this,"isVisible",(function(t){return!!(t.offsetWidth||t.offsetHeight||t.getClientRects().length)}))};function Lw(t){return(Lw="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Dw(t){return function(t){if(Array.isArray(t))return Cw(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return Cw(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Cw(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Cw(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Pw(t,e,n,r,i,o,a){try{var s=t[o](a),u=s.value}catch(t){return void n(t)}s.done?e(u):Promise.resolve(u).then(r,i)}function Rw(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function kw(t,e){return(kw=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Ow(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=zw(t);if(e){var i=zw(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Iw(this,n)}}function Iw(t,e){return!e||"object"!==Lw(e)&&"function"!=typeof e?Fw(t):e}function Fw(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function zw(t){return(zw=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Bw(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var Nw=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&kw(t,e)}(u,t);var e,n,r,i,o,s=Ow(u);function u(t,e){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,u),Bw(Fw(n=s.call(this,t,e)),"onFormItemChange",(function(){var t=Aw.formIsValid(n.requiredFields,n.formData);n.button&&(n.button.dataset.disabled=t?0:1)})),Bw(Fw(n),"onTriggerNavigation",(function(t){n.goToPage(t.currentTarget.dataset.navigation)})),n.sectionProfile=document.querySelector("section#profile"),n.triggerNavigations=n.element.querySelectorAll(".trigger-profile-navigation"),n.contents=n.sectionProfile.querySelectorAll(".profile-content[name]"),n.goToPage=n.goToPage.bind(Fw(n)),n.isForm=!1,"form"==n.element.nodeName.toLowerCase()&&(n.isForm=!0,n._formData=new FormData(n.element),n.button=n.element.querySelector("[name='form-button']"),n.requiredFields=n.element.querySelectorAll(".form-item.required"),n.onSubmit=n.onSubmit.bind(Fw(n))),n}return e=u,(n=[{key:"attach",value:function(){var t=this;this.triggerNavigations.forEach((function(e){return e.addEventListener("click",t.onTriggerNavigation)})),this.isForm&&(this.requiredFields&&this.requiredFields.forEach((function(e){return t.bootstrap.components.get(e).on("change",t.onFormItemChange)})),this.element.addEventListener("submit",this.onSubmit))}},{key:"detach",value:function(){var t=this;this.triggerNavigations.forEach((function(e){return e.addEventListener("click",t.onTriggerNavigation)})),this.isForm&&(this.requiredFields.forEach((function(e){return t.bootstrap.components.get(e).off("change",t.onFormItemChange)})),this.element.removeEventListener("submit",this.onSubmit))}},{key:"formData",get:function(){if("form"==this.element.nodeName.toLowerCase())return this._formData=new FormData(this.element),this._formData}},{key:"onSubmit",value:(i=a.a.mark((function t(e){return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.preventDefault();case 1:case"end":return t.stop()}}),t)})),o=function(){var t=this,e=arguments;return new Promise((function(n,r){var o=i.apply(t,e);function a(t){Pw(o,n,r,a,s,"next",t)}function s(t){Pw(o,n,r,a,s,"throw",t)}a(void 0)}))},function(t){return o.apply(this,arguments)})},{key:"goToPage",value:function(t){var e=Dw(this.contents).find((function(e){return e.getAttribute("name")==t}));if(e){var n=Dw(this.contents).find((function(t){return t.offsetParent})),r=new An.timeline;r.to(n,{alpha:0,duration:.4},0),r.add((function(){n.style.display="none",e.style.display="block"}),.4),r.fromTo(e,{alpha:0},{alpha:1,duration:.4},.4);var i=this.bootstrap.components.get(e);return i&&"function"==typeof i.open&&i.open(),r}console.error("Could not find page",t)}}])&&Rw(e.prototype,n),r&&Rw(e,r),u}(Nu);function Uw(t,e,n,r,i,o,a){try{var s=t[o](a),u=s.value}catch(t){return void n(t)}s.done?e(u):Promise.resolve(u).then(r,i)}function jw(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var Hw=new(function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,n,r,i,o;return e=t,(n=[{key:"call",value:(i=a.a.mark((function t(e){var n,r,i,o,s,u,c,l,h=arguments;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=h.length>1&&void 0!==h[1]?h[1]:null,r=h.length>2&&void 0!==h[2]?h[2]:"json",i=h.length>3&&void 0!==h[3]?h[3]:{},o={method:"POST",credentials:"include"},null!=n?(n.append("action",e),o.body=new URLSearchParams(n).toString(),o.headers=Object.assign(i,{"Content-type":"application/x-www-form-urlencoded"})):((s=new Headers).set("Content-type","text/html"),o.header=s),t.next=7,fetch(null!=n?ADMIN_AJAX_URL:e,o);case 7:if(u=t.sent,"json"!=r){t.next=16;break}return t.next=11,u.json();case 11:return(c=t.sent).success||alert(c.errors),t.abrupt("return",c);case 16:return t.next=18,u.text();case 18:return l=t.sent,t.abrupt("return",l);case 20:case"end":return t.stop()}}),t)})),o=function(){var t=this,e=arguments;return new Promise((function(n,r){var o=i.apply(t,e);function a(t){Uw(o,n,r,a,s,"next",t)}function s(t){Uw(o,n,r,a,s,"throw",t)}a(void 0)}))},function(t){return o.apply(this,arguments)})}])&&jw(e.prototype,n),r&&jw(e,r),t}());function Vw(t){return(Vw="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Gw(t,e,n,r,i,o,a){try{var s=t[o](a),u=s.value}catch(t){return void n(t)}s.done?e(u):Promise.resolve(u).then(r,i)}function Ww(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function qw(t,e){return(qw=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Xw(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Zw(t);if(e){var i=Zw(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Yw(this,n)}}function Yw(t,e){return!e||"object"!==Vw(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Zw(t){return(Zw=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Jw=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&qw(t,e)}(u,t);var e,n,r,i,o,s=Xw(u);function u(t,e){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,u),s.call(this,t,e)}return e=u,(n=[{key:"onSubmit",value:(i=a.a.mark((function t(e){var n;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.preventDefault(),this.element.style.pointerEvents="none",n=this.formData,t.next=5,Hw.call("capstan_account_login",n);case 5:"200"==t.sent.code?document.location.href=this.element.dataset.successRedirect:this.element.querySelector("input[name='password']").parentElement.classList.add("error"),this.element.style.pointerEvents="auto";case 8:case"end":return t.stop()}}),t,this)})),o=function(){var t=this,e=arguments;return new Promise((function(n,r){var o=i.apply(t,e);function a(t){Gw(o,n,r,a,s,"next",t)}function s(t){Gw(o,n,r,a,s,"throw",t)}a(void 0)}))},function(t){return o.apply(this,arguments)})}])&&Ww(e.prototype,n),r&&Ww(e,r),u}(Nw);function Qw(t){return(Qw="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Kw(t,e,n,r,i,o,a){try{var s=t[o](a),u=s.value}catch(t){return void n(t)}s.done?e(u):Promise.resolve(u).then(r,i)}function $w(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function tS(t,e){return(tS=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function eS(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=rS(t);if(e){var i=rS(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return nS(this,n)}}function nS(t,e){return!e||"object"!==Qw(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function rS(t){return(rS=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var iS=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&tS(t,e)}(u,t);var e,n,r,i,o,s=eS(u);function u(t,e){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,u),s.call(this,t,e)}return e=u,(n=[{key:"onSubmit",value:(i=a.a.mark((function t(e){var n,r;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.preventDefault(),this.element.style.pointerEvents="none",n=this.formData,t.next=5,Hw.call("capstan_account_create",n);case 5:r=t.sent,this.element.style.pointerEvents="auto",r.success&&(201!=r.code?(this.element.querySelector("input[name='email']").parentElement.querySelector(".error-message").innerHTML=r.detail.messages[0],this.element.querySelector("input[name='email']").parentElement.classList.add("error")):(this.bootstrap.components.get(document.querySelector("header")).refreshAccountStatus(),this.goToPage("profile-created")));case 8:case"end":return t.stop()}}),t,this)})),o=function(){var t=this,e=arguments;return new Promise((function(n,r){var o=i.apply(t,e);function a(t){Kw(o,n,r,a,s,"next",t)}function s(t){Kw(o,n,r,a,s,"throw",t)}a(void 0)}))},function(t){return o.apply(this,arguments)})}])&&$w(e.prototype,n),r&&$w(e,r),u}(Nw);function oS(t){return(oS="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function aS(t,e,n,r,i,o,a){try{var s=t[o](a),u=s.value}catch(t){return void n(t)}s.done?e(u):Promise.resolve(u).then(r,i)}function sS(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function uS(t,e){return(uS=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function cS(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=fS(t);if(e){var i=fS(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return lS(this,n)}}function lS(t,e){return!e||"object"!==oS(e)&&"function"!=typeof e?hS(t):e}function hS(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function fS(t){return(fS=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var dS=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&uS(t,e)}(o,t);var e,n,r,i=cS(o);function o(t,e){var n,r,s,u;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o),n=i.call(this,t,e),r=hS(n),s="onClickLogout",u=function(){var t,e=(t=a.a.mark((function t(e){return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Hw.call("capstan_account_logout",new FormData);case 2:t.sent,n.bootstrap.components.get(document.querySelector("header")).refreshAccountStatus(),document.location.href=n.element.dataset.redirect;case 5:case"end":return t.stop()}}),t)})),function(){var e=this,n=arguments;return new Promise((function(r,i){var o=t.apply(e,n);function a(t){aS(o,r,i,a,s,"next",t)}function s(t){aS(o,r,i,a,s,"throw",t)}a(void 0)}))});return function(t){return e.apply(this,arguments)}}(),s in r?Object.defineProperty(r,s,{value:u,enumerable:!0,configurable:!0,writable:!0}):r[s]=u,n}return e=o,(n=[{key:"attach",value:function(){this.element.addEventListener("click",this.onClickLogout)}},{key:"detach",value:function(){this.element.removeEventListener("click",this.onClickLogout)}}])&&sS(e.prototype,n),r&&sS(e,r),o}(Nu);function pS(t){return(pS="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function mS(t,e,n,r,i,o,a){try{var s=t[o](a),u=s.value}catch(t){return void n(t)}s.done?e(u):Promise.resolve(u).then(r,i)}function gS(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function vS(t,e){return(vS=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function yS(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=xS(t);if(e){var i=xS(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return bS(this,n)}}function bS(t,e){return!e||"object"!==pS(e)&&"function"!=typeof e?_S(t):e}function _S(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function xS(t){return(xS=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function wS(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var SS=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&vS(t,e)}(o,t);var e,n,r,i=yS(o);function o(t,e){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o),wS(_S(n=i.call(this,t,e)),"onFormItemChange",(function(){var t=Aw.formIsValid(n.requiredFields,n.formData);n.buttons.forEach((function(e){return e.dataset.disabled=t?0:1}))})),wS(_S(n),"onSubmit",function(){var t,e=(t=a.a.mark((function t(e){return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.preventDefault(),n.element.style.pointerEvents="none",t.next=4,Hw.call("capstan_account_update",n.formData);case 4:t.sent,n.element.style.pointerEvents="auto",document.location.reload();case 7:case"end":return t.stop()}}),t)})),function(){var e=this,n=arguments;return new Promise((function(r,i){var o=t.apply(e,n);function a(t){mS(o,r,i,a,s,"next",t)}function s(t){mS(o,r,i,a,s,"throw",t)}a(void 0)}))});return function(t){return e.apply(this,arguments)}}()),n.requiredFields=n.element.querySelectorAll(".form-item.required"),n._formData=new FormData(n.element),n.buttonResetPassword=n.element.querySelector(".button-change-password"),n.buttons=n.element.querySelectorAll("[name='form-button']"),n}return e=o,(n=[{key:"attach",value:function(){var t=this;this.requiredFields.forEach((function(e){return t.bootstrap.components.get(e).on("change",t.onFormItemChange)})),this.element.addEventListener("submit",this.onSubmit),this.buttonResetPassword&&this.buttonResetPassword.addEventListener("click",this.onClickButtonReset)}},{key:"detach",value:function(){var t=this;this.requiredFields.forEach((function(e){return t.bootstrap.components.get(e).off("change",t.onFormItemChange)})),this.element.removeEventListener("submit",this.onSubmit),this.buttonResetPassword&&this.buttonResetPassword.removeEventListener("click",this.onClickButtonReset)}},{key:"onClickButtonReset",value:function(){Hw.call("capstan_account_logout",new FormData)}},{key:"formData",get:function(){if("form"==this.element.nodeName.toLowerCase())return this._formData=new FormData(this.element),this._formData}}])&&gS(e.prototype,n),r&&gS(e,r),o}(Nu);function ES(t,e,n,r){var i,o=!1,a=0;function s(){i&&clearTimeout(i)}function u(){for(var u=arguments.length,c=new Array(u),l=0;l<u;l++)c[l]=arguments[l];var h=this,f=Date.now()-a;function d(){a=Date.now(),n.apply(h,c)}function p(){i=void 0}o||(r&&!i&&d(),s(),void 0===r&&f>t?d():!0!==e&&(i=setTimeout(r?p:d,void 0===r?t-f:t)))}return"boolean"!=typeof e&&(r=n,n=e,e=void 0),u.cancel=function(){s(),o=!0},u}function TS(t){return(TS="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function MS(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function AS(t,e){return(AS=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function LS(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=PS(t);if(e){var i=PS(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return DS(this,n)}}function DS(t,e){return!e||"object"!==TS(e)&&"function"!=typeof e?CS(t):e}function CS(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function PS(t){return(PS=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var RS=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&AS(t,e)}(o,t);var e,n,r,i=LS(o);function o(t,e){var n,r,a,s,u,c,l;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o),n=i.call(this,t,e),r=CS(n),s=function(t){var e=t.currentTarget.parentElement.querySelector("input"),r="password"==e.getAttribute("type")?"text":"password";e.setAttribute("type",r),"text"==r?(n.eye.classList.remove("icon-eye"),n.eye.classList.add("icon-eye-close")):(n.eye.classList.remove("icon-eye-close"),n.eye.classList.add("icon-eye"))},(a="onClickEye")in r?Object.defineProperty(r,a,{value:s,enumerable:!0,configurable:!0,writable:!0}):r[a]=s,n.input=n.element.querySelector("input"),n.name=n.input.getAttribute("name"),n.element.dataset.typed=0,n.value=void 0,n.eye=n.element.querySelector(".icon-eye"),n.onKeyUp=(u=500,c=n.onKeyUp.bind(CS(n)),void 0===l?ES(u,c,!1):ES(u,l,!1!==c)),n}return e=o,(n=[{key:"attach",value:function(){this.input.addEventListener("keyup",this.onKeyUp),this.eye&&this.eye.addEventListener("click",this.onClickEye)}},{key:"detach",value:function(){this.input.removeEventListener("keyup",this.onKeyUp),this.eye&&this.eye.addEventListener("click",this.onClickEye)}},{key:"onKeyUp",value:function(){this.input.value!=this.value&&(this.element.dataset.typed=1,this.value=this.input.value,this.emit("change",this,this.value))}}])&&MS(e.prototype,n),r&&MS(e,r),o}(Nu);function kS(t){return(kS="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function OS(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function IS(t,e){return(IS=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function FS(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=NS(t);if(e){var i=NS(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return zS(this,n)}}function zS(t,e){return!e||"object"!==kS(e)&&"function"!=typeof e?BS(t):e}function BS(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function NS(t){return(NS=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var US=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&IS(t,e)}(o,t);var e,n,r,i=FS(o);function o(t,e){var n,r,a,s;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o),n=i.call(this,t,e),r=BS(n),s=function(){n.element.dataset.typed=1,n.value="on"==n.input.value,n.emit("change",BS(n),n.value)},(a="onClick")in r?Object.defineProperty(r,a,{value:s,enumerable:!0,configurable:!0,writable:!0}):r[a]=s,n.input=n.element.querySelector("input"),n.name=n.input.getAttribute("name"),n.element.dataset.typed=0,n.value=void 0,n}return e=o,(n=[{key:"attach",value:function(){this.input.addEventListener("click",this.onClick)}},{key:"detach",value:function(){this.input.removeEventListener("click",this.onClick)}}])&&OS(e.prototype,n),r&&OS(e,r),o}(Nu);function jS(t){return(jS="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function HS(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function VS(t,e){return(VS=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function GS(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=XS(t);if(e){var i=XS(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return WS(this,n)}}function WS(t,e){return!e||"object"!==jS(e)&&"function"!=typeof e?qS(t):e}function qS(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function XS(t){return(XS=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var YS=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&VS(t,e)}(o,t);var e,n,r,i=GS(o);function o(t,e){var n,r,a,s;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o),n=i.call(this,t,e),r=qS(n),s=function(t){n.element.dataset.typed=1,n.value=t.currentTarget.value,n.emit("change",qS(n),n.value)},(a="onClick")in r?Object.defineProperty(r,a,{value:s,enumerable:!0,configurable:!0,writable:!0}):r[a]=s,n.inputs=n.element.querySelectorAll("input"),n.name=n.inputs[0].getAttribute("name"),n.element.dataset.typed=0,n.value=void 0,n}return e=o,(n=[{key:"attach",value:function(){var t=this;this.inputs.forEach((function(e){return e.addEventListener("click",t.onClick)}))}},{key:"detach",value:function(){var t=this;this.inputs.forEach((function(e){return e.removeEventListener("click",t.onClick)}))}}])&&HS(e.prototype,n),r&&HS(e,r),o}(Nu);function ZS(t){return(ZS="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function JS(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function QS(t,e){return(QS=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function KS(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=eE(t);if(e){var i=eE(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return $S(this,n)}}function $S(t,e){return!e||"object"!==ZS(e)&&"function"!=typeof e?tE(t):e}function tE(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function eE(t){return(eE=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var nE=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&QS(t,e)}(o,t);var e,n,r,i=KS(o);function o(t,e){var n,r,a,s;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o),n=i.call(this,t,e),r=tE(n),s=function(){n.homeSlideshow&&n.bootstrap.components.get(n.homeSlideshow).openSlideshow()},(a="openSlideshow")in r?Object.defineProperty(r,a,{value:s,enumerable:!0,configurable:!0,writable:!0}):r[a]=s,n.handleResize=n.handleResize.bind(tE(n)),n.handleScroll=n.handleScroll.bind(tE(n)),n.handleUp=n.handleUp.bind(tE(n)),n.handleDown=n.handleDown.bind(tE(n)),n.homeSlideshow=document.querySelector(".home-slideshow"),n.info=n.element.querySelector(".info"),n.dots=n.element.querySelector(".dots"),n.menu=n.element.querySelector(".menu"),n.contact=n.element.querySelector(".contact-us .inner"),n.parts=Array.from(document.querySelectorAll('[data-menu="1"]')).map((function(t,e){var r=document.createElement("div");return r.classList.add("dot"),r.appendChild(document.createElement("span")),n.dots.appendChild(r),{elem:t,dot:r,n:e,event:null,top:0}})),n.backgrounds=Array.from(document.querySelectorAll("[data-background]")).map((function(t){return{elem:t,top:0,bottom:0,value:t.getAttribute("data-background")}})),n.parts.forEach((function(t){t.event=n.handleClick.bind(tE(n),t)})),n.scrollY=0,n.current=0,n.lastBg=0,n.currentBg=0,n.length=(n.parts.length<10?"0":"")+n.parts.length,n.info.innerHTML="1/"+n.length,n}return e=o,(n=[{key:"open",value:function(){if(this.viewport.medias.desktop){var t=qr.timeline();t.fromTo(this.element,{opacity:0},{opacity:1,duration:.2},.5),t.fromTo(this.contact,{y:60},{y:0,duration:.4,ease:"power2.out"},1),t.fromTo(this.menu,{y:60},{y:0,duration:.4,ease:"power2.out"},1.1),this.parts.forEach((function(e,n){t.fromTo(e.dot,{opacity:0},{opacity:1,duration:.4},.7+.2*n)}))}}},{key:"close",value:function(){}},{key:"attach",value:function(){this.handleResize(),this.handleScroll(),this.viewport.on("resize",this.handleResize),this.parts.forEach((function(t){t.dot.addEventListener("click",t.event)})),this.menu.addEventListener("click",this.openSlideshow),window.addEventListener("scroll",this.handleScroll),this.open()}},{key:"detach",value:function(){this.viewport.off("resize",this.handleResize),this.parts.forEach((function(t){t.dot.removeEventListener("click",t.event)})),this.menu.removeEventListener("click",this.openSlideshow),window.removeEventListener("scroll",this.handleScroll)}},{key:"handleResize",value:function(){var t=this;this.parts.forEach((function(e){e.top=e.elem.getBoundingClientRect().top-.5*t.viewport.height-t.scrollY})),this.backgrounds.forEach((function(e){var n=e.elem.getBoundingClientRect();e.top=n.top-t.scrollY-t.viewport.height+120,e.bottom=e.top+n.height}))}},{key:"handleClick",value:function(t){this.scrollTo(t.elem)}},{key:"handleScroll",value:function(){var t=this;this.scrollY=window.scrollY;var e,n,r,i,o,a,s=0;(this.parts.forEach((function(t,e){t.top<scrollY?(s=e,t.dot.classList.contains("active")||t.dot.classList.add("active")):t.dot.classList.contains("active")&&t.dot.classList.remove("active")})),this.current!=s&&(this.current=s,this.info.innerHTML=this.current+1+"/"+this.length),this.backgrounds.forEach((function(e){t.scrollY>e.top&&t.scrollY<e.bottom&&(t.currentBg=e)})),this.lastBg.value!=this.currentBg.value)&&((null===(e=this.lastBg)||void 0===e?void 0:e.value)!=(null===(n=this.currentBg)||void 0===n?void 0:n.value)&&(this.element.classList.contains(null===(r=this.lastBg)||void 0===r?void 0:r.value)&&this.element.classList.remove(null===(i=this.lastBg)||void 0===i?void 0:i.value),this.element.classList.contains(null===(o=this.currentBg)||void 0===o?void 0:o.value)||this.element.classList.add(null===(a=this.currentBg)||void 0===a?void 0:a.value)),this.lastBg=this.currentBg)}},{key:"scrollTo",value:function(t){qr.to(window,{duration:1,ease:"power2.inOut",scrollTo:t})}},{key:"checkArrows",value:function(){this.parts[this.current-1]?this.up.classList.contains("disabled")&&this.up.classList.remove("disabled"):this.up.classList.contains("disabled")||this.up.classList.add("disabled"),this.parts[this.current+1]?this.down.classList.contains("disabled")&&this.down.classList.remove("disabled"):this.down.classList.contains("disabled")||this.down.classList.add("disabled")}},{key:"handleUp",value:function(){var t=null;this.scrollY>this.parts[this.current].top+this.viewport.height?t=this.parts[this.current]:this.parts[this.current-1]&&(t=this.parts[this.current-1]),t&&t.elem&&this.scrollTo(t.elem),this.checkArrows()}},{key:"handleDown",value:function(){this.current+1<this.parts.length&&this.parts[this.current+1].elem&&this.scrollTo(this.parts[this.current+1].elem),this.checkArrows()}}])&&JS(e.prototype,n),r&&JS(e,r),o}(Bu);function rE(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var iE=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.render=this.render.bind(this),this.resize=this.resize.bind(this),this.tick=this.tick.bind(this),this.requestTick=this.requestTick.bind(this),this.open=this.open.bind(this),this.close=this.close.bind(this),this.$canvas=e,this.urls=n,this.images=[],this.ratios=[],this.textures=[],this.opened=!1,this._progress=0,this._opacity=1,this._target=0,this.ticker=!1}var e,n,r;return e=t,(n=[{key:"attach",value:function(){this.gl=this.$canvas.getContext("webgl"),this.gl&&this.initShaderProgram()&&(this.initPositionBuffer(),this.initUniforms(),this.t=0,this.loadImages())}},{key:"detach",value:function(){this.opened&&this.close()}},{key:"open",value:function(){this.opened||(this.resize(),this.requestTick(),this.opened=!0)}},{key:"close",value:function(){this.opened&&(this.stopTick(),this.opened=!1)}},{key:"loadShader",value:function(t,e){var n=this.gl.createShader(t);return this.gl.shaderSource(n,e),this.gl.compileShader(n),this.gl.getShaderParameter(n,this.gl.COMPILE_STATUS)?n:null}},{key:"initShaderProgram",value:function(){return this.vertexShader=this.loadShader(this.gl.VERTEX_SHADER,this.vs()),this.fragmentShader=this.loadShader(this.gl.FRAGMENT_SHADER,this.fs()),this.program=this.gl.createProgram(),this.gl.attachShader(this.program,this.vertexShader),this.gl.attachShader(this.program,this.fragmentShader),this.gl.linkProgram(this.program),!!this.gl.getProgramParameter(this.program,this.gl.LINK_STATUS)||null}},{key:"initPositionBuffer",value:function(){this.positionBuffer=this.gl.createBuffer(),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,this.positionBuffer),this.gl.bufferData(this.gl.ARRAY_BUFFER,new Float32Array([1,1,-1,1,1,-1,-1,-1]),this.gl.STATIC_DRAW)}},{key:"initUniforms",value:function(){var t=this;this.uniforms={ratio:this.gl.getUniformLocation(this.program,"ratio"),progress:this.gl.getUniformLocation(this.program,"progress"),opacity:this.gl.getUniformLocation(this.program,"opacity"),images:[],ratios:[]},this.urls.forEach((function(e,n){t.uniforms.images[n]=t.gl.getUniformLocation(t.program,"image"+n),t.uniforms.ratios[n]=t.gl.getUniformLocation(t.program,"ratio"+n)})),this.opacity=1}},{key:"loadImages",value:function(){var t=this;this.urls.forEach((function(e,n){var r=new Image;r.src=e,r.addEventListener("load",(function(){t.images[n]=r,t.images.filter((function(t){return!!t})).length==t.urls.length&&t.imageLoaded()}))}))}},{key:"imageLoaded",value:function(){var t=this;this.images.reverse().forEach((function(e,n){var r=t.gl.createTexture();t.gl.bindTexture(t.gl.TEXTURE_2D,r),t.gl.texParameteri(t.gl.TEXTURE_2D,t.gl.TEXTURE_WRAP_S,t.gl.CLAMP_TO_EDGE),t.gl.texParameteri(t.gl.TEXTURE_2D,t.gl.TEXTURE_WRAP_T,t.gl.CLAMP_TO_EDGE),t.gl.texParameteri(t.gl.TEXTURE_2D,t.gl.TEXTURE_MIN_FILTER,t.gl.LINEAR),t.gl.texImage2D(t.gl.TEXTURE_2D,0,t.gl.RGBA,t.gl.RGBA,t.gl.UNSIGNED_BYTE,e),t.textures[n]=r})),this.draw()}},{key:"draw",value:function(){var t=this;this.vertexPosition=this.gl.getAttribLocation(this.program,"aVertexPosition"),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,this.positionBuffer),this.gl.vertexAttribPointer(this.vertexPosition,2,this.gl.FLOAT,!1,0,0),this.gl.enableVertexAttribArray(this.vertexPosition),this.gl.useProgram(this.program),this.images.forEach((function(e,n){t.gl.uniform1i(t.uniforms.images[n],n),t.gl.uniform1f(t.uniforms.ratios[n],e.naturalWidth/e.naturalHeight),t.gl.activeTexture(t.gl.TEXTURE0+n),t.gl.bindTexture(t.gl.TEXTURE_2D,t.textures[n])})),this.resize(),this.tick()}},{key:"render",value:function(){this.gl.uniform1f(this.uniforms.opacity,this._opacity),this.gl.uniform1f(this.uniforms.progress,this._progress),this.gl.clearColor(0,0,0,1),this.gl.clear(this.gl.COLOR_BUFFER_BIT|this.gl.DEPTH_BUFFER_BIT),this.gl.drawArrays(this.gl.TRIANGLE_STRIP,0,4),this.rendering=!1}},{key:"requestRender",value:function(){this.rendering=!0}},{key:"stopRender",value:function(){this.rendering=!1}},{key:"tick",value:function(){requestAnimationFrame(this.tick),Math.abs(this._target-this._progress)>.001&&(this._progress+=.05*(this._target-this._progress),this.requestRender()),this.rendering&&this.render()}},{key:"requestTick",value:function(){this.ticker=!0,this.tick()}},{key:"stopTick",value:function(){this.ticker=!1}},{key:"resize",value:function(){var t=this.$canvas.getBoundingClientRect();this.width=t.width,this.height=t.height,this.$canvas.width=t.width,this.$canvas.height=t.height,this.gl.viewport(0,0,this.$canvas.width,this.$canvas.height),this.gl.uniform1f(this.uniforms.ratio,this.width/this.height),this.requestRender()}},{key:"progress",get:function(){return this._progress},set:function(t){t!=this._progress&&(this._progress=t,this.target=t,this.uniforms&&(this.gl.uniform1f(this.uniforms.progress,t),this.requestRender()))}},{key:"target",get:function(){return this._target},set:function(t){this._target=t}},{key:"opacity",get:function(){return this._opacity},set:function(t){t!=this._opacity&&(this._opacity=t,this.uniforms&&this.requestRender())}},{key:"vs",value:function(){return"\nprecision highp float;\n\nattribute vec4 aVertexPosition;\n\nvarying vec2 vUv;\n\nvoid main() {\n\tvUv = aVertexPosition.xy;\n\tgl_Position = aVertexPosition;\n}"}},{key:"fs",value:function(){return"\nprecision highp float;\n\nvarying vec2 vUv;\n\n#define N_IMG ".concat(this.urls.length,"\n#define F_IMG ").concat(this.urls.length,".0\n\nuniform float ratio;\nuniform float progress;\nuniform float opacity;\n\n")+this.urls.map((function(t,e){return"uniform sampler2D image".concat(e,";")})).join("\n")+"\n "+this.urls.map((function(t,e){return"uniform float ratio".concat(e,";")})).join("\n")+"\n\nconst float PI = 3.14159265359;\n\nvoid main() {\n\tvec2 deformed = vUv;\n\tdeformed.x *= (vUv.y * vUv.y * 0.7 + 4.0);\n\tdeformed.y *= (0.5 + (1.0 - cos(vUv.x * PI * 0.3)) * 0.5) * 1.5;\n\n\tvec2 iUv = vec2(\n\t\tsmoothstep(0.4, 0.4, cos(deformed.x * 0.5) * 2.0),\n\t\tsmoothstep(0.3, 0.3, abs(cos(deformed.y / ratio * 4.0 + (F_IMG - progress - 1.0) * PI) * 2.0))\n\t);\n\n\tfloat ySlide = (deformed.y / ratio * 4.0 + (F_IMG - progress - 1.0) * PI) / PI + 0.5;\n\tfloat n = floor(ySlide);\n\tfloat debug = iUv.x * iUv.y;\n\n\tiUv.x *= clamp(deformed.x / 6.0 + 0.5, 0.0, 1.0);\n\tiUv.y *= clamp(fract(1.0 - ySlide), 0.0, 1.0);\n\n\tfloat borders = smoothstep(0.05, 0.055, iUv.y) * smoothstep(0.95, 0.945, iUv.y) * smoothstep(0.05, 0.055, iUv.x) * smoothstep(0.95, .945, iUv.x);\n\n\tvec4 color = vec4(0.0);\n\n"+this.urls.map((function(t,e){return"\tcolor += texture2D(image".concat(e,", (vec2((iUv.x - 0.5) / (ratio").concat(e," / ratio) + 0.5, iUv.y) - 0.5) * min(1.0, (ratio").concat(e," / ratio)) + 0.5) * float(n == ").concat(e,".0);")})).join("\n")+"\n\n\tgl_FragColor = color * debug * 0.8 * borders;\n}"}}])&&rE(e.prototype,n),r&&rE(e,r),t}();function oE(t){return(oE="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function aE(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function sE(t,e){return(sE=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function uE(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=hE(t);if(e){var i=hE(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return cE(this,n)}}function cE(t,e){return!e||"object"!==oE(e)&&"function"!=typeof e?lE(t):e}function lE(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function hE(t){return(hE=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var fE=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&sE(t,e)}(o,t);var e,n,r,i=uE(o);function o(t,e){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o),(n=i.call(this,t,e)).handleMove=n.handleMove.bind(lE(n)),n.handleWheel=n.handleWheel.bind(lE(n)),n.handleResize=n.handleResize.bind(lE(n)),n.handleUp=n.handleUp.bind(lE(n)),n.handleDown=n.handleDown.bind(lE(n)),n.handleDownTrigger=n.handleDownTrigger.bind(lE(n)),n.checkStillDown=n.checkStillDown.bind(lE(n)),n.closeSlideshow=n.closeSlideshow.bind(lE(n)),n.scrollTo=n.scrollTo.bind(lE(n)),n.canvas=n.element.querySelector(".slideshow-canvas"),n.pointer=n.element.querySelector(".hold-container"),n.pointerInner=n.pointer.querySelector(".inner"),n.close=n.element.querySelector(".close"),n.title=n.element.querySelector(".title"),n.number=n.element.querySelector(".number"),n.numberInner=n.number.querySelector(".inner"),n.pointerBBox=n.pointer.getBoundingClientRect(),n.scrollY=0,n.current=null,n.mouse=[0,0],n.start=[0,0],n.down=!1,n.target=0,n.initial=0,n.opened=!1,n.titleOpened=!1,n.delta=0,n.tl=null,n.slides=Array.from(document.querySelectorAll('[data-menu="1"]')).map((function(t,e){return{elem:t,img:t.getAttribute("data-menu-img"),content:t.getAttribute("data-menu-content"),n:(e<10?"0":"")+(e+1)}})),n.slideshow=new iE(n.canvas,n.slides.map((function(t){return t.img}))),n}return e=o,(n=[{key:"openSlideshow",value:function(){var t=this;if(!this.opened){this.handleResize(),this.title.innerHTML="";var e=qr.timeline();return this.target=0,e.set(this.element,{display:"block"},0),e.call(this.slideshow.open),e.call(this.handleResize),e.fromTo(this.element,{opacity:0},{opacity:1},0),e.fromTo(this.slideshow,{opacity:0},{opacity:1},0),e.fromTo(this.slideshow,{progress:-2},{progress:0,ease:"power2.inOut",duration:1},.3),e.add((function(){t.showTitle(t.slides[0])})),window.addEventListener("wheel",this.handleWheel,{passive:!1}),this.element.addEventListener("mousemove",this.handleMove),this.close.addEventListener("click",this.closeSlideshow),this.title.addEventListener("click",this.scrollTo),this.viewport.on("resize",this.handleResize),this.opened=!0,e}}},{key:"closeSlideshow",value:function(){if(this.opened){this.hideTitle(),window.removeEventListener("wheel",this.handleWheel),this.element.removeEventListener("mousemove",this.handleMove),this.close.removeEventListener("click",this.closeSlideshow),this.viewport.off("resize",this.handleResize),this.opened=!1;var t=qr.timeline();return t.to(this.slideshow,{progress:this.slides.length,ease:"power2.inOut",duration:1},0),t.to(this.element,{opacity:0},.4),t.to(this.slideshow,{opacity:0},.4),t.set(this.slideshow,{progress:-2}),t.add(this.slideshow.close),t.set(this.element,{display:"none"}),t}}},{key:"scrollTo",value:function(){this.closeSlideshow(),qr.to(window,{duration:1,ease:"power.out",scrollTo:{y:this.slides[Math.round(this.target)].elem,ease:"power.inOut"}})}},{key:"showTitle",value:function(t){if(!this.titleOpened){this.titleOpened=!0,this.current=t;var e=qr.timeline();this.numberInner.innerHTML=t.n,this.title.innerHTML=t.content;var n=new Fs(this.title,{type:"lines"}).lines.map((function(t){return t.classList.add("line-hi"),new Fs(t,{type:"words"})}));return e.fromTo(this.numberInner,{opacity:0},{opacity:1}),e.fromTo(this.numberInner,{y:40},{y:0,duration:.5,ease:"power2.out"},0),e.fromTo(this.title,{opacity:0},{opacity:1},.2),n.forEach((function(t){e.set(t.words,{y:-120,rotation:-12},0),e.to(t.words,{y:0,rotation:0,ease:"power2.out",duration:.5,stagger:.04},.2)})),e}}},{key:"hideTitle",value:function(){if(this.titleOpened){this.titleOpened=!1;var t=qr.timeline();return t.to(this.numberInner,{opacity:0,duration:.2},0),t.to(this.title,{opacity:0,duration:.2},0),t}}},{key:"hideThenShowTitle",value:function(t){this.tl&&this.tl.clear(),this.tl=qr.timeline(),this.tl.add(this.hideTitle()),this.tl.add(this.showTitle(t))}},{key:"attach",value:function(){this.slides.length&&(this.slides[0].elem.addEventListener("mousedown",this.handleDownTrigger),this.element.addEventListener("mousedown",this.handleDown),window.addEventListener("mouseup",this.handleUp),this.slideshow.attach())}},{key:"detach",value:function(){this.slides.length&&(this.slides[0].elem.removeEventListener("mousedown",this.handleDownTrigger),this.element.removeEventListener("mousedown",this.handleDown),window.removeEventListener("mouseup",this.handleUp),this.slideshow.detach())}},{key:"handleResize",value:function(){this.pointerBBox=this.pointer.getBoundingClientRect(),this.slideshow.resize(),this.current&&(this.title.innerHTML=this.current.content,new Fs(this.title,{type:"lines"}))}},{key:"handleWheel",value:function(t){t.preventDefault(),t.stopPropagation(),Math.abs(t.deltaY)<=2||(this.target=Math.max(Math.min(this.target+.001*t.deltaY,this.slides.length-1),0),this.slideshow.target=Math.round(this.target),this.slides[Math.round(this.target)]!=this.current&&this.hideThenShowTitle(this.slides[Math.round(this.target)]))}},{key:"handleMove",value:function(t){this.mouse=[t.clientX,t.clientY],this.down&&(this.titleOpened&&Math.abs(this.start[1]-this.mouse[1])>5&&this.hideTitle(this.slides[Math.round(this.target)]),this.target=Math.max(Math.min(this.initial+(this.start[1]-this.mouse[1])/this.viewport.height*2,this.slides.length-1),0),this.slideshow.target=this.target),this.transformCursor(this.mouse)}},{key:"handleDownTrigger",value:function(t){this.down=!0,this.viewport.medias.desktop&&(this.opened||setTimeout(this.checkStillDown,1e3))}},{key:"handleDown",value:function(t){this.deltaY=0,this.down=!0,this.viewport.medias.desktop&&this.opened&&(this.start=[t.clientX,t.clientY],this.initial=this.target,this.pointer.classList.add("click"))}},{key:"handleUp",value:function(){this.down=!1,this.pointerInner.style.transform="",this.slideshow.target=this.target=Math.round(this.target),this.transformCursor(this.mouse),this.pointer.classList.remove("click"),this.showTitle(this.slides[this.target])}},{key:"checkStillDown",value:function(){this.down&&this.openSlideshow()}},{key:"transformCursor",value:function(t){this.pointer.style.transform="translate3d("+(t[0]-.5*this.pointerBBox.width)+"px, "+(t[1]-.5*this.pointerBBox.height)+"px, 0)"}}])&&aE(e.prototype,n),r&&aE(e,r),o}(Bu);function dE(t){return(dE="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function pE(t,e,n,r,i,o,a){try{var s=t[o](a),u=s.value}catch(t){return void n(t)}s.done?e(u):Promise.resolve(u).then(r,i)}function mE(t){return function(t){if(Array.isArray(t))return gE(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return gE(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return gE(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function gE(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function vE(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function yE(t,e){return(yE=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function bE(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=wE(t);if(e){var i=wE(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return _E(this,n)}}function _E(t,e){return!e||"object"!==dE(e)&&"function"!=typeof e?xE(t):e}function xE(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function wE(t){return(wE=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var SE=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&yE(t,e)}(u,t);var e,n,r,i,o,s=bE(u);function u(t,e){var n,r,i,o;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,u),n=s.call(this,t,e),r=xE(n),o=function(t){document.body.classList.remove("menu-open"),document.body.classList.remove("sub-open");var e=document.querySelector(".module");n.pageIsWhite=!0,e&&e.classList.contains("module-01")&&(n.pageIsWhite=!1),n.pageIsWhite?document.body.classList.add("white"):document.body.classList.remove("white")},(i="handleRouterChange")in r?Object.defineProperty(r,i,{value:o,enumerable:!0,configurable:!0,writable:!0}):r[i]=o,n.handleScroll=n.handleScroll.bind(xE(n)),n.handleResize=n.handleResize.bind(xE(n)),n.handleMedia=n.handleMedia.bind(xE(n)),n.handleBurgerClick=n.handleBurgerClick.bind(xE(n)),n.nav=n.element.querySelector(".nav"),n.burger=n.element.querySelector(".burger"),n.subs=Array.from(n.element.querySelectorAll(".has-sub")),n.li=Array.from(n.element.querySelectorAll(".nav>ul>li")),n.layer=n.element.querySelector(".layer"),n.overlay=n.element.querySelector(".overlay"),n.line=n.element.querySelector(".line"),n.logo=n.element.querySelector(".logo"),n.joinus=n.element.querySelector(".join-us"),n.page=document.body.querySelector(".content>.page"),n.appear=[n.logo].concat(mE(n.li),[n.joinus]),n.subs=n.subs.map((function(t){return{elem:t,ul:t.querySelector("ul"),li:t.querySelectorAll("li"),i:t.querySelectorAll("i"),tl:null,enter:null,leave:null,toogle:null}})),n.subs.forEach((function(t){t.leave=n.handleSubLeave.bind(xE(n),t),t.enter=n.handleSubEnter.bind(xE(n),t),t.toogle=n.toogleSubOpen.bind(xE(n),t)})),n.scrollY=0,n.lastScrollY=0,n.pageIsWhite=!1,n}return e=u,(n=[{key:"open",value:function(){var t=qr.timeline();t.fromTo(this.element,{opacity:0},{opacity:1,duration:.4},.2),t.fromTo(this.element,{y:-100},{y:0,duration:.6,ease:"power2.out"},.2),this.viewport.medias.desktop&&(t.fromTo(this.appear,{opacity:0},{opacity:1,duration:.4,stagger:.05},.5),t.fromTo(this.appear,{y:-50},{y:0,duration:.6,ease:"power2.out",stagger:.05},.5)),t.set(this.element,{clearProps:"all"},2),t.set(this.appear,{clearProps:"all"},2),t.set(this.element,{opacity:1},2)}},{key:"close",value:function(){}},{key:"goToTarget",value:function(){this.closeSlideshow(),qr.to(window,{duration:1,ease:"power.out",scrollTo:{y:this.slides[Math.round(this.target)].elem,offsetY:100}})}},{key:"attach",value:function(){window.addEventListener("scroll",this.handleScroll),this.burger.addEventListener("click",this.handleBurgerClick),this.viewport.on("resize",this.handleResize),this.viewport.on("media",this.handleMedia),this.handleMedia(),this.handleScroll(),qr.fromTo(this.line,{scale:0},{scale:1,ease:"linear",scrollTrigger:{trigger:document.body,start:"top top",end:"bottom bottom",scrub:.8,type:"permanent"}}),this.handleRouterChange(),this.bootstrap.loader.on("changed",this.handleRouterChange),this.open()}},{key:"detach",value:function(){var t=this;window.removeEventListener("scroll",this.handleScroll),this.subs.forEach((function(e){e.elem.removeEventListener("mouseenter",t.handleSubEnter.bind(t,e)),e.elem.removeEventListener("mouseleave",t.handleSubLeave.bind(t,e)),e.elem.removeEventListener("touchend",t.toogleSubOpen.bind(t,e))})),this.burger.addEventListener("click",this.handleBurgerClick),this.viewport.off("resize",this.handleResize),this.viewport.off("media",this.handleMedia)}},{key:"toogleSubOpen",value:function(t){var e=this;this.subs.forEach((function(n){n!=t&&n.elem.classList.contains("open")&&e.handleSubLeave(n)})),this.li.forEach((function(e){e!=t.elem&&(e.style.opacity=.5)})),t.elem.classList.contains("open")?this.handleSubLeave(t,!0):this.handleSubEnter(t,!0)}},{key:"handleSubEnter",value:function(t){t.elem.classList.add("open"),document.body.classList.add("sub-open"),t.ul.style.height="";var e=t.ul.getBoundingClientRect().height;if(t.tl&&t.tl.clear(),t.tl=qr.timeline(),t.tl.fromTo(t.li,{opacity:0},{opacity:1,duration:.4,stagger:.05}),this.viewport.medias.desktop){var n=this.nav.getBoundingClientRect().height;this.layer.style.transform="scale("+(e+n)/n+")"}else t.tl.fromTo(t.ul,{height:0},{height:e,duration:.3,ease:"power.out"},0),t.tl.fromTo(t.i,{rotate:0},{rotate:90,duration:.4,ease:"power2.out"},0)}},{key:"handleSubLeave",value:function(t){document.body.classList.remove("sub-open"),t.tl&&t.tl.clear(),t.tl=qr.timeline(),this.viewport.medias.desktop?(t.elem.classList.remove("open"),t.tl.to(t.li,{opacity:0,duration:.4})):(t.tl.to(t.ul,{height:0,duration:.3,ease:"power.in"},0),t.tl.to(t.i,{rotate:0,duration:.4,ease:"power2.out"},0),t.tl.add((function(){t.elem.classList.remove("open")}))),this.li.forEach((function(e){e!=t.elem&&(e.style.opacity=1)})),this.layer.style.transform=""}},{key:"handleBurgerClick",value:function(){document.body.classList.toggle("menu-open")}},{key:"handleResize",value:function(){}},{key:"handleMedia",value:function(){var t=this;document.body.classList.remove("menu-open"),document.body.classList.remove("sub-open"),this.subs.forEach((function(e){e.elem.removeEventListener("mouseenter",e.enter),e.elem.removeEventListener("mouseleave",e.leave),e.elem.removeEventListener("click",e.toogle),e.elem.classList.contains("open")&&t.handleSubLeave(e)})),this.viewport.medias.desktop?this.subs.forEach((function(t){t.elem.addEventListener("mouseenter",t.enter),t.elem.addEventListener("mouseleave",t.leave)})):this.subs.forEach((function(t){t.elem.addEventListener("click",t.toogle)}))}},{key:"handleScroll",value:function(t){this.lastScrollY=this.scrollY,this.scrollY=window.scrollY,document.body.classList.contains("sub-open")||document.body.classList.contains("menu-open")||(this.scrollY<0&&(this.scrollY=0),this.scrollY-this.lastScrollY>0?document.body.classList.contains("scrolled")||document.body.classList.add("scrolled"):(document.body.classList.contains("scrolled")&&document.body.classList.remove("scrolled"),this.viewport.medias.desktop&&!this.pageIsWhite&&(this.scrollY>10?document.body.classList.contains("white")||document.body.classList.add("white"):document.body.classList.contains("white")&&document.body.classList.remove("white"))))}},{key:"refreshAccountStatus",value:(i=a.a.mark((function t(){var e,n;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,ajaxFetcher.call("capstant_account_status",new FormData);case 2:(e=t.sent).success&&((n=document.createElement("textarea")).innerHTML=e.result,this.element.querySelector(".account-wrapper").innerHTML=n.value);case 4:case"end":return t.stop()}}),t,this)})),o=function(){var t=this,e=arguments;return new Promise((function(n,r){var o=i.apply(t,e);function a(t){pE(o,n,r,a,s,"next",t)}function s(t){pE(o,n,r,a,s,"throw",t)}a(void 0)}))},function(){return o.apply(this,arguments)})}])&&vE(e.prototype,n),r&&vE(e,r),u}(Bu);function EE(t){return(EE="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function TE(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function ME(t,e){return(ME=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function AE(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=CE(t);if(e){var i=CE(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return LE(this,n)}}function LE(t,e){return!e||"object"!==EE(e)&&"function"!=typeof e?DE(t):e}function DE(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function CE(t){return(CE=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var PE=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&ME(t,e)}(o,t);var e,n,r,i=AE(o);function o(t,e){var n,r,a,s;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o),n=i.call(this,t,e),r=DE(n),s=function(){n.module&&n.module.classList.contains("module-41")?n.element.classList.add("override"):n.element.classList.contains("override")&&ifthis.element.classList.remove("override")},(a="handleLoaderChanged")in r?Object.defineProperty(r,a,{value:s,enumerable:!0,configurable:!0,writable:!0}):r[a]=s,n.module=document.querySelector(".module"),n}return e=o,(n=[{key:"attach",value:function(){this.bootstrap.loader.on("changed",this.handleLoaderChanged)}},{key:"detach",value:function(){}}])&&TE(e.prototype,n),r&&TE(e,r),o}(Bu);function RE(t){return(RE="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function kE(t,e,n,r,i,o,a){try{var s=t[o](a),u=s.value}catch(t){return void n(t)}s.done?e(u):Promise.resolve(u).then(r,i)}function OE(t){return function(){var e=this,n=arguments;return new Promise((function(r,i){var o=t.apply(e,n);function a(t){kE(o,r,i,a,s,"next",t)}function s(t){kE(o,r,i,a,s,"throw",t)}a(void 0)}))}}function IE(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function FE(t,e){return(FE=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function zE(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=UE(t);if(e){var i=UE(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return BE(this,n)}}function BE(t,e){return!e||"object"!==RE(e)&&"function"!=typeof e?NE(t):e}function NE(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function UE(t){return(UE=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var jE=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&FE(t,e)}(c,t);var e,n,r,i,o,s,u=zE(c);function c(t){var e,n,r,i;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,c),e=u.call(this,t),n=NE(e),i=function(){e.targets.forEach((function(t){t.anim.reset(),t.tl.kill()})),e.fillTagets(),e.build()},(r="handleRouterChange")in n?Object.defineProperty(n,r,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[r]=i,e.dependencies.add(ku),e.onResize=e.onResize.bind(NE(e)),e.targets=[],e.animations=null,e.stagger=.08,e}return e=c,(n=[{key:"register",value:function(t){this.animations=t}},{key:"after",value:(s=OE(a.a.mark((function t(){return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",void 0);case 1:case"end":return t.stop()}}),t)}))),function(){return s.apply(this,arguments)})},{key:"before",value:(o=OE(a.a.mark((function t(){return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",void 0);case 1:case"end":return t.stop()}}),t)}))),function(){return o.apply(this,arguments)})},{key:"onResize",value:function(){this.build(!1)}},{key:"build",value:function(){for(var t=this,e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],n=0;n<this.targets.length;n++)this.targets[n].top=this.targets[n].elem.getBoundingClientRect().top,n&&Math.abs(this.targets[n].top-this.targets[n-1].top)<10&&(this.targets[n].same=this.targets[n-1].same+1);this.targets.forEach((function(n){n.active&&(n.played?n.anim.reset():(e||n.buildAtResize)&&(n.tl&&n.tl.kill(),n.tl=qr.timeline({scrollTrigger:{trigger:n.elem,once:!0,toggleActions:"play complete none none"}}),n.tl.add(n.anim.timeline(),n.same*t.stagger),n.tl.add((function(){n.played=!0}))))}))}},{key:"fillTagets",value:function(){var t=this;this.targets=Array.from(document.querySelectorAll("[data-animation]")).map((function(t){var e,n={};return null===(e=t.getAttribute("data-props"))||void 0===e||e.split(";").map((function(t){return t.split(":")})).forEach((function(t){n[t[0]]=t[1]})),{elem:t,anim:t.getAttribute("data-animation"),props:n,tl:null,player:!1,active:!1,delay:0,top:0,same:0}})),this.targets.forEach((function(e){t.animations[e.anim]&&(e.active=!0,e.anim=new t.animations[e.anim](e.elem,e.props))}))}},{key:"run",value:(i=OE(a.a.mark((function t(){return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this.isAttached||(this.bootstrap.viewport.on("resize",this.onResize),this.bootstrap.loader.on("changed",this.handleRouterChange),this.isAttached=!0);case 1:case"end":return t.stop()}}),t,this)}))),function(){return i.apply(this,arguments)})}])&&IE(e.prototype,n),r&&IE(e,r),c}(Ns);function HE(t){return(HE="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function VE(t,e,n,r,i,o,a){try{var s=t[o](a),u=s.value}catch(t){return void n(t)}s.done?e(u):Promise.resolve(u).then(r,i)}function GE(t){return function(){var e=this,n=arguments;return new Promise((function(r,i){var o=t.apply(e,n);function a(t){VE(o,r,i,a,s,"next",t)}function s(t){VE(o,r,i,a,s,"throw",t)}a(void 0)}))}}function WE(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function qE(t,e){return(qE=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function XE(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=JE(t);if(e){var i=JE(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return YE(this,n)}}function YE(t,e){return!e||"object"!==HE(e)&&"function"!=typeof e?ZE(t):e}function ZE(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function JE(t){return(JE=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function QE(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var KE=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&qE(t,e)}(u,t);var e,n,r,i,o,s=XE(u);function u(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,u),QE(ZE(e=s.call(this,t)),"showInterLoader",(function(){e.showingInterloader=!0,e.loader.style.display="flex",e.loader.style.opacity="1";var t=qr.timeline();return t.fromTo(e.darkOverlay,{x:1.5*-e.bootstrap.viewport.width,skewX:20,scaleX:1},{x:0,skewX:20,scale:2,ease:"power2.in",duration:.5},.5),t.fromTo(e.redOverlay,{x:1.5*-e.bootstrap.viewport.width,skewX:20,scaleX:1},{x:0,skewX:20,scale:2,ease:"power2.in",duration:.8},0),t})),QE(ZE(e),"hideInterLoader",(function(){e.emit("changed"),e.showingInterloader=!1;var t=qr.timeline();return t.to(e.darkOverlay,{x:1.5*e.bootstrap.viewport.width,skewX:20,scaleX:1,ease:"power2.out",duration:.6},0),t.to(e.redOverlay,{x:1.5*e.bootstrap.viewport.width,skewX:20,scaleX:1,ease:"power2.out",duration:0},0),t.add((function(){e.loader.style.display="none"})),t})),e.dependencies.add(mu),e.dependencies.add(uT),e.dependencies.add(ku),e.viewport=t.viewport,e.loader=document.getElementById("loader"),e.darkOverlay=e.loader.querySelector(".overlay-dark"),e.redOverlay=e.loader.querySelector(".overlay-red"),e.first=!0,e}return e=u,(n=[{key:"before",value:(o=GE(a.a.mark((function t(){return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this.bootstrap.get(mu).loader.on("progress",(function(t){}));case 2:case"end":return t.stop()}}),t,this)}))),function(){return o.apply(this,arguments)})},{key:"after",value:(i=GE(a.a.mark((function t(){var e,n,r=this;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.first){t.next=2;break}return t.abrupt("return");case 2:this.first=!1,e=this.bootstrap.get(uT).timeline,(n=qr.timeline({paued:!0})).fromTo(this.loader,{opacity:1},{opacity:0,ease:"none",duration:.3},0),n.add((function(){r.loader.style.display="none"})),e.shiftChildren(n.totalDuration(),!0),e.add(n,0),this.emit("changed");case 10:case"end":return t.stop()}}),t,this)}))),function(){return i.apply(this,arguments)})}])&&WE(e.prototype,n),r&&WE(e,r),u}(Ns),$E=KE;function tT(t){return(tT="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function eT(t,e,n,r,i,o,a){try{var s=t[o](a),u=s.value}catch(t){return void n(t)}s.done?e(u):Promise.resolve(u).then(r,i)}function nT(t){return function(){var e=this,n=arguments;return new Promise((function(r,i){var o=t.apply(e,n);function a(t){eT(o,r,i,a,s,"next",t)}function s(t){eT(o,r,i,a,s,"throw",t)}a(void 0)}))}}function rT(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function iT(t,e){return(iT=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function oT(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=sT(t);if(e){var i=sT(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return aT(this,n)}}function aT(t,e){return!e||"object"!==tT(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function sT(t){return(sT=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var uT=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&iT(t,e)}(u,t);var e,n,r,i,o,s=oT(u);function u(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,u),(e=s.call(this,t)).dependencies.add(eu),e.dependencies.add(du),e.dependencies.add(Du),e.dependencies.add(ku),e.header=document.querySelector("header"),e.root=document.querySelector("#root"),e}return e=u,(n=[{key:"viewport",get:function(){return this.bootstrap.get(ku).viewport}},{key:"pageModule",get:function(){return this.bootstrap.get(eu)}},{key:"ajaxPageModule",get:function(){return this.bootstrap.get(du)}},{key:"components",get:function(){return this.bootstrap.get(Du).components}},{key:"loaderModule",get:function(){return this.bootstrap.get($E)}},{key:"previousComponent",get:function(){return this.pageModule.previous?this.components.get(this.pageModule.previous):null}},{key:"currentComponent",get:function(){return this.pageModule.current?this.components.get(this.pageModule.current):null}},{key:"before",value:(o=nT(a.a.mark((function t(){var e,n=this;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=qr.timeline(),this.pageModule.autoRemove=!1,t.abrupt("return",new Promise((function(t,r){n.pageModule.current?(e.addLabel("close",0),e.add((function(){return n.emit("close")}),">"),e.add(n.loaderModule.showInterLoader(),0),e.set(document.scrollingElement,{scrollTop:0}),n.currentComponent&&"function"==typeof n.currentComponent.detach&&e.add(n.currentComponent.detach(),"close"),n.currentComponent&&"function"==typeof n.currentComponent.close&&e.add(n.currentComponent.close(),"close"),Na.getAll().forEach((function(t){t.vars.type&&"permanent"==t.vars.type||t.kill()})),e.add(t)):(e.set(document.scrollingElement,{scrollTop:0},.1),e.add(t))})));case 3:case"end":return t.stop()}}),t,this)}))),function(){return o.apply(this,arguments)})},{key:"after",value:(i=nT(a.a.mark((function t(){var e=this;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this.timeline=qr.timeline(),this.pageModule.previous?(this.timeline.add((function(){e.pageModule.removeElement(e.pageModule.previous),e.components.clean()}),0),this.timeline.add((function(){e.loaderModule.hideInterLoader()})),this.timeline.addLabel("open","<"),this.timeline.add((function(){e.emit("open")}),"<"),this.currentComponent&&"function"==typeof this.currentComponent.open&&this.timeline.add(this.currentComponent.open(),"open")):this.currentComponent&&"function"==typeof this.currentComponent.open&&this.timeline.add(this.currentComponent.open(),0);case 2:case"end":return t.stop()}}),t,this)}))),function(){return i.apply(this,arguments)})},{key:"preventScroll",value:function(t){t.stopPropagation(),t.preventDefault()}}])&&rT(e.prototype,n),r&&rT(e,r),u}(Ns);function cT(t){return(cT="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function lT(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function hT(t,e){return(hT=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function fT(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=mT(t);if(e){var i=mT(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return dT(this,n)}}function dT(t,e){return!e||"object"!==cT(e)&&"function"!=typeof e?pT(t):e}function pT(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function mT(t){return(mT=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var gT=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&hT(t,e)}(o,t);var e,n,r,i=fT(o);function o(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o),(e=i.call(this,t)).dependencies.add(Hs),e.dependencies.add($s),e.selector='a:not(.no-history):not([target="_blank"])',e.linkClicked=e.linkClicked.bind(pT(e)),e.enabled=!0,e}return e=o,(n=[{key:"priority",get:function(){return 10}},{key:"enabled",get:function(){return this._enabled},set:function(t){var e=this;this._enabled!=t&&(this._enabled=t,t&&this.links&&this.links.forEach((function(t){return t.removeEventListener("click",e.linkClicked)})))}},{key:"linkClicked",value:function(t){var e=t.currentTarget.getAttribute("href").split("#")[0],n=e.split(":")[0];"tel"==n||"mailto"==n||null!=t.currentTarget.getAttribute("download")&&""!=t.currentTarget.getAttribute("download")||"noajax"==t.currentTarget.getAttribute("data-method")||new Js(e).external||(t.preventDefault(),this.bootstrap.get($s).set(e))}},{key:"after",value:function(){var t=this;this.links&&this.links.forEach((function(e){return e.removeEventListener("click",t.linkClicked)})),this._enabled&&(this.links=document.querySelectorAll(this.selector),this.links&&this.links.forEach((function(e){return e.addEventListener("click",t.linkClicked)})))}}])&&lT(e.prototype,n),r&&lT(e,r),o}(Ns);function vT(t){return(vT="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function yT(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function bT(t,e){return(bT=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function _T(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=wT(t);if(e){var i=wT(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return xT(this,n)}}function xT(t,e){return!e||"object"!==vT(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function wT(t){return(wT=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var ST=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&bT(t,e)}(o,t);var e,n,r,i=_T(o);function o(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o),i.call(this,ru,$s,du,wu,Du,Hs,ku,jE,uT,nw,KE,gT)}return e=o,(n=[{key:"components",get:function(){return this.get(Du).components}},{key:"viewport",get:function(){return this.get(ku).viewport}},{key:"router",get:function(){return this.get($s).router}},{key:"loader",get:function(){return this.get(KE)}}])&&yT(e.prototype,n),r&&yT(e,r),o}(zu);function ET(t,e,n,r,i,o,a){try{var s=t[o](a),u=s.value}catch(t){return void n(t)}s.done?e(u):Promise.resolve(u).then(r,i)}function TT(t){return function(){var e=this,n=arguments;return new Promise((function(r,i){var o=t.apply(e,n);function a(t){ET(o,r,i,a,s,"next",t)}function s(t){ET(o,r,i,a,s,"throw",t)}a(void 0)}))}}qr.registerPlugin(Na),qr.registerPlugin(fs),qr.registerPlugin(Fs),qr.config({force3D:!0}),qr.defaults({ease:"none",duration:.5});var MT=new ST;MT.components.register(i),MT.get(jE).register(r),MT.viewport.add({addClass:!1,name:"mobile"}),MT.viewport.add({name:"medium",minWidth:769}),MT.viewport.add({name:"desktop",minWidth:960}),MT.viewport.add({name:"large",minWidth:1280});var AT=MT.get(du);MT.imageLoader;AT.loader.callback=function(){var t=TT(a.a.mark((function t(e){var n,r;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:try{(n=decodeURI(e.headers.get("X-Meta-Title")))&&(r=document.querySelector("title"))&&(r.innerHTML=n)}catch(t){console.error(t)}case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),TT(a.a.mark((function t(){return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,MT.run();case 2:document.body.style.opacity=1;case 3:case"end":return t.stop()}}),t)})))();e.default=MT},function(t,e){}]);